(function(){var e=this;(function(){(function(){this.Rails={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:{selector:"button[data-remote]:not([form]), button[data-confirm]:not([form])",exclude:"form button"},inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",formDisableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",formEnableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]"}}).call(this)}).call(e);var v=e.Rails;(function(){(function(){v.cspNonce=function(){var e;return(e=document.querySelector("meta[name=csp-nonce]"))&&e.content}}).call(this),function(){var r,n;n=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector,v.matches=function(e,t){return null!=t.exclude?n.call(e,t.selector)&&!n.call(e,t.exclude):n.call(e,t)},r="_ujsData",v.getData=function(e,t){var n;return null!=(n=e[r])?n[t]:void 0},v.setData=function(e,t,n){return null==e[r]&&(e[r]={}),e[r][t]=n},v.$=function(e){return Array.prototype.slice.call(document.querySelectorAll(e))}}.call(this),function(){var n,r,i;n=v.$,i=v.csrfToken=function(){var e;return(e=document.querySelector("meta[name=csrf-token]"))&&e.content},r=v.csrfParam=function(){var e;return(e=document.querySelector("meta[name=csrf-param]"))&&e.content},v.CSRFProtection=function(e){var t;if(null!=(t=i()))return e.setRequestHeader("X-CSRF-Token",t)},v.refreshCSRFTokens=function(){var e,t;if(t=i(),e=r(),null!=t&&null!=e)return n('form input[name="'+e+'"]').forEach(function(e){return e.value=t})}}.call(this),function(){var i,t,o,n;o=v.matches,"function"!=typeof(i=window.CustomEvent)&&((i=function(e,t){var n;return(n=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}).prototype=window.Event.prototype,n=i.prototype.preventDefault,i.prototype.preventDefault=function(){var e;return e=n.call(this),this.cancelable&&!this.defaultPrevented&&Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}}),e}),t=v.fire=function(e,t,n){var r;return r=new i(t,{bubbles:!0,cancelable:!0,detail:n}),e.dispatchEvent(r),!r.defaultPrevented},v.stopEverything=function(e){return t(e.target,"ujs:everythingStopped"),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},v.delegate=function(e,n,t,r){return e.addEventListener(t,function(e){var t;for(t=e.target;t instanceof Element&&!o(t,n);)t=t.parentNode;if(t instanceof Element&&!1===r.call(t,e))return e.preventDefault(),e.stopPropagation()})}}.call(this),function(){var t,r,e,o,i,a;o=v.cspNonce,r=v.CSRFProtection,v.fire,t={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript",script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},v.ajax=function(n){var r;return n=i(n),r=e(n,function(){var e,t;return t=a(null!=(e=r.response)?e:r.responseText,r.getResponseHeader("Content-Type")),2===Math.floor(r.status/100)?"function"==typeof n.success&&n.success(t,r.statusText,r):"function"==typeof n.error&&n.error(t,r.statusText,r),"function"==typeof n.complete?n.complete(r,r.statusText):void 0}),!(null!=n.beforeSend&&!n.beforeSend(r,n))&&(r.readyState===XMLHttpRequest.OPENED?r.send(n.data):void 0)},i=function(e){return e.url=e.url||location.href,e.type=e.type.toUpperCase(),"GET"===e.type&&e.data&&(e.url.indexOf("?")<0?e.url+="?"+e.data:e.url+="&"+e.data),null==t[e.dataType]&&(e.dataType="*"),e.accept=t[e.dataType],"*"!==e.dataType&&(e.accept+=", */*; q=0.01"),e},e=function(e,t){var n;return(n=new XMLHttpRequest).open(e.type,e.url,!0),n.setRequestHeader("Accept",e.accept),"string"==typeof e.data&&n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.crossDomain||n.setRequestHeader("X-Requested-With","XMLHttpRequest"),r(n),n.withCredentials=!!e.withCredentials,n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE)return t(n)},n},a=function(e,t){var n,r;if("string"==typeof e&&"string"==typeof t)if(t.match(/\bjson\b/))try{e=JSON.parse(e)}catch(i){}else if(t.match(/\b(?:java|ecma)script\b/))(r=document.createElement("script")).setAttribute("nonce",o()),r.text=e,document.head.appendChild(r).parentNode.removeChild(r);else if(t.match(/\b(xml|html|svg)\b/)){n=new DOMParser,t=t.replace(/;.+/,"");try{e=n.parseFromString(e,t)}catch(i){}}return e},v.href=function(e){return e.href},v.isCrossDomain=function(e){var t,n;(t=document.createElement("a")).href=location.href,n=document.createElement("a");try{return n.href=e,!((!n.protocol||":"===n.protocol)&&!n.host||t.protocol+"//"+t.host==n.protocol+"//"+n.host)}catch(r){return r,!0}}}.call(this),function(){var i,o;i=v.matches,o=function(e){return Array.prototype.slice.call(e)},v.serializeElement=function(e,t){var n,r;return n=[e],i(e,"form")&&(n=o(e.elements)),r=[],n.forEach(function(t){if(t.name&&!t.disabled)return i(t,"select")?o(t.options).forEach(function(e){if(e.selected)return r.push({name:t.name,value:e.value})}):t.checked||-1===["radio","checkbox","submit"].indexOf(t.type)?r.push({name:t.name,value:t.value}):void 0}),t&&r.push(t),r.map(function(e){return null!=e.name?encodeURIComponent(e.name)+"="+encodeURIComponent(e.value):e}).join("&")},v.formElements=function(e,t){return i(e,"form")?o(e.elements).filter(function(e){return i(e,t)}):o(e.querySelectorAll(t))}}.call(this),function(){var t,o,n;o=v.fire,n=v.stopEverything,v.handleConfirm=function(e){if(!t(this))return n(e)},t=function(e){var t,n,r;if(!(r=e.getAttribute("data-confirm")))return!0;if(t=!1,o(e,"confirm")){try{t=confirm(r)}catch(i){}n=o(e,"confirm:complete",[t])}return t&&n}}.call(this),function(){var n,r,i,o,a,s,t,u,l,c,f;l=v.matches,u=v.getData,c=v.setData,f=v.stopEverything,t=v.formElements,v.handleDisabledElement=function(e){if(this.disabled)return f(e)},v.enableElement=function(e){var t;return t=e instanceof Event?e.target:e,l(t,v.linkDisableSelector)?s(t):l(t,v.buttonDisableSelector)||l(t,v.formEnableSelector)?o(t):l(t,v.formSubmitSelector)?a(t):void 0},v.disableElement=function(e){var t;return t=e instanceof Event?e.target:e,l(t,v.linkDisableSelector)?i(t):l(t,v.buttonDisableSelector)||l(t,v.formDisableSelector)?n(t):l(t,v.formSubmitSelector)?r(t):void 0},i=function(e){var t;return null!=(t=e.getAttribute("data-disable-with"))&&(c(e,"ujs:enable-with",e.innerHTML),e.innerHTML=t),e.addEventListener("click",f),c(e,"ujs:disabled",!0)},s=function(e){var t;return null!=(t=u(e,"ujs:enable-with"))&&(e.innerHTML=t,c(e,"ujs:enable-with",null)),e.removeEventListener("click",f),c(e,"ujs:disabled",null)},r=function(e){return t(e,v.formDisableSelector).forEach(n)},n=function(e){var t;return null!=(t=e.getAttribute("data-disable-with"))&&(l(e,"button")?(c(e,"ujs:enable-with",e.innerHTML),e.innerHTML=t):(c(e,"ujs:enable-with",e.value),e.value=t)),e.disabled=!0,c(e,"ujs:disabled",!0)},a=function(e){return t(e,v.formEnableSelector).forEach(o)},o=function(e){var t;return null!=(t=u(e,"ujs:enable-with"))&&(l(e,"button")?e.innerHTML=t:e.value=t,c(e,"ujs:enable-with",null)),e.disabled=!1,c(e,"ujs:disabled",null)}}.call(this),function(){var u;u=v.stopEverything,v.handleMethod=function(e){var t,n,r,i,o,a,s;if(s=(a=this).getAttribute("data-method"))return o=v.href(a),n=v.csrfToken(),t=v.csrfParam(),r=document.createElement("form"),i="<input name='_method' value='"+s+"' type='hidden' />",null==t||null==n||v.isCrossDomain(o)||(i+="<input name='"+t+"' value='"+n+"' type='hidden' />"),i+='<input type="submit" />',r.method="post",r.action=o,r.target=a.target,r.innerHTML=i,r.style.display="none",document.body.appendChild(r),r.querySelector('[type="submit"]').click(),u(e)}}.call(this),function(){var u,l,c,f,p,d,h,m,g,y=[].slice;d=v.matches,c=v.getData,m=v.setData,l=v.fire,g=v.stopEverything,u=v.ajax,f=v.isCrossDomain,h=v.serializeElement,p=function(e){var t;return null!=(t=e.getAttribute("data-remote"))&&"false"!==t},v.handleRemote=function(e){var t,n,r,i,o,a,s;return!p(i=this)||(l(i,"ajax:before")?(s=i.getAttribute("data-with-credentials"),r=i.getAttribute("data-type")||"script",d(i,v.formSubmitSelector)?(t=c(i,"ujs:submit-button"),o=c(i,"ujs:submit-button-formmethod")||i.method,a=c(i,"ujs:submit-button-formaction")||i.getAttribute("action")||location.href,"GET"===o.toUpperCase()&&(a=a.replace(/\?.*$/,"")),"multipart/form-data"===i.enctype?(n=new FormData(i),null!=t&&n.append(t.name,t.value)):n=h(i,t),m(i,"ujs:submit-button",null),m(i,"ujs:submit-button-formmethod",null),m(i,"ujs:submit-button-formaction",null)):d(i,v.buttonClickSelector)||d(i,v.inputChangeSelector)?(o=i.getAttribute("data-method"),a=i.getAttribute("data-url"),n=h(i,i.getAttribute("data-params"))):(o=i.getAttribute("data-method"),a=v.href(i),n=i.getAttribute("data-params")),u({type:o||"GET",url:a,data:n,dataType:r,beforeSend:function(e,t){return l(i,"ajax:beforeSend",[e,t])?l(i,"ajax:send",[e]):(l(i,"ajax:stopped"),!1)},success:function(){var e;return e=1<=arguments.length?y.call(arguments,0):[],l(i,"ajax:success",e)},error:function(){var e;return e=1<=arguments.length?y.call(arguments,0):[],l(i,"ajax:error",e)},complete:function(){var e;return e=1<=arguments.length?y.call(arguments,0):[],l(i,"ajax:complete",e)},crossDomain:f(a),withCredentials:null!=s&&"false"!==s}),g(e)):(l(i,"ajax:stopped"),!1))},v.formSubmitButtonClick=function(){var e,t;if(t=(e=this).form)return e.name&&m(t,"ujs:submit-button",{name:e.name,value:e.value}),m(t,"ujs:formnovalidate-button",e.formNoValidate),m(t,"ujs:submit-button-formaction",e.getAttribute("formaction")),m(t,"ujs:submit-button-formmethod",e.getAttribute("formmethod"))},v.handleMetaClick=function(e){var t,n,r;if(r=((n=this).getAttribute("data-method")||"GET").toUpperCase(),t=n.getAttribute("data-params"),(e.metaKey||e.ctrlKey)&&"GET"===r&&!t)return e.stopImmediatePropagation()}}.call(this),function(){var e,r,t,n,i,o,a,s,u,l,c,f,p,d;o=v.fire,t=v.delegate,s=v.getData,e=v.$,d=v.refreshCSRFTokens,r=v.CSRFProtection,i=v.enableElement,n=v.disableElement,l=v.handleDisabledElement,u=v.handleConfirm,p=v.handleRemote,a=v.formSubmitButtonClick,c=v.handleMetaClick,f=v.handleMethod,"undefined"==typeof jQuery||null===jQuery||null==jQuery.ajax||jQuery.rails||(jQuery.rails=v,jQuery.ajaxPrefilter(function(e,t,n){if(!e.crossDomain)return r(n)})),v.start=function(){if(window._rails_loaded)throw new Error("rails-ujs has already been loaded!");return window.addEventListener("pageshow",function(){return e(v.formEnableSelector).forEach(function(e){if(s(e,"ujs:disabled"))return i(e)}),e(v.linkDisableSelector).forEach(function(e){if(s(e,"ujs:disabled"))return i(e)})}),t(document,v.linkDisableSelector,"ajax:complete",i),t(document,v.linkDisableSelector,"ajax:stopped",i),t(document,v.buttonDisableSelector,"ajax:complete",i),t(document,v.buttonDisableSelector,"ajax:stopped",i),t(document,v.linkClickSelector,"click",l),t(document,v.linkClickSelector,"click",u),t(document,v.linkClickSelector,"click",c),t(document,v.linkClickSelector,"click",n),t(document,v.linkClickSelector,"click",p),t(document,v.linkClickSelector,"click",f),t(document,v.buttonClickSelector,"click",l),t(document,v.buttonClickSelector,"click",u),t(document,v.buttonClickSelector,"click",n),t(document,v.buttonClickSelector,"click",p),t(document,v.inputChangeSelector,"change",l),t(document,v.inputChangeSelector,"change",u),t(document,v.inputChangeSelector,"change",p),t(document,v.formSubmitSelector,"submit",l),t(document,v.formSubmitSelector,"submit",u),t(document,v.formSubmitSelector,"submit",p),t(document,v.formSubmitSelector,"submit",function(e){return setTimeout(function(){return n(e)},13)}),t(document,v.formSubmitSelector,"ajax:send",n),t(document,v.formSubmitSelector,"ajax:complete",i),t(document,v.formInputClickSelector,"click",l),t(document,v.formInputClickSelector,"click",u),t(document,v.formInputClickSelector,"click",a),document.addEventListener("DOMContentLoaded",d),window._rails_loaded=!0},window.Rails===v&&o(document,"rails:attachBindings")&&v.start()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=v:"function"==typeof define&&define.amd&&define(v)}).call(this),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ActiveStorage=t():e.ActiveStorage=t()}(this,function(){return function(n){function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}var i={};return r.m=n,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t){"use strict";function n(e){var t=i(document.head,'meta[name="'+e+'"]');if(t)return t.getAttribute("content")}function r(e,t){return"string"==typeof e&&(t=e,e=document),a(e.querySelectorAll(t))}function i(e,t){return"string"==typeof e&&(t=e,e=document),e.querySelector(t)}function o(e,t,n){var r=2<arguments.length&&void 0!==n?arguments[2]:{},i=e.disabled,o=r.bubbles,a=r.cancelable,s=r.detail,u=document.createEvent("Event");u.initEvent(t,o||!0,a||!0),u.detail=s||{};try{e.disabled=!1,e.dispatchEvent(u)}finally{e.disabled=i}return u}function a(e){return Array.isArray(e)?e:Array.from?Array.from(e):[].slice.call(e)}t.d=n,t.c=r,t.b=i,t.a=o,t.e=a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(e&&"function"==typeof e[t]){for(var n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e[t].apply(e,r)}}n.d(t,"a",function(){return r});var a=n(6),s=n(8),u=n(9),l=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),c=0,r=function(){function r(e,t,n){i(this,r),this.id=++c,this.file=e,this.url=t,this.delegate=n}return l(r,[{key:"create",value:function(r){var i=this;a.a.create(this.file,function(e,t){if(e)r(e);else{var n=new s.a(i.file,t,i.url);o(i.delegate,"directUploadWillCreateBlobWithXHR",n.xhr),n.create(function(e){if(e)r(e);else{var t=new u.a(n);o(i.delegate,"directUploadWillStoreFileWithXHR",t.xhr),t.create(function(e){e?r(e):r(null,n.toJSON())})}})}})}}]),r}()},function(e,t,n){"use strict";function r(){window.ActiveStorage&&Object(i.a)()}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=n(1);n.d(t,"start",function(){return i.a}),n.d(t,"DirectUpload",function(){return o.a}),setTimeout(r,1)},function(e,t,n){"use strict";function r(){d||(d=!0,document.addEventListener("submit",i),document.addEventListener("ajax:before",o))}function i(e){a(e)}function o(e){"FORM"==e.target.tagName&&a(e)}function a(e){var t=e.target;if(t.hasAttribute(p))e.preventDefault();else{var n=new c.a(t),r=n.inputs;r.length&&(e.preventDefault(),t.setAttribute(p,""),r.forEach(u),n.start(function(e){t.removeAttribute(p),e?r.forEach(l):s(t)}))}}function s(e){var t=Object(f.b)(e,"input[type=submit]");if(t){var n=t.disabled;t.disabled=!1,t.focus(),t.click(),t.disabled=n}else(t=document.createElement("input")).type="submit",t.style.display="none",e.appendChild(t),t.click(),e.removeChild(t)}function u(e){e.disabled=!0}function l(e){e.disabled=!1}t.a=r;var c=n(4),f=n(0),p="data-direct-uploads-processing",d=!1},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return u});var i=n(5),o=n(0),a=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s="input[type=file][data-direct-upload-url]:not([disabled])",u=function(){function t(e){r(this,t),this.form=e,this.inputs=Object(o.c)(e,s).filter(function(e){return e.files.length})}return a(t,[{key:"start",value:function(t){var n=this,r=this.createDirectUploadControllers();this.dispatch("start"),function i(){var e=r.shift();e?e.start(function(e){e?(t(e),n.dispatch("end")):i()}):(t(),n.dispatch("end"))}()}},{key:"createDirectUploadControllers",value:function(){var r=[];return this.inputs.forEach(function(n){Object(o.e)(n.files).forEach(function(e){var t=new i.a(n,e);r.push(t)})}),r}},{key:"dispatch",value:function(e,t){var n=1<arguments.length&&void 0!==t?arguments[1]:{};return Object(o.a)(this.form,"direct-uploads:"+e,{detail:n})}}]),t}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return s});var i=n(1),o=n(0),a=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s=function(){function n(e,t){r(this,n),this.input=e,this.file=t,this.directUpload=new i.a(this.file,this.url,this),this.dispatch("initialize")}return a(n,[{key:"start",value:function(n){var r=this,i=document.createElement("input");i.type="hidden",i.name=this.input.name,this.input.insertAdjacentElement("beforebegin",i),this.dispatch("start"),this.directUpload.create(function(e,t){e?(i.parentNode.removeChild(i),r.dispatchError(e)):i.value=t.signed_id,r.dispatch("end"),n(e)})}},{key:"uploadRequestDidProgress",value:function(e){var t=e.loaded/e.total*100;t&&this.dispatch("progress",{progress:t})}},{key:"dispatch",value:function(e,t){var n=1<arguments.length&&void 0!==t?arguments[1]:{};return n.file=this.file,n.id=this.directUpload.id,Object(o.a)(this.input,"direct-upload:"+e,{detail:n})}},{key:"dispatchError",value:function(e){this.dispatch("error",{error:e}).defaultPrevented||alert(e)}},{key:"directUploadWillCreateBlobWithXHR",value:function(e){this.dispatch("before-blob-request",{xhr:e})}},{key:"directUploadWillStoreFileWithXHR",value:function(e){var t=this;this.dispatch("before-storage-request",{xhr:e}),e.upload.addEventListener("progress",function(e){return t.uploadRequestDidProgress(e)})}},{key:"url",get:function(){return this.input.getAttribute("data-direct-upload-url")}}]),n}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return u});var i=n(7),o=n.n(i),a=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,u=function(){function n(e){r(this,n),this.file=e,this.chunkSize=2097152,this.chunkCount=Math.ceil(this.file.size/this.chunkSize),this.chunkIndex=0}return a(n,null,[{key:"create",value:function(e,t){new n(e).create(t)}}]),a(n,[{key:"create",value:function(e){var t=this;this.callback=e,this.md5Buffer=new o.a.ArrayBuffer,this.fileReader=new FileReader,this.fileReader.addEventListener("load",function(e){return t.fileReaderDidLoad(e)}),this.fileReader.addEventListener("error",function(e){return t.fileReaderDidError(e)}),this.readNextChunk()}},{key:"fileReaderDidLoad",value:function(e){if(this.md5Buffer.append(e.target.result),!this.readNextChunk()){var t=this.md5Buffer.end(!0),n=btoa(t);this.callback(null,n)}}},{key:"fileReaderDidError",value:function(){this.callback("Error reading "+this.file.name)}},{key:"readNextChunk",value:function(){if(this.chunkIndex<this.chunkCount||0==this.chunkIndex&&0==this.chunkCount){var e=this.chunkIndex*this.chunkSize,t=Math.min(e+this.chunkSize,this.file.size),n=s.call(this.file,e,t);return this.fileReader.readAsArrayBuffer(n),this.chunkIndex++,!0}return!1}}]),n}()},function(e){var t;t=function(c){"use strict";function l(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&i)+t[1]-389564586|0)<<12|o>>>20)+n|0)&n|~o&r)+t[2]+606105819|0)<<17|i>>>15)+o|0)&o|~i&n)+t[3]-1044525330|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&i)+t[5]+1200080426|0)<<12|o>>>20)+n|0)&n|~o&r)+t[6]-1473231341|0)<<17|i>>>15)+o|0)&o|~i&n)+t[7]-45705983|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&i)+t[9]-1958414417|0)<<12|o>>>20)+n|0)&n|~o&r)+t[10]-42063|0)<<17|i>>>15)+o|0)&o|~i&n)+t[11]-1990404162|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&i)+t[13]-40341101|0)<<12|o>>>20)+n|0)&n|~o&r)+t[14]-1502002290|0)<<17|i>>>15)+o|0)&o|~i&n)+t[15]+1236535329|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[1]-165796510|0)<<5|n>>>27)+r|0)&i|r&~i)+t[6]-1069501632|0)<<9|o>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|i>>>18)+o|0)&n|o&~n)+t[0]-373897302|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[5]-701558691|0)<<5|n>>>27)+r|0)&i|r&~i)+t[10]+38016083|0)<<9|o>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|i>>>18)+o|0)&n|o&~n)+t[4]-405537848|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[9]+568446438|0)<<5|n>>>27)+r|0)&i|r&~i)+t[14]-1019803690|0)<<9|o>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|i>>>18)+o|0)&n|o&~n)+t[8]+1163531501|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&i|r&~i)+t[2]-51403784|0)<<9|o>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|i>>>18)+o|0)&n|o&~n)+t[12]-1926607734|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^i)+t[8]-2022574463|0)<<11|o>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|i>>>16)+o|0)^o^n)+t[14]-35309556|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^i)+t[4]+1272893353|0)<<11|o>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|i>>>16)+o|0)^o^n)+t[10]-1094730640|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^i)+t[0]-358537222|0)<<11|o>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|i>>>16)+o|0)^o^n)+t[6]+76029189|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^i)+t[12]-421815835|0)<<11|o>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|i>>>16)+o|0)^o^n)+t[2]-995338651|0)<<23|r>>>9)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~i))+t[7]+1126891415|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[14]-1416354905|0)<<15|i>>>17)+o|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~i))+t[3]-1894986606|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[10]-1051523|0)<<15|i>>>17)+o|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~i))+t[15]-30611744|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[6]-1560198380|0)<<15|i>>>17)+o|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~i))+t[11]-1120210379|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[2]+718787259|0)<<15|i>>>17)+o|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+i|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=i+e[2]|0,e[3]=o+e[3]|0}function f(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function p(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function r(e){var t,n,r,i,o,a,s=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s;t+=64)l(u,f(e.substring(t-64,t)));for(n=(e=e.substring(t-64)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),55<t)for(l(u,r),t=0;t<16;t+=1)r[t]=0;return i=(i=8*s).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(i[2],16),a=parseInt(i[1],16)||0,r[14]=o,r[15]=a,l(u,r),u}function i(e){var t,n,r,i,o,a,s=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s;t+=64)l(u,p(e.subarray(t-64,t)));for(n=(e=t-64<s?e.subarray(t-64):new Uint8Array(0)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=e[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),55<t)for(l(u,r),t=0;t<16;t+=1)r[t]=0;return i=(i=8*s).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(i[2],16),a=parseInt(i[1],16)||0,r[14]=o,r[15]=a,l(u,r),u}function n(e){var t,n="";for(t=0;t<4;t+=1)n+=m[e>>8*t+4&15]+m[e>>8*t&15];return n}function a(e){var t;for(t=0;t<e.length;t+=1)e[t]=n(e[t]);return e.join("")}function o(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function t(e,t){var n,r=e.length,i=new ArrayBuffer(r),o=new Uint8Array(i);for(n=0;n<r;n+=1)o[n]=e.charCodeAt(n);return t?o:i}function s(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function u(e,t,n){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e)),r.set(new Uint8Array(t),e.byteLength),n?r:r.buffer}function d(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function h(){this.reset()}var m=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return a(r("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function l(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(e,t){var n,r,i,o,a=this.byteLength,s=l(e,a),u=a;return t!==c&&(u=l(t,a)),u<s?new ArrayBuffer(0):(n=u-s,r=new ArrayBuffer(n),i=new Uint8Array(r),o=new Uint8Array(this,s,n),i.set(o),r)}}(),h.prototype.append=function(e){return this.appendBinary(o(e)),this},h.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,n=this._buff.length;for(t=64;t<=n;t+=64)l(this._hash,f(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},h.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(o,i),n=a(this._hash),e&&(n=d(n)),this.reset(),n},h.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},h.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},h.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},h.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},h.prototype._finish=function(e,t){var n,r,i,o=t;if(e[o>>2]|=128<<(o%4<<3),55<o)for(l(this._hash,e),o=0;o<16;o+=1)e[o]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(n[2],16),i=parseInt(n[1],16)||0,e[14]=r,e[15]=i,l(this._hash,e)},h.hash=function(e,t){return h.hashBinary(o(e),t)},h.hashBinary=function(e,t){var n=a(r(e));return t?d(n):n},h.ArrayBuffer=function(){this.reset()},h.ArrayBuffer.prototype.append=function(e){var t,n=u(this._buff.buffer,e,!0),r=n.length;for(this._length+=e.byteLength,t=64;t<=r;t+=64)l(this._hash,p(n.subarray(t-64,t)));return this._buff=t-64<r?new Uint8Array(n.buffer.slice(t-64)):new Uint8Array(0),this},h.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r[t]<<(t%4<<3);return this._finish(o,i),n=a(this._hash),e&&(n=d(n)),this.reset(),n},h.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},h.ArrayBuffer.prototype.getState=function(){var e=h.prototype.getState.call(this);return e.buff=s(e.buff),e},h.ArrayBuffer.prototype.setState=function(e){return e.buff=t(e.buff,!0),h.prototype.setState.call(this,e)},h.ArrayBuffer.prototype.destroy=h.prototype.destroy,h.ArrayBuffer.prototype._finish=h.prototype._finish,h.ArrayBuffer.hash=function(e,t){var n=a(i(new Uint8Array(e)));return t?d(n):n},h},e.exports=t()},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return i});var a=n(0),r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=function(){function i(e,t,n){var r=this;o(this,i),this.file=e,this.attributes={filename:e.name,content_type:e.type,byte_size:e.size,checksum:t},this.xhr=new XMLHttpRequest,this.xhr.open("POST",n,!0),this.xhr.responseType="json",this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("Accept","application/json"),this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.xhr.setRequestHeader("X-CSRF-Token",Object(a.d)("csrf-token")),this.xhr.addEventListener("load",function(e){return r.requestDidLoad(e)}),this.xhr.addEventListener("error",function(e){return r.requestDidError(e)})}return r(i,[{key:"create",value:function(e){this.callback=e,this.xhr.send(JSON.stringify({blob:this.attributes}))}},{key:"requestDidLoad",value:function(e){if(200<=this.status&&this.status<300){var t=this.response,n=t.direct_upload;delete t.direct_upload,this.attributes=t,this.directUploadData=n,this.callback(null,this.toJSON())}else this.requestDidError(e)}},{key:"requestDidError",value:function(){this.callback('Error creating Blob for "'+this.file.name+'". Status: '+this.status)}},{key:"toJSON",value:function(){var e={};for(var t in this.attributes)e[t]=this.attributes[t];return e}},{key:"status",get:function(){return this.xhr.status}},{key:"response",get:function(){var e=this.xhr,t=e.responseType,n=e.response;return"json"==t?n:JSON.parse(n)}}]),i}()},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return i});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=function(){function a(e){var t=this;s(this,a),this.blob=e,this.file=e.file;var n=e.directUploadData,r=n.url,i=n.headers;for(var o in this.xhr=new XMLHttpRequest,this.xhr.open("PUT",r,!0),this.xhr.responseType="text",i)this.xhr.setRequestHeader(o,i[o]);this.xhr.addEventListener("load",function(e){return t.requestDidLoad(e)}),this.xhr.addEventListener("error",function(e){return t.requestDidError(e)})}return r(a,[{key:"create",value:function(e){this.callback=e,this.xhr.send(this.file.slice())}},{key:"requestDidLoad",value:function(e){var t=this.xhr,n=t.status,r=t.response;200<=n&&n<300?this.callback(null,r):this.requestDidError(e)}},{key:"requestDidError",value:function(){this.callback('Error storing "'+this.file.name+'". Status: '+this.xhr.status)}}]),a}()}])}),function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";function m(e,t,n){var r,i=(t=t||ae).createElement("script");if(i.text=e,n)for(r in be)n[r]&&(i[r]=n[r]);t.head.appendChild(i).parentNode.removeChild(i)}function g(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?pe[de.call(e)]||"object":typeof e}function s(e){var t=!!e&&"length"in e&&e.length,n=g(e);return!ve(e)&&!_e(e)&&(
"array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}function l(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function t(e,n,r){return ve(n)?we.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?we.grep(e,function(e){return e===n!==r}):"string"!=typeof n?we.grep(e,function(e){return-1<fe.call(n,e)!==r}):we.filter(n,e,r)}function n(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function c(e){var n={};return we.each(e.match(Re)||[],function(e,t){n[t]=!0}),n}function f(e){return e}function p(e){throw e}function u(e,t,n,r){var i;try{e&&ve(i=e.promise)?i.call(e).done(t).fail(n):e&&ve(i=e.then)?i.call(e,t,n):t.apply(undefined,[e].slice(r))}catch(e){n.apply(undefined,[e])}}function r(){ae.removeEventListener("DOMContentLoaded",r),C.removeEventListener("load",r),we.ready()}function i(e,t){return t.toUpperCase()}function d(e){return e.replace(Be,"ms-").replace(ze,i)}function o(){this.expando=we.expando+o.uid++}function a(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Ve.test(e)?JSON.parse(e):e)}function h(e,t,n){var r;if(n===undefined&&1===e.nodeType)if(r="data-"+t.replace(qe,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=a(n)}catch(i){}Ue.set(e,t,n)}else n=undefined;return n}function y(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return we.css(e,t,"")},u=s(),l=n&&n[3]||(we.cssNumber[t]?"":"px"),c=(we.cssNumber[t]||"px"!==l&&+u)&&We.exec(we.css(e,t));if(c&&c[3]!==l){for(u/=2,l=l||c[3],c=+u||1;a--;)we.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,we.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}function v(e){var t,n=e.ownerDocument,r=e.nodeName,i=Ke[r];return i||(t=n.body.appendChild(n.createElement(r)),i=we.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),Ke[r]=i)}function _(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=je.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&Ze(r)&&(i[o]=v(r))):"none"!==n&&(i[o]="none",je.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}function b(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],t===undefined||t&&l(e,t)?we.merge([e],n):n}function x(e,t){for(var n=0,r=e.length;n<r;n++)je.set(e[n],"globalEval",!t||je.get(t[n],"globalEval"))}function w(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===g(o))we.merge(p,o.nodeType?[o]:o);else if(nt.test(o)){for(a=a||f.appendChild(t.createElement("div")),s=(Ye.exec(o)||["",""])[1].toLowerCase(),u=Qe[s]||Qe._default,a.innerHTML=u[1]+we.htmlPrefilter(o)+u[2],c=u[0];c--;)a=a.lastChild;we.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));for(f.textContent="",d=0;o=p[d++];)if(r&&-1<we.inArray(o,r))i&&i.push(o);else if(l=we.contains(o.ownerDocument,o),a=b(f.appendChild(o),"script"),l&&x(a),n)for(c=0;o=a[c++];)Je.test(o.type||"")&&n.push(o);return f}function E(){return!0}function S(){return!1}function T(){try{return ae.activeElement}catch(e){}}function A(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=undefined),t)A(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=undefined):null==i&&("string"==typeof n?(i=r,r=undefined):(i=r,r=n,n=undefined)),!1===i)i=S;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return we().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=we.guid++)),e.each(function(){we.event.add(this,t,i,r,n)})}function k(e,t){return l(e,"table")&&l(11!==t.nodeType?t:t.firstChild,"tr")&&we(e).children("tbody")[0]||e}function I(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function D(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function P(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(je.hasData(e)&&(o=je.access(e),a=je.set(t,o),l=o.events))for(i in delete a.handle,a.events={},l)for(n=0,r=l[i].length;n<r;n++)we.event.add(t,i,l[i][n]);Ue.hasData(e)&&(s=Ue.access(e),u=we.extend({},s),Ue.set(t,u))}}function O(e,t){var n=t.nodeName.toLowerCase();"input"===n&&$e.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function R(n,r,i,o){r=le.apply([],r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=ve(d);if(h||1<f&&"string"==typeof d&&!ye.checkClone&&lt.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),R(t,r,i,o)});if(f&&(t=(e=w(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=we.map(b(e,"script"),I)).length;c<f;c++)u=e,c!==p&&(u=we.clone(u,!0,!0),s&&we.merge(a,b(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,we.map(a,D),c=0;c<s;c++)u=a[c],Je.test(u.type||"")&&!je.access(u,"globalEval")&&we.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?we._evalUrl&&we._evalUrl(u.src):m(u.textContent.replace(ct,""),l,u))}return n}function N(e,t,n){for(var r,i=t?we.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||we.cleanData(b(r)),r.parentNode&&(n&&we.contains(r.ownerDocument,r)&&x(b(r,"script")),r.parentNode.removeChild(r));return e}function L(e,t,n){var r,i,o,a,s=e.style;return(n=n||pt(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||we.contains(e.ownerDocument,e)||(a=we.style(e,t)),!ye.pixelBoxStyles()&&ft.test(a)&&dt.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),a!==undefined?a+"":a}function M(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}function B(e){if(e in _t)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=vt.length;n--;)if((e=vt[n]+t)in _t)return e}function z(e){var t=we.cssProps[e];return t||(t=we.cssProps[e]=B(e)||e),t}function F(e,t,n){var r=We.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function j(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=we.css(e,n+Ge[a],!0,i)),r?("content"===n&&(u-=we.css(e,"padding"+Ge[a],!0,i)),"margin"!==n&&(u-=we.css(e,"border"+Ge[a]+"Width",!0,i))):(u+=we.css(e,"padding"+Ge[a],!0,i),"padding"!==n?u+=we.css(e,"border"+Ge[a]+"Width",!0,i):s+=we.css(e,"border"+Ge[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))),u}function U(e,t,n){var r=pt(e),i=L(e,t,r),o="border-box"===we.css(e,"boxSizing",!1,r),a=o;if(ft.test(i)){if(!n)return i;i="auto"}return a=a&&(ye.boxSizingReliable()||i===e.style[t]),("auto"===i||!parseFloat(i)&&"inline"===we.css(e,"display",!1,r))&&(i=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(i=parseFloat(i)||0)+j(e,t,n||(o?"border":"content"),a,r,i)+"px"}function V(e,t,n,r,i){return new V.prototype.init(e,t,n,r,i)}function q(){xt&&(!1===ae.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(q):C.setTimeout(q,we.fx.interval),we.fx.tick())}function H(){return C.setTimeout(function(){bt=undefined}),bt=Date.now()}function W(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=Ge[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function G(e,t,n){for(var r,i=(K.tweeners[t]||[]).concat(K.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function Z(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,m=e.nodeType&&Ze(e),g=je.get(e,"fxshow");for(r in n.queue||(null==(a=we._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,we.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],Ct.test(i)){if(delete t[r],o=o||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||g[r]===undefined)continue;m=!0}d[r]=g&&g[r]||we.style(e,r)}if((u=!we.isEmptyObject(t))||!we.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=g&&g.display)&&(l=je.get(e,"display")),"none"===(c=we.css(e,"display"))&&(l?c=l:(_([e],!0),l=e.style.display||l,c=we.css(e,"display"),_([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===we.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(g?"hidden"in g&&(m=g.hidden):g=je.access(e,"fxshow",{display:l}),o&&(g.hidden=!m),m&&_([e],!0),p.done(function(){for(r in m||_([e]),je.remove(e,"fxshow"),d)we.style(e,r,d[r])})),u=G(m?g[r]:0,r,p),r in g||(g[r]=u.start,m&&(u.end=u.start,u.start=0))}function X(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=d(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=we.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}function K(o,e,t){var n,a,r=0,i=K.prefilters.length,s=we.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=bt||H(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:we.extend({},e),opts:we.extend(!0,{specialEasing:{},easing:we.easing._default},t),originalProperties:e,originalOptions:t,startTime:bt||H(),duration:t.duration,tweens:[],createTween:function(e,t){var n=we.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(X(c,l.opts.specialEasing);r<i;r++)if(n=K.prefilters[r].call(l,o,c,l.opts))return ve(n.stop)&&(we._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return we.map(c,G,l),ve(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),we.fx.timer(we.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}function $(e){return(e.match(Re)||[]).join(" ")}function Y(e){return e.getAttribute&&e.getAttribute("class")||""}function J(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(Re)||[]}function Q(n,e,r,i){var t;if(Array.isArray(e))we.each(e,function(e,t){r||Mt.test(n)?i(n,t):Q(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==g(e))i(n,e);else for(t in e)Q(n+"["+t+"]",e[t],r,i)}function ee(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(Re)||[];if(ve(t))for(;n=i[r++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function te(t,i,o,a){function s(e){var r;return u[e]=!0,we.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||l||u[n]?l?!(r=n):void 0:(i.dataTypes.unshift(n),s(n),!1)}),r}var u={},l=t===Xt;return s(i.dataTypes[0])||!u["*"]&&s("*")}function ne(e,t){var n,r,i=we.ajaxSettings.flatOptions||{};for(n in t)t[n]!==undefined&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&we.extend(!0,e,r),e}function re(e,t,n){for(var r,i,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),r===undefined&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}function ie(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(f){return{state:"parsererror",error:a?f:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}var oe=[],ae=C.document,se=Object.getPrototypeOf,ue=oe.slice,le=oe.concat,ce=oe.push,fe=oe.indexOf,pe={},de=pe.toString,he=pe.hasOwnProperty,me=he.toString,ge=me.call(Object),ye={},ve=function ve(e){return"function"==typeof e&&"number"!=typeof e.nodeType},_e=function _e(e){return null!=e&&e===e.window},be={type:!0,src:!0,noModule:!0},xe="3.3.1",we=function(e,t){return new we.fn.init(e,t)},Ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;we.fn=we.prototype={jquery:xe,constructor:we,length:0,toArray:function(){return ue.call(this)},get:function(e){return null==e?ue.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=we.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return we.each(this,e)},map:function(n){return this.pushStack(we.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(ue.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:ce,sort:oe.sort,splice:oe.splice},we.extend=we.fn.extend=function(e){var t,n,r,i,o,a,s=e||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[u]||{},u++),"object"==typeof s||ve(s)||(s={}),u===l&&(s=this,u--);u<l;u++)if(null!=(t=arguments[u]))for(n in t)r=s[n],s!==(i=t[n])&&(c&&i&&(we.isPlainObject(i)||(o=Array.isArray(i)))?(o?(o=!1,a=r&&Array.isArray(r)?r:[]):a=r&&we.isPlainObject(r)?r:{},s[n]=we.extend(c,a,i)):i!==undefined&&(s[n]=i));return s},we.extend({expando:"jQuery"+(xe+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==de.call(e))&&(!(t=se(e))||"function"==typeof(n=he.call(t,"constructor")&&t.constructor)&&me.call(n)===ge)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){m(e)},each:function(e,t){var n,r=0;if(s(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(Ee,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(s(Object(e))?we.merge(n,"string"==typeof e?[e]:e):ce.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:fe.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(s(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return le.apply([],a)},guid:1,support:ye}),"function"==typeof Symbol&&(we.fn[Symbol.iterator]=oe[Symbol.iterator]),we.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){pe["[object "+t+"]"]=t.toLowerCase()});var Ce=function(n){function b(e,t,n,r){var i,o,a,s,u,l,c,f=t&&t.ownerDocument,p=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==p&&9!==p&&11!==p)return n;if(!r&&((t?t.ownerDocument||t:U)!==R&&O(t),t=t||R,L)){if(11!==p&&(u=ye.exec(e)))if(i=u[1]){if(9===p){if(!(a=t.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&F(t,a)&&a.id===i)return n.push(a),n}else{if(u[2])return J.apply(n,t.getElementsByTagName(e)),n;if((i=u[3])&&w.getElementsByClassName&&t.getElementsByClassName)return J.apply(n,t.getElementsByClassName(i)),n}if(w.qsa&&!G[e+" "]&&(!M||!M.test(e))){if(1!==p)f=t,c=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(xe,we):t.setAttribute("id",s=j),o=(l=T(e)).length;o--;)l[o]="#"+s+" "+m(l[o]);c=l.join(","),f=ve.test(e)&&h(t.parentNode)||t}if(c)try{return J.apply(n,f.querySelectorAll(c)),n}catch(d){}finally{s===j&&t.removeAttribute("id")}}}return k(e.replace(se,"$1"),t,n,r)}function e(){function n(e,t){return r.push(e+" ")>E.cacheLength&&delete n[r.shift()],n[e+" "]=t}var r=[];return n}function u(e){return e[j]=!0,e}function i(e){var t=R.createElement("fieldset");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function t(e,t){for(var n=e.split("|"),r=n.length;r--;)E.attrHandle[n[r]]=t}function l(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function r(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function o(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function a(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&Ce(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function s(a){return u(function(o){return o=+o,u(function(e,t){for(var n,r=a([],e.length,o),i=r.length;i--;)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function h(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function c(){}function m(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function f(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=q++;return e.first?function(e,t,n){for(;e=e[u];)if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[V,p];if(n){for(;e=e[u];)if((1===e.nodeType||f)&&s(e,t,n))return!0}else for(;e=e[u];)if(1===e.nodeType||f)if(i=(o=e[j]||(e[j]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===V&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function p(i){return 1<i.length?function(e,t,n){for(var r=i.length;r--;)if(!i[r](e,t,n))return!1;return!0}:i[0]}function v(e,t,n){for(var r=0,i=t.length;r<i;r++)b(e,t[r],n);return n}function x(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function _(d,h,m,g,y,e){return g&&!g[j]&&(g=_(g)),y&&!y[j]&&(y=_(y,e)),u(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||v(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:x(c,s,d,n,r),p=m?y||(e?d:l||g)?[]:t:f;if(m&&m(f,p,n,r),g)for(i=x(p,u),g(i,[],n,r),o=i.length;o--;)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a));if(e){if(y||d){if(y){for(i=[],o=p.length;o--;)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}for(o=p.length;o--;)(a=p[o])&&-1<(i=y?ee(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=x(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):J.apply(t,p)})}function d(e){for(var i,t,n,r=e.length,o=E.relative[e[0].type],a=o||E.relative[" "],s=o?1:0,u=f(function(e){return e===i},a,!0),l=f(function(e){return-1<ee(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==I)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=E.relative[e[s].type])c=[f(p(c),t)];else{if((t=E.filter[e[s].type].apply(null,e[s].matches))[j]){for(n=++s;n<r&&!E.relative[e[n].type];n++);return _(1<s&&p(c),1<s&&m(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(se,"$1"),t,s<n&&d(e.slice(s,n)),n<r&&d(e=e.slice(n)),n<r&&m(e))}c.push(t)}return p(c)}function g(g,y){var v=0<y.length,_=0<g.length,e=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=I,d=e||_&&E.find.TAG("*",i),h=V+=null==p?1:Math.random()||.1,m=d.length;for(i&&(I=t===R||t||i);l!==m&&null!=(o=d[l]);l++){if(_&&o){for(a=0,t||o.ownerDocument===R||(O(o),n=!L);s=g[a++];)if(s(o,t||R,n)){r.push(o);break}i&&(V=h)}v&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,v&&l!==u){for(a=0;s=y[a++];)s(c,f,t,n);if(e){if(0<u)for(;l--;)c[l]||f[l]||(f[l]=$.call(r));f=x(f)}J.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&b.uniqueSort(r)}return i&&(V=h,I=p),c};return v?u(e):e}var y,w,E,C,S,T,A,k,I,D,P,O,R,N,L,M,B,z,F,j="sizzle"+1*new Date,U=n.document,V=0,q=0,H=e(),W=e(),G=e(),Z=function(e,t){return e===t&&(P=!0),0},X={}.hasOwnProperty,K=[],$=K.pop,Y=K.push,J=K.push,Q=K.slice,ee=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ie="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ne+"*\\]",oe=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),se=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),le=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ce=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),fe=new RegExp(oe),pe=new RegExp("^"+re+"$"),de={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re+"|[*])"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},he=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,_e=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),be=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},xe=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,we=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},Ee=function(){O()},Ce=f(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{J.apply(K=Q.call(U.childNodes),U.childNodes),K[U.childNodes.length].nodeType}catch(Se){J={apply:K.length?function(e,t){Y.apply(e,Q.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}for(y in w=b.support={},S=b.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},O=b.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:U;return r!==R&&9===r.nodeType&&r.documentElement&&(N=(R=r).documentElement,L=!S(R),U!==R&&(n=R.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Ee,!1):n.attachEvent&&n.attachEvent("onunload",Ee)),w.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=i(function(e){return e.appendChild(R.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=ge.test(R.getElementsByClassName),w.getById=i(function(e){return N.appendChild(e).id=j,!R.getElementsByName||!R.getElementsByName(j).length}),w.getById?(E.filter.ID=function(e){var t=e.replace(_e,be);return function(e){return e.getAttribute("id")===t}},E.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&L){var n=t.getElementById(e);return n?[n]:[]}}):(E.filter.ID=function(e){var n=e.replace(_e,be);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},E.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&L){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),E.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},E.find.CLASS=w.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&L)return t.getElementsByClassName(e)},B=[],M=[],(w.qsa=ge.test(R.querySelectorAll))&&(i(function(e){N.appendChild(e).innerHTML="<a id='"+j+"'></a><select id='"+j+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&M.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||M.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+j+"-]").length||M.push("~="),e.querySelectorAll(":checked").length||M.push(":checked"),e.querySelectorAll("a#"+j+"+*").length||M.push(".#.+[+~]")}),i(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=R.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&M.push("name"+ne+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&M.push(":enabled",":disabled"),N.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(w.matchesSelector=ge.test(z=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&i(function(e){w.disconnectedMatch=z.call(e,"*"),z.call(e,"[s!='']:x"),B.push("!=",oe)}),M=M.length&&new RegExp(M.join("|")),B=B.length&&new RegExp(B.join("|")),t=ge.test(N.compareDocumentPosition),F=t||ge.test(N.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Z=t?function(e,t){if(e===t)return P=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===R||e.ownerDocument===U&&F(U,e)?-1:t===R||t.ownerDocument===U&&F(U,t)?1:D?ee(D,e)-ee(D,t):0:4&n?-1:1)}:function(e,t){if(e===t)return P=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===R?-1:t===R?1:i?-1:o?1:D?ee(D,e)-ee(D,t):0;if(i===o)return l(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?l(a[r],s[r]):a[r]===U?-1:s[r]===U?1:0}),R},b.matches=function(e,t){return b(e,null,null,t)},b.matchesSelector=function(e,t){if((e.ownerDocument||e)!==R&&O(e),t=t.replace(ce,"='$1']"),w.matchesSelector&&L&&!G[t+" "]&&(!B||!B.test(t))&&(!M||!M.test(t)))try{var n=z.call(e,t);if(n||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(Se){}return 0<b(t,R,null,[e]).length},b.contains=function(e,t){return(e.ownerDocument||e)!==R&&O(e),F(e,t)},b.attr=function(e,t){(e.ownerDocument||e)!==R&&O(e);var n=E.attrHandle[t.toLowerCase()],r=n&&X.call(E.attrHandle,t.toLowerCase())?n(e,t,!L):undefined;return r!==undefined?r:w.attributes||!L?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},b.escape=function(e){return(e+"").replace(xe,we)},b.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},b.uniqueSort=function(e){var t,n=[],r=0,i=0;if(P=!w.detectDuplicates,D=!w.sortStable&&e.slice(0),e.sort(Z),P){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return D=null,e},C=b.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=C(t);return n},(E=b.selectors={cacheLength:50,createPseudo:u,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(_e,be),e[3]=(e[3]||e[4]||e[5]||"").replace(_e,be),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||b.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&b.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return de.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&fe.test(n)&&(t=T(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(_e,be).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=H[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&H(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=b.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(ae," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,m,g){var y="nth"!==h.slice(0,3),v="last"!==h.slice(-4),_="of-type"===e;return 1===m&&0===g?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==v?"nextSibling":"previousSibling",c=e.parentNode,f=_&&e.nodeName.toLowerCase(),p=!n&&!_,d=!1;if(c){if(y){for(;l;){for(a=e;a=a[l];)if(_?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[v?c.firstChild:c.lastChild],v&&p){for(d=(s=(r=(i=(o=(a=c)[j]||(a[j]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===V&&r[1])&&r[2],a=s&&c.childNodes[s];a=++s&&a&&a[l]||(d=s=0)||u.pop();)if(1===a.nodeType&&++d&&a===e){i[h]=[V,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[j]||(a[j]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===V&&r[1]),!1===d)for(;(a=++s&&a&&a[l]||(d=s=0)||u.pop())&&((_?a.nodeName.toLowerCase()!==f:1!==a.nodeType)||!++d||(p&&((i=(o=a[j]||(a[j]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[V,d]),a!==e)););return(d-=g)===m||d%m==0&&0<=d/m}}},PSEUDO:function(e,o){var t,a=E.pseudos[e]||E.setFilters[e.toLowerCase()]||b.error("unsupported pseudo: "+e);return a[j]?a(o):1<a.length?(t=[e,e,"",o],E.setFilters.hasOwnProperty(e.toLowerCase())?u(function(e,t){for(var n,r=a(e,o),i=r.length;i--;)e[n=ee(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:u(function(e){var r=[],i=[],s=A(e.replace(se,"$1"));return s[j]?u(function(e,t,n,r){for(var i,o=s(e,null,r,[]),a=e.length;a--;)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:u(function(t){return function(e){return 0<b(t,e).length}}),contains:u(function(t){return t=t.replace(_e,be),function(e){return-1<(e.textContent||e.innerText||C(e)).indexOf(t)}}),lang:u(function(n){return pe.test(n||"")||b.error("unsupported lang: "+n),n=n.replace(_e,be).toLowerCase(),function(e){var t;do{if(t=L?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===N},focus:function(e){return e===R.activeElement&&(!R.hasFocus||R.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:a(!1),disabled:a(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!E.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return he.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:s(function(){return[0]}),last:s(function(e,t){return[t-1]}),eq:s(function(e,t,n){return[n<0?n+t:n]}),even:s(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:s(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:s(function(e,t,n){for(var r=n<0?n+t:n;0<=--r;)e.push(r);return e}),gt:s(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=E.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})E.pseudos[y]=r(y);for(y in{submit:!0,reset:!0})E.pseudos[y]=o(y);return c.prototype=E.filters=E.pseudos,E.setFilters=new c,
T=b.tokenize=function(e,t){var n,r,i,o,a,s,u,l=W[e+" "];if(l)return t?0:l.slice(0);for(a=e,s=[],u=E.preFilter;a;){for(o in n&&!(r=ue.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=le.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(se," ")}),a=a.slice(n.length)),E.filter)!(r=de[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?b.error(e):W(e,s).slice(0)},A=b.compile=function(e,t){var n,r=[],i=[],o=G[e+" "];if(!o){for(t||(t=T(e)),n=t.length;n--;)(o=d(t[n]))[j]?r.push(o):i.push(o);(o=G(e,g(i,r))).selector=e}return o},k=b.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&T(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&L&&E.relative[o[1].type]){if(!(t=(E.find.ID(a.matches[0].replace(_e,be),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=de.needsContext.test(e)?0:o.length;i--&&(a=o[i],!E.relative[s=a.type]);)if((u=E.find[s])&&(r=u(a.matches[0].replace(_e,be),ve.test(o[0].type)&&h(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&m(o)))return J.apply(n,r),n;break}}return(l||A(e,c))(r,t,!L,n,!t||ve.test(e)&&h(t.parentNode)||t),n},w.sortStable=j.split("").sort(Z).join("")===j,w.detectDuplicates=!!P,O(),w.sortDetached=i(function(e){return 1&e.compareDocumentPosition(R.createElement("fieldset"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||t("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||t("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||t(te,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),b}(C);we.find=Ce,we.expr=Ce.selectors,we.expr[":"]=we.expr.pseudos,we.uniqueSort=we.unique=Ce.uniqueSort,we.text=Ce.getText,we.isXMLDoc=Ce.isXML,we.contains=Ce.contains,we.escapeSelector=Ce.escape;var Se=function(e,t,n){for(var r=[],i=n!==undefined;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&we(e).is(n))break;r.push(e)}return r},Te=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},Ae=we.expr.match.needsContext,ke=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;we.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?we.find.matchesSelector(r,e)?[r]:[]:we.find.matches(e,we.grep(t,function(e){return 1===e.nodeType}))},we.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(we(e).filter(function(){for(t=0;t<r;t++)if(we.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)we.find(e,i[t],n);return 1<r?we.uniqueSort(n):n},filter:function(e){return this.pushStack(t(this,e||[],!1))},not:function(e){return this.pushStack(t(this,e||[],!0))},is:function(e){return!!t(this,"string"==typeof e&&Ae.test(e)?we(e):e||[],!1).length}});var Ie,De=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(we.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||Ie,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:De.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof we?t[0]:t,we.merge(this,we.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:ae,!0)),ke.test(r[1])&&we.isPlainObject(t))for(r in t)ve(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=ae.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):ve(e)?n.ready!==undefined?n.ready(e):e(we):we.makeArray(e,this)}).prototype=we.fn,Ie=we(ae);var Pe=/^(?:parents|prev(?:Until|All))/,Oe={children:!0,contents:!0,next:!0,prev:!0};we.fn.extend({has:function(e){var t=we(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(we.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&we(e);if(!Ae.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&we.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?we.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?fe.call(we(e),this[0]):fe.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(we.uniqueSort(we.merge(this.get(),we(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),we.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Se(e,"parentNode")},parentsUntil:function(e,t,n){return Se(e,"parentNode",n)},next:function(e){return n(e,"nextSibling")},prev:function(e){return n(e,"previousSibling")},nextAll:function(e){return Se(e,"nextSibling")},prevAll:function(e){return Se(e,"previousSibling")},nextUntil:function(e,t,n){return Se(e,"nextSibling",n)},prevUntil:function(e,t,n){return Se(e,"previousSibling",n)},siblings:function(e){return Te((e.parentNode||{}).firstChild,e)},children:function(e){return Te(e.firstChild)},contents:function(e){return l(e,"iframe")?e.contentDocument:(l(e,"template")&&(e=e.content||e),we.merge([],e.childNodes))}},function(r,i){we.fn[r]=function(e,t){var n=we.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=we.filter(t,n)),1<this.length&&(Oe[r]||we.uniqueSort(n),Pe.test(r)&&n.reverse()),this.pushStack(n)}});var Re=/[^\x20\t\r\n\f]+/g;we.Callbacks=function(r){r="string"==typeof r?c(r):we.extend({},r);var i,e,t,n,o=[],a=[],s=-1,u=function(){for(n=n||r.once,t=i=!0;a.length;s=-1)for(e=a.shift();++s<o.length;)!1===o[s].apply(e[0],e[1])&&r.stopOnFalse&&(s=o.length,e=!1);r.memory||(e=!1),i=!1,n&&(o=e?[]:"")},l={add:function(){return o&&(e&&!i&&(s=o.length-1,a.push(e)),function n(e){we.each(e,function(e,t){ve(t)?r.unique&&l.has(t)||o.push(t):t&&t.length&&"string"!==g(t)&&n(t)})}(arguments),e&&!i&&u()),this},remove:function(){return we.each(arguments,function(e,t){for(var n;-1<(n=we.inArray(t,o,n));)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?-1<we.inArray(e,o):0<o.length},empty:function(){return o&&(o=[]),this},disable:function(){return n=a=[],o=e="",this},disabled:function(){return!o},lock:function(){return n=a=[],e||i||(o=e=""),this},locked:function(){return!!n},fireWith:function(e,t){return n||(t=[e,(t=t||[]).slice?t.slice():t],a.push(t),i||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!t}};return l},we.extend({Deferred:function(e){var o=[["notify","progress",we.Callbacks("memory"),we.Callbacks("memory"),2],["resolve","done",we.Callbacks("once memory"),we.Callbacks("once memory"),0,"resolved"],["reject","fail",we.Callbacks("once memory"),we.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return we.Deferred(function(r){we.each(o,function(e,t){var n=ve(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&ve(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){function l(o,a,s,u){return function(){var n=this,r=arguments,t=function(){var e,t;if(!(o<c)){if((e=s.apply(n,r))===a.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,ve(t)?u?t.call(e,l(c,a,f,u),l(c,a,p,u)):(c++,t.call(e,l(c,a,f,u),l(c,a,p,u),l(c,a,f,a.notifyWith))):(s!==f&&(n=undefined,r=[e]),(u||a.resolveWith)(n,r))}},i=u?t:function(){try{t()}catch(e){we.Deferred.exceptionHook&&we.Deferred.exceptionHook(e,i.stackTrace),c<=o+1&&(s!==p&&(n=undefined,r=[e]),a.rejectWith(n,r))}};o?i():(we.Deferred.getStackHook&&(i.stackTrace=we.Deferred.getStackHook()),C.setTimeout(i))}}var c=0;return we.Deferred(function(e){o[0][3].add(l(0,e,ve(r)?r:f,e.notifyWith)),o[1][3].add(l(0,e,ve(t)?t:f)),o[2][3].add(l(0,e,ve(n)?n:p))}).promise()},promise:function(e){return null!=e?we.extend(e,a):a}},s={};return we.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?undefined:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=ue.call(arguments),o=we.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?ue.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(u(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||ve(i[t]&&i[t].then)))return o.then();for(;t--;)u(i[t],a(t),o.reject);return o.promise()}});var Ne=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;we.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&Ne.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},we.readyException=function(e){C.setTimeout(function(){throw e})};var Le=we.Deferred();we.fn.ready=function(e){return Le.then(e)["catch"](function(e){we.readyException(e)}),this},we.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--we.readyWait:we.isReady)||(we.isReady=!0)!==e&&0<--we.readyWait||Le.resolveWith(ae,[we])}}),we.ready.then=Le.then,"complete"===ae.readyState||"loading"!==ae.readyState&&!ae.documentElement.doScroll?C.setTimeout(we.ready):(ae.addEventListener("DOMContentLoaded",r),C.addEventListener("load",r));var Me=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===g(n))for(s in i=!0,n)Me(e,t,s,n[s],!0,o,a);else if(r!==undefined&&(i=!0,ve(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(we(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},Be=/^-ms-/,ze=/-([a-z])/g,Fe=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};o.uid=1,o.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Fe(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[d(t)]=n;else for(r in t)i[d(r)]=t[r];return i},get:function(e,t){return t===undefined?this.cache(e):e[this.expando]&&e[this.expando][d(t)]},access:function(e,t,n){return t===undefined||t&&"string"==typeof t&&n===undefined?this.get(e,t):(this.set(e,t,n),n!==undefined?n:t)},remove:function(e,t){var n,r=e[this.expando];if(r!==undefined){if(t!==undefined){n=(t=Array.isArray(t)?t.map(d):(t=d(t))in r?[t]:t.match(Re)||[]).length;for(;n--;)delete r[t[n]]}(t===undefined||we.isEmptyObject(r))&&(e.nodeType?e[this.expando]=undefined:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return t!==undefined&&!we.isEmptyObject(t)}};var je=new o,Ue=new o,Ve=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,qe=/[A-Z]/g;we.extend({hasData:function(e){return Ue.hasData(e)||je.hasData(e)},data:function(e,t,n){return Ue.access(e,t,n)},removeData:function(e,t){Ue.remove(e,t)},_data:function(e,t,n){return je.access(e,t,n)},_removeData:function(e,t){je.remove(e,t)}}),we.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(n===undefined){if(this.length&&(i=Ue.get(o),1===o.nodeType&&!je.get(o,"hasDataAttrs"))){for(t=a.length;t--;)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=d(r.slice(5)),h(o,r,i[r]));je.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){Ue.set(this,n)}):Me(this,function(e){var t;if(o&&e===undefined)return(t=Ue.get(o,n))!==undefined?t:(t=h(o,n))!==undefined?t:void 0;this.each(function(){Ue.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Ue.remove(this,e)})}}),we.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=je.get(e,t),n&&(!r||Array.isArray(n)?r=je.access(e,t,we.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=we.queue(e,t),r=n.length,i=n.shift(),o=we._queueHooks(e,t),a=function(){we.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return je.get(e,n)||je.access(e,n,{empty:we.Callbacks("once memory").add(function(){je.remove(e,[t+"queue",n])})})}}),we.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?we.queue(this[0],t):n===undefined?this:this.each(function(){var e=we.queue(this,t,n);we._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&we.dequeue(this,t)})},dequeue:function(e){return this.each(function(){we.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=we.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=undefined),e=e||"fx";a--;)(n=je.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var He=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,We=new RegExp("^(?:([+-])=|)("+He+")([a-z%]*)$","i"),Ge=["Top","Right","Bottom","Left"],Ze=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&we.contains(e.ownerDocument,e)&&"none"===we.css(e,"display")},Xe=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i},Ke={};we.fn.extend({show:function(){return _(this,!0)},hide:function(){return _(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ze(this)?we(this).show():we(this).hide()})}});var $e=/^(?:checkbox|radio)$/i,Ye=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Je=/^$|^module$|\/(?:java|ecma)script/i,Qe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Qe.optgroup=Qe.option,Qe.tbody=Qe.tfoot=Qe.colgroup=Qe.caption=Qe.thead,Qe.th=Qe.td;var et,tt,nt=/<|&#?\w+;/;et=ae.createDocumentFragment().appendChild(ae.createElement("div")),(tt=ae.createElement("input")).setAttribute("type","radio"),tt.setAttribute("checked","checked"),tt.setAttribute("name","t"),et.appendChild(tt),ye.checkClone=et.cloneNode(!0).cloneNode(!0).lastChild.checked,et.innerHTML="<textarea>x</textarea>",ye.noCloneChecked=!!et.cloneNode(!0).lastChild.defaultValue;var rt=ae.documentElement,it=/^key/,ot=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,at=/^([^.]*)(?:\.(.+)|)/;we.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,m,g=je.get(t);if(g)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&we.find.matchesSelector(rt,i),n.guid||(n.guid=we.guid++),(u=g.events)||(u=g.events={}),(a=g.handle)||(a=g.handle=function(e){return void 0!==we&&we.event.triggered!==e.type?we.event.dispatch.apply(t,arguments):undefined}),l=(e=(e||"").match(Re)||[""]).length;l--;)d=m=(s=at.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=we.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=we.event.special[d]||{},c=we.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&we.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),we.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,m,g=je.hasData(e)&&je.get(e);if(g&&(u=g.events)){for(l=(t=(t||"").match(Re)||[""]).length;l--;)if(d=m=(s=at.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){for(f=we.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)c=p[o],!i&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,g.handle)||we.removeEvent(e,d,g.handle),delete u[d])}else for(d in u)we.event.remove(e,d+t[l],n,r,!0);we.isEmptyObject(u)&&je.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=we.event.fix(e),u=new Array(arguments.length),l=(je.get(this,"events")||{})[s.type]||[],c=we.event.special[s.type]||{};for(u[0]=s,t=1;t<arguments.length;t++)u[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){for(a=we.event.handlers.call(this,s,l),t=0;(i=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,(r=((we.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u))!==undefined&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)a[i=(r=t[n]).selector+" "]===undefined&&(a[i]=r.needsContext?-1<we(i,this).index(l):we.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(we.Event.prototype,t,{enumerable:!0,configurable:!0,get:ve(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[we.expando]?e:new we.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==T()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===T()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&l(this,"input"))return this.click(),!1},_default:function(e){return l(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},we.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},we.Event=function(e,t){if(!(this instanceof we.Event))return new we.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&!1===e.returnValue?E:S,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&we.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[we.expando]=!0},we.Event.prototype={constructor:we.Event,isDefaultPrevented:S,isPropagationStopped:S,isImmediatePropagationStopped:S,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=E,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=E,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=E,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},we.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&it.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&t!==undefined&&ot.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},we.event.addProp),we.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,o){we.event.special[e]={delegateType:o,bindType:o,handle:function(e){var t,n=this,r=e.relatedTarget,i=e.handleObj;return r&&(r===n||we.contains(n,r))||(e.type=i.origType,t=i.handler.apply(this,arguments),e.type=o),t}}}),we.fn.extend({on:function(e,t,n,r){return A(this,e,t,n,r)},one:function(e,t,n,r){return A(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,we(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=undefined),!1===n&&(n=S),this.each(function(){we.event.remove(this,e,n,t)})}});var st=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ut=/<script|<style|<link/i,lt=/checked\s*(?:[^=]|=\s*.checked.)/i,ct=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;we.extend({htmlPrefilter:function(e){return e.replace(st,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),u=we.contains(e.ownerDocument,e);if(!(ye.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||we.isXMLDoc(e)))for(a=b(s),r=0,i=(o=b(e)).length;r<i;r++)O(o[r],a[r]);if(t)if(n)for(o=o||b(e),a=a||b(s),r=0,i=o.length;r<i;r++)P(o[r],a[r]);else P(e,s);return 0<(a=b(s,"script")).length&&x(a,!u&&b(e,"script")),s},cleanData:function(e){for(var t,n,r,i=we.event.special,o=0;(n=e[o])!==undefined;o++)if(Fe(n)){if(t=n[je.expando]){if(t.events)for(r in t.events)i[r]?we.event.remove(n,r):we.removeEvent(n,r,t.handle);n[je.expando]=undefined}n[Ue.expando]&&(n[Ue.expando]=undefined)}}}),we.fn.extend({detach:function(e){return N(this,e,!0)},remove:function(e){return N(this,e)},text:function(e){return Me(this,function(e){return e===undefined?we.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return R(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||k(this,e).appendChild(e)})},prepend:function(){return R(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=k(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return R(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return R(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(we.cleanData(b(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return we.clone(this,e,t)})},html:function(e){return Me(this,function(e){var t=this[0]||{},n=0,r=this.length;if(e===undefined&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ut.test(e)&&!Qe[(Ye.exec(e)||["",""])[1].toLowerCase()]){e=we.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(we.cleanData(b(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return R(this,arguments,function(e){var t=this.parentNode;we.inArray(this,n)<0&&(we.cleanData(b(this)),t&&t.replaceChild(e,this))},n)}}),we.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){we.fn[e]=function(e){for(var t,n=[],r=we(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),we(r[o])[a](t),ce.apply(n,t.get());return this.pushStack(n)}});var ft=new RegExp("^("+He+")(?!px)[a-z%]+$","i"),pt=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},dt=new RegExp(Ge.join("|"),"i");!function(){function e(){if(u){s.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",rt.appendChild(s).appendChild(u);var e=C.getComputedStyle(u);n="1%"!==e.top,a=12===t(e.marginLeft),u.style.right="60%",o=36===t(e.right),r=36===t(e.width),u.style.position="absolute",i=36===u.offsetWidth||"absolute",rt.removeChild(s),u=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s=ae.createElement("div"),u=ae.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",ye.clearCloneStyle="content-box"===u.style.backgroundClip,we.extend(ye,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),a},scrollboxSize:function(){return e(),i}}))}();var ht=/^(none|table(?!-c[ea]).+)/,mt=/^--/,gt={position:"absolute",visibility:"hidden",display:"block"},yt={letterSpacing:"0",fontWeight:"400"},vt=["Webkit","Moz","ms"],_t=ae.createElement("div").style;we.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=L(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=d(t),u=mt.test(t),l=e.style;if(u||(t=z(s)),a=we.cssHooks[t]||we.cssHooks[s],n===undefined)return a&&"get"in a&&(i=a.get(e,!1,r))!==undefined?i:l[t];"string"===(o=typeof n)&&(i=We.exec(n))&&i[1]&&(n=y(e,t,i),o="number"),null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(we.cssNumber[s]?"":"px")),ye.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&(n=a.set(e,n,r))===undefined||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=d(t);return mt.test(t)||(t=z(s)),(a=we.cssHooks[t]||we.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),i===undefined&&(i=L(e,t,r)),"normal"===i&&t in yt&&(i=yt[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),we.each(["height","width"],function(e,s){we.cssHooks[s]={get:function(e,t,n){if(t)return!ht.test(we.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?U(e,s,n):Xe(e,gt,function(){return U(e,s,n)})},set:function(e,t,n){var r,i=pt(e),o="border-box"===we.css(e,"boxSizing",!1,i),a=n&&j(e,s,n,o,i);return o&&ye.scrollboxSize()===i.position&&(a-=Math.ceil(e["offset"+s[0].toUpperCase()+s.slice(1)]-parseFloat(i[s])-j(e,s,"border",!1,i)-.5)),a&&(r=We.exec(t))&&"px"!==(r[3]||"px")&&(e.style[s]=t,t=we.css(e,s)),F(e,t,a)}}}),we.cssHooks.marginLeft=M(ye.reliableMarginLeft,function(e,t){if(t)return(parseFloat(L(e,"marginLeft"))||e.getBoundingClientRect().left-Xe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),we.each({margin:"",padding:"",border:"Width"},function(i,o){we.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+Ge[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(we.cssHooks[i+o].set=F)}),we.fn.extend({css:function(e,t){return Me(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=pt(e),i=t.length;a<i;a++)o[t[a]]=we.css(e,t[a],!1,r);return o}return n!==undefined?we.style(e,t,n):we.css(e,t)},e,t,1<arguments.length)}}),(we.Tween=V).prototype={constructor:V,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||we.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(we.cssNumber[n]?"":"px")},cur:function(){var e=V.propHooks[this.prop];return e&&e.get?e.get(this):V.propHooks._default.get(this)},run:function(e){var t,n=V.propHooks[this.prop];return this.options.duration?this.pos=t=we.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):V.propHooks._default.set(this),this}},V.prototype.init.prototype=V.prototype,V.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=we.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){we.fx.step[e.prop]?we.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[we.cssProps[e.prop]]&&!we.cssHooks[e.prop]?e.elem[e.prop]=e.now:we.style(e.elem,e.prop,e.now+e.unit)}}},V.propHooks.scrollTop=V.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},we.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},we.fx=V.prototype.init,we.fx.step={};var bt,xt,wt,Et,Ct=/^(?:toggle|show|hide)$/,St=/queueHooks$/;we.Animation=we.extend(K,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return y(n.elem,e,We.exec(t),n),n}]},tweener:function(e,t){ve(e)?(t=e,e=["*"]):e=e.match(Re);for(var n,r=0,i=e.length;r<i;r++)n=e[r],K.tweeners[n]=K.tweeners[n]||[],K.tweeners[n].unshift(t)},prefilters:[Z],prefilter:function(e,t){t?K.prefilters.unshift(e):K.prefilters.push(e)}}),we.speed=function(e,t,n){var r=e&&"object"==typeof e?we.extend({},e):{complete:n||!n&&t||ve(e)&&e,duration:e,easing:n&&t||t&&!ve(t)&&t};return we.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in we.fx.speeds?r.duration=we.fx.speeds[r.duration]:r.duration=we.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){ve(r.old)&&r.old.call(this),r.queue&&we.dequeue(this,r.queue)},r},we.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Ze).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=we.isEmptyObject(t),o=we.speed(e,n,r),a=function(){var e=K(this,we.extend({},t),o);(i||je.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=undefined),e&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=we.timers,r=je.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&St.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||we.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=je.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=we.timers,o=n?n.length:0;for(t.finish=!0,we.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),we.each(["toggle","show","hide"],function(e,r){var i=we.fn[r];we.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(W(r,!0),e,t,n)}}),we.each({slideDown:W("show"),slideUp:W("hide"),slideToggle:W("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){we.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),we.timers=[],we.fx.tick=function(){var e,t=0,n=we.timers;for(bt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||we.fx.stop(),bt=undefined},we.fx.timer=function(e){we.timers.push(e),we.fx.start()},we.fx.interval=13,we.fx.start=function(){xt||(xt=!0,q())},we.fx.stop=function(){xt=null},we.fx.speeds={slow:600,fast:200,_default:400},we.fn.delay=function(r,e){return r=we.fx&&we.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},wt=ae.createElement("input"),Et=ae.createElement("select").appendChild(ae.createElement("option")),wt.type="checkbox",ye.checkOn=""!==wt.value,ye.optSelected=Et.selected,(wt=ae.createElement("input")).value="t",wt.type="radio",ye.radioValue="t"===wt.value;var Tt,At=we.expr.attrHandle;we.fn.extend({attr:function(e,t){return Me(this,we.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){we.removeAttr(this,e)})}}),we.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?we.prop(e,t,n):(1===o&&we.isXMLDoc(e)||(i=we.attrHooks[t.toLowerCase()]||(we.expr.match.bool.test(t)?Tt:undefined)),
n!==undefined?null===n?void we.removeAttr(e,t):i&&"set"in i&&(r=i.set(e,n,t))!==undefined?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=we.find.attr(e,t))?undefined:r)},attrHooks:{type:{set:function(e,t){if(!ye.radioValue&&"radio"===t&&l(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(Re);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),Tt={set:function(e,t,n){return!1===t?we.removeAttr(e,n):e.setAttribute(n,n),n}},we.each(we.expr.match.bool.source.match(/\w+/g),function(e,t){var a=At[t]||we.find.attr;At[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=At[o],At[o]=r,r=null!=a(e,t,n)?o:null,At[o]=i),r}});var kt=/^(?:input|select|textarea|button)$/i,It=/^(?:a|area)$/i;we.fn.extend({prop:function(e,t){return Me(this,we.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[we.propFix[e]||e]})}}),we.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&we.isXMLDoc(e)||(t=we.propFix[t]||t,i=we.propHooks[t]),n!==undefined?i&&"set"in i&&(r=i.set(e,n,t))!==undefined?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=we.find.attr(e,"tabindex");return t?parseInt(t,10):kt.test(e.nodeName)||It.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ye.optSelected||(we.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),we.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){we.propFix[this.toLowerCase()]=this}),we.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(ve(t))return this.each(function(e){we(this).addClass(t.call(this,e,Y(this)))});if((e=J(t)).length)for(;n=this[u++];)if(i=Y(n),r=1===n.nodeType&&" "+$(i)+" "){for(a=0;o=e[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=$(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(ve(t))return this.each(function(e){we(this).removeClass(t.call(this,e,Y(this)))});if(!arguments.length)return this.attr("class","");if((e=J(t)).length)for(;n=this[u++];)if(i=Y(n),r=1===n.nodeType&&" "+$(i)+" "){for(a=0;o=e[a++];)for(;-1<r.indexOf(" "+o+" ");)r=r.replace(" "+o+" "," ");i!==(s=$(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):ve(i)?this.each(function(e){we(this).toggleClass(i.call(this,e,Y(this),t),t)}):this.each(function(){var e,t,n,r;if(a)for(t=0,n=we(this),r=J(i);e=r[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else i!==undefined&&"boolean"!==o||((e=Y(this))&&je.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":je.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&-1<(" "+$(Y(n))+" ").indexOf(t))return!0;return!1}});var Dt=/\r/g;we.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=ve(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,we(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=we.map(t,function(e){return null==e?"":e+""})),(r=we.valHooks[this.type]||we.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&r.set(this,t,"value")!==undefined||(this.value=t))})):t?(r=we.valHooks[t.type]||we.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&(e=r.get(t,"value"))!==undefined?e:"string"==typeof(e=t.value)?e.replace(Dt,""):null==e?"":e:void 0}}),we.extend({valHooks:{option:{get:function(e){var t=we.find.attr(e,"value");return null!=t?t:$(we.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!l(n.parentNode,"optgroup"))){if(t=we(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=we.makeArray(t),a=i.length;a--;)((r=i[a]).selected=-1<we.inArray(we.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),we.each(["radio","checkbox"],function(){we.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<we.inArray(we(e).val(),t)}},ye.checkOn||(we.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),ye.focusin="onfocusin"in C;var Pt=/^(?:focusinfocus|focusoutblur)$/,Ot=function(e){e.stopPropagation()};we.extend(we.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||ae],d=he.call(e,"type")?e.type:e,h=he.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||ae,3!==n.nodeType&&8!==n.nodeType&&!Pt.test(d+we.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[we.expando]?e:new we.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=undefined,e.target||(e.target=n),t=null==t?[e]:we.makeArray(t,[e]),c=we.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!_e(n)){for(s=c.delegateType||d,Pt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||ae)&&p.push(a.defaultView||a.parentWindow||C)}for(i=0;(o=p[i++])&&!e.isPropagationStopped();)f=o,e.type=1<i?s:c.bindType||d,(l=(je.get(o,"events")||{})[e.type]&&je.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&Fe(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!Fe(n)||u&&ve(n[d])&&!_e(n)&&((a=n[u])&&(n[u]=null),we.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,Ot),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,Ot),we.event.triggered=undefined,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=we.extend(new we.Event,n,{type:e,isSimulated:!0});we.event.trigger(r,null,t)}}),we.fn.extend({trigger:function(e,t){return this.each(function(){we.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return we.event.trigger(e,t,n,!0)}}),ye.focusin||we.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){we.event.simulate(r,e.target,we.event.fix(e))};we.event.special[r]={setup:function(){var e=this.ownerDocument||this,t=je.access(e,r);t||e.addEventListener(n,i,!0),je.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=je.access(e,r)-1;t?je.access(e,r,t):(e.removeEventListener(n,i,!0),je.remove(e,r))}}});var Rt=C.location,Nt=Date.now(),Lt=/\?/;we.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(n){t=undefined}return t&&!t.getElementsByTagName("parsererror").length||we.error("Invalid XML: "+e),t};var Mt=/\[\]$/,Bt=/\r?\n/g,zt=/^(?:submit|button|image|reset|file)$/i,Ft=/^(?:input|select|textarea|keygen)/i;we.param=function(e,t){var n,r=[],i=function(e,t){var n=ve(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!we.isPlainObject(e))we.each(e,function(){i(this.name,this.value)});else for(n in e)Q(n,e[n],t,i);return r.join("&")},we.fn.extend({serialize:function(){return we.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=we.prop(this,"elements");return e?we.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!we(this).is(":disabled")&&Ft.test(this.nodeName)&&!zt.test(e)&&(this.checked||!$e.test(e))}).map(function(e,t){var n=we(this).val();return null==n?null:Array.isArray(n)?we.map(n,function(e){return{name:t.name,value:e.replace(Bt,"\r\n")}}):{name:t.name,value:n.replace(Bt,"\r\n")}}).get()}});var jt=/%20/g,Ut=/#.*$/,Vt=/([?&])_=[^&]*/,qt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ht=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Wt=/^(?:GET|HEAD)$/,Gt=/^\/\//,Zt={},Xt={},Kt="*/".concat("*"),$t=ae.createElement("a");$t.href=Rt.href,we.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Rt.href,type:"GET",isLocal:Ht.test(Rt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Kt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":we.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ne(ne(e,we.ajaxSettings),t):ne(we.ajaxSettings,e)},ajaxPrefilter:ee(Zt),ajaxTransport:ee(Xt),ajax:function(e,t){function n(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=undefined,p=r||"",w.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=re(g,w,n)),s=ie(g,s,w,i),i?(g.ifModified&&((u=w.getResponseHeader("Last-Modified"))&&(we.lastModified[f]=u),(u=w.getResponseHeader("etag"))&&(we.etag[f]=u)),204===e||"HEAD"===g.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),w.status=e,w.statusText=(t||l)+"",i?_.resolveWith(y,[o,l,w]):_.rejectWith(y,[w,l,a]),w.statusCode(x),x=undefined,m&&v.trigger(i?"ajaxSuccess":"ajaxError",[w,g,i?o:a]),b.fireWith(y,[w,l]),m&&(v.trigger("ajaxComplete",[w,g]),--we.active||we.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=undefined),t=t||{};var c,f,p,r,d,i,h,m,o,a,g=we.ajaxSetup({},t),y=g.context||g,v=g.context&&(y.nodeType||y.jquery)?we(y):we.event,_=we.Deferred(),b=we.Callbacks("once memory"),x=g.statusCode||{},s={},u={},l="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(h){if(!r)for(r={};t=qt.exec(p);)r[t[1].toLowerCase()]=t[2];t=r[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=u[e.toLowerCase()]=u[e.toLowerCase()]||e,s[e]=t),this},overrideMimeType:function(e){return null==h&&(g.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)w.always(e[w.status]);else for(t in e)x[t]=[x[t],e[t]];return this},abort:function(e){var t=e||l;return c&&c.abort(t),n(0,t),this}};if(_.promise(w),g.url=((e||g.url||Rt.href)+"").replace(Gt,Rt.protocol+"//"),g.type=t.method||t.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match(Re)||[""],null==g.crossDomain){i=ae.createElement("a");try{i.href=g.url,i.href=i.href,g.crossDomain=$t.protocol+"//"+$t.host!=i.protocol+"//"+i.host}catch(E){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=we.param(g.data,g.traditional)),te(Zt,g,t,w),h)return w;for(o in(m=we.event&&g.global)&&0==we.active++&&we.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!Wt.test(g.type),f=g.url.replace(Ut,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=g.data.replace(jt,"+")):(a=g.url.slice(f.length),g.data&&(g.processData||"string"==typeof g.data)&&(f+=(Lt.test(f)?"&":"?")+g.data,delete g.data),!1===g.cache&&(f=f.replace(Vt,"$1"),a=(Lt.test(f)?"&":"?")+"_="+Nt+++a),g.url=f+a),g.ifModified&&(we.lastModified[f]&&w.setRequestHeader("If-Modified-Since",we.lastModified[f]),we.etag[f]&&w.setRequestHeader("If-None-Match",we.etag[f])),(g.data&&g.hasContent&&!1!==g.contentType||t.contentType)&&w.setRequestHeader("Content-Type",g.contentType),w.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Kt+"; q=0.01":""):g.accepts["*"]),g.headers)w.setRequestHeader(o,g.headers[o]);if(g.beforeSend&&(!1===g.beforeSend.call(y,w,g)||h))return w.abort();if(l="abort",b.add(g.complete),w.done(g.success),w.fail(g.error),c=te(Xt,g,t,w)){if(w.readyState=1,m&&v.trigger("ajaxSend",[w,g]),h)return w;g.async&&0<g.timeout&&(d=C.setTimeout(function(){w.abort("timeout")},g.timeout));try{h=!1,c.send(s,n)}catch(E){if(h)throw E;n(-1,E)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return we.get(e,t,n,"json")},getScript:function(e,t){return we.get(e,undefined,t,"script")}}),we.each(["get","post"],function(e,i){we[i]=function(e,t,n,r){return ve(t)&&(r=r||n,n=t,t=undefined),we.ajax(we.extend({url:e,type:i,dataType:r,data:t,success:n},we.isPlainObject(e)&&e))}}),we._evalUrl=function(e){return we.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},we.fn.extend({wrapAll:function(e){var t;return this[0]&&(ve(e)&&(e=e.call(this[0])),t=we(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return ve(n)?this.each(function(e){we(this).wrapInner(n.call(this,e))}):this.each(function(){var e=we(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=ve(t);return this.each(function(e){we(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){we(this).replaceWith(this.childNodes)}),this}}),we.expr.pseudos.hidden=function(e){return!we.expr.pseudos.visible(e)},we.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},we.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var Yt={0:200,1223:204},Jt=we.ajaxSettings.xhr();ye.cors=!!Jt&&"withCredentials"in Jt,ye.ajax=Jt=!!Jt,we.ajaxTransport(function(o){var a,s;if(ye.cors||Jt&&!o.crossDomain)return{send:function(e,t){var n,r=o.xhr();if(r.open(o.type,o.url,o.async,o.username,o.password),o.xhrFields)for(n in o.xhrFields)r[n]=o.xhrFields[n];for(n in o.mimeType&&r.overrideMimeType&&r.overrideMimeType(o.mimeType),o.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);a=function(e){return function(){a&&(a=s=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Yt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=a(),s=r.onerror=r.ontimeout=a("error"),r.onabort!==undefined?r.onabort=s:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){a&&s()})},a=a("abort");try{r.send(o.hasContent&&o.data||null)}catch(i){if(a)throw i}},abort:function(){a&&a()}}}),we.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),we.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return we.globalEval(e),e}}}),we.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),we.ajaxTransport("script",function(n){var r,i;if(n.crossDomain)return{send:function(e,t){r=we("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),ae.head.appendChild(r[0])},abort:function(){i&&i()}}});var Qt,en=[],tn=/(=)\?(?=&|$)|\?\?/;we.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=en.pop()||we.expando+"_"+Nt++;return this[e]=!0,e}}),we.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(tn.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&tn.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=ve(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(tn,"$1"+r):!1!==e.jsonp&&(e.url+=(Lt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||we.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){i===undefined?we(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,en.push(r)),o&&ve(i)&&i(o[0]),o=i=undefined}),"script"}),ye.createHTMLDocument=((Qt=ae.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Qt.childNodes.length),we.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(ye.createHTMLDocument?((r=(t=ae.implementation.createHTMLDocument("")).createElement("base")).href=ae.location.href,t.head.appendChild(r)):t=ae),o=!n&&[],(i=ke.exec(e))?[t.createElement(i[1])]:(i=w([e],t,o),o&&o.length&&we(o).remove(),we.merge([],i.childNodes)));var r,i,o},we.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=$(e.slice(s)),e=e.slice(0,s)),ve(t)?(n=t,t=undefined):t&&"object"==typeof t&&(i="POST"),0<a.length&&we.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?we("<div>").append(we.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},we.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){we.fn[t]=function(e){return this.on(t,e)}}),we.expr.pseudos.animated=function(t){return we.grep(we.timers,function(e){return t===e.elem}).length},we.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=we.css(e,"position"),c=we(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=we.css(e,"top"),u=we.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),ve(t)&&(t=t.call(e,n,we.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},we.fn.extend({offset:function(t){if(arguments.length)return t===undefined?this:this.each(function(e){we.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===we.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===we.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=we(e).offset()).top+=we.css(e,"borderTopWidth",!0),i.left+=we.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-we.css(r,"marginTop",!0),left:t.left-i.left-we.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===we.css(e,"position");)e=e.offsetParent;return e||rt})}}),we.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;we.fn[t]=function(e){return Me(this,function(e,t,n){var r;if(_e(e)?r=e:9===e.nodeType&&(r=e.defaultView),n===undefined)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),we.each(["top","left"],function(e,n){we.cssHooks[n]=M(ye.pixelPosition,function(e,t){if(t)return t=L(e,n),ft.test(t)?we(e).position()[n]+"px":t})}),we.each({Height:"height",Width:"width"},function(a,s){we.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){we.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return Me(this,function(e,t,n){var r;return _e(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):n===undefined?we.css(e,t,i):we.style(e,t,n,i)},s,n?e:undefined,n)}})}),we.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){we.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),we.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),we.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),we.proxy=function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),ve(e)?(r=ue.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(ue.call(arguments)))}).guid=e.guid=e.guid||we.guid++,i):undefined},we.holdReady=function(e){e?we.readyWait++:we.ready(!0)},we.isArray=Array.isArray,we.parseJSON=JSON.parse,we.nodeName=l,we.isFunction=ve,we.isWindow=_e,we.camelCase=d,we.type=g,we.now=Date.now,we.isNumeric=function(e){var t=we.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return we});var nn=C.jQuery,rn=C.$;return we.noConflict=function(e){return C.$===we&&(C.$=rn),e&&C.jQuery===we&&(C.jQuery=nn),we},e||(C.jQuery=C.$=we),we}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Popper=t()}(this,function(){"use strict";function e(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}function t(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},le))}}function s(e){return e&&"[object Function]"==={}.toString.call(e)}function b(e,t){if(1!==e.nodeType)return[];var n=getComputedStyle(e,null);return t?n[t]:n}function d(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function m(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=b(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/(auto|scroll|overlay)/.test(n+i+r)?e:m(d(e))}function g(e){return 11===e?pe:10===e?de:pe||de}function v(e){if(!e)return document.documentElement;for(var t=g(10)?document.body:null,n=e.offsetParent;n===t&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var r=n&&n.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TD","TABLE"].indexOf(n.nodeName)&&"static"===b(n,"position")?v(n):n:e?e.ownerDocument.documentElement:document.documentElement}function u(e){var t=e.nodeName;return"BODY"!==t&&("HTML"===t||v(e.firstElementChild)===e)}function l(e){return null!==e.parentNode?l(e.parentNode):e}function h(e,t){if(!(e&&e.nodeType&&t&&t.nodeType))return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?e:t,i=n?t:e,o=document.createRange();o.setStart(r,0),o.setEnd(i,0);var a=o.commonAncestorContainer;if(e!==a&&t!==a||r.contains(i))return u(a)?a:v(a);var s=l(e);return s.host?h(s.host,t):h(e,l(t).host)}function p(e,t){var n="top"===(1<arguments.length&&t!==undefined?arguments[1]:"top")?"scrollTop":"scrollLeft",r=e.nodeName;if("BODY"===r||"HTML"===r){var i=e.ownerDocument.documentElement;return(e.ownerDocument.scrollingElement||i)[n]}return e[n]}function y(e,t,n){var r=2<arguments.length&&n!==undefined&&arguments[2],i=p(t,"top"),o=p(t,"left"),a=r?-1:1;return e.top+=i*a,e.bottom+=i*a,e.left+=o*a,e.right+=o*a,e}function _(e,t){var n="x"===t?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"],10)+parseFloat(e["border"+r+"Width"],10)}function r(e,t,n,r){return Math.max(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],g(10)?n["offset"+e]+r["margin"+("Height"===e?"Top":"Left")]+r["margin"+("Height"===e?"Bottom":"Right")]:0)}function x(){var e=document.body,t=document.documentElement,n=g(10)&&getComputedStyle(t);return{height:r("Height",e,t,n),width:r("Width",e,t,n)}}function w(e){return ye({},e,{right:e.left+e.width,bottom:e.top+e.height})}function E(e){var t={};try{if(g(10)){t=e.getBoundingClientRect();var n=p(e,"top"),r=p(e,"left");t.top+=n,t.left+=r,t.bottom+=n,t.right+=r}else t=e.getBoundingClientRect()}catch(f){}var i={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},o="HTML"===e.nodeName?x():{},a=o.width||e.clientWidth||i.right-i.left,s=o.height||e.clientHeight||i.bottom-i.top,u=e.offsetWidth-a,l=e.offsetHeight-s;if(u||l){var c=b(e);u-=_(c,"x"),l-=_(c,"y"),i.width-=u,i.height-=l}return w(i)}function C(e,t,n){var r=2<arguments.length&&n!==undefined&&arguments[2],i=g(10),o="HTML"===t.nodeName,a=E(e),s=E(t),u=m(e),l=b(t),c=parseFloat(l.borderTopWidth,10),f=parseFloat(l.borderLeftWidth,10);r&&"HTML"===t.nodeName&&(s.top=Math.max(s.top,0),s.left=Math.max(s.left,0));var p=w({top:a.top-s.top-c,left:a.left-s.left-f,width:a.width,height:a.height});if(p.marginTop=0,p.marginLeft=0,!i&&o){var d=parseFloat(l.marginTop,10),h=parseFloat(l.marginLeft,10);p.top-=c-d,p.bottom-=c-d,p.left-=f-h,p.right-=f-h,p.marginTop=d,p.marginLeft=h}return(i&&!r?t.contains(u):t===u&&"BODY"!==u.nodeName)&&(p=y(p,t)),p}function S(e,t){var n=1<arguments.length&&t!==undefined&&arguments[1],r=e.ownerDocument.documentElement,i=C(e,r),o=Math.max(r.clientWidth,window.innerWidth||0),a=Math.max(r.clientHeight,window.innerHeight||0),s=n?0:p(r),u=n?0:p(r,"left");return w({top:s-i.top+i.marginTop,left:u-i.left+i.marginLeft,width:o,height:a})}function T(e){var t=e.nodeName;return"BODY"!==t&&"HTML"!==t&&("fixed"===b(e,"position")||T(d(e)))}function A(e){if(!e||!e.parentElement||g())return document.documentElement;for(var t=e.parentElement;t&&"none"===b(t,"transform");)t=t.parentElement;return t||document.documentElement}function k(e,t,n,r,i){var o=4<arguments.length&&i!==undefined&&arguments[4],a={top:0,left:0},s=o?A(e):h(e,t);if("viewport"===r)a=S(s,o);else{var u=void 0;"scrollParent"===r?"BODY"===(u=m(d(t))).nodeName&&(u=e.ownerDocument.documentElement):u="window"===r?e.ownerDocument.documentElement:r;var l=C(u,s,o);if("HTML"!==u.nodeName||T(s))a=l;else{var c=x(),f=c.height,p=c.width;a.top+=l.top-l.marginTop,a.bottom=f+l.top,a.left+=l.left-l.marginLeft,a.right=p+l.left}}return a.left+=n,a.top+=n,a.right-=n,a.bottom-=n,a}function I(e){return e.width*e.height}function c(e,t,r,n,i,o){var a=5<arguments.length&&o!==undefined?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var s=k(r,n,a,i),u={top:{width:s.width,height:t.top-s.top},right:{width:s.right-t.right,height:s.height},bottom:{width:s.width,height:s.bottom-t.bottom},left:{width:t.left-s.left,height:s.height}},l=Object.keys(u).map(function(e){return ye({key:e},u[e],{area:I(u[e])})}).sort(function(e,t){return t.area-e.area}),c=l.filter(function(e){var t=e.width,n=e.height;return t>=r.clientWidth&&n>=r.clientHeight}),f=0<c.length?c[0].key:l[0].key,p=e.split("-")[1];return f+(p?"-"+p:"")}function f(e,t,n,r){var i=3<arguments.length&&r!==undefined?arguments[3]:null;return C(n,i?A(t):h(t,n),i)}function D(e){var t=getComputedStyle(e),n=parseFloat(t.marginTop)+parseFloat(t.marginBottom),r=parseFloat(t.marginLeft)+parseFloat(t.marginRight);return{width:e.offsetWidth+r,height:e.offsetHeight+n}}function P(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function O(e,t,n){n=n.split("-")[0];var r=D(e),i={width:r.width,height:r.height},o=-1!==["right","left"].indexOf(n),a=o?"top":"left",s=o?"left":"top",u=o?"height":"width",l=o?"width":"height";return i[a]=t[a]+t[u]/2-r[u]/2,i[s]=n===s?t[s]-r[l]:t[P(s)],i}function R(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function i(e,t,n){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===n});var r=R(e,function(e){return e[t]===n});return e.indexOf(r)}function N(e,n,t){return(t===undefined?e:e.slice(0,i(e,"name",t))).forEach(function(e){e["function"]&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var t=e["function"]||e.fn;e.enabled&&s(t)&&(n.offsets.popper=w(n.offsets.popper),n.offsets.reference=w(n.offsets.reference),n=t(n,e))}),n}function o(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=f(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=c(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=O(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=N(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function n(e,n){return e.some(function(e){var t=e.name;return e.enabled&&t===n})}function L(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<t.length;r++){var i=t[r],o=i?""+i+n:e;if("undefined"!=typeof document.body.style[o])return o}return null}function M(){return this.state.isDestroyed=!0,n(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[L("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function a(e){var t=e.ownerDocument;return t?t.defaultView:window}function B(e,t,n,r){var i="BODY"===e.nodeName,o=i?e.ownerDocument.defaultView:e;o.addEventListener(t,n,{passive:!0}),i||B(m(o.parentNode),t,n,r),r.push(o)}function z(e,t,n,r){n.updateBound=r,a(e).addEventListener("resize",n.updateBound,{passive:!0});var i=m(e);return B(i,"scroll",n.updateBound,n.scrollParents),n.scrollElement=i,n.eventsEnabled=!0,n}function F(){this.state.eventsEnabled||(this.state=z(this.reference,this.options,this.state,this.scheduleUpdate))}function j(e,t){return a(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t}function U(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=j(this.reference,this.state))}function V(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function q(n,r){Object.keys(r).forEach(function(e){var t="";-1!==["width","height","top","right","bottom","left"].indexOf(e)&&V(r[e])&&(t="px"),n.style[e]=r[e]+t})}function H(t,n){Object.keys(n).forEach(function(e){!1!==n[e]?t.setAttribute(e,n[e]):t.removeAttribute(e)})}function W(e){return q(e.instance.popper,e.styles),H(e.instance.popper,e.attributes),e.arrowElement&&Object.keys(e.arrowStyles).length&&q(e.arrowElement,e.arrowStyles),e}function G(e,t,n,r,i){var o=f(i,t,e,n.positionFixed),a=c(n.placement,o,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",a),q(t,{position:n.positionFixed?"fixed":"absolute"}),n}function Z(e,t){var n=t.x,r=t.y,i=e.offsets.popper,o=R(e.instance.modifiers,function(e){return"applyStyle"===e.name}).gpuAcceleration;o!==undefined&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a=o!==undefined?o:t.gpuAcceleration,s=E(v(e.instance.popper)),u={position:i.position},l={left:Math.floor(i.left),top:Math.round(i.top),bottom:Math.round(i.bottom),right:Math.floor(i.right)},c="bottom"===n?"top":"bottom",f="right"===r?"left":"right",p=L("transform"),d=void 0,h=void 0;if(h="bottom"===c?-s.height+l.bottom:l.top,d="right"===f?-s.width+l.right:l.left,a&&p)u[p]="translate3d("+d+"px, "+h+"px, 0)",u[c]=0,u[f]=0,u.willChange="transform";else{var m="bottom"===c?-1:1,g="right"===f?-1:1;u[c]=h*m,u[f]=d*g,u.willChange=c+", "+f}var y={"x-placement":e.placement};return e.attributes=ye({},y,e.attributes),e.styles=ye({},u,e.styles),e.arrowStyles=ye({},e.offsets.arrow,e.arrowStyles),e}function X(e,t,n){var r=R(e,function(e){return e.name===t}),i=!!r&&e.some(function(e){return e.name===n&&e.enabled&&e.order<r.order});if(!i){var o="`"+t+"`",a="`"+n+"`";console.warn(a+" modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return i}function K(e,t){var n;if(!X(e.instance.modifiers,"arrow","keepTogether"))return e;var r=t.element;if("string"==typeof r){if(!(r=e.instance.popper.querySelector(r)))return e}else if(!e.instance.popper.contains(r)
)return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var i=e.placement.split("-")[0],o=e.offsets,a=o.popper,s=o.reference,u=-1!==["left","right"].indexOf(i),l=u?"height":"width",c=u?"Top":"Left",f=c.toLowerCase(),p=u?"left":"top",d=u?"bottom":"right",h=D(r)[l];s[d]-h<a[f]&&(e.offsets.popper[f]-=a[f]-(s[d]-h)),s[f]+h>a[d]&&(e.offsets.popper[f]+=s[f]+h-a[d]),e.offsets.popper=w(e.offsets.popper);var m=s[f]+s[l]/2-h/2,g=b(e.instance.popper),y=parseFloat(g["margin"+c],10),v=parseFloat(g["border"+c+"Width"],10),_=m-e.offsets.popper[f]-y-v;return _=Math.max(Math.min(a[l]-h,_),0),e.arrowElement=r,e.offsets.arrow=(ge(n={},f,Math.round(_)),ge(n,p,""),n),e}function $(e){return"end"===e?"start":"start"===e?"end":e}function Y(e,t){var n=1<arguments.length&&t!==undefined&&arguments[1],r=_e.indexOf(e),i=_e.slice(r+1).concat(_e.slice(0,r));return n?i.reverse():i}function J(d,h){if(n(d.instance.modifiers,"inner"))return d;if(d.flipped&&d.placement===d.originalPlacement)return d;var m=k(d.instance.popper,d.instance.reference,h.padding,h.boundariesElement,d.positionFixed),g=d.placement.split("-")[0],y=P(g),v=d.placement.split("-")[1]||"",_=[];switch(h.behavior){case be.FLIP:_=[g,y];break;case be.CLOCKWISE:_=Y(g);break;case be.COUNTERCLOCKWISE:_=Y(g,!0);break;default:_=h.behavior}return _.forEach(function(e,t){if(g!==e||_.length===t+1)return d;g=d.placement.split("-")[0],y=P(g);var n=d.offsets.popper,r=d.offsets.reference,i=Math.floor,o="left"===g&&i(n.right)>i(r.left)||"right"===g&&i(n.left)<i(r.right)||"top"===g&&i(n.bottom)>i(r.top)||"bottom"===g&&i(n.top)<i(r.bottom),a=i(n.left)<i(m.left),s=i(n.right)>i(m.right),u=i(n.top)<i(m.top),l=i(n.bottom)>i(m.bottom),c="left"===g&&a||"right"===g&&s||"top"===g&&u||"bottom"===g&&l,f=-1!==["top","bottom"].indexOf(g),p=!!h.flipVariations&&(f&&"start"===v&&a||f&&"end"===v&&s||!f&&"start"===v&&u||!f&&"end"===v&&l);(o||c||p)&&(d.flipped=!0,(o||c)&&(g=_[t+1]),p&&(v=$(v)),d.placement=g+(v?"-"+v:""),d.offsets.popper=ye({},d.offsets.popper,O(d.instance.popper,d.offsets.reference,d.placement)),d=N(d.instance.modifiers,d,"flip"))}),d}function Q(e){var t=e.offsets,n=t.popper,r=t.reference,i=e.placement.split("-")[0],o=Math.floor,a=-1!==["top","bottom"].indexOf(i),s=a?"right":"bottom",u=a?"left":"top",l=a?"width":"height";return n[s]<o(r[u])&&(e.offsets.popper[u]=o(r[u])-n[l]),n[u]>o(r[s])&&(e.offsets.popper[u]=o(r[s])),e}function ee(e,t,n,r){var i=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+i[1],a=i[2];if(!o)return e;if(0===a.indexOf("%")){var s=void 0;switch(a){case"%p":s=n;break;case"%":case"%r":default:s=r}return w(s)[t]/100*o}if("vh"===a||"vw"===a){return("vh"===a?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*o}return o}function te(e,i,o,t){var a=[0,0],s=-1!==["right","left"].indexOf(t),n=e.split(/(\+|\-)/).map(function(e){return e.trim()}),r=n.indexOf(R(n,function(e){return-1!==e.search(/,|\s/)}));n[r]&&-1===n[r].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var u=/\s*,\s*|\s+/,l=-1!==r?[n.slice(0,r).concat([n[r].split(u)[0]]),[n[r].split(u)[1]].concat(n.slice(r+1))]:[n];return(l=l.map(function(e,t){var n=(1===t?!s:s)?"height":"width",r=!1;return e.reduce(function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,r=!0,e):r?(e[e.length-1]+=t,r=!1,e):e.concat(t)},[]).map(function(e){return ee(e,n,i,o)})})).forEach(function(n,r){n.forEach(function(e,t){V(e)&&(a[r]+=e*("-"===n[t-1]?-1:1))})}),a}function ne(e,t){var n=t.offset,r=e.placement,i=e.offsets,o=i.popper,a=i.reference,s=r.split("-")[0],u=void 0;return u=V(+n)?[+n,0]:te(n,o,a,s),"left"===s?(o.top+=u[0],o.left-=u[1]):"right"===s?(o.top+=u[0],o.left+=u[1]):"top"===s?(o.left+=u[0],o.top-=u[1]):"bottom"===s&&(o.left+=u[0],o.top+=u[1]),e.popper=o,e}function re(e,r){var t=r.boundariesElement||v(e.instance.popper);e.instance.reference===t&&(t=v(t));var n=L("transform"),i=e.instance.popper.style,o=i.top,a=i.left,s=i[n];i.top="",i.left="",i[n]="";var u=k(e.instance.popper,e.instance.reference,r.padding,t,e.positionFixed);i.top=o,i.left=a,i[n]=s,r.boundaries=u;var l=r.priority,c=e.offsets.popper,f={primary:function p(e){var t=c[e];return c[e]<u[e]&&!r.escapeWithReference&&(t=Math.max(c[e],u[e])),ge({},e,t)},secondary:function d(e){var t="right"===e?"left":"top",n=c[t];return c[e]>u[e]&&!r.escapeWithReference&&(n=Math.min(c[t],u[e]-("right"===e?c.width:c.height))),ge({},t,n)}};return l.forEach(function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";c=ye({},c,f[t](e))}),e.offsets.popper=c,e}function ie(e){var t=e.placement,n=t.split("-")[0],r=t.split("-")[1];if(r){var i=e.offsets,o=i.reference,a=i.popper,s=-1!==["bottom","top"].indexOf(n),u=s?"left":"top",l=s?"width":"height",c={start:ge({},u,o[u]),end:ge({},u,o[u]+o[l]-a[l])};e.offsets.popper=ye({},a,c[r])}return e}function oe(e){if(!X(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,n=R(e.instance.modifiers,function(e){return"preventOverflow"===e.name}).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}function ae(e){var t=e.placement,n=t.split("-")[0],r=e.offsets,i=r.popper,o=r.reference,a=-1!==["left","right"].indexOf(n),s=-1===["top","left"].indexOf(n);return i[a?"left":"top"]=o[n]-(s?i[a?"width":"height"]:0),e.placement=P(t),e.offsets.popper=w(i),e}for(var se="undefined"!=typeof window&&"undefined"!=typeof document,ue=["Edge","Trident","Firefox"],le=0,ce=0;ce<ue.length;ce+=1)if(se&&0<=navigator.userAgent.indexOf(ue[ce])){le=1;break}var fe=se&&window.Promise?e:t,pe=se&&!(!window.MSInputMethodContext||!document.documentMode),de=se&&/MSIE 10/.test(navigator.userAgent),he=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},me=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),ge=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ve=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],_e=ve.slice(3),be={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"},xe={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function Ee(){},onUpdate:function Ce(){},modifiers:{shift:{order:100,enabled:!0,fn:ie},offset:{order:200,enabled:!0,fn:ne,offset:0},preventOverflow:{order:300,enabled:!0,fn:re,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:Q},arrow:{order:500,enabled:!0,fn:K,element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:J,behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:ae},hide:{order:800,enabled:!0,fn:oe},computeStyle:{order:850,enabled:!0,fn:Z,gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:W,onLoad:G,gpuAcceleration:undefined}}},we=function(){function a(e,t,n){var r=this,i=2<arguments.length&&n!==undefined?arguments[2]:{};he(this,a),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=fe(this.update.bind(this)),this.options=ye({},a.Defaults,i),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=t&&t.jquery?t[0]:t,this.options.modifiers={},Object.keys(ye({},a.Defaults.modifiers,i.modifiers)).forEach(function(e){r.options.modifiers[e]=ye({},a.Defaults.modifiers[e]||{},i.modifiers?i.modifiers[e]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return ye({name:e},r.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(e){e.enabled&&s(e.onLoad)&&e.onLoad(r.reference,r.popper,r.options,e,r.state)}),this.update();var o=this.options.eventsEnabled;o&&this.enableEventListeners(),this.state.eventsEnabled=o}return me(a,[{key:"update",value:function e(){return o.call(this)}},{key:"destroy",value:function t(){return M.call(this)}},{key:"enableEventListeners",value:function n(){return F.call(this)}},{key:"disableEventListeners",value:function r(){return U.call(this)}}]),a}();return we.Utils=("undefined"!=typeof window?window:global).PopperUtils,we.placements=ve,we.Defaults=xe,we}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):e.Util=t(e.jQuery)}(this,function(e){"use strict";return function(r){function s(e){return{}.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase()}function e(){return{bindType:i,delegateType:i,handle:function t(e){return r(e.target).is(this)?e.handleObj.handler.apply(this,arguments):undefined}}}function t(e){var t=this,n=!1;return r(this).one(u.TRANSITION_END,function(){n=!0}),setTimeout(function(){n||u.triggerTransitionEnd(t)},e),this}function n(){r.fn.emulateTransitionEnd=t,r.event.special[u.TRANSITION_END]=e()}var i="transitionend",o=1e6,a=1e3,u={TRANSITION_END:"bsTransitionEnd",getUID:function l(e){for(;e+=~~(Math.random()*o),document.getElementById(e););return e},getSelectorFromElement:function c(e){var t=e.getAttribute("data-target");t&&"#"!==t||(t=e.getAttribute("href")||"");try{return document.querySelector(t)?t:null}catch(n){return null}},getTransitionDurationFromElement:function f(e){if(!e)return 0;var t=r(e).css("transition-duration");return parseFloat(t)?(t=t.split(",")[0],parseFloat(t)*a):0},reflow:function p(e){return e.offsetHeight},triggerTransitionEnd:function d(e){r(e).trigger(i)},supportsTransitionEnd:function h(){return Boolean(i)},isElement:function m(e){return(e[0]||e).nodeType},typeCheckConfig:function g(e,t,n){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r],o=t[r],a=o&&u.isElement(o)?"element":s(o);if(!new RegExp(i).test(a))throw new Error(e.toUpperCase()+': Option "'+r+'" provided type "'+a+'" but expected type "'+i+'".')}}};return n(),u}(e=e&&e.hasOwnProperty("default")?e["default"]:e)}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("./util.js")):"function"==typeof define&&define.amd?define(["jquery","./util.js"],t):e.ScrollSpy=t(e.jQuery,e.Util)}(this,function(e,d){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}var g,y,v,_,b,t,n,x,w,E,C,S,T,o;return e=e&&e.hasOwnProperty("default")?e["default"]:e,d=d&&d.hasOwnProperty("default")?d["default"]:d,y="scrollspy",v="4.1.3",b="."+(_="bs.scrollspy"),t=".data-api",n=(g=e).fn[y],x={offset:10,method:"auto",target:""},w={offset:"number",method:"string",target:"(string|element)"},E={ACTIVATE:"activate"+b,SCROLL:"scroll"+b,LOAD_DATA_API:"load"+b+t},C={DROPDOWN_ITEM:"dropdown-item",DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active"},S={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",NAV_LIST_GROUP:".nav, .list-group",NAV_LINKS:".nav-link",NAV_ITEMS:".nav-item",LIST_ITEMS:".list-group-item",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"},T={OFFSET:"offset",POSITION:"position"},o=function(){function n(e,t){var n=this;this._element=e,this._scrollElement="BODY"===e.tagName?window:e,this._config=this._getConfig(t),this._selector=this._config.target+" "+S.NAV_LINKS+","+this._config.target+" "+S.LIST_ITEMS+","+this._config.target+" "+S.DROPDOWN_ITEMS,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,g(this._scrollElement).on(E.SCROLL,function(e){return n._process(e)}),this.refresh(),this._process()}var e=n.prototype;return e.refresh=function r(){var t=this,e=this._scrollElement===this._scrollElement.window?T.OFFSET:T.POSITION,i="auto"===this._config.method?e:this._config.method,o=i===T.POSITION?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map(function(e){var t,n=d.getSelectorFromElement(e);if(n&&(t=document.querySelector(n)),t){var r=t.getBoundingClientRect();if(r.width||r.height)return[g(t)[i]().top+o,n]}return null}).filter(function(e){return e}).sort(function(e,t){return e[0]-t[0]}).forEach(function(e){t._offsets.push(e[0]),t._targets.push(e[1])})},e.dispose=function t(){g.removeData(this._element,_),g(this._scrollElement).off(b),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},e._getConfig=function i(e){if("string"!=typeof(e=m({},x,"object"==typeof e&&e?e:{})).target){var t=g(e.target).attr("id");t||(t=d.getUID(y),g(e.target).attr("id",t)),e.target="#"+t}return d.typeCheckConfig(y,e,w),e},e._getScrollTop=function o(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},e._getScrollHeight=function a(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},e._getOffsetHeight=function s(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},e._process=function u(){var e=this._getScrollTop()+this._config.offset,t=this._getScrollHeight(),n=this._config.offset+t-this._getOffsetHeight();if(this._scrollHeight!==t&&this.refresh(),n<=e){var r=this._targets[this._targets.length-1];this._activeTarget!==r&&this._activate(r)}else{if(this._activeTarget&&e<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(var i=this._offsets.length;i--;){this._activeTarget!==this._targets[i]&&e>=this._offsets[i]&&("undefined"==typeof this._offsets[i+1]||e<this._offsets[i+1])&&this._activate(this._targets[i])}}},e._activate=function l(t){this._activeTarget=t,this._clear();var e=this._selector.split(",");e=e.map(function(e){return e+'[data-target="'+t+'"],'+e+'[href="'+t+'"]'});var n=g([].slice.call(document.querySelectorAll(e.join(","))));n.hasClass(C.DROPDOWN_ITEM)?(n.closest(S.DROPDOWN).find(S.DROPDOWN_TOGGLE).addClass(C.ACTIVE),n.addClass(C.ACTIVE)):(n.addClass(C.ACTIVE),n.parents(S.NAV_LIST_GROUP).prev(S.NAV_LINKS+", "+S.LIST_ITEMS).addClass(C.ACTIVE),n.parents(S.NAV_LIST_GROUP).prev(S.NAV_ITEMS).children(S.NAV_LINKS).addClass(C.ACTIVE)),g(this._scrollElement).trigger(E.ACTIVATE,{relatedTarget:t})},e._clear=function c(){var e=[].slice.call(document.querySelectorAll(this._selector));g(e).filter(S.ACTIVE).removeClass(C.ACTIVE)},n._jQueryInterface=function f(t){return this.each(function(){var e=g(this).data(_);if(e||(e=new n(this,"object"==typeof t&&t),g(this).data(_,e)),"string"==typeof t){if("undefined"==typeof e[t])throw new TypeError('No method named "'+t+'"');e[t]()}})},h(n,null,[{key:"VERSION",get:function p(){return v}},{key:"Default",get:function p(){return x}}]),n}(),g(window).on(E.LOAD_DATA_API,function(){for(var e=[].slice.call(document.querySelectorAll(S.DATA_SPY)),t=e.length;t--;){var n=g(e[t]);o._jQueryInterface.call(n,n.data())}}),g.fn[y]=o._jQueryInterface,g.fn[y].Constructor=o,g.fn[y].noConflict=function(){return g.fn[y]=n,o._jQueryInterface},o}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("./util.js")):"function"==typeof define&&define.amd?define(["jquery","./util.js"],t):e.Collapse=t(e.jQuery,e.Util)}(this,function(e,h){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}var y,v,_,b,t,n,o,x,w,E,C,S,T,a;return e=e&&e.hasOwnProperty("default")?e["default"]:e,h=h&&h.hasOwnProperty("default")?h["default"]:h,v="collapse",_="4.1.3",t="."+(b="bs.collapse"),n=".data-api",o=(y=e).fn[v],x={toggle:!0,parent:""},w={toggle:"boolean",parent:"(string|element)"},E={SHOW:"show"+t,SHOWN:"shown"+t,HIDE:"hide"+t,HIDDEN:"hidden"+t,CLICK_DATA_API:"click"+t+n},C={SHOW:"show",COLLAPSE:"collapse",COLLAPSING:"collapsing",COLLAPSED:"collapsed"},S={WIDTH:"width",HEIGHT:"height"},T={ACTIVES:".show, .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'},a=function(){function u(t,e){this._isTransitioning=!1,this._element=t,this._config=this._getConfig(e),this._triggerArray=y.makeArray(document.querySelectorAll('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'));for(var n=[].slice.call(document.querySelectorAll(T.DATA_TOGGLE)),r=0,i=n.length;r<i;r++){var o=n[r],a=h.getSelectorFromElement(o),s=[].slice.call(document.querySelectorAll(a)).filter(function(e){return e===t});null!==a&&0<s.length&&(this._selector=a,this._triggerArray.push(o))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var e=u.prototype;return e.toggle=function t(){y(this._element).hasClass(C.SHOW)?this.hide():this.show()},e.show=function l(){var e,t,n=this;if(!this._isTransitioning&&!y(this._element).hasClass(C.SHOW)&&(this._parent&&0===(e=[].slice.call(this._parent.querySelectorAll(T.ACTIVES)).filter(function(e){return e.getAttribute("data-parent")===n._config.parent})).length&&(e=null),!(e&&(t=y(e).not(this._selector).data(b))&&t._isTransitioning))){var r=y.Event(E.SHOW);if(y(this._element).trigger(r),!r.isDefaultPrevented()){e&&(u._jQueryInterface.call(y(e).not(this._selector),"hide"),t||y(e).data(b,null));var i=this._getDimension();y(this._element).removeClass(C.COLLAPSE).addClass(C.COLLAPSING),this._element.style[i]=0,this._triggerArray.length&&y(this._triggerArray).removeClass(C.COLLAPSED).attr("aria-expanded",!0),this.setTransitioning(!0);var o=function o(){y(n._element).removeClass(C.COLLAPSING).addClass(C.COLLAPSE).addClass(C.SHOW),n._element.style[i]="",n.setTransitioning(!1),y(n._element).trigger(E.SHOWN)},a="scroll"+(i[0].toUpperCase()+i.slice(1)),s=h.getTransitionDurationFromElement(this._element);y(this._element).one(h.TRANSITION_END,o).emulateTransitionEnd(s),this._element.style[i]=this._element[a]+"px"}}},e.hide=function c(){var e=this;if(!this._isTransitioning&&y(this._element).hasClass(C.SHOW)){var t=y.Event(E.HIDE);if(y(this._element).trigger(t),!t.isDefaultPrevented()){var n=this._getDimension();this._element.style[n]=this._element.getBoundingClientRect()[n]+"px",h.reflow(this._element),y(this._element).addClass(C.COLLAPSING).removeClass(C.COLLAPSE).removeClass(C.SHOW);var r=this._triggerArray.length;if(0<r)for(var i=0;i<r;i++){var o=this._triggerArray[i],a=h.getSelectorFromElement(o);if(null!==a)y([].slice.call(document.querySelectorAll(a))).hasClass(C.SHOW)||y(o).addClass(C.COLLAPSED).attr("aria-expanded",!1)}this.setTransitioning(!0);var s=function s(){e.setTransitioning(!1),y(e._element).removeClass(C.COLLAPSING).addClass(C.COLLAPSE).trigger(E.HIDDEN)};this._element.style[n]="";var u=h.getTransitionDurationFromElement(this._element);y(this._element).one(h.TRANSITION_END,s).emulateTransitionEnd(u)}}},e.setTransitioning=function n(e){this._isTransitioning=e},e.dispose=function r(){y.removeData(this._element,b),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},e._getConfig=function i(e){return(e=g({},x,e)).toggle=Boolean(e.toggle),h.typeCheckConfig(v,e,w),e},e._getDimension=function o(){return y(this._element).hasClass(S.WIDTH)?S.WIDTH:S.HEIGHT},e._getParent=function a(){var n=this,e=null;h.isElement(this._config.parent)?(e=this._config.parent,"undefined"!=typeof this._config.parent.jquery&&(e=this._config.parent[0])):e=document.querySelector(this._config.parent);var t='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',r=[].slice.call(e.querySelectorAll(t));return y(r).each(function(e,t){n._addAriaAndCollapsedClass(u._getTargetFromElement(t),[t])}),e},e._addAriaAndCollapsedClass=function s(e,t){if(e){var n=y(e).hasClass(C.SHOW);t.length&&y(t).toggleClass(C.COLLAPSED,!n).attr("aria-expanded",n)}},u._getTargetFromElement=function f(e){var t=h.getSelectorFromElement(e);return t?document.querySelector(t):null},u._jQueryInterface=function p(r){return this.each(function(){var e=y(this),t=e.data(b),n=g({},x,e.data(),"object"==typeof r&&r?r:{});if(!t&&n.toggle&&/show|hide/.test(r)&&(n.toggle=!1),t||(t=new u(this,n),e.data(b,t)),"string"==typeof r){if("undefined"==typeof t[r])throw new TypeError('No method named "'+r+'"');t[r]()}})},m(u,null,[{key:"VERSION",get:function d(){return _}},{key:"Default",get:function d(){return x}}]),u}(),y(document).on(E.CLICK_DATA_API,T.DATA_TOGGLE,function(e){"A"===e.currentTarget.tagName&&e.preventDefault();var n=y(this),t=h.getSelectorFromElement(this),r=[].slice.call(document.querySelectorAll(t));y(r).each(function(){var e=y(this),t=e.data(b)?"toggle":n.data();a._jQueryInterface.call(e,t)})}),y.fn[v]=a._jQueryInterface,y.fn[v].Constructor=a,y.fn[v].noConflict=function(){return y.fn[v]=o,a._jQueryInterface},a}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("./util.js")):"function"==typeof define&&define.amd?define(["jquery","./util.js"],t):e.Alert=t(e.jQuery,e.Util)}(this,function(e,f){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var d,t,h,m,n,i,o,a,g,y,s;return e=e&&e.hasOwnProperty("default")?e["default"]:e,f=f&&f.hasOwnProperty("default")?f["default"]:f,t="alert",h="4.1.3",n="."+(m="bs.alert"),i=".data-api",o=(d=e).fn[t],a={DISMISS:'[data-dismiss="alert"]'},g={CLOSE:"close"+n,CLOSED:"closed"+n,CLICK_DATA_API:"click"+n+i},y={ALERT:"alert",FADE:"fade",SHOW:"show"},s=function(){function r(e){this._element=e}var e=r.prototype;return e.close=function n(e){var t=this._element;e&&(t=this._getRootElement(e)),this._triggerCloseEvent(t).isDefaultPrevented()||this._removeElement(t)},e.dispose=function t(){d.removeData(this._element,m),this._element=null},e._getRootElement=function i(e){var t=f.getSelectorFromElement(e),n=!1;return t&&(n=document.querySelector(t)),n||(n=d(e).closest("."+y.ALERT)[0]),n},e._triggerCloseEvent=function o(e){var t=d.Event(g.CLOSE);return d(e).trigger(t),t},e._removeElement=function a(t){var n=this;if(d(t).removeClass(y.SHOW),d(t).hasClass(y.FADE)){var e=f.getTransitionDurationFromElement(t);d(t).one(f.TRANSITION_END,function(e){return n._destroyElement(t,e)}).emulateTransitionEnd(e)}else this._destroyElement(t)},e._destroyElement=function s(e){d(e).detach().trigger(g.CLOSED).remove()},r._jQueryInterface=function u(n){return this.each(function(){var e=d(this),t=e.data(m);t||(t=new r(this),e.data(m,t)),"close"===n&&t[n](this)})},r._handleDismiss=function l(t){return function(e){e&&e.preventDefault(),t.close(this)}},p(r,null,[{key:"VERSION",get:function c(){return h}}]),r}(),d(document).on(g.CLICK_DATA_API,a.DISMISS,s._handleDismiss(new s)),d.fn[t]=s._jQueryInterface,d.fn[t].Constructor=s,d.fn[t].noConflict=function(){return d.fn[t]=o,s._jQueryInterface},s}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("popper.js"),require("./util.js")):"function"==typeof define&&define.amd?define(["jquery","popper.js","./util.js"],t):e.Tooltip=t(e.jQuery,e.Popper,e.Util)}(this,function(e,I,D){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}var R,N,L,M,B,t,z,F,j,U,V,q,H,W,G,Z,n;return e=e&&e.hasOwnProperty("default")?e["default"]:e,I=I&&I.hasOwnProperty("default")?I["default"]:I,D=D&&D.hasOwnProperty("default")?D["default"]:D,N="tooltip",L="4.1.3",B="."+(M="bs.tooltip"),t=(R=e).fn[N],z="bs-tooltip",F=new RegExp("(^|\\s)"+z+"\\S+","g"),V={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!(U={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"}),selector:!(j={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)"}),placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent"},q={SHOW:"show",OUT:"out"},H={HIDE:"hide"+B,HIDDEN:"hidden"+B,SHOW:"show"+B,SHOWN:"shown"+B,INSERTED:"inserted"+B,CLICK:"click"+B,FOCUSIN:"focusin"+B,FOCUSOUT:"focusout"+B,MOUSEENTER:"mouseenter"+B,MOUSELEAVE:"mouseleave"+B},W={FADE:"fade",SHOW:"show"},G={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner",ARROW:".arrow"},Z={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"},n=function(){function r(e,t){if(void 0===I)throw new TypeError("Bootstrap tooltips require Popper.js (https://popper.js.org)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=e,this.config=this._getConfig(t),this.tip=null,this._setListeners()}var e=r.prototype;return e.enable=function t(){this._isEnabled=!0},e.disable=function n(){this._isEnabled=!1},e.toggleEnabled=function i(){this._isEnabled=!this._isEnabled},e.toggle=function o(e){if(this._isEnabled)if(e){var t=this.constructor.DATA_KEY,n=R(e.currentTarget).data(t);n||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),R(e.currentTarget).data(t,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if(R(this.getTipElement()).hasClass(W.SHOW))return void this._leave(null,this);this._enter(null,this)}},e.dispose=function a(){clearTimeout(this._timeout),R.removeData(this.element,this.constructor.DATA_KEY),R(this.element).off(this.constructor.EVENT_KEY),R(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&R(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,(this._activeTrigger=null)!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},e.show=function p(){var t=this;if("none"===R(this.element).css("display"))throw new Error("Please use show on visible elements");var e=R.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){R(this.element).trigger(e);var n=R.contains(this.element.ownerDocument.documentElement,this.element);if(e.isDefaultPrevented()||!n)return;var r=this.getTipElement(),i=D.getUID(this.constructor.NAME);r.setAttribute("id",i),this.element.setAttribute("aria-describedby",i),this.setContent(),this.config.animation&&R(r).addClass(W.FADE);var o="function"==typeof this.config.placement?this.config.placement.call(this,r,this.element):this.config.placement,a=this._getAttachment(o);this.addAttachmentClass(a);var s=!1===this.config.container?document.body:R(document).find(this.config.container);R(r).data(this.constructor.DATA_KEY,this),R.contains(this.element.ownerDocument.documentElement,this.tip)||R(r).appendTo(s),R(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new I(this.element,r,{placement:a,modifiers:{offset:{offset:this.config.offset},flip:{behavior:this.config.fallbackPlacement},arrow:{element:G.ARROW},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function c(e){e.originalPlacement!==e.placement&&t._handlePopperPlacementChange(e)},onUpdate:function f(e){t._handlePopperPlacementChange(e)}}),R(r).addClass(W.SHOW),"ontouchstart"in document.documentElement&&R(document.body).children().on("mouseover",null,R.noop);var u=function u(){t.config.animation&&t._fixTransition();var e=t._hoverState;t._hoverState=null,R(t.element).trigger(t.constructor.Event.SHOWN),e===q.OUT&&t._leave(null,t)};if(R(this.tip).hasClass(W.FADE)){var l=D.getTransitionDurationFromElement(this.tip);R(this.tip).one(D.TRANSITION_END,u).emulateTransitionEnd(l)}else u()}},e.hide=function s(e){var t=this,n=this.getTipElement(),r=R.Event(this.constructor.Event.HIDE),i=function i(){t._hoverState!==q.SHOW&&n.parentNode&&n.parentNode.removeChild(n),t._cleanTipClass(),t.element.removeAttribute("aria-describedby"),R(t.element).trigger(t.constructor.Event.HIDDEN),null!==t._popper&&t._popper.destroy(),e&&e()};if(R(this.element).trigger(r),!r.isDefaultPrevented()){if(R(n).removeClass(W.SHOW),"ontouchstart"in document.documentElement&&R(document.body).children().off("mouseover",null,R.noop),this._activeTrigger[Z.CLICK]=!1,this._activeTrigger[Z.FOCUS]=!1,this._activeTrigger[Z.HOVER]=!1,R(this.tip).hasClass(W.FADE)){var o=D.getTransitionDurationFromElement(n);R(n).one(D.TRANSITION_END,i).emulateTransitionEnd(o)}else i();this._hoverState=""}},e.update=function u(){null!==this._popper&&this._popper.scheduleUpdate()},e.isWithContent=function l(){return Boolean(this.getTitle())},e.addAttachmentClass=function c(e){R(this.getTipElement()).addClass(z+"-"+e)},e.getTipElement=function f(){return this.tip=this.tip||R(this.config.template)[0],this.tip},e.setContent=function d(){var e=this.getTipElement();this.setElementContent(R(e.querySelectorAll(G.TOOLTIP_INNER)),this.getTitle()),R(e).removeClass(W.FADE+" "+W.SHOW)},e.setElementContent=function h(e,t){var n=this.config.html;"object"==typeof t&&(t.nodeType||t.jquery)?n?R(t).parent().is(e)||e.empty().append(t):e.text(R(t).text()):e[n?"html":"text"](t)},e.getTitle=function m(){var e=this.element.getAttribute("data-original-title");return e||(e="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),e},e._getAttachment=function g(e){return U[e.toUpperCase()]},e._setListeners=function y(){var r=this;this.config.trigger.split(" ").forEach(function(e){if("click"===e)R(r.element).on(r.constructor.Event.CLICK,r.config.selector,function(e){return r.toggle(e)});else if(e!==Z.MANUAL){var t=e===Z.HOVER?r.constructor.Event.MOUSEENTER:r.constructor.Event.FOCUSIN,n=e===Z.HOVER?r.constructor.Event.MOUSELEAVE:r.constructor.Event.FOCUSOUT;R(r.element).on(t,r.config.selector,function(e){return r._enter(e)}).on(n,r.config.selector,function(e){return r._leave(e)})}R(r.element).closest(".modal").on("hide.bs.modal",function(){return r.hide()})}),this.config.selector?this.config=O({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},e._fixTitle=function v(){var e=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==e)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),
this.element.setAttribute("title",""))},e._enter=function _(e,t){var n=this.constructor.DATA_KEY;(t=t||R(e.currentTarget).data(n))||(t=new this.constructor(e.currentTarget,this._getDelegateConfig()),R(e.currentTarget).data(n,t)),e&&(t._activeTrigger["focusin"===e.type?Z.FOCUS:Z.HOVER]=!0),R(t.getTipElement()).hasClass(W.SHOW)||t._hoverState===q.SHOW?t._hoverState=q.SHOW:(clearTimeout(t._timeout),t._hoverState=q.SHOW,t.config.delay&&t.config.delay.show?t._timeout=setTimeout(function(){t._hoverState===q.SHOW&&t.show()},t.config.delay.show):t.show())},e._leave=function b(e,t){var n=this.constructor.DATA_KEY;(t=t||R(e.currentTarget).data(n))||(t=new this.constructor(e.currentTarget,this._getDelegateConfig()),R(e.currentTarget).data(n,t)),e&&(t._activeTrigger["focusout"===e.type?Z.FOCUS:Z.HOVER]=!1),t._isWithActiveTrigger()||(clearTimeout(t._timeout),t._hoverState=q.OUT,t.config.delay&&t.config.delay.hide?t._timeout=setTimeout(function(){t._hoverState===q.OUT&&t.hide()},t.config.delay.hide):t.hide())},e._isWithActiveTrigger=function x(){for(var e in this._activeTrigger)if(this._activeTrigger[e])return!0;return!1},e._getConfig=function w(e){return"number"==typeof(e=O({},this.constructor.Default,R(this.element).data(),"object"==typeof e&&e?e:{})).delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),D.typeCheckConfig(N,e,this.constructor.DefaultType),e},e._getDelegateConfig=function E(){var e={};if(this.config)for(var t in this.config)this.constructor.Default[t]!==this.config[t]&&(e[t]=this.config[t]);return e},e._cleanTipClass=function C(){var e=R(this.getTipElement()),t=e.attr("class").match(F);null!==t&&t.length&&e.removeClass(t.join(""))},e._handlePopperPlacementChange=function S(e){var t=e.instance;this.tip=t.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(e.placement))},e._fixTransition=function T(){var e=this.getTipElement(),t=this.config.animation;null===e.getAttribute("x-placement")&&(R(e).removeClass(W.FADE),this.config.animation=!1,this.hide(),this.show(),this.config.animation=t)},r._jQueryInterface=function A(n){return this.each(function(){var e=R(this).data(M),t="object"==typeof n&&n;if((e||!/dispose|hide/.test(n))&&(e||(e=new r(this,t),R(this).data(M,e)),"string"==typeof n)){if("undefined"==typeof e[n])throw new TypeError('No method named "'+n+'"');e[n]()}})},P(r,null,[{key:"VERSION",get:function k(){return L}},{key:"Default",get:function k(){return V}},{key:"NAME",get:function k(){return N}},{key:"DATA_KEY",get:function k(){return M}},{key:"Event",get:function k(){return H}},{key:"EVENT_KEY",get:function k(){return B}},{key:"DefaultType",get:function k(){return j}}]),r}(),R.fn[N]=n._jQueryInterface,R.fn[N].Constructor=n,R.fn[N].noConflict=function(){return R.fn[N]=t,n._jQueryInterface},n}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("./tooltip.js")):"function"==typeof define&&define.amd?define(["jquery","./tooltip.js"],t):e.Popover=t(e.jQuery,e.Tooltip)}(this,function(e,t){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}function p(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}var d,h,m,g,y,o,v,_,b,x,w,E,C,a;return e=e&&e.hasOwnProperty("default")?e["default"]:e,t=t&&t.hasOwnProperty("default")?t["default"]:t,h="popover",m="4.1.3",y="."+(g="bs.popover"),o=(d=e).fn[h],v="bs-popover",_=new RegExp("(^|\\s)"+v+"\\S+","g"),b=n({},t.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),x=n({},t.DefaultType,{content:"(string|element|function)"}),w={FADE:"fade",SHOW:"show"},E={TITLE:".popover-header",CONTENT:".popover-body"},C={HIDE:"hide"+y,HIDDEN:"hidden"+y,SHOW:"show"+y,SHOWN:"shown"+y,INSERTED:"inserted"+y,CLICK:"click"+y,FOCUSIN:"focusin"+y,FOCUSOUT:"focusout"+y,MOUSEENTER:"mouseenter"+y,MOUSELEAVE:"mouseleave"+y},a=function(e){function r(){return e.apply(this,arguments)||this}p(r,e);var t=r.prototype;return t.isWithContent=function n(){return this.getTitle()||this._getContent()},t.addAttachmentClass=function i(e){d(this.getTipElement()).addClass(v+"-"+e)},t.getTipElement=function o(){return this.tip=this.tip||d(this.config.template)[0],this.tip},t.setContent=function a(){var e=d(this.getTipElement());this.setElementContent(e.find(E.TITLE),this.getTitle());var t=this._getContent();"function"==typeof t&&(t=t.call(this.element)),this.setElementContent(e.find(E.CONTENT),t),e.removeClass(w.FADE+" "+w.SHOW)},t._getContent=function s(){return this.element.getAttribute("data-content")||this.config.content},t._cleanTipClass=function u(){var e=d(this.getTipElement()),t=e.attr("class").match(_);null!==t&&0<t.length&&e.removeClass(t.join(""))},r._jQueryInterface=function l(n){return this.each(function(){var e=d(this).data(g),t="object"==typeof n?n:null;if((e||!/destroy|hide/.test(n))&&(e||(e=new r(this,t),d(this).data(g,e)),"string"==typeof n)){if("undefined"==typeof e[n])throw new TypeError('No method named "'+n+'"');e[n]()}})},f(r,null,[{key:"VERSION",get:function c(){return m}},{key:"Default",get:function c(){return b}},{key:"NAME",get:function c(){return h}},{key:"DATA_KEY",get:function c(){return g}},{key:"Event",get:function c(){return C}},{key:"EVENT_KEY",get:function c(){return y}},{key:"DefaultType",get:function c(){return x}}]),r}(t),d.fn[h]=a._jQueryInterface,d.fn[h].Constructor=a,d.fn[h].noConflict=function(){return d.fn[h]=o,a._jQueryInterface},a}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("popper.js"),require("./util.js")):"function"==typeof define&&define.amd?define(["jquery","popper.js","./util.js"],t):e.Dropdown=t(e.jQuery,e.Popper,e.Util)}(this,function(e,g,y){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}var b,x,w,E,C,t,n,S,T,A,k,I,D,P,O,R,N,L,M,B,o;return e=e&&e.hasOwnProperty("default")?e["default"]:e,g=g&&g.hasOwnProperty("default")?g["default"]:g,y=y&&y.hasOwnProperty("default")?y["default"]:y,x="dropdown",w="4.1.3",C="."+(E="bs.dropdown"),t=".data-api",n=(b=e).fn[x],S=27,T=32,A=9,k=38,I=40,D=3,P=new RegExp(k+"|"+I+"|"+S),O={HIDE:"hide"+C,HIDDEN:"hidden"+C,SHOW:"show"+C,SHOWN:"shown"+C,CLICK:"click"+C,CLICK_DATA_API:"click"+C+t,KEYDOWN_DATA_API:"keydown"+C+t,KEYUP_DATA_API:"keyup"+C+t},R={DISABLED:"disabled",SHOW:"show",DROPUP:"dropup",DROPRIGHT:"dropright",DROPLEFT:"dropleft",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",POSITION_STATIC:"position-static"},N={DATA_TOGGLE:'[data-toggle="dropdown"]',FORM_CHILD:".dropdown form",MENU:".dropdown-menu",NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)"},L={TOP:"top-start",TOPEND:"top-end",BOTTOM:"bottom-start",BOTTOMEND:"bottom-end",RIGHT:"right-start",RIGHTEND:"right-end",LEFT:"left-start",LEFTEND:"left-end"},M={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic"},B={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string"},o=function(){function l(e,t){this._element=e,this._popper=null,this._config=this._getConfig(t),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var e=l.prototype;return e.toggle=function o(){if(!this._element.disabled&&!b(this._element).hasClass(R.DISABLED)){var e=l._getParentFromElement(this._element),t=b(this._menu).hasClass(R.SHOW);if(l._clearMenus(),!t){var n={relatedTarget:this._element},r=b.Event(O.SHOW,n);if(b(e).trigger(r),!r.isDefaultPrevented()){if(!this._inNavbar){if(void 0===g)throw new TypeError("Bootstrap dropdown require Popper.js (https://popper.js.org)");var i=this._element;"parent"===this._config.reference?i=e:y.isElement(this._config.reference)&&(i=this._config.reference,"undefined"!=typeof this._config.reference.jquery&&(i=this._config.reference[0])),"scrollParent"!==this._config.boundary&&b(e).addClass(R.POSITION_STATIC),this._popper=new g(i,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===b(e).closest(N.NAVBAR_NAV).length&&b(document.body).children().on("mouseover",null,b.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),b(this._menu).toggleClass(R.SHOW),b(e).toggleClass(R.SHOW).trigger(b.Event(O.SHOWN,n))}}}},e.dispose=function t(){b.removeData(this._element,E),b(this._element).off(C),this._element=null,(this._menu=null)!==this._popper&&(this._popper.destroy(),this._popper=null)},e.update=function n(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},e._addEventListeners=function r(){var t=this;b(this._element).on(O.CLICK,function(e){e.preventDefault(),e.stopPropagation(),t.toggle()})},e._getConfig=function i(e){return e=_({},this.constructor.Default,b(this._element).data(),e),y.typeCheckConfig(x,e,this.constructor.DefaultType),e},e._getMenuElement=function a(){if(!this._menu){var e=l._getParentFromElement(this._element);e&&(this._menu=e.querySelector(N.MENU))}return this._menu},e._getPlacement=function s(){var e=b(this._element.parentNode),t=L.BOTTOM;return e.hasClass(R.DROPUP)?(t=L.TOP,b(this._menu).hasClass(R.MENURIGHT)&&(t=L.TOPEND)):e.hasClass(R.DROPRIGHT)?t=L.RIGHT:e.hasClass(R.DROPLEFT)?t=L.LEFT:b(this._menu).hasClass(R.MENURIGHT)&&(t=L.BOTTOMEND),t},e._detectNavbar=function u(){return 0<b(this._element).closest(".navbar").length},e._getPopperConfig=function c(){var t=this,e={};"function"==typeof this._config.offset?e.fn=function(e){return e.offsets=_({},e.offsets,t._config.offset(e.offsets)||{}),e}:e.offset=this._config.offset;var n={placement:this._getPlacement(),modifiers:{offset:e,flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(n.modifiers.applyStyle={enabled:!1}),n},l._jQueryInterface=function f(t){return this.each(function(){var e=b(this).data(E);if(e||(e=new l(this,"object"==typeof t?t:null),b(this).data(E,e)),"string"==typeof t){if("undefined"==typeof e[t])throw new TypeError('No method named "'+t+'"');e[t]()}})},l._clearMenus=function p(e){if(!e||e.which!==D&&("keyup"!==e.type||e.which===A))for(var t=[].slice.call(document.querySelectorAll(N.DATA_TOGGLE)),n=0,r=t.length;n<r;n++){var i=l._getParentFromElement(t[n]),o=b(t[n]).data(E),a={relatedTarget:t[n]};if(e&&"click"===e.type&&(a.clickEvent=e),o){var s=o._menu;if(b(i).hasClass(R.SHOW)&&!(e&&("click"===e.type&&/input|textarea/i.test(e.target.tagName)||"keyup"===e.type&&e.which===A)&&b.contains(i,e.target))){var u=b.Event(O.HIDE,a);b(i).trigger(u),u.isDefaultPrevented()||("ontouchstart"in document.documentElement&&b(document.body).children().off("mouseover",null,b.noop),t[n].setAttribute("aria-expanded","false"),b(s).removeClass(R.SHOW),b(i).removeClass(R.SHOW).trigger(b.Event(O.HIDDEN,a)))}}}},l._getParentFromElement=function d(e){var t,n=y.getSelectorFromElement(e);return n&&(t=document.querySelector(n)),t||e.parentNode},l._dataApiKeydownHandler=function h(e){if((/input|textarea/i.test(e.target.tagName)?!(e.which===T||e.which!==S&&(e.which!==I&&e.which!==k||b(e.target).closest(N.MENU).length)):P.test(e.which))&&(e.preventDefault(),e.stopPropagation(),!this.disabled&&!b(this).hasClass(R.DISABLED))){var t=l._getParentFromElement(this),n=b(t).hasClass(R.SHOW);if((n||e.which===S&&e.which===T)&&(!n||e.which!==S&&e.which!==T)){var r=[].slice.call(t.querySelectorAll(N.VISIBLE_ITEMS));if(0!==r.length){var i=r.indexOf(e.target);e.which===k&&0<i&&i--,e.which===I&&i<r.length-1&&i++,i<0&&(i=0),r[i].focus()}}else{if(e.which===S){var o=t.querySelector(N.DATA_TOGGLE);b(o).trigger("focus")}b(this).trigger("click")}}},v(l,null,[{key:"VERSION",get:function m(){return w}},{key:"Default",get:function m(){return M}},{key:"DefaultType",get:function m(){return B}}]),l}(),b(document).on(O.KEYDOWN_DATA_API,N.DATA_TOGGLE,o._dataApiKeydownHandler).on(O.KEYDOWN_DATA_API,N.MENU,o._dataApiKeydownHandler).on(O.CLICK_DATA_API+" "+O.KEYUP_DATA_API,o._clearMenus).on(O.CLICK_DATA_API,N.DATA_TOGGLE,function(e){e.preventDefault(),e.stopPropagation(),o._jQueryInterface.call(b(this),"toggle")}).on(O.CLICK_DATA_API,N.FORM_CHILD,function(e){e.stopPropagation()}),b.fn[x]=o._jQueryInterface,b.fn[x].Constructor=o,b.fn[x].noConflict=function(){return b.fn[x]=n,o._jQueryInterface},o}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):e.Button=t(e.jQuery)}(this,function(e){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var s,t,u,l,n,i,o,c,f,p,d;return e=e&&e.hasOwnProperty("default")?e["default"]:e,t="button",u="4.1.3",n="."+(l="bs.button"),i=".data-api",o=(s=e).fn[t],c={ACTIVE:"active",BUTTON:"btn",FOCUS:"focus"},f={DATA_TOGGLE_CARROT:'[data-toggle^="button"]',DATA_TOGGLE:'[data-toggle="buttons"]',INPUT:"input",ACTIVE:".active",BUTTON:".btn"},p={CLICK_DATA_API:"click"+n+i,FOCUS_BLUR_DATA_API:"focus"+n+i+" blur"+n+i},d=function(){function n(e){this._element=e}var e=n.prototype;return e.toggle=function o(){var e=!0,t=!0,n=s(this._element).closest(f.DATA_TOGGLE)[0];if(n){var r=this._element.querySelector(f.INPUT);if(r){if("radio"===r.type)if(r.checked&&this._element.classList.contains(c.ACTIVE))e=!1;else{var i=n.querySelector(f.ACTIVE);i&&s(i).removeClass(c.ACTIVE)}if(e){if(r.hasAttribute("disabled")||n.hasAttribute("disabled")||r.classList.contains("disabled")||n.classList.contains("disabled"))return;r.checked=!this._element.classList.contains(c.ACTIVE),s(r).trigger("change")}r.focus(),t=!1}}t&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(c.ACTIVE)),e&&s(this._element).toggleClass(c.ACTIVE)},e.dispose=function t(){s.removeData(this._element,l),this._element=null},n._jQueryInterface=function r(t){return this.each(function(){var e=s(this).data(l);e||(e=new n(this),s(this).data(l,e)),"toggle"===t&&e[t]()})},a(n,null,[{key:"VERSION",get:function i(){return u}}]),n}(),s(document).on(p.CLICK_DATA_API,f.DATA_TOGGLE_CARROT,function(e){e.preventDefault();var t=e.target;s(t).hasClass(c.BUTTON)||(t=s(t).closest(f.BUTTON)),d._jQueryInterface.call(s(t),"toggle")}).on(p.FOCUS_BLUR_DATA_API,f.DATA_TOGGLE_CARROT,function(e){var t=s(e.target).closest(f.BUTTON)[0];s(t).toggleClass(c.FOCUS,/^focus(in)?$/.test(e.type))}),s.fn[t]=d._jQueryInterface,s.fn[t].Constructor=d,s.fn[t].noConflict=function(){return s.fn[t]=o,d._jQueryInterface},d}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("./util.js")):"function"==typeof define&&define.amd?define(["jquery","./util.js"],t):e.Modal=t(e.jQuery,e.Util)}(this,function(e,E){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}var T,A,k,I,D,t,n,P,O,R,N,L,M,a;return e=e&&e.hasOwnProperty("default")?e["default"]:e,E=E&&E.hasOwnProperty("default")?E["default"]:E,A="modal",k="4.1.3",D="."+(I="bs.modal"),t=".data-api",n=(T=e).fn[A],P=27,O={backdrop:!0,keyboard:!0,focus:!0,show:!0},R={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},N={HIDE:"hide"+D,HIDDEN:"hidden"+D,SHOW:"show"+D,SHOWN:"shown"+D,FOCUSIN:"focusin"+D,RESIZE:"resize"+D,CLICK_DISMISS:"click.dismiss"+D,KEYDOWN_DISMISS:"keydown.dismiss"+D,MOUSEUP_DISMISS:"mouseup.dismiss"+D,MOUSEDOWN_DISMISS:"mousedown.dismiss"+D,CLICK_DATA_API:"click"+D+t},L={SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",SHOW:"show"},M={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top"},a=function(){function i(e,t){this._config=this._getConfig(t),this._element=e,this._dialog=e.querySelector(M.DIALOG),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._scrollbarWidth=0}var e=i.prototype;return e.toggle=function t(e){return this._isShown?this.hide():this.show(e)},e.show=function r(e){var t=this;if(!this._isTransitioning&&!this._isShown){T(this._element).hasClass(L.FADE)&&(this._isTransitioning=!0);var n=T.Event(N.SHOW,{relatedTarget:e});T(this._element).trigger(n),this._isShown||n.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),T(document.body).addClass(L.OPEN),this._setEscapeEvent(),this._setResizeEvent(),T(this._element).on(N.CLICK_DISMISS,M.DATA_DISMISS,function(e){return t.hide(e)}),T(this._dialog).on(N.MOUSEDOWN_DISMISS,function(){T(t._element).one(N.MOUSEUP_DISMISS,function(e){T(e.target).is(t._element)&&(t._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return t._showElement(e)}))}},e.hide=function o(e){var t=this;if(e&&e.preventDefault(),!this._isTransitioning&&this._isShown){var n=T.Event(N.HIDE);if(T(this._element).trigger(n),this._isShown&&!n.isDefaultPrevented()){this._isShown=!1;var r=T(this._element).hasClass(L.FADE);if(r&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),T(document).off(N.FOCUSIN),T(this._element).removeClass(L.SHOW),T(this._element).off(N.CLICK_DISMISS),T(this._dialog).off(N.MOUSEDOWN_DISMISS),r){var i=E.getTransitionDurationFromElement(this._element);T(this._element).one(E.TRANSITION_END,function(e){return t._hideModal(e)}).emulateTransitionEnd(i)}else this._hideModal()}}},e.dispose=function n(){T.removeData(this._element,I),T(window,document,this._element,this._backdrop).off(D),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._scrollbarWidth=null},e.handleUpdate=function a(){this._adjustDialog()},e._getConfig=function s(e){return e=S({},O,e),E.typeCheckConfig(A,e,R),e},e._showElement=function u(e){var t=this,n=T(this._element).hasClass(L.FADE);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.scrollTop=0,n&&E.reflow(this._element),T(this._element).addClass(L.SHOW),this._config.focus&&this._enforceFocus();var r=T.Event(N.SHOWN,{relatedTarget:e}),i=function i(){t._config.focus&&t._element.focus(),t._isTransitioning=!1,T(t._element).trigger(r)};if(n){var o=E.getTransitionDurationFromElement(this._element);T(this._dialog).one(E.TRANSITION_END,i).emulateTransitionEnd(o)}else i()},e._enforceFocus=function l(){var t=this;T(document).off(N.FOCUSIN).on(N.FOCUSIN,function(e){document!==e.target&&t._element!==e.target&&0===T(t._element).has(e.target).length&&t._element.focus()})},e._setEscapeEvent=function c(){var t=this;this._isShown&&this._config.keyboard?T(this._element).on(N.KEYDOWN_DISMISS,function(e){e.which===P&&(e.preventDefault(),t.hide())}):this._isShown||T(this._element).off(N.KEYDOWN_DISMISS)},e._setResizeEvent=function f(){var t=this;this._isShown?T(window).on(N.RESIZE,function(e){return t.handleUpdate(e)}):T(window).off(N.RESIZE)},e._hideModal=function p(){var e=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._isTransitioning=!1,this._showBackdrop(function(){T(document.body).removeClass(L.OPEN),e._resetAdjustments(),e._resetScrollbar(),T(e._element).trigger(N.HIDDEN)})},e._removeBackdrop=function d(){this._backdrop&&(T(this._backdrop).remove(),this._backdrop=null)},e._showBackdrop=function h(e){var t=this,n=T(this._element).hasClass(L.FADE)?L.FADE:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className=L.BACKDROP,n&&this._backdrop.classList.add(n),T(this._backdrop).appendTo(document.body),T(this._element).on(N.CLICK_DISMISS,function(e){t._ignoreBackdropClick?t._ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"===t._config.backdrop?t._element.focus():t.hide())}),n&&E.reflow(this._backdrop),T(this._backdrop).addClass(L.SHOW),!e)return;if(!n)return void e();var r=E.getTransitionDurationFromElement(this._backdrop);T(this._backdrop).one(E.TRANSITION_END,e).emulateTransitionEnd(r)}else if(!this._isShown&&this._backdrop){T(this._backdrop).removeClass(L.SHOW);var i=function i(){t._removeBackdrop(),e&&e()};if(T(this._element).hasClass(L.FADE)){var o=E.getTransitionDurationFromElement(this._backdrop);T(this._backdrop).one(E.TRANSITION_END,i).emulateTransitionEnd(o)}else i()}else e&&e()},e._adjustDialog=function m(){var e=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&e&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!e&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},e._resetAdjustments=function g(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},e._checkScrollbar=function y(){var e=document.body.getBoundingClientRect();this._isBodyOverflowing=e.left+e.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},e._setScrollbar=function v(){var i=this;if(this._isBodyOverflowing){var e=[].slice.call(document.querySelectorAll(M.FIXED_CONTENT)),t=[].slice.call(document.querySelectorAll(M.STICKY_CONTENT));T(e).each(function(e,t){var n=t.style.paddingRight,r=T(t).css("padding-right");T(t).data("padding-right",n).css("padding-right",parseFloat(r)+i._scrollbarWidth+"px")}),T(t).each(function(e,t){var n=t.style.marginRight,r=T(t).css("margin-right");T(t).data("margin-right",n).css("margin-right",parseFloat(r)-i._scrollbarWidth+"px")});var n=document.body.style.paddingRight,r=T(document.body).css("padding-right");T(document.body).data("padding-right",n).css("padding-right",parseFloat(r)+this._scrollbarWidth+"px")}},e._resetScrollbar=function _(){var e=[].slice.call(document.querySelectorAll(M.FIXED_CONTENT));T(e).each(function(e,t){var n=T(t).data("padding-right");T(t).removeData("padding-right"),t.style.paddingRight=n||""});var t=[].slice.call(document.querySelectorAll(""+M.STICKY_CONTENT));T(t).each(function(e,t){var n=T(t).data("margin-right");void 0!==n&&T(t).css("margin-right",n).removeData("margin-right")});var n=T(document.body).data("padding-right");T(document.body).removeData("padding-right"),document.body.style.paddingRight=n||""},e._getScrollbarWidth=function b(){var e=document.createElement("div");e.className=L.SCROLLBAR_MEASURER,document.body.appendChild(e);var t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t},i._jQueryInterface=function x(n,r){return this.each(function(){var e=T(this).data(I),t=S({},O,T(this).data(),"object"==typeof n&&n?n:{});if(e||(e=new i(this,t),T(this).data(I,e)),"string"==typeof n){if("undefined"==typeof e[n])throw new TypeError('No method named "'+n+'"');e[n](r)}else t.show&&e.show(r)})},C(i,null,[{key:"VERSION",get:function w(){return k}},{key:"Default",get:function w(){return O}}]),i}(),T(document).on(N.CLICK_DATA_API,M.DATA_TOGGLE,function(e){var t,n=this,r=E.getSelectorFromElement(this);r&&(t=document.querySelector(r));var i=T(t).data(I)?"toggle":S({},T(t).data(),T(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||e.preventDefault();var o=T(t).one(N.SHOW,function(e){e.isDefaultPrevented()||o.one(N.HIDDEN,function(){T(n).is(":visible")&&n.focus()})});a._jQueryInterface.call(T(t),i,this)}),T.fn[A]=a._jQueryInterface,T.fn[A].Constructor=a,T.fn[A].noConflict=function(){return T.fn[A]=n,a._jQueryInterface},a}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("./util.js")):"function"==typeof define&&define.amd?define(["jquery","./util.js"],t):e.Carousel=t(e.jQuery,e.Util)}(this,function(e,b){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}var E,C,S,T,A,t,n,k,I,D,P,O,R,N,L,M,o;return e=e&&e.hasOwnProperty("default")?e["default"]:e,b=b&&b.hasOwnProperty("default")?b["default"]:b,C="carousel",S="4.1.3",A="."+(T="bs.carousel"),t=".data-api",n=(E=e).fn[C],k=37,I=39,P={interval:5e3,keyboard:!0,slide:!(D=500),pause:"hover",wrap:!0},O={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean"},R={NEXT:"next",PREV:"prev",LEFT:"left",RIGHT:"right"},N={SLIDE:"slide"+A,SLID:"slid"+A,KEYDOWN:"keydown"+A,MOUSEENTER:"mouseenter"+A,MOUSELEAVE:"mouseleave"+A,TOUCHEND:"touchend"+A,LOAD_DATA_API:"load"+A+t,CLICK_DATA_API:"click"+A+t},L={CAROUSEL:"carousel",ACTIVE:"active",SLIDE:"slide",RIGHT:"carousel-item-right",LEFT:"carousel-item-left",NEXT:"carousel-item-next",PREV:"carousel-item-prev",ITEM:"carousel-item"},M={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",NEXT_PREV:".carousel-item-next, .carousel-item-prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'},o=function(){function o(e,t){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this._config=this._getConfig(t),this._element=E(e)[0],this._indicatorsElement=this._element.querySelector(M.INDICATORS),this._addEventListeners()}var e=o.prototype;return e.next=function t(){this._isSliding||this._slide(R.NEXT)},e.nextWhenVisible=function n(){!document.hidden&&E(this._element).is(":visible")&&"hidden"!==E(this._element).css("visibility")&&this.next()},e.prev=function r(){this._isSliding||this._slide(R.PREV)},e.pause=function i(e){e||(this._isPaused=!0),this._element.querySelector(M.NEXT_PREV)&&(b.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},e.cycle=function a(e){e||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},e.to=function s(e){var t=this;this._activeElement=this._element.querySelector(M.ACTIVE_ITEM);var n=this._getItemIndex(this._activeElement);if(!(e>this._items.length-1||e<0))if(this._isSliding)E(this._element).one(N.SLID,function(){return t.to(e)});else{if(n===e)return this.pause(),void this.cycle();var r=n<e?R.NEXT:R.PREV;this._slide(r,this._items[e])}},e.dispose=function u(){E(this._element).off(A),E.removeData(this._element,T),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},e._getConfig=function l(e){return e=w({},P,e),b.typeCheckConfig(C,e,O),e},e._addEventListeners=function c(){var t=this;this._config.keyboard&&E(this._element).on(N.KEYDOWN,function(e){return t._keydown(e)}),"hover"===this._config.pause&&(E(this._element).on(N.MOUSEENTER,function(e){return t.pause(e)}).on(N.MOUSELEAVE,function(e){return t.cycle(e)}),"ontouchstart"in document.documentElement&&E(this._element).on(N.TOUCHEND,function(){t.pause(),t.touchTimeout&&clearTimeout(t.touchTimeout),t.touchTimeout=setTimeout(function(e){return t.cycle(e)},D+t._config.interval)}))},e._keydown=function f(e){if(!/input|textarea/i.test(e.target.tagName))switch(e.which){case k:e.preventDefault(),this.prev();break;case I:e.preventDefault(),this.next()}},e._getItemIndex=function p(e){return this._items=e&&e.parentNode?[].slice.call(e.parentNode.querySelectorAll(M.ITEM)):[],this._items.indexOf(e)},e._getItemByDirection=function d(e,t){var n=e===R.NEXT,r=e===R.PREV,i=this._getItemIndex(t),o=this._items.length-1;if((r&&0===i||n&&i===o)&&!this._config.wrap)return t;var a=(i+(e===R.PREV?-1:1))%this._items.length;return-1===a?this._items[this._items.length-1]:this._items[a]},e._triggerSlideEvent=function h(e,t){var n=this._getItemIndex(e),r=this._getItemIndex(this._element.querySelector(M.ACTIVE_ITEM)),i=E.Event(N.SLIDE,{relatedTarget:e,direction:t,from:r,to:n});return E(this._element).trigger(i),i},e._setActiveIndicatorElement=function m(e){if(this._indicatorsElement){var t=[].slice.call(this._indicatorsElement.querySelectorAll(M.ACTIVE));E(t).removeClass(L.ACTIVE);var n=this._indicatorsElement.children[this._getItemIndex(e)];n&&E(n).addClass(L.ACTIVE)}},e._slide=function g(e,t){var n,r,i,o=this,a=this._element.querySelector(M.ACTIVE_ITEM),s=this._getItemIndex(a),u=t||a&&this._getItemByDirection(e,a),l=this._getItemIndex(u),c=Boolean(this._interval);if(e===R.NEXT?(n=L.LEFT,r=L.NEXT,i=R.LEFT):(n=L.RIGHT,r=L.PREV,i=R.RIGHT),u&&E(u).hasClass(L.ACTIVE))this._isSliding=!1;else if(!this._triggerSlideEvent(u,i).isDefaultPrevented()&&a&&u){this._isSliding=!0,c&&this.pause(),this._setActiveIndicatorElement(u);var f=E.Event(N.SLID,{relatedTarget:u,direction:i,from:s,to:l});if(E(this._element).hasClass(L.SLIDE)){E(u).addClass(r),b.reflow(u),E(a).addClass(n),E(u).addClass(n);var p=b.getTransitionDurationFromElement(a);E(a).one(b.TRANSITION_END,function(){E(u).removeClass(n+" "+r).addClass(L.ACTIVE),E(a).removeClass(L.ACTIVE+" "+r+" "+n),o._isSliding=!1,setTimeout(function(){return E(o._element).trigger(f)},0)}).emulateTransitionEnd(p)}else E(a).removeClass(L.ACTIVE),E(u).addClass(L.ACTIVE),this._isSliding=!1,E(this._element).trigger(f);c&&this.cycle()}},o._jQueryInterface=function y(r){return this.each(function(){var e=E(this).data(T),t=w({},P,E(this).data());"object"==typeof r&&(t=w({},t,r));var n="string"==typeof r?r:t.slide;if(e||(e=new o(this,t),E(this).data(T,e)),"number"==typeof r)e.to(r);else if("string"==typeof n){if("undefined"==typeof e[n])throw new TypeError('No method named "'+n+'"');e[n]()}else t.interval&&(e.pause(),e.cycle())})},o._dataApiClickHandler=function v(e){var t=b.getSelectorFromElement(this);if(t){var n=E(t)[0];if(n&&E(n).hasClass(L.CAROUSEL)){var r=w({},E(n).data(),E(this).data()),i=this.getAttribute("data-slide-to");i&&(r.interval=!1),o._jQueryInterface.call(E(n),r),i&&E(n).data(T).to(i),e.preventDefault()}}},x(o,null,[{key:"VERSION",get:function _(){return S}},{key:"Default",get:function _(){return P}}]),o}(),E(document).on(N.CLICK_DATA_API,M.DATA_SLIDE,
o._dataApiClickHandler),E(window).on(N.LOAD_DATA_API,function(){for(var e=[].slice.call(document.querySelectorAll(M.DATA_RIDE)),t=0,n=e.length;t<n;t++){var r=E(e[t]);o._jQueryInterface.call(r,r.data())}}),E.fn[C]=o._jQueryInterface,E.fn[C].Constructor=o,E.fn[C].noConflict=function(){return E.fn[C]=n,o._jQueryInterface},o}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("./util.js")):"function"==typeof define&&define.amd?define(["jquery","./util.js"],t):e.Tab=t(e.jQuery,e.Util)}(this,function(e,c){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var f,t,s,p,n,i,a,d,h,m,u;return e=e&&e.hasOwnProperty("default")?e["default"]:e,c=c&&c.hasOwnProperty("default")?c["default"]:c,t="tab",s="4.1.3",n="."+(p="bs.tab"),i=".data-api",a=(f=e).fn[t],d={HIDE:"hide"+n,HIDDEN:"hidden"+n,SHOW:"show"+n,SHOWN:"shown"+n,CLICK_DATA_API:"click"+n+i},h={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",DISABLED:"disabled",FADE:"fade",SHOW:"show"},m={DROPDOWN:".dropdown",NAV_LIST_GROUP:".nav, .list-group",ACTIVE:".active",ACTIVE_UL:"> li > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"},u=function(){function r(e){this._element=e}var e=r.prototype;return e.show=function l(){var n=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&f(this._element).hasClass(h.ACTIVE)||f(this._element).hasClass(h.DISABLED))){var e,r,t=f(this._element).closest(m.NAV_LIST_GROUP)[0],i=c.getSelectorFromElement(this._element);if(t){var o="UL"===t.nodeName?m.ACTIVE_UL:m.ACTIVE;r=(r=f.makeArray(f(t).find(o)))[r.length-1]}var a=f.Event(d.HIDE,{relatedTarget:this._element}),s=f.Event(d.SHOW,{relatedTarget:r});if(r&&f(r).trigger(a),f(this._element).trigger(s),!s.isDefaultPrevented()&&!a.isDefaultPrevented()){i&&(e=document.querySelector(i)),this._activate(this._element,t);var u=function u(){var e=f.Event(d.HIDDEN,{relatedTarget:n._element}),t=f.Event(d.SHOWN,{relatedTarget:r});f(r).trigger(e),f(n._element).trigger(t)};e?this._activate(e,e.parentNode,u):u()}}},e.dispose=function t(){f.removeData(this._element,p),this._element=null},e._activate=function u(e,t,n){var r=this,i=("UL"===t.nodeName?f(t).find(m.ACTIVE_UL):f(t).children(m.ACTIVE))[0],o=n&&i&&f(i).hasClass(h.FADE),a=function a(){return r._transitionComplete(e,i,n)};if(i&&o){var s=c.getTransitionDurationFromElement(i);f(i).one(c.TRANSITION_END,a).emulateTransitionEnd(s)}else a()},e._transitionComplete=function a(e,t,n){if(t){f(t).removeClass(h.SHOW+" "+h.ACTIVE);var r=f(t.parentNode).find(m.DROPDOWN_ACTIVE_CHILD)[0];r&&f(r).removeClass(h.ACTIVE),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!1)}if(f(e).addClass(h.ACTIVE),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!0),c.reflow(e),f(e).addClass(h.SHOW),e.parentNode&&f(e.parentNode).hasClass(h.DROPDOWN_MENU)){var i=f(e).closest(m.DROPDOWN)[0];if(i){var o=[].slice.call(i.querySelectorAll(m.DROPDOWN_TOGGLE));f(o).addClass(h.ACTIVE)}e.setAttribute("aria-expanded",!0)}n&&n()},r._jQueryInterface=function i(n){return this.each(function(){var e=f(this),t=e.data(p);if(t||(t=new r(this),e.data(p,t)),"string"==typeof n){if("undefined"==typeof t[n])throw new TypeError('No method named "'+n+'"');t[n]()}})},o(r,null,[{key:"VERSION",get:function n(){return s}}]),r}(),f(document).on(d.CLICK_DATA_API,m.DATA_TOGGLE,function(e){e.preventDefault(),u._jQueryInterface.call(f(this),"show")}),f.fn[t]=u._jQueryInterface,f.fn[t].Constructor=u,f.fn[t].noConflict=function(){return f.fn[t]=a,u._jQueryInterface},u}),window.TinyMCERails={configuration:{"default":{}},initialize:function(e,t){if("undefined"!=typeof tinyMCE){var n=TinyMCERails.configuration[e||"default"];n=TinyMCERails._merge(n,t),tinyMCE.init(n)}else setTimeout(function(){TinyMCERails.initialize(e,t)},50)},setupTurbolinks:function(){document.addEventListener("turbolinks:before-render",function(){tinymce.remove()})},_merge:function(){for(var e={},t=0;t<arguments.length;++t){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&("[object Object]"===Object.prototype.toString.call(n[r])?e[r]=TinyMCERails._merge(e[r],n[r]):e[r]=n[r])}return e}},"undefined"!=typeof Turbolinks&&Turbolinks.supported&&TinyMCERails.setupTurbolinks(),window.tinymce=window.tinymce||{base:"/assets/tinymce",suffix:""},function(){"use strict";function e(){function n(e,t){return r.push(e+" ")>It.cacheLength&&delete n[r.shift()],n[e+" "]=t}var r=[];return n}function n(e){return e[dn]=!0,e}function l(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||wn)-(~e.sourceIndex||wn);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function t(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function r(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function i(a){return n(function(o){return o=+o,n(function(e,t){for(var n,r=a([],e.length,o),i=r.length;i--;)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function m(e){return e&&typeof e.getElementsByTagName!==xn&&e}function o(){}function g(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function f(a,e,t){var s=e.dir,u=t&&"parentNode"===s,l=gn++;return e.first?function(e,t,n){for(;e=e[s];)if(1===e.nodeType||u)return a(e,t,n)}:function(e,t,n){var r,i,o=[mn,l];if(n){for(;e=e[s];)if((1===e.nodeType||u)&&a(e,t,n))return!0}else for(;e=e[s];)if(1===e.nodeType||u){if((r=(i=e[dn]||(e[dn]={}))[s])&&r[0]===mn&&r[1]===l)return o[2]=r[2];if((i[s]=o)[2]=a(e,t,n))return!0}}}function p(i){return 1<i.length?function(e,t,n){for(var r=i.length;r--;)if(!i[r](e,t,n))return!1;return!0}:i[0]}function v(e,t,n){for(var r=0,i=t.length;r<i;r++)$n(e,t[r],n);return n}function b(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function _(d,h,m,g,y,e){return g&&!g[dn]&&(g=_(g)),y&&!y[dn]&&(y=_(y,e)),n(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||v(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:b(c,s,d,n,r),p=m?y||(e?d:l||g)?[]:t:f;if(m&&m(f,p,n,r),g)for(i=b(p,u),g(i,[],n,r),o=i.length;o--;)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a));if(e){if(y||d){if(y){for(i=[],o=p.length;o--;)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}for(o=p.length;o--;)(a=p[o])&&-1<(i=y?In.call(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=b(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):An.apply(t,p)})}function d(e){for(var r,t,n,i=e.length,o=It.relative[e[0].type],a=o||It.relative[" "],s=o?1:0,u=f(function(e){return e===r},a,!0),l=f(function(e){return-1<In.call(r,e)},a,!0),c=[function(e,t,n){return!o&&(n||t!==Lt)||((r=t).nodeType?u(e,t,n):l(e,t,n))}];s<i;s++)if(t=It.relative[e[s].type])c=[f(p(c),t)];else{if((t=It.filter[e[s].type].apply(null,e[s].matches))[dn]){for(n=++s;n<i&&!It.relative[e[n].type];n++);return _(1<s&&p(c),1<s&&g(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(Ln,"$1"),t,s<n&&d(e.slice(s,n)),n<i&&d(e=e.slice(n)),n<i&&g(e))}c.push(t)}return p(c)}function a(g,y){var v=0<y.length,_=0<g.length,e=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=Lt,d=e||_&&It.find.TAG("*",i),h=mn+=null==p?1:Math.random()||.1,m=d.length;for(i&&(Lt=t!==Ft&&t);l!==m&&null!=(o=d[l]);l++){if(_&&o){for(a=0;s=g[a++];)if(s(o,t,n)){r.push(o);break}i&&(mn=h)}v&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,v&&l!==u){for(a=0;s=y[a++];)s(c,f,t,n);if(e){if(0<u)for(;l--;)c[l]||f[l]||(f[l]=Sn.call(r));f=b(f)}An.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&$n.uniqueSort(r)}return i&&(mn=h,Lt=p),c};return v?n(e):e}function s(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),i=e.isiOS()&&!r,o=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,s=r||o||a&&!0===/mobile/i.test(n),u=e.isiOS()||e.isAndroid(),l=u&&!s,c=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:ye(r),isiPhone:ye(i),isTablet:ye(s),isPhone:ye(l),isTouch:ye(u),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:ye(c)}}function be(d,e){var h,m=0,g={};h=(e=e||{}).maxLoadTime||5e3;var y=function(e){d.getElementsByTagName("head")[0].appendChild(e)},n=function(e,t,n){var i,r,o,a,s=function(){for(var e=a.passed,t=e.length;t--;)e[t]();a.status=2,a.passed=[],a.failed=[]},u=function(){for(var e=a.failed,t=e.length;t--;)e[t]();a.status=3,a.passed=[],a.failed=[]},l=function(){var e=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(e&&parseInt(e[1],10)<536)},c=function(e,t){e()||((new Date).getTime()-o<h?Qt.setTimeout(t):u())},f=function(){c(function(){for(var e,t,n=d.styleSheets,r=n.length;r--;)if((t=(e=n[r]).ownerNode?e.ownerNode:e.owningElement)&&t.id===i.id)return s(),!0},f)},p=function(){c(function(){try{var e=r.sheet.cssRules;return s(),!!e}catch(t){}},p)};if(e=yr._addCacheSuffix(e),g[e]?a=g[e]:(a={passed:[],failed:[]},g[e]=a),t&&a.passed.push(t),n&&a.failed.push(n),1!==a.status)if(2!==a.status)if(3!==a.status){if(a.status=1,(i=d.createElement("link")).rel="stylesheet",i.type="text/css",i.id="u"+m++,i.async=!1,i.defer=!1,o=(new Date).getTime(),"onload"in i&&!l())i.onload=f,i.onerror=u;else{if(0<navigator.userAgent.indexOf("Firefox"))return(r=d.createElement("style")).textContent='@import "'+e+'"',p(),void y(r);f()}y(i),i.href=e}else u();else s()},t=function(t){return ga.nu(function(e){n(t,ge(e,ye(xa.value(t))),ge(e,ye(xa.error(t))))})},i=function(e){return e.fold(ve,ve)};return{load:n,loadAll:function(e,n,r){va(Xe(e,t)).get(function(e){var t=Ye(e,function(e){return e.isValue()});0<t.fail.length?r(t.fail.map(i)):n(t.pass.map(i))})}}}function xe(e,s){var t=e,n=function(e,t,n,r){var i,o;if(e){if(!r&&e[t])return e[t];if(e!==s){if(i=e[n])return i;for(o=e.parentNode;o&&o!==s;o=o.parentNode)if(i=o[n])return i}}},r=function(e,t,n,r){var i,o,a;if(e){if(i=e[n],s&&i===s)return;if(i){if(!r)for(a=i[t];a;a=a[t])if(!a[t])return a;return i}if((o=e.parentNode)&&o!==s)return o}};this.current=function(){return t},this.next=function(e){return t=n(t,"firstChild","nextSibling",e)},this.prev=function(e){return t=n(t,"lastChild","previousSibling",e)},this.prev2=function(e){return t=r(t,"lastChild","previousSibling",e)}}function we(o){var e,t,n,r,i,a,s,u,l,c,f,p,d,E={},h={},C=[],m={},g={},y=function(e,t,n){var r=o[e];return r?r=Ts(r,/[, ]/,Ts(r.toUpperCase(),/[, ]/)):(r=Cs[e])||(r=Ts(t," ",Ts(t.toUpperCase()," ")),r=ks(r,n),Cs[e]=r),r};n=Os((o=o||{}).schema),!1===o.verify_html&&(o.valid_elements="*[*]"),e=Rs(o.valid_styles),t=Rs(o.invalid_styles,"map"),u=Rs(o.valid_classes,"map"),r=y("whitespace_elements","pre script noscript style textarea video audio iframe object code"),i=y("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),a=y("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),s=y("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),c=y("non_empty_elements","td th iframe video audio object script pre code",a),f=y("move_caret_before_on_enter_elements","table",c),p=y("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),l=y("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",p),d=y("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),As((o.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(e){g[e]=new RegExp("</"+e+"[^>]*>","gi")});var S=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},v=function(e){var t,n,r,i,o,a,s,u,l,c,f,p,d,h,m,g,y,v,_,b=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,x=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,w=/[*?+]/;if(e)for(e=Ps(e,","),E["@"]&&(g=E["@"].attributes,y=E["@"].attributesOrder),t=0,n=e.length;t<n;t++)if(o=b.exec(e[t])){if(h=o[1],l=o[2],m=o[3],u=o[5],a={attributes:p={},attributesOrder:d=[]},"#"===h&&(a.paddEmpty=!0),"-"===h&&(a.removeEmpty=!0),"!"===o[4]&&(a.removeEmptyAttrs=!0),g){for(v in g)p[v]=g[v];d.push.apply(d,y)}if(u)for(r=0,i=(u=Ps(u,"|")).length;r<i;r++)if(o=x.exec(u[r])){if(s={},f=o[1],c=o[2].replace(/[\\:]:/g,":"),h=o[3],_=o[4],"!"===f&&(a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(c),s.required=!0),"-"===f){delete p[c],d.splice(Ds(d,c),1);continue}h&&("="===h&&(a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:c,value:_}),s.defaultValue=_),":"===h&&(a.attributesForced=a.attributesForced||[],a.attributesForced.push({name:c,value:_}),s.forcedValue=_),"<"===h&&(s.validValues=Ts(_,"?"))),w.test(c)?(a.attributePatterns=a.attributePatterns||[],s.pattern=S(c),a.attributePatterns.push(s)):(p[c]||d.push(c),p[c]=s)}g||"@"!==l||(g=p,y=d),m&&(a.outputName=l,E[m]=a),w.test(l)?(a.pattern=S(l),C.push(a)):E[l]=a}},_=function(e){E={},C=[],v(e),As(n,function(e,t){h[t]=e.children})},b=function(e){var a=/^(~)?(.+)$/;e&&(Cs.text_block_elements=Cs.block_elements=null,As(Ps(e,","),function(e){var t=a.exec(e),n="~"===t[1],r=n?"span":"div",i=t[2];if(h[i]=h[r],m[i]=r,n||(l[i.toUpperCase()]={},l[i]={}),!E[i]){var o=E[r];delete(o=ks({},o)).removeEmptyAttrs,delete o.removeEmpty,E[i]=o}As(h,function(e,t){e[r]&&(h[t]=e=ks({},h[t]),e[i]=e[r])})}))},x=function(e){var i=/^([+\-]?)(\w+)\[([^\]]+)\]$/;Cs[o.schema]=null,e&&As(Ps(e,","),function(e){var t,n,r=i.exec(e);r&&(n=r[1],t=n?h[r[2]]:h[r[2]]={"#comment":{}},t=h[r[2]],As(Ps(r[3],"|"),function(e){"-"===n?delete t[e]:t[e]={}}))})},w=function(e){var t,n=E[e];if(n)return n;for(t=C.length;t--;)if((n=C[t]).pattern.test(e))return n};o.valid_elements?_(o.valid_elements):(As(n,function(e,t){E[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},h[t]=e.children}),"html5"!==o.schema&&As(Ps("strong/b em/i"),function(e){e=Ps(e,"/"),E[e[1]].outputName=e[0]}),As(Ps("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){E[e]&&(E[e].removeEmpty=!0)}),As(Ps("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(e){E[e].paddEmpty=!0}),As(Ps("span"),function(e){E[e].removeEmptyAttrs=!0})),b(o.custom_elements),x(o.valid_children),v(o.extended_valid_elements),x("+ol[ul|ol],+ul[ul|ol]"),As({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,t){E[t]&&(E[t].parentsRequired=Ps(e))}),o.invalid_elements&&As(Is(o.invalid_elements),function(e){E[e]&&delete E[e]}),w("span")||v("span[!data-mce-type|*]");var T=function(e,t){var n,r,i=w(e);if(i){if(!t)return!0;if(i.attributes[t])return!0;if(n=i.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1};return{children:h,elements:E,getValidStyles:function(){return e},getValidClasses:function(){return u},getBlockElements:function(){return l},getInvalidStyles:function(){return t},getShortEndedElements:function(){return a},getTextBlockElements:function(){return p},getTextInlineElements:function(){return d},getBoolAttrs:function(){return s},getElementRule:w,getSelfClosingElements:function(){return i},getNonEmptyElements:function(){return c},getMoveCaretBeforeOnEnterElements:function(){return f},getWhiteSpaceElements:function(){return r},getSpecialElements:function(){return g},isValidChild:function(e,t){var n=h[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},isValid:T,getCustomElements:function(){return m},addValidElements:v,setValidElements:_,addCustomElements:b,addValidChildren:x}}function Ee(g,e){var y,t,s,u,v=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,_=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,b=/\s*([^:]+):\s*([^;]+);?/g,x=/\s+$/,w={},E="\ufeff";for(g=g||{},e&&(s=e.getValidStyles(),u=e.getInvalidStyles()),t=("\\\" \\' \\; \\: ; : "+E).split(" "),y=0;y<t.length;y++)w[t[y]]=E+y,w[E+y]=t[y];return{toHex:function(e){return e.replace(v,Ns)},parse:function(e){var t,n,r,i,u={},s=g.url_converter,l=g.url_converter_scope||this,o=function(e,t,n){var r,i,o,a;if((r=u[e+"-top"+t])&&(i=u[e+"-right"+t])&&(o=u[e+"-bottom"+t])&&(a=u[e+"-left"+t])){var s=[r,i,o,a];for(y=s.length-1;y--&&s[y]===s[y+1];);-1<y&&n||(u[e+t]=-1===y?s[0]:s.join(" "),delete u[e+"-top"+t],delete u[e+"-right"+t],delete u[e+"-bottom"+t],delete u[e+"-left"+t])}},a=function(e){var t,n=u[e];if(n){for(t=(n=n.split(" ")).length;t--;)if(n[t]!==n[0])return!1;return u[e]=n[0],!0}},c=function(e,t,n,r){a(t)&&a(n)&&a(r)&&(u[e]=u[t]+" "+u[n]+" "+u[r],delete u[t],delete u[n],delete u[r])},f=function(e){return i=!0,w[e]},p=function(e,t){return i&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return w[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e},d=function(e){return String.fromCharCode(parseInt(e.slice(1),16))},h=function(e){return e.replace(/\\[0-9a-f]+/gi,d)},m=function(e,t,n,r,i,o){if(i=i||o)return"'"+(i=p(i)).replace(/\'/g,"\\'")+"'";if(t=p(t||n||r),!g.allow_script_urls){var a=t.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(a))return"";if(!g.allow_svg_data_urls&&/^data:image\/svg/i.test(a))return""}return s&&(t=s.call(l,t,"style")),"url('"+t.replace(/\'/g,"\\'")+"')"};if(e){for(e=(e=e.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,f).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,f)});t=b.exec(e);)if(b.lastIndex=t.index+t[0].length,n=t[1].replace(x,"").toLowerCase(),r=t[2].replace(x,""),n&&r){if(n=h(n),r=h(r),-1!==n.indexOf(E)||-1!==n.indexOf('"'))continue;if(!g.allow_script_urls&&("behavior"===n||/expression\s*\(|\/\*|\*\//.test(r)))continue;"font-weight"===n&&"700"===r?r="bold":"color"!==n&&"background-color"!==n||(r=r.toLowerCase()),r=(r=r.replace(v,Ns)).replace(_,m),u[n]=i?p(r,!0):r}o("border","",!0),o("border","-width"),o("border","-color"),o("border","-style"),o("padding",""),o("margin",""),c("border","border-width","border-style","border-color"),"medium none"===u.border&&delete u.border,"none"===u["border-image"]&&delete u["border-image"]}return u},serialize:function(o,e){var t,n,a="",r=function(e){var t,n,r,i;if(t=s[e])for(n=0,r=t.length;n<r;n++)e=t[n],(i=o[e])&&(a+=(0<a.length?" ":"")+e+": "+i+";")},i=function(e,t){var n;return!((n=u["*"])&&n[e]||(n=u[t])&&n[e])};if(e&&s)r("*"),r(e);else for(t in o)!(n=o[t])||u&&!i(t,e)||(a+=(0<a.length?" ":"")+t+": "+n+";");return a}}}function Ce(a,s){var u,l=this;void 0===s&&(s={});var r={},o=window,i={},t=0,e=!0,c=!0,n=be(a),f=[],p=s.schema?s.schema:we({}),d=Ee({url_converter:s.url_converter,url_converter_scope:s.url_converter_scope},s.schema),h=s.ownEvents?new pn(s.proxy):pn.Event,m=p.getBlockElements(),g=Br.overrideDefaults(function(){return{context:a,element:_e.getRoot()}}),y=function(e){if("string"==typeof e)return!!m[e];if(e){var t=e.nodeType;if(t)return!(1!==t||!m[e.nodeName])}return!1},v=function(e){if(e&&a&&"string"==typeof e){var t=a.getElementById(e);return t&&t.id!==e?a.getElementsByName(e)[1]:t}return e},_=function(e){return"string"==typeof e&&(e=v(e)),g(e)},b=function(e,t,n){var r,i,o=_(e);return o.length&&(i=(r=u[t])&&r.get?r.get(o,t):o.attr(t)),void 0===i&&(i=n||""),i},x=function(e){var t=v(e);return t?t.attributes:[]},w=function(e,t,n){var r,i;""===n&&(n=null);var o=_(e);r=o.attr(t),o.length&&((i=u[t])&&i.set?i.set(o,n,t):o.attr(t,n),r!==n&&s.onSetAttrib&&s.onSetAttrib({attrElm:o,attrName:t,attrValue:n}))},E=function(t,e){if(!Bs||1!==t.nodeType||e)return t.cloneNode(e);if(!e){var n=a.createElement(t.nodeName);return Ls(x(t),function(e){w(n,e.nodeName,b(t,e.nodeName))}),n}return null},C=function(){return s.root_element||a.body},S=function(e){var t=e||o,n=t.document,r=c?n.documentElement:n.body;return{x:t.pageXOffset||r.scrollLeft,y:t.pageYOffset||r.scrollTop,w:t.innerWidth||r.clientWidth,h:t.innerHeight||r.clientHeight}},T=function(e,t){return la.getPos(a.body,v(e),t)},A=function(e,t,n){var r=_(e).css(t,n);s.update_styles&&Us(d,r)},k=function(e,t){var n=_(e).css(t);s.update_styles&&Us(d,n)},I=function(e,t,n){var r=_(e);return n?r.css(t):("float"===(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}))&&(t=Gt.ie&&Gt.ie<12?"styleFloat":"cssFloat"),r[0]&&r[0].style?r[0].style[t]:undefined)},D=function(e){var t,n;return e=v(e),t=I(e,"width"),n=I(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},P=function(e){var t,n;return e=v(e),t=T(e),n=D(e),{x:t.x,y:t.y,w:n.w,h:n.h}},O=function(e,t){var n;if(!e)return!1;if(!Array.isArray(e)){if("*"===t)return 1===e.nodeType;if(zs.test(t)){var r=t.toLowerCase().split(/,/),i=e.nodeName.toLowerCase();for(n=r.length-1;0<=n;n--)if(r[n]===i)return!0;return!1}if(e.nodeType&&1!==e.nodeType)return!1}var o=Array.isArray(e)?e:[e];return 0<$n(t,o[0].ownerDocument||o[0],null,o).length},R=function(e,t,n,r){var i,o=[],a=v(e);for(r=r===undefined,n=n||("BODY"!==C().nodeName?C().parentNode:null),yr.is(t,"string")&&(t="*"===(i=t)?function(e){return 1===e.nodeType}:function(e){return O(e,i)});a&&a!==n&&a.nodeType&&9!==a.nodeType;){if(!t||"function"==typeof t&&t(a)){if(!r)return[a];o.push(a)}a=a.parentNode}return r?o:null},N=function(e,t,n){var r=R(e,t,n,!1);return r&&0<r.length?r[0]:null},L=function(e,t,n){var r=t;if(e)for("string"==typeof t&&(r=function(e){return O(e,t)}),e=e[n];e;e=e[n])if("function"==typeof r&&r(e))return e;return null},M=function(e,t){return L(e,t,"nextSibling")},B=function(e,t){return L(e,t,"previousSibling")},z=function(e,t){return $n(e,v(t)||s.root_element||a,[])},F=function(e,n,r){var i,t="string"==typeof e?v(e):e;if(!t)return!1;if(yr.isArray(t)&&(t.length||0===t.length))return i=[],Ls(t,function(e,t){e&&("string"==typeof e&&(e=v(e)),i.push(n.call(r,e,t)))}),i;var o=r||l;return n.call(o,t)},j=function(e,t){_(e).each(function(e,n){Ls(t,function(e,t){w(n,t,e)})})},U=function(e,r){var t=_(e);Bs?t.each(function(e,t){if(!1!==t.canHaveHTML){for(;t.firstChild;)t.removeChild(t.firstChild);try{t.innerHTML="<br>"+r,t.removeChild(t.firstChild)}catch(n){Br("<div></div>").html("<br>"+r).contents().slice(1).appendTo(t)}return r}}):t.html(r)},V=function(e,n,r,i,o){return F(e,function(e){var t="string"==typeof n?a.createElement(n):n;return j(t,r),i&&("string"!=typeof i&&i.nodeType?t.appendChild(i):"string"==typeof i&&U(t,i)),o?t:e.appendChild(t)})},q=function(e,t,n){return V(a.createElement(e),e,t,n,!0)},H=Es.decode,W=Es.encodeAllRaw,G=function(e){var t,n=a.createElement("div"),r=a.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)r.appendChild(t);return r},Z=function(e,t){var n=_(e);return t?n.each(function(){for(var e;e=this.firstChild;)3===e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():n.remove(),1<n.length?n.toArray():n[0]},X=function(e){return d.parse(e)},K=function(e,t){return d.serialize(e,t)},$=function(e){var t,n;if(_e!==Ce.DOM&&a===document){if(r[e])return;r[e]=!0}(n=a.getElementById("mceDefaultStyles"))||((n=a.createElement("style")).id="mceDefaultStyles",n.type="text/css",(t=a.getElementsByTagName("head")[0]).firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(a.createTextNode(e))},Y=function(e){var n;_e===Ce.DOM||a!==document?(e||(e=""),n=a.getElementsByTagName("head")[0],Ls(e.split(","),function(e){var t;e=yr._addCacheSuffix(e),i[e]||(i[e]=!0,t=q("link",{rel:"stylesheet",href:e}),n.appendChild(t))})):Ce.DOM.loadCSS(e)},J=function(e,t,n){_(e).toggleClass(t,n).each(function(){""===this.className&&Br(this).attr("class",null)})},Q=function(e,t){_(e).addClass(t)},ee=function(e,t){return _(e).hasClass(t)},te=function(e){_(e).show()},ne=function(e){_(e).hide()},re=function(e){return"none"===_(e).css("display")},ie=function(e){var t="string"==typeof e?v(e):e;return os.isElement(t)?t.outerHTML:Br("<div></div>").append(Br(t).clone()).html()},oe=function(e,t){_(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}Z(Br(this).html(t),!0)})},ae=function(e,t){var r=v(t);return F(e,function(e){var t,n;return t=r.parentNode,(n=r.nextSibling)?t.insertBefore(e,n):t.appendChild(e),e})},se=function(t,e,n){return F(e,function(e){return yr.is(e,"array")&&(t=t.cloneNode(!0)),n&&Ls(Ms(e.childNodes),function(e){t.appendChild(e)}),e.parentNode.replaceChild(t,e)})},ue=function(t,e){var n;return t.nodeName!==e.toUpperCase()&&(n=q(e),Ls(x(t),function(e){w(n,e.nodeName,b(t,e.nodeName))}),se(n,t,!0)),n||t},le=function(e){return d.toHex(yr.trim(e))},ce=function(e,t){var n,r,i,o,a,s,u=0;if(e=e.firstChild){a=new xe(e,e.parentNode),t=t||(p?p.getNonEmptyElements():null),o=p?p.getWhiteSpaceElements():{};do{if(i=e.nodeType,os.isElement(e)){var l=e.getAttribute("data-mce-bogus");if(l){e=a.next("all"===l);continue}if(s=e.nodeName.toLowerCase(),t&&t[s]){if("br"===s){u++,e=a.next();continue}return!1}for(n=(r=x(e)).length;n--;)if("name"===(s=r[n].nodeName)||"data-mce-bookmark"===s)return!1}if(8===i)return!1;if(3===i&&!Fs.test(e.nodeValue))return!1;if(3===i&&e.parentNode&&o[e.parentNode.nodeName]&&Fs.test(e.nodeValue))return!1;e=a.next()}while(e)}return u<=1},fe=function(){return a.createRange()},pe=function(e,t,n){var r,i,o,a=fe();if(e&&t)return a.setStart(e.parentNode,Vs(e)),a.setEnd(t.parentNode,Vs(t)),r=a.extractContents(),(a=fe()).setStart(t.parentNode,Vs(t)+1),a.setEnd(e.parentNode,Vs(e)+1),i=a.extractContents(),(o=e.parentNode).insertBefore(ls.trimNode(_e,r),e),n?o.insertBefore(n,e):o.insertBefore(t,e),o.insertBefore(ls.trimNode(_e,i),e),Z(e),n||t},de=function(e,t,n,r){if(yr.isArray(e)){for(var i=e.length;i--;)e[i]=de(e[i],t,n,r);return e}return!s.collect||e!==a&&e!==o||f.push([e,t,n,r]),h.bind(e,t,n,r||_e)},he=function(e,t,n){var r;if(yr.isArray(e)){for(r=e.length;r--;)e[r]=he(e[r],t,n);return e}if(f&&(e===a||e===o))for(r=f.length;r--;){var i=f[r];e!==i[0]||t&&t!==i[1]||n&&n!==i[2]||h.unbind(i[0],i[1],i[2])}return h.unbind(e,t,n)},me=function(e,t,n){return h.fire(e,t,n)},ge=function(e){if(e&&os.isElement(e)){var t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},ye=function(e){for(var t=C(),n=null;e&&e!==t&&null===(n=ge(e));e=e.parentNode);return n},ve=function(){if(f)for(var e=f.length;e--;){var t=f[e];h.unbind(t[0],t[1],t[2])}$n.setDocument&&$n.setDocument()},_e={doc:a,settings:s,win:o,files:i,stdMode:e,boxModel:c,styleSheetLoader:n,boundEvents:f,styles:d,schema:p,events:h,isBlock:y,$:g,$$:_,root:null,clone:E,getRoot:C,getViewPort:S,getRect:P,getSize:D,getParent:N,getParents:R,get:v,getNext:M,getPrev:B,select:z,is:O,add:V,create:q,createHTML:function(e,t,n){var r,i="";for(r in i+="<"+e,t)t.hasOwnProperty(r)&&null!==t[r]&&"undefined"!=typeof t[r]&&(i+=" "+r+'="'+W(t[r])+'"');return void 0!==n?i+">"+n+"</"+e+">":i+" />"},createFragment:G,remove:Z,setStyle:A,getStyle:I,setStyles:k,removeAllAttribs:function(e){return F(e,function(e){var t,n=e.attributes;for(t=n.length-1;0<=t;t--)e.removeAttributeNode(n.item(t))})},setAttrib:w,setAttribs:j,getAttrib:b,getPos:T,parseStyle:X,serializeStyle:K,addStyle:$,loadCSS:Y,addClass:Q,removeClass:function(e,t){J(e,t,!1)},hasClass:ee,toggleClass:J,show:te,hide:ne,isHidden:re,uniqueId:function(e){return(e||"mce_")+t++},setHTML:U,getOuterHTML:ie,setOuterHTML:oe,decode:H,encode:W,insertAfter:ae,replace:se,rename:ue,findCommonAncestor:function(e,t){for(var n,r=e;r;){for(n=t;n&&r!==n;)n=n.parentNode;if(r===n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},toHex:le,run:F,getAttribs:x,isEmpty:ce,createRng:fe,nodeIndex:Vs,split:pe,bind:de,unbind:he,fire:me,getContentEditable:ge,getContentEditableParent:ye,destroy:ve,isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset}};return u=js(d,s,function(){return _e}),_e}function h(){var r=this,i=[],a={},s={},o=[],u=function(e){var t;return s[e]&&(t=s[e].dependencies),t||[]},e=function(t,e,n){i.push(e),s[t]={instance:e,dependencies:n};var r=Ye(o,function(e){return e.name===t});return o=r.fail,$s(r.pass,function(e){e.callback()}),e},t=function(e){delete a[e],delete s[e]},l=function(e,t){return"object"==typeof t?t:"string"==typeof e?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}},c=function(e,n,t,r){var i=u(e);$s(i,function(e){var t=l(n,e);f(t.resource,t,undefined,undefined)}),t&&(r?t.call(r):t.call(Xs))},f=function(e,t,n,r,i){if(!a[e]){var o="string"==typeof t?t:t.prefix+t.resource+t.suffix;0!==o.indexOf("/")&&-1===o.indexOf("://")&&(o=h.baseURL+"/"+o),a[e]=o.substring(0,o.lastIndexOf("/")),s[e]?c(e,t,n,r):Xs.ScriptLoader.add(o,function(){return c(e,t,n,r)},r,i)}},n=function(e,t){s.hasOwnProperty(e)?t():o.push({name:e,callback:t})};return{items:i,urls:a,lookup:s,_listeners:o,get:function(e){return s[e]?s[e].instance:undefined},dependencies:u,requireLangPack:function(e,t){var n=h.language;if(n&&!1!==h.languageLoad){if(t)if(-1!==(t=","+t+",").indexOf(","+n.substr(0,2)+","))n=n.substr(0,2);else if(-1===t.indexOf(","+n+","))return;Xs.ScriptLoader.add(a[e]+"/langs/"+n+".js")}},add:e,remove:t,createUrl:l,addComponents:function(e,t){var n=r.urls[e];$s(t,function(e){Xs.ScriptLoader.add(n+"/"+e)})},load:f,waitFor:n}}function u(e,t,n){var r=n||!1,i=function(){t(),r=!0},o=function(){e(),r=!1};return{on:i,off:o,toggle:function(){(r?o:i)()},isOn:function(){return r}}}function c(e,t,n,r,i){return e(n,r)?Ne.some(n):Ve(i)&&i(n)?Ne.none():t(n,r,i)}function y(t,n,e){var r=function(){return uc(t),0===n},i=function(){return uc(t)?n>=t.data.length:n>=t.childNodes.length},o=function(){var e;return(e=pc(t.ownerDocument)).setStart(t,n),e.setEnd(t,n),e},a=function(){return e||(e=xc(y(t,n))),e},s=function(){return 0<a().length},u=function(e){return e&&t===e.container()&&n===e.offset()},l=function(e){return fc(t,e?n-1:n)};return{container:al.constant(t),offset:al.constant(n),toRange:o,getClientRects:a,isVisible:s,isAtStart:r,isAtEnd:i,isEqual:u,getNode:l}}function x(n,r){var e=function(e){if(!n(e))throw new Error("Can only get "+r+" value of a "+r+" node");return a(e).getOr("")},t=function(e){try{return i(e)}catch(t){return Ne.none()}},i=function(e){return n(e)?Ne.from(e.dom().nodeValue):Ne.none()},o=Li.detect().browser,a=o.isIE()&&10===o.version.major?t:i;return{get:e,getOption:a,set:function(e,t){if(!n(e))throw new Error("Can only set raw "+r+" value of a "+r+" node");e.dom().nodeValue=t}}}function w(r){var i=Zu();Gu(r,i);var n=Wu(r,i);return{register:function(e,t){i.register(e,t)},annotate:function(t,n){i.lookup(t).each(function(e){Ch(r,t,e,n)})},annotationChanged:function(e,t){n.addListener(e,t)},remove:function(e){Uu(r,Ne.some(e)).each(function(e){var t=e.elements;Ke(t,lu.unwrap)})},getAll:function(e){var t=Hu(r,e);return Qi(t,function(e){return Xe(e,function(e){return e.dom()})})}}}function E(e){var s,u,l,c,f,p=[];return s=(e=e||{}).indent,u=Kh(e.indent_before||""),l=Kh(e.indent_after||""),c=Es.getEncodeFunc(e.entity_encoding||"raw",e.entities),f="html"===e.element_format,{start:function(e,t,n){var r,i,o,a;if(s&&u[e]&&0<p.length&&0<(a=p[p.length-1]).length&&"\n"!==a&&p.push("\n"),p.push("<",e),t)for(r=0,i=t.length;r<i;r++)o=t[r],p.push(" ",o.name,'="',c(o.value,!0),'"');p[p.length]=!n||f?">":" />",n&&s&&l[e]&&0<p.length&&0<(a=p[p.length-1]).length&&"\n"!==a&&p.push("\n")},end:function(e){var t;p.push("</",e,">"),s&&l[e]&&0<p.length&&0<(t=p[p.length-1]).length&&"\n"!==t&&p.push("\n")},text:function(e,t){0<e.length&&(p[p.length]=t?e:c(e))},cdata:function(e){p.push("<![CDATA[",e,"]]>")},comment:function(e){p.push("<!--",e,"-->")},pi:function(e,t){t?p.push("<?",e," ",c(t),"?>"):p.push("<?",e,"?>"),s&&p.push("\n")},doctype:function(e){p.push("<!DOCTYPE",e,">",s?"\n":"")},reset:function(){p.length=0},getContent:function(){return p.join("").replace(/\n$/,"")}}}function I(t,h){void 0===h&&(h=we());var m=E(t);return(t=t||{}).validate=!("validate"in t)||t.validate,{serialize:function(e){var f,p;p=t.validate,f={3:function(e){m.text(e.value,e.raw)},8:function(e){m.comment(e.value)},7:function(e){m.pi(e.name,e.value)},10:function(e){m.doctype(e.value)},4:function(e){m.cdata(e.value)},11:function(e){if(e=e.firstChild)for(;d(e),e=e.next;);}},m.reset();var d=function(e){var t,n,r,i,o,a,s,u,l,c=f[e.type];if(c)c(e);else{if(t=e.name,n=e.shortEnded,r=e.attributes,p&&r&&1<r.length&&((a=[]).map={},
l=h.getElementRule(e.name))){for(s=0,u=l.attributesOrder.length;s<u;s++)(i=l.attributesOrder[s])in r.map&&(o=r.map[i],a.map[i]=o,a.push({name:i,value:o}));for(s=0,u=r.length;s<u;s++)(i=r[s].name)in a.map||(o=r.map[i],a.map[i]=o,a.push({name:i,value:o}));r=a}if(m.start(e.name,r,n),!n){if(e=e.firstChild)for(;d(e),e=e.next;);m.end(t)}}};return 1!==e.type||t.inner?f[11](e):d(e),m.getContent()}}}function C(u){var i,o,a,t,l={state:{},exec:{},value:{}},n=u.settings;u.on("PreInit",function(){i=u.dom,o=u.selection,n=u.settings,a=u.formatter});var r=function(e){var t;if(!u.quirks.isHidden()&&!u.removed){if(e=e.toLowerCase(),t=l.state[e])return t(e);try{return u.getDoc().queryCommandState(e)}catch(n){}return!1}},e=function(e,n){n=n||"exec",mb(e,function(t,e){mb(e.toLowerCase().split(","),function(e){l[n][e]=t})})},s=function(e,t,n){e=e.toLowerCase(),l.value[e]=function(){return t.call(n||u)}};gb(this,{execCommand:function(t,n,r,e){var i,o,a=!1;if(!u.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||e&&e.skip_focus?pb.restore(u):u.focus(),(e=u.fire("BeforeExecCommand",{command:t,ui:n,value:r})).isDefaultPrevented())return!1;if(o=t.toLowerCase(),i=l.exec[o])return i(o,n,r),u.fire("ExecCommand",{command:t,ui:n,value:r}),!0;if(mb(u.plugins,function(e){if(e.execCommand&&e.execCommand(t,n,r))return u.fire("ExecCommand",{command:t,ui:n,value:r}),!(a=!0)}),a)return a;if(u.theme&&u.theme.execCommand&&u.theme.execCommand(t,n,r))return u.fire("ExecCommand",{command:t,ui:n,value:r}),!0;try{a=u.getDoc().execCommand(t,n,r)}catch(s){}return!!a&&(u.fire("ExecCommand",{command:t,ui:n,value:r}),!0)}},queryCommandState:r,queryCommandValue:function(e){var t;if(!u.quirks.isHidden()&&!u.removed){if(e=e.toLowerCase(),t=l.value[e])return t(e);try{return u.getDoc().queryCommandValue(e)}catch(n){}}},queryCommandSupported:function(e){if(e=e.toLowerCase(),l.exec[e])return!0;try{return u.getDoc().queryCommandSupported(e)}catch(t){}return!1},addCommands:e,addCommand:function(e,i,o){e=e.toLowerCase(),l.exec[e]=function(e,t,n,r){return i.call(o||u,t,n,r)}},addQueryStateHandler:function(e,t,n){e=e.toLowerCase(),l.state[e]=function(){return t.call(n||u)}},addQueryValueHandler:s,hasCustomCommand:function(e){return e=e.toLowerCase(),!!l.exec[e]}});var c=function(e,t,n){return t===undefined&&(t=!1),n===undefined&&(n=null),u.getDoc().execCommand(e,t,n)},f=function(e){return a.match(e)},p=function(e,t){a.toggle(e,t?{value:t}:undefined),u.nodeChanged()},d=function(e){t=o.getBookmark(e)},h=function(){o.moveToBookmark(t)};e({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){u.undoManager.add()},"Cut,Copy,Paste":function(e){var t,n=u.getDoc();try{c(e)}catch(i){t=!0}if("paste"!==e||n.queryCommandEnabled(e)||(t=!0),t||!n.queryCommandSupported(e)){var r=u.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");Gt.mac&&(r=r.replace(/Ctrl\+/g,"\u2318+")),u.notificationManager.open({text:r,type:"error"})}},unlink:function(){if(o.isCollapsed()){var e=u.dom.getParent(u.selection.getStart(),"a");e&&u.dom.remove(e,!0)}else a.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"===t&&(t="justify"),mb("left,center,right,justify".split(","),function(e){t!==e&&a.remove("align"+e)}),"none"!==t&&p("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;c(e),(t=i.getParent(o.getNode(),"ol,ul"))&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(d(),i.split(n,t),h()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){p(e)},"ForeColor,HiliteColor":function(e,t,n){p(e,n)},FontName:function(e,t,n){h_(u,n)},FontSize:function(e,t,n){g_(u,n)},RemoveFormat:function(e){a.remove(e)},mceBlockQuote:function(){p("blockquote")},FormatBlock:function(e,t,n){return p(n||"p")},mceCleanup:function(){var e=o.getBookmark();u.setContent(u.getContent()),o.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var r=n||o.getNode();r!==u.getBody()&&(d(),u.dom.remove(r,!0),h())},mceSelectNodeDepth:function(e,t,n){var r=0;i.getParent(o.getNode(),function(e){if(1===e.nodeType&&r++===n)return o.select(e),!1},u.getBody())},mceSelectNode:function(e,t,n){o.select(n)},mceInsertContent:function(e,t,n){im.insertAtCaret(u,n)},mceInsertRawHTML:function(e,t,n){var r=u.getContent();o.setContent("tiny_mce_marker"),u.setContent(r.replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){p(n)},mceSetContent:function(e,t,n){u.setContent(n)},"Indent,Outdent":function(e){hb(u,e)},mceRepaint:function(){},InsertHorizontalRule:function(){u.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){u.hasVisual=!u.hasVisual,u.addVisual()},mceReplaceContent:function(e,t,n){u.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,o.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var r;"string"==typeof n&&(n={href:n}),r=i.getParent(o.getNode(),"a"),n.href=n.href.replace(" ","%20"),r&&n.href||a.remove("link"),n.href&&a.apply("link",n,r)},selectAll:function(){var e=i.getParent(o.getStart(),os.isContentEditableTrue);if(e){var t=i.createRng();t.selectNodeContents(e),o.setRng(t)}},"delete":function(){n_.deleteCommand(u)},forwardDelete:function(){n_.forwardDeleteCommand(u)},mceNewDocument:function(){u.setContent("")},InsertLineBreak:function(e,t,n){return q_.insert(u,n),!0}});var m=function(n){return function(){var e=o.isCollapsed()?[i.getParent(o.getNode(),i.isBlock)]:o.getSelectedBlocks(),t=yb(e,function(e){return!!a.matchNode(e,n)});return-1!==vb(t,!0)}};e({JustifyLeft:m("alignleft"),JustifyCenter:m("aligncenter"),JustifyRight:m("alignright"),JustifyFull:m("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return f(e)},mceBlockQuote:function(){return f("blockquote")},Outdent:function(){var e;if(n.inline_styles){if((e=i.getParent(o.getStart(),i.isBlock))&&0<parseInt(e.style.paddingLeft,10))return!0;if((e=i.getParent(o.getEnd(),i.isBlock))&&0<parseInt(e.style.paddingLeft,10))return!0}return r("InsertUnorderedList")||r("InsertOrderedList")||!n.inline_styles&&!!i.getParent(o.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=i.getParent(o.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),e({Undo:function(){u.undoManager.undo()},Redo:function(){u.undoManager.redo()}}),s("FontName",function(){return m_(u)},this),s("FontSize",function(){return y_(u)},this)}function S(o){var e=this,a={},n=[],s=function(e){var t,n,r={};for(n in jb(Ub(e,"+"),function(e){e in qb?r[e]=!0:/^[0-9]{2,}$/.test(e)?r.keyCode=parseInt(e,10):(r.charCode=e.charCodeAt(0),r.keyCode=Vb[e]||e.toUpperCase().charCodeAt(0))}),t=[r.keyCode],qb)r[n]?t.push(n):r[n]=!1;return r.id=t.join(","),r.access&&(r.alt=!0,Gt.mac?r.ctrl=!0:r.shift=!0),r.meta&&(Gt.mac?r.meta=!0:(r.ctrl=!0,r.meta=!1)),r},u=function(e,t,n,r){var i;return(i=yr.map(Ub(e,">"),s))[i.length-1]=yr.extend(i[i.length-1],{func:n,scope:r||o}),yr.extend(i[0],{desc:o.translate(t),subpatterns:i.slice(1)})},r=function(e){return e.altKey||e.ctrlKey||e.metaKey},i=function(e){return"keydown"===e.type&&112<=e.keyCode&&e.keyCode<=123},l=function(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)},c=function(e){return e.func?e.func.call(e.scope):null};o.on("keyup keypress keydown",function(t){!r(t)&&!i(t)||t.isDefaultPrevented()||(jb(a,function(e){if(l(t,e))return n=e.subpatterns.slice(0),"keydown"===t.type&&c(e),!0}),l(t,n[0])&&(1===n.length&&"keydown"===t.type&&c(n[0]),n.shift()))}),e.add=function(e,n,r,i){var t;return"string"==typeof(t=r)?r=function(){o.execCommand(t,!1,null)}:yr.isArray(t)&&(r=function(){o.execCommand(t[0],t[1],t[2])}),jb(Ub(yr.trim(e.toLowerCase())),function(e){var t=u(e,n,r,i);a[t.id]=t}),!0},e.remove=function(e){var t=u(e);return!!a[t.id]&&(delete a[t.id],!0)}}function T(){var e=function(){throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,reposition:e,getArgs:e}}function A(n){var t,r=[],i=function(){var e=n.theme;return e&&e.getNotificationManagerImpl?e.getNotificationManagerImpl():T()},e=function(){return Ne.from(r[0])},o=function(e,t){return!(e.type!==t.type||e.text!==t.text||e.progressBar||e.timeout||t.progressBar||t.timeout)},a=function(){0<r.length&&i().reposition(r)},s=function(e){r.push(e)},u=function(t){nt(r,function(e){return e===t}).each(function(e){r.splice(e,1)})},l=function(t){if(!n.removed&&vx.isEditorAttachedToDom(n))return tt(r,function(e){return o(i().getArgs(e),t)}).getOrThunk(function(){n.editorManager.setActive(n);var e=i().open(t,function(){u(e),a()});return s(e),a(),e})},c=function(){e().each(function(e){i().close(e),u(e),a()})},f=function(){return r};return(t=n).on("SkinLoaded",function(){var e=t.settings.service_message;e&&l({text:e,type:"warning",timeout:0,icon:""})}),t.on("ResizeEditor ResizeWindow",function(){Qt.requestAnimationFrame(a)}),t.on("remove",function(){Ke(r,function(e){i().close(e)})}),{open:l,close:c,getNotifications:f}}function k(){var e=function(){throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}}function D(r){var n=[],i=function(){var e=r.theme;return e&&e.getWindowManagerImpl?e.getWindowManagerImpl():k()},o=function(e,t){return function(){return t?t.apply(e,arguments):undefined}},t=function(e){r.fire("OpenWindow",{win:e})},a=function(e){r.fire("CloseWindow",{win:e})},s=function(e){n.push(e),t(e)},u=function(t){nt(n,function(e){return e===t}).each(function(e){n.splice(e,1),a(t),0===n.length&&r.focus()})},e=function(){return Ne.from(n[n.length-1])},l=function(e,t){r.editorManager.setActive(r),pb.store(r);var n=i().open(e,t,u);return s(n),n},c=function(e,t,n){var r=i().alert(e,o(n||this,t),u);s(r)},f=function(e,t,n){var r=i().confirm(e,o(n||this,t),u);s(r)},p=function(){e().each(function(e){i().close(e),u(e)})},d=function(){return e().map(i().getParams).getOr(null)},h=function(t){e().each(function(e){i().setParams(e,t)})},m=function(){return n};return r.on("remove",function(){Ke(n.slice(0),function(e){i().close(e)})}),{windows:n,open:l,alert:c,confirm:f,close:p,getParams:d,setParams:h,getWindows:m}}function P(){return new(bt.getOrDie("XMLHttpRequest"))}function O(s,a){var n={},u=function(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t},t=function(e,t,n,r){var i,o;(i=new P).open("POST",a.url),i.withCredentials=a.credentials,i.upload.onprogress=function(e){r(e.loaded/e.total*100)},i.onerror=function(){n("Image upload failed due to a XHR Transport error. Code: "+i.status)},i.onload=function(){var e;i.status<200||300<=i.status?n("HTTP Error: "+i.status):(e=JSON.parse(i.responseText))&&"string"==typeof e.location?t(u(a.basePath,e.location)):n("Invalid JSON: "+i.responseText)},(o=new FormData).append("file",e.blob(),e.filename()),i.send(o)},r=function(){return new Xt(function(e){e([])})},l=function(e,t){return{url:t,blobInfo:e,status:!0}},c=function(e,t){return{url:"",blobInfo:e,status:!1,error:t}},f=function(e,t){yr.each(n[e],function(e){e(t)}),delete n[e]},i=function(i,o,a){return s.markPending(i.blobUri()),new Xt(function(t){var n;try{var r=function(){n&&n.close()};o(i,function(e){r(),s.markUploaded(i.blobUri(),e),f(i.blobUri(),l(i,e)),t(l(i,e))},function(e){r(),s.removeFailed(i.blobUri()),f(i.blobUri(),c(i,e)),t(c(i,e))},function(e){e<0||100<e||(n||(n=a()),n.progressBar.value(e))})}catch(e){t(c(i,e.message))}})},o=function(e){return e===t},p=function(e){var t=e.blobUri();return new Xt(function(e){n[t]=n[t]||[],n[t].push(e)})},d=function(e,t){return e=yr.grep(e,function(e){return!s.isUploaded(e.blobUri())}),Xt.all(yr.map(e,function(e){return s.isPending(e.blobUri())?p(e):i(e,a.handler,t)}))},e=function(e,t){return!a.url&&o(a.handler)?r():d(e,t)};return!1===Ve(a.handler)&&(a.handler=t),{upload:e}}function R(){return new(bt.getOrDie("FileReader"))}function N(e){return new(bt.getOrDie("Uint8Array"))(e)}function L(i,o){var a={};return{findAll:function(e,n){var t;n||(n=al.constant(!0)),t=ir.filter(Lx(e),function(e){var t=e.src;return!!Gt.fileApi&&!e.hasAttribute("data-mce-bogus")&&!e.hasAttribute("data-mce-placeholder")&&!(!t||t===Gt.transparentSrc)&&(0===t.indexOf("blob:")?!i.isUploaded(t)&&n(e):0===t.indexOf("data:")&&n(e))});var r=ir.map(t,function(n){if(a[n.src])return new Xt(function(t){a[n.src].then(function(e){if("string"==typeof e)return e;t({image:n,blobInfo:e.blobInfo})})});var e=new Xt(function(e,t){Nx(o,n,e,t)}).then(function(e){return delete a[e.image.src],e})["catch"](function(e){return delete a[n.src],e});return a[n.src]=e});return Xt.all(r)}}}function M(){var n=[],r=al.constant,i=function(e){return{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[e.toLowerCase()]||"dat"},e=function(e,t,n,r){if(Be(e))return o({id:e,name:r,blob:t,base64:n});if(ze(e))return o(e);throw new Error("Unknown input type")},o=function(e){var t,n;if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return t=e.id||zx.uuid("blobid"),n=e.name||t,{id:r(t),name:r(n),filename:r(n+"."+i(e.blob.type)),blob:r(e.blob),base64:r(e.base64),blobUri:r(e.blobUri||wt.createObjectURL(e.blob)),uri:r(e.uri)}},t=function(e){a(e.id())||n.push(e)},a=function(t){return s(function(e){return e.id()===t})},s=function(e){return ir.filter(n,e)[0]};return{create:e,add:t,get:a,getByUri:function(t){return s(function(e){return e.blobUri()===t})},findFirst:s,removeByUri:function(t){n=ir.filter(n,function(e){return e.blobUri()!==t||(wt.revokeObjectURL(e.blobUri()),!1)})},destroy:function(){ir.each(n,function(e){wt.revokeObjectURL(e.blobUri())}),n=[]}}}function B(){var t=1,n=2,r={},i=function(e,t){return{status:e,resultUri:t}},o=function(e){return e in r},e=function(e){return!!o(e)&&r[e].status===t},a=function(e){return!!o(e)&&r[e].status===n};return{hasBlobUri:o,getResultUri:function(e){var t=r[e];return t?t.resultUri:null},isPending:e,isUploaded:a,markPending:function(e){r[e]=i(t,null)},markUploaded:function(e,t){r[e]=i(n,t)},removeFailed:function(e){delete r[e]},destroy:function(){r={}}}}function z(i){var t,e,o=M(),a=B(),n=[],s=function(t){return function(e){return i.selection?t(e):[]}},r=function(){return"?"+(new Date).getTime()},u=function(e,t,n){for(var r=0;-1!==(r=e.indexOf(t,r))&&(e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1),-1!==r;);return e},l=function(e,t,n){return e=u(e,'src="'+t+'"','src="'+n+'"'),e=u(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},c=function(t,n){Ke(i.undoManager.data,function(e){"fragmented"===e.type?e.fragments=Xe(e.fragments,function(e){return l(e,t,n)}):e.content=l(e.content,t,n)})},f=function(){return i.notificationManager.open({text:i.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},p=function(e,t){o.removeByUri(e.src),c(e.src,t),i.$(e).attr({src:mp.shouldReuseFileName(i)?t+r():t,"data-mce-src":i.convertURL(t,"src")})},d=function(n){return t||(t=O(a,{url:mp.getImageUploadUrl(i),basePath:mp.getImageUploadBasePath(i),credentials:mp.getImagesUploadCredentials(i),handler:mp.getImagesUploadHandler(i)})),y().then(s(function(r){var e;return e=Xe(r,function(e){return e.blobInfo}),t.upload(e,f).then(s(function(e){var t=Xe(e,function(e,t){var n=r[t].image;return e.status&&mp.shouldReplaceBlobUris(i)?p(n,e.url):e.error&&Cx.uploadError(i,e.error),{element:n,status:e.status}});return n&&n(t),t}))}))},h=function(e){if(mp.isAutomaticUploadsEnabled(i))return d(e)},m=function(t){return!1!==st(n,function(e){return e(t)})&&(0!==t.getAttribute("src").indexOf("data:")||mp.getImagesDataImgFilter(i)(t))},g=function(e){n.push(e)},y=function(){return e||(e=L(a,o)),e.findAll(i.getBody(),m).then(s(function(e){return e=Je(e,function(e){return"string"!=typeof e||(Cx.displayError(i,e),!1)}),Ke(e,function(e){c(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),e}))},v=function(){o.destroy(),a.destroy(),e=t=null},_=function(e){return e.replace(/src="(blob:[^"]+)"/g,function(e,n){var t=a.getResultUri(n);if(t)return'src="'+t+'"';var r=o.getByUri(n);return r||(r=et(i.editorManager.get(),function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},null)),r?'src="data:'+r.blob().type+";base64,"+r.base64()+'"':e})};return i.on("setContent",function(){mp.isAutomaticUploadsEnabled(i)?h():y()}),i.on("RawSaveContent",function(e){e.content=_(e.content)}),i.on("getContent",function(e){e.source_view||"raw"===e.format||(e.content=_(e.content))}),i.on("PostRender",function(){i.parser.addNodeFilter("img",function(e){Ke(e,function(e){var t=e.attr("src");if(!o.getByUri(t)){var n=a.getResultUri(t);n&&e.attr("src",n)}})})}),{blobCache:o,addFilter:g,uploadImages:d,uploadImagesAuto:h,scanForImages:y,destroy:v}}function F(o){var r,i=[],t=function(e){var t,n;if((n=o.$(e).parentsUntil(o.getBody()).add(e)).length===i.length){for(t=n.length;0<=t&&n[t]===i[t];t--);if(-1===t)return i=n,!0}return i=n,!1};"onselectionchange"in o.getDoc()||o.on("NodeChange Click MouseUp KeyUp Focus",function(e){var t,n;n={startContainer:(t=o.selection.getRng()).startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset},"nodechange"!==e.type&&v_.isEq(n,r)||o.fire("SelectionChange"),r=n}),o.on("contextmenu",function(){o.fire("SelectionChange")}),o.on("SelectionChange",function(){var e=o.selection.getStart(!0);!e||!Gt.range&&o.selection.isCollapsed()||Yx(o)&&!t(e)&&o.dom.isChildOf(e,o.getBody())&&o.nodeChanged({selectionChange:!0})}),o.on("MouseUp",function(e){!e.isDefaultPrevented()&&Yx(o)&&("IMG"===o.selection.getNode().nodeName?Qt.setEditorTimeout(o,function(){o.nodeChanged()}):o.nodeChanged())}),this.nodeChanged=function(e){var t,n,r,i=o.selection;o.initialized&&i&&!o.settings.disable_nodechange&&!o.readonly&&(r=o.getBody(),(t=i.getStart(!0)||r).ownerDocument===o.getDoc()&&o.dom.isChildOf(t,r)||(t=r),n=[],o.dom.getParent(t,function(e){if(e===r)return!0;n.push(e)}),(e=e||{}).element=t,e.parents=n,o.fire("NodeChange",e))}}function j(z,F){void 0===F&&(F=we());var e=function(){};!1!==(z=z||{}).fix_self_closing&&(z.fix_self_closing=!0);var j=z.comment?z.comment:e,U=z.cdata?z.cdata:e,V=z.text?z.text:e,q=z.start?z.start:e,H=z.end?z.end:e,W=z.pi?z.pi:e,G=z.doctype?z.doctype:e;return{parse:function(e){var t,n,r,c,i,o,a,f,s,u,p,l,d,h,m,g,y,v,_,b,x,w,E,C,S,T,A,k,I,D=0,P=[],O=0,R=Es.decode,N=yr.makeMap("src,href,data,background,formaction,poster,xlink:href"),L=/((java|vb)script|mhtml):/i,M=function(e){var t,n;for(t=P.length;t--&&P[t].name!==e;);if(0<=t){for(n=P.length-1;t<=n;n--)(e=P[n]).valid&&H(e.name);P.length=t}},B=function(e,t,n,r,i){var o,a,s=/[\s\u0000-\u001F]+/g;if(n=(t=t.toLowerCase())in p?t:R(n||r||i||""),d&&!f&&!1===rE(t)){if(!(o=v[t])&&_){for(a=_.length;a--&&!(o=_[a]).pattern.test(t););-1===a&&(o=null)}if(!o)return;if(o.validValues&&!(n in o.validValues))return}if(N[t]&&!z.allow_script_urls){var u=n.replace(s,"");try{u=decodeURIComponent(u)}catch(l){u=unescape(u)}if(L.test(u))return;if(oE(z,u))return}f&&(t in N||0===t.indexOf("on"))||(c.map[t]=n,c.push({name:t,value:n}))};for(S=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),T=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,u=F.getShortEndedElements(),C=z.self_closing_elements||F.getSelfClosingElements(),p=F.getBoolAttrs(),d=z.validate,s=z.remove_internals,I=z.fix_self_closing,A=F.getSpecialElements(),E=e+">";t=S.exec(E);){if(D<t.index&&V(R(e.substr(D,t.index-D))),n=t[6])":"===(n=n.toLowerCase()).charAt(0)&&(n=n.substr(1)),M(n);else if(n=t[7]){if(t.index+t[0].length>e.length){V(R(e.substr(t.index))),D=t.index+t[0].length;continue}if(":"===(n=n.toLowerCase()).charAt(0)&&(n=n.substr(1)),l=n in u,I&&C[n]&&0<P.length&&P[P.length-1].name===n&&M(n),!d||(h=F.getElementRule(n))){if(m=!0,d&&(v=h.attributes,_=h.attributePatterns),(y=t[8])?((f=-1!==y.indexOf("data-mce-type"))&&s&&(m=!1),(c=[]).map={},y.replace(T,B)):(c=[]).map={},d&&!f){if(b=h.attributesRequired,x=h.attributesDefault,w=h.attributesForced,h.removeEmptyAttrs&&!c.length&&(m=!1),w)for(i=w.length;i--;)a=(g=w[i]).name,"{$uid}"===(k=g.value)&&(k="mce_"+O++),c.map[a]=k,c.push({name:a,value:k});if(x)for(i=x.length;i--;)(a=(g=x[i]).name)in c.map||("{$uid}"===(k=g.value)&&(k="mce_"+O++),c.map[a]=k,c.push({name:a,value:k}));if(b){for(i=b.length;i--&&!(b[i]in c.map););-1===i&&(m=!1)}if(g=c.map["data-mce-bogus"]){if("all"===g){D=aE(F,e,S.lastIndex),S.lastIndex=D;continue}m=!1}}m&&q(n,c,l)}else m=!1;if(r=A[n]){r.lastIndex=D=t.index+t[0].length,(t=r.exec(e))?(m&&(o=e.substr(D,t.index-D)),D=t.index+t[0].length):(o=e.substr(D),D=e.length),m&&(0<o.length&&V(o,!0),H(n)),S.lastIndex=D;continue}l||(y&&y.indexOf("/")===y.length-1?m&&H(n):P.push({name:n,valid:m}))}else(n=t[1])?(">"===n.charAt(0)&&(n=" "+n),z.allow_conditional_comments||"[if"!==n.substr(0,3).toLowerCase()||(n=" "+n),j(n)):(n=t[2])?U(iE(n)):(n=t[3])?G(n):(n=t[4])&&W(n,t[5]);D=t.index+t[0].length}for(D<e.length&&V(R(e.substr(D))),i=P.length-1;0<=i;i--)(n=P[i]).valid&&H(n.name)}}}function U(s){var u,r,i=this,l=0,c=[],t=0,f=function(){return 0===t},o=function(e){f()&&(i.typing=e)},p=function(e){s.setDirty(e)},a=function(e){o(!1),i.add({},e)},n=function(){i.typing&&(o(!1),i.add())};s.on("init",function(){i.add()}),s.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&(n(),i.beforeChange())}),s.on("ExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&a(e)}),s.on("ObjectResizeStart Cut",function(){i.beforeChange()}),s.on("SaveContent ObjectResized blur",a),s.on("DragEnd",a),s.on("KeyUp",function(e){var t=e.keyCode;e.isDefaultPrevented()||((33<=t&&t<=36||37<=t&&t<=40||45===t||e.ctrlKey)&&(a(),s.nodeChanged()),46!==t&&8!==t||s.nodeChanged(),r&&i.typing&&!1===BE.isEq(BE.createFromEditor(s),c[0])&&(!1===s.isDirty()&&(p(!0),s.fire("change",{level:c[0],lastLevel:null})),s.fire("TypingUndo"),r=!1,s.nodeChanged()))}),s.on("KeyDown",function(e){var t=e.keyCode;if(!e.isDefaultPrevented())if(33<=t&&t<=36||37<=t&&t<=40||45===t)i.typing&&a(e);else{var n=e.ctrlKey&&!e.altKey||e.metaKey;!(t<16||20<t)||224===t||91===t||i.typing||n||(i.beforeChange(),o(!0),i.add({},e),r=!0)}}),s.on("MouseDown",function(e){i.typing&&a(e)});var d=function(e){return"insertReplacementText"===e.inputType},h=function(e){return"insertText"===e.inputType&&null===e.data};return s.on("input",function(e){e.inputType&&(d(e)||h(e))&&a(e)}),s.addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo"),s.on("AddUndo Undo Redo ClearUndos",function(e){e.isDefaultPrevented()||s.nodeChanged()}),i={data:c,typing:!1,beforeChange:function(){f()&&(u=ef.getUndoBookmark(s.selection))},add:function(e,t){var n,r,i,o=s.settings;if(i=BE.createFromEditor(s),e=e||{},e=yr.extend(e,i),!1===f()||s.removed)return null;if(r=c[l],s.fire("BeforeAddUndo",{level:e,lastLevel:r,originalEvent:t}).isDefaultPrevented())return null;if(r&&BE.isEq(r,e))return null;if(c[l]&&(c[l].beforeBookmark=u),o.custom_undo_redo_levels&&c.length>o.custom_undo_redo_levels){for(n=0;n<c.length-1;n++)c[n]=c[n+1];c.length--,l=c.length}e.bookmark=ef.getUndoBookmark(s.selection),l<c.length-1&&(c.length=l+1),c.push(e),l=c.length-1;var a={level:e,lastLevel:r,originalEvent:t};return s.fire("AddUndo",a),0<l&&(p(!0),s.fire("change",a)),e},undo:function(){var e;return i.typing&&(i.add(),i.typing=!1,o(!1)),0<l&&(e=c[--l],BE.applyToEditor(s,e,!0),p(!0),s.fire("undo",{level:e})),e},redo:function(){var e;return l<c.length-1&&(e=c[++l],BE.applyToEditor(s,e,!1),p(!0),s.fire("redo",{level:e})),e},clear:function(){c=[],l=0,i.typing=!1,i.data=c,s.fire("ClearUndos")},hasUndo:function(){return 0<l||i.typing&&c[0]&&!BE.isEq(BE.createFromEditor(s),c[0])},hasRedo:function(){return l<c.length-1&&!i.typing},transact:function(e){return n(),i.beforeChange(),i.ignore(e),i.add()},ignore:function(e){try{t++,e()}finally{t--}},extra:function(e,t){var n,r;i.transact(e)&&(r=c[l].bookmark,n=c[l-1],BE.applyToEditor(s,n,!0),i.transact(t)&&(c[l-1].beforeBookmark=r))}}}function V(e){var n={},t=function(e){return e?n[e]:n},r=function(e,t){e&&("string"!=typeof e?yr.each(e,function(e,t){r(t,e)}):(t=t.length?t:[t],yr.each(t,function(e){"undefined"==typeof e.deep&&(e.deep=!e.selector),"undefined"==typeof e.split&&(e.split=!e.selector||e.inline),"undefined"==typeof e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),n[e]=t))},i=function(e){return e&&n[e]&&delete n[e],n};return r(eS.get(e.dom)),r(e.settings.formats),{get:t,register:r,unregister:i}}function q(e){var t=V(e),n=pu(null);return lS.setup(e),cC(e),{get:t.get,register:t.register,unregister:t.unregister,apply:_e(KC.applyFormat,e),remove:_e(NC.remove,e),toggle:_e(uS.toggle,e,t),match:_e(WE.match,e),matchAll:_e(WE.matchAll,e),matchNode:_e(WE.matchNode,e),canApply:_e(WE.canApply,e),formatChanged:_e(QC.formatChanged,e,n),getCssText:_e(sS.getCssText,e)}}function H(k,I){void 0===I&&(I=we());var D={},P=[],O={},R={};(k=k||{}).validate=!("validate"in k)||k.validate,k.root_name=k.root_name||"body";var N=function(e){var t,n,r,i,o,a,s,u,l,c,f,p,d,h,m,g;for(p=OS("tr,td,th,tbody,thead,tfoot,table"),c=I.getNonEmptyElements(),f=I.getWhiteSpaceElements(),d=I.getTextBlockElements(),h=I.getSpecialElements(),t=0;t<e.length;t++)if((n=e[t]).parent&&!n.fixed)if(d[n.name]&&"li"===n.parent.name){for(m=n.next;m&&d[m.name];)m.name="li",m.fixed=!0,n.parent.insert(m,n.parent),m=m.next;n.unwrap(n)}else{for(i=[n],r=n.parent;r&&!I.isValidChild(r.name,n.name)&&!p[r.name];r=r.parent)i.push(r);if(r&&1<i.length){for(i.reverse(),o=a=y(i[0].clone()),l=0;l<i.length-1;l++){for(I.isValidChild(a.name,i[l].name)?(s=y(i[l].clone()),a.append(s)):s=a,u=i[l].firstChild;u&&u!==i[l+1];)g=u.next,s.append(u),u=g;a=s}IS(I,c,f,o)?r.insert(n,i[0],!0):(r.insert(o,i[0],!0),r.insert(n,o)),r=i[0],(IS(I,c,f,r)||AS(r,"br"))&&r.empty().remove()}else if(n.parent){if("li"===n.name){if((m=n.prev)&&("ul"===m.name||"ul"===m.name)){m.append(n);continue}if((m=n.next)&&("ul"===m.name||"ul"===m.name)){m.insert(n,m.firstChild,!0);continue}n.wrap(y(new CS("ul",1)));continue}I.isValidChild(n.parent.name,"div")&&I.isValidChild("div",n.name)?n.wrap(y(new CS("div",1))):h[n.name]?n.empty().remove():n.unwrap()}}},y=function(e){var t,n,r;n in D&&((r=O[n])?r.push(e):O[n]=[e]),t=P.length;for(;t--;)(n=P[t].name)in e.attributes.map&&((r=R[n])?r.push(e):R[n]=[e]);return e},e=function(e,a){var t,n,r,i,o,s,u,l,c,f,p,d=[];a=a||{},O={},R={},c=LS(OS("script,style,head,html,body,title,meta,param"),I.getBlockElements());var h=I.getNonEmptyElements(),m=I.children,g=k.validate,y="forced_root_block"in a?a.forced_root_block:k.forced_root_block,v=I.getWhiteSpaceElements(),_=/^[ \t\r\n]+/,b=/[ \t\r\n]+$/,x=/[ \t\r\n]+/g,w=/^[ \t\r\n]+$/;f=v.hasOwnProperty(a.context)||v.hasOwnProperty(k.root_name);var E=function(){var e,t,n=A.firstChild,r=function(e){e&&((n=e.firstChild)&&3===n.type&&(n.value=n.value.replace(_,"")),(n=e.lastChild)&&3===n.type&&(n.value=n.value.replace(b,"")))};if(I.isValidChild(A.name,y.toLowerCase())){for(;n;)e=n.next,3===n.type||1===n.type&&"p"!==n.name&&!c[n.name]&&!n.attr("data-mce-type")?(t||((t=C(y,1)).attr(k.forced_root_block_attrs),A.insert(t,n)),t.append(n)):(r(t),t=null),n=e;r(t)}},C=function(e,t){var n,r=new CS(e,t);return e in D&&((n=O[e])?n.push(r):O[e]=[r]),r},S=function(e){var t,n,r,i,o=I.getBlockElements();for(t=e.prev;t&&3===t.type;){if(0<(r=t.value.replace(b,"")).length)return void(t.value=r);if(n=t.next){if(3===n.type&&n.value.length){t=t.prev;continue}if(!o[n.name]&&"script"!==n.name&&"style"!==n.name){t=t.prev;continue}}i=t.prev,t.remove(),t=i}},T=function(e){var t,n={};for(t in e)"li"!==t&&"p"!==t&&(n[t]=e[t]);return n};t=lE({validate:g,allow_script_urls:k.allow_script_urls,allow_conditional_comments:k.allow_conditional_comments,self_closing_elements:T(I.getSelfClosingElements()),cdata:function(e){p.append(C("#cdata",4)).value=e},text:function(e,t){var n;f||(e=e.replace(x," "),DS(p.lastChild,c)&&(e=e.replace(_,""))),0!==e.length&&((n=C("#text",3)).raw=!!t,p.append(n).value=e)},comment:function(e){p.append(C("#comment",8)).value=e},pi:function(e,t){p.append(C(e,7)).value=t,S(p)},doctype:function(e){p.append(C("#doctype",10)).value=e,S(p)},start:function(e,t,n){var r,i,o,a,s;if(o=g?I.getElementRule(e):{}){for((r=C(o.outputName||e,1)).attributes=t,r.shortEnded=n,p.append(r),(s=m[p.name])&&m[r.name]&&!s[r.name]&&d.push(r),i=P.length;i--;)(a=P[i].name)in t.map&&((u=R[a])?u.push(r):R[a]=[r]);c[e]&&S(r),n||(p=r),!f&&v[e]&&(f=!0)}},end:function(e){var t,n,r,i,o;if(n=g?I.getElementRule(e):{}){if(c[e]&&!f){if((t=p.firstChild)&&3===t.type)if(0<(r=t.value.replace(_,"")).length)t.value=r,t=t.next;else for(i=t.next,t.remove(),t=i;t&&3===t.type;)r=t.value,i=t.next,(0===r.length||w.test(r))&&(t.remove(),t=i),t=i;if((t=p.lastChild)&&3===t.type)if(0<(r=t.value.replace(b,"")).length)t.value=r,t=t.prev;else for(i=t.prev,t.remove(),t=i;t&&3===t.type;)r=t.value,i=t.prev,(0===r.length||w.test(r))&&(t.remove(),t=i),t=i}if(f&&v[e]&&(f=!1),n.removeEmpty&&IS(I,h,v,p)&&!p.attributes.map.name&&!p.attr("id"))return o=p.parent,c[p.name]?p.empty().remove():p.unwrap(),void(p=o);n.paddEmpty&&(TS(p)||IS(I,h,v,p))&&SS(k,a,c,p),p=p.parent}}},I);var A=p=new CS(a.context||k.root_name,11);if(t.parse(e),g&&d.length&&(a.context?a.invalid=!0:N(d)),y&&("body"===A.name||a.isRootContent)&&E(),!a.invalid){for(l in O){for(u=D[l],o=(n=O[l]).length;o--;)n[o].parent||n.splice(o,1);for(r=0,i=u.length;r<i;r++)u[r](n,l,a)}for(r=0,i=P.length;r<i;r++)if((u=P[r]).name in R){for(o=(n=R[u.name]).length;o--;)n[o].parent||n.splice(o,1);for(o=0,s=u.callbacks.length;o<s;o++)u.callbacks[o](n,u.name,a)}}return A},t={schema:I,addAttributeFilter:function(e,n){RS(NS(e),function(e){var t;for(t=0;t<P.length;t++)if(P[t].name===e)return void P[t].callbacks.push(n);P.push({name:e,callbacks:[n]})})},getAttributeFilters:function(){return[].concat(P)},addNodeFilter:function(e,n){RS(NS(e),function(e){var t=D[e];t||(D[e]=t=[]),t.push(n)})},getNodeFilters:function(){var e=[];for(var t in D)D.hasOwnProperty(t)&&e.push({name:t,callbacks:D[t]});return e},filterNode:y,parse:e};return PS(t,k),bS.register(t,k),t}function W(a,s){var u,l,c,e=["data-mce-selected"];u=s&&s.dom?s.dom:qs.DOM,l=s&&s.schema?s.schema:we(a),a.entity_encoding=a.entity_encoding||"named",a.remove_trailing_brs=!("remove_trailing_brs"in a)||a.remove_trailing_brs,c=H(a,l),pS.register(c,a,u);var t=function(e,t){var n=fS({format:"html"},t||{}),r=mS.process(s,e,n),i=zS(u,r,n),o=FS(c,i,n);return"tree"===n.format?o:US(s,a,l,o,n)};return{schema:l,addNodeFilter:c.addNodeFilter,addAttributeFilter:c.addAttributeFilter,serialize:t,addRules:function(e){l.addValidElements(e)},setRules:function(e){l.setValidElements(e)},addTempAttr:_e(MS,c,e),getTempAttrs:function(){return e}}}function G(e,t){var n=W(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs}}function Z(e){return{getBookmark:_e(Wd.getBookmark,e),moveToBookmark:_e(Wd.moveToBookmark,e)}}function X(a){var i=yr.each,o=$w.BACKSPACE,s=$w.DELETE,u=a.dom,l=a.selection,t=a.settings,e=a.parser,n=Gt.gecko,r=Gt.ie,c=Gt.webkit,f="data:text/mce-internal,",p=r?"Text":"URL",d=function(e,t){try{a.getDoc().execCommand(e,!1,t)}catch(n){}},h=function(e){return e.isDefaultPrevented()},m=function(e){var t,n;e.dataTransfer&&(a.selection.isCollapsed()&&"IMG"===e.target.tagName&&l.select(e.target),0<(t=a.selection.getContent()).length&&(n=f+escape(a.id)+","+escape(t),e.dataTransfer.setData(p,n)))},g=function(e){var t;return e.dataTransfer&&(t=e.dataTransfer.getData(p))&&0<=t.indexOf(f)?(t=t.substr(f.length).split(","),{id:unescape(t[0]),html:unescape(t[1])}):null},y=function(e,t){a.queryCommandSupported("mceInsertClipboardContent")?a.execCommand("mceInsertClipboardContent",!1,{content:e,internal:t}):a.execCommand("mceInsertContent",!1,e)},v=function(){var r=function(e){var t=u.create("body"),n=e.cloneContents();return t.appendChild(n),l.serializer.serialize(t,{format:"html"})},i=function(e){var t=r(e),n=u.createRng();return n.selectNode(a.getBody()),
t===r(n)};a.on("keydown",function(e){var t,n,r=e.keyCode;if(!h(e)&&(r===s||r===o)){if(t=a.selection.isCollapsed(),n=a.getBody(),t&&!u.isEmpty(n))return;if(!t&&!i(a.selection.getRng()))return;e.preventDefault(),a.setContent(""),n.firstChild&&u.isBlock(n.firstChild)?a.selection.setCursorLocation(n.firstChild,0):a.selection.setCursorLocation(n,0),a.nodeChanged()}})},_=function(){a.shortcuts.add("meta+a",null,"SelectAll")},b=function(){a.settings.content_editable||u.bind(a.getDoc(),"mousedown mouseup",function(e){var t;if(e.target===a.getDoc().documentElement)if(t=l.getRng(),a.getBody().focus(),"mousedown"===e.type){if(dl(t.startContainer))return;l.placeCaretAt(e.clientX,e.clientY)}else l.setRng(t)})},x=function(){a.on("keydown",function(e){if(!h(e)&&e.keyCode===o){if(!a.getBody().getElementsByTagName("hr").length)return;if(l.isCollapsed()&&0===l.getRng().startOffset){var t=l.getNode(),n=t.previousSibling;if("HR"===t.nodeName)return u.remove(t),void e.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(u.remove(n),e.preventDefault())}}})},w=function(){Range.prototype.getClientRects||a.on("mousedown",function(e){if(!h(e)&&"HTML"===e.target.nodeName){var t=a.getBody();t.blur(),Qt.setEditorTimeout(a,function(){t.focus()})}})},E=function(){a.on("click",function(e){var t=e.target;/^(IMG|HR)$/.test(t.nodeName)&&"false"!==u.getContentEditableParent(t)&&(e.preventDefault(),a.selection.select(t),a.nodeChanged()),"A"===t.nodeName&&u.hasClass(t,"mce-item-anchor")&&(e.preventDefault(),l.select(t))})},C=function(){var n=function(){var e=u.getAttribs(l.getStart().cloneNode(!1));return function(){var t=l.getStart();t!==a.getBody()&&(u.setAttrib(t,"style",null),i(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}},r=function(){return!l.isCollapsed()&&u.getParent(l.getStart(),u.isBlock)!==u.getParent(l.getEnd(),u.isBlock)};a.on("keypress",function(e){var t;if(!h(e)&&(8===e.keyCode||46===e.keyCode)&&r())return t=n(),a.getDoc().execCommand("delete",!1,null),t(),e.preventDefault(),!1}),u.bind(a.getDoc(),"cut",function(e){var t;!h(e)&&r()&&(t=n(),Qt.setEditorTimeout(a,function(){t()}))})},S=function(){a.on("keydown",function(e){if(!h(e)&&e.keyCode===o&&l.isCollapsed()&&0===l.getRng().startOffset){var t=l.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})},T=function(){var e=function(){d("StyleWithCSS",!1),d("enableInlineTableEditing",!1),t.object_resizing||d("enableObjectResizing",!1)};t.readonly||a.on("BeforeExecCommand MouseDown",e)},A=function(){var t=function(){i(u.select("a"),function(e){var t=e.parentNode,n=u.getRoot();if(t.lastChild===e){for(;t&&!u.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}u.add(t,"br",{"data-mce-bogus":1})}})};a.on("SetContent ExecCommand",function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||t()})},k=function(){t.forced_root_block&&a.on("init",function(){d("DefaultParagraphSeparator",t.forced_root_block)})},I=function(){a.on("keyup focusin mouseup",function(e){$w.modifierPressed(e)||l.normalize()},!0)},D=function(){a.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},P=function(){a.inline||a.on("keydown",function(){document.activeElement===document.body&&a.getWin().focus()})},O=function(){a.inline||(a.contentStyles.push("body {min-height: 150px}"),a.on("click",function(e){var t;if("HTML"===e.target.nodeName){if(11<Gt.ie)return void a.getBody().focus();t=a.selection.getRng(),a.getBody().focus(),a.selection.setRng(t),a.selection.normalize(),a.nodeChanged()}}))},R=function(){Gt.mac&&a.on("keydown",function(e){!$w.metaKeyPressed(e)||e.shiftKey||37!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),a.selection.getSel().modify("move",37===e.keyCode?"backward":"forward","lineboundary"))})},N=function(){d("AutoUrlDetect",!1)},L=function(){a.on("click",function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),a.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},M=function(){a.on("init",function(){a.dom.bind(a.getBody(),"submit",function(e){e.preventDefault()})})},B=function(){e.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()})},z=function(){a.on("dragstart",function(e){m(e)}),a.on("drop",function(e){if(!h(e)){var t=g(e);if(t&&t.id!==a.id){e.preventDefault();var n=YS.fromPoint(e.x,e.y,a.getDoc());l.setRng(n),y(t.html,!0)}}})},F=function(){},j=function(){var e;return!n||a.removed?0:!(e=a.selection.getSel())||!e.rangeCount||0===e.rangeCount};return a.on("keydown",function(e){var t,n,r,i,o;if(!h(e)&&e.keyCode===$w.BACKSPACE&&(n=(t=l.getRng()).startContainer,r=t.startOffset,i=u.getRoot(),o=n,t.collapsed&&0===r)){for(;o&&o.parentNode&&o.parentNode.firstChild===o&&o.parentNode!==i;)o=o.parentNode;"BLOCKQUOTE"===o.tagName&&(a.formatter.toggle("blockquote",null,o),(t=u.createRng()).setStart(n,0),t.setEnd(n,0),l.setRng(t))}}),v(),Gt.windowsPhone||I(),c&&(b(),E(),k(),M(),S(),B(),Gt.iOS?(P(),O(),L()):_()),11<=Gt.ie&&(O(),S()),Gt.ie&&(_(),N(),z()),n&&(x(),w(),C(),T(),A(),D(),R(),S()),{refreshContentEditable:F,isHidden:j}}function K(n){return{walk:function(e,t){return mh.walk(n,e,t)},split:ZE.split,normalize:function(t){return D_.normalize(n,t).fold(ye(!1),function(e){return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0})}}}var $,Y,J,Q,ee,te,ne,re,ie,oe,ae,se,ue,le,ce,fe,pe,de,he,me=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},ge=function(n,r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(r.apply(null,arguments))}},ye=function(e){return function(){return e}},ve=function(e){return e},_e=function(o){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var a=new Array(arguments.length-1),n=1;n<arguments.length;n++)a[n-1]=arguments[n];return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];var i=a.concat(n);return o.apply(null,i)}},Se=function(e){return function(){throw new Error(e)}},Te=ye(!1),Ae=ye(!0),ke=Te,Ie=Ae,De=function(){return Pe},Pe=(Q={fold:function(e){return e()},is:ke,isSome:ke,isNone:Ie,getOr:J=function(e){return e},getOrThunk:Y=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){return undefined},or:J,orThunk:Y,map:De,ap:De,each:function(){},bind:De,flatten:De,exists:ke,forall:Ie,filter:De,equals:$=function(e){return e.isNone()},equals_:$,toArray:function(){return[]},toString:ye("none()")},Object.freeze&&Object.freeze(Q),Q),Oe=function(n){var e=function(){return n},t=function(){return i},r=function(e){return e(n)},i={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:Ie,isNone:ke,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return Oe(e(n))},ap:function(e){return e.fold(De,function(e){return Oe(e(n))})},each:function(e){e(n)},bind:r,flatten:e,exists:r,forall:r,filter:function(e){return e(n)?i:Pe},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(ke,function(e){return t(n,e)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return i},Re=function(e){return null===e||e===undefined?Pe:Oe(e)},Ne={some:Oe,none:De,from:Re},Le=function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t},Me=function(t){return function(e){return Le(e)===t}},Be=Me("string"),ze=Me("object"),Fe=Me("array"),je=Me("null"),Ue=Me("boolean"),Ve=Me("function"),qe=Me("number"),He=(ee=Array.prototype.indexOf,te=function(e,t){return ee.call(e,t)},ee===undefined?function(e,t){return rt(e,t)}:te),We=function(e,t){var n=He(e,t);return-1===n?Ne.none():Ne.some(n)},Ge=function(e,t){return-1<He(e,t)},Ze=function(e,t){return nt(e,t).isSome()},Xe=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r},Ke=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n,e)},$e=function(e,t){for(var n=e.length-1;0<=n;n--)t(e[n],n,e)},Ye=function(e,t){for(var n=[],r=[],i=0,o=e.length;i<o;i++){var a=e[i];(t(a,i,e)?n:r).push(a)}return{pass:n,fail:r}},Je=function(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];t(o,r,e)&&n.push(o)}return n},Qe=function(e,t,n){return $e(e,function(e){n=t(n,e)}),n},et=function(e,t,n){return Ke(e,function(e){n=t(n,e)}),n},tt=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n,e))return Ne.some(i)}return Ne.none()},nt=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n,e))return Ne.some(n);return Ne.none()},rt=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},it=Array.prototype.push,ot=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);it.apply(t,e[n])}return t},at=function(e,t){var n=Xe(e,t);return ot(n)},st=function(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n,e))return!1;return!0},ut=Array.prototype.slice,lt=function(e){var t=ut.call(e,0);return t.reverse(),t},ct=function(e,t){return Je(e,function(e){return!Ge(t,e)})},ft=function(e,t){for(var n={},r=0,i=e.length;r<i;r++){var o=e[r];n[String(o)]=t(o,r)}return n},pt=function(e,t){var n=ut.call(e,0);return n.sort(t),n},dt=function(e){return 0===e.length?Ne.none():Ne.some(e[0])},ht=function(e){return 0===e.length?Ne.none():Ne.some(e[e.length-1])},mt=Ve(Array.from)?Array.from:function(e){return ut.call(e)},gt="undefined"!=typeof window?window:Function("return this;")(),yt=function(e,t){for(var n=t!==undefined&&null!==t?t:gt,r=0;r<e.length&&n!==undefined&&null!==n;++r)n=n[e[r]];return n},vt=function(e,t){var n=e.split(".");return yt(n,t)},_t=function(e,t){return vt(e,t)},bt={getOrDie:function(e,t){var n=_t(e,t);if(n===undefined||null===n)throw e+" not available on this browser";return n}},xt=function(){return bt.getOrDie("URL")},wt={createObjectURL:function(e){return xt().createObjectURL(e)},revokeObjectURL:function(e){xt().revokeObjectURL(e)}},Et=navigator,Ct=Et.userAgent,St=function(e){return"matchMedia"in window&&matchMedia(e).matches};ne=!1,ce=/Android/.test(Ct),ie=(ie=!(re=/WebKit/.test(Ct))&&!ne&&/MSIE/gi.test(Ct)&&/Explorer/gi.test(Et.appName))&&/MSIE (\w+)\./.exec(Ct)[1],oe=-1!==Ct.indexOf("Trident/")&&(-1!==Ct.indexOf("rv:")||-1!==Et.appName.indexOf("Netscape"))&&11,ae=-1!==Ct.indexOf("Edge/")&&!ie&&!oe&&12,ie=ie||oe||ae,se=!re&&!oe&&/Gecko/.test(Ct),ue=-1!==Ct.indexOf("Mac"),le=/(iPad|iPhone)/.test(Ct),fe="FormData"in window&&"FileReader"in window&&"URL"in window&&!!wt.createObjectURL,pe=St("only screen and (max-device-width: 480px)")&&(ce||le),de=St("only screen and (min-width: 800px)")&&(ce||le),he=-1!==Ct.indexOf("Windows Phone"),ae&&(re=!1);var Tt,At,kt,It,Dt,Pt,Ot,Rt,Nt,Lt,Mt,Bt,zt,Ft,jt,Ut,Vt,qt,Ht,Wt,Gt={opera:ne,webkit:re,ie:ie,gecko:se,mac:ue,iOS:le,android:ce,contentEditable:!le||fe||534<=parseInt(Ct.match(/AppleWebKit\/(\d*)/)[1],10),transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==ie,range:window.getSelection&&"Range"in window,documentMode:ie&&!ae?document.documentMode||7:10,fileApi:fe,ceFalse:!1===ie||8<ie,cacheSuffix:null,container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:!1===ie||11<ie,desktop:!pe&&!de,windowsPhone:he},Zt=function(){function r(e,t){return function(){e.apply(t,arguments)}}function o(r){var i=this;null!==this._state?e(function(){var e=i._state?r.onFulfilled:r.onRejected;if(null!==e){var t;try{t=e(i._value)}catch(n){return void r.reject(n)}r.resolve(t)}else(i._state?r.resolve:r.reject)(i._value)}):this._deferreds.push(r)}function i(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void l(r(t,e),r(i,this),r(a,this))}this._state=!0,this._value=e,s.call(this)}catch(n){a.call(this,n)}}function a(e){this._state=!1,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds.length;e<t;e++)o.call(this,this._deferreds[e]);this._deferreds=null}function u(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function l(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(i){if(r)return;r=!0,n(i)}}var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},c=function(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(e,r(i,this),r(a,this))},e=c.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)};return c.prototype["catch"]=function(e){return this.then(null,e)},c.prototype.then=function(n,r){var i=this;return new c(function(e,t){o.call(i,new u(n,r,e,t))})},c.all=function(e){var u=Array.prototype.slice.call(1===arguments.length&&t(e)?arguments[0]:arguments);return new c(function(i,o){function a(t,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void n.call(e,function(e){a(t,e)},o)}u[t]=e,0==--s&&i(u)}catch(r){o(r)}}if(0===u.length)return i([]);for(var s=u.length,e=0;e<u.length;e++)a(e,u[e])})},c.resolve=function(t){return t&&"object"==typeof t&&t.constructor===c?t:new c(function(e){e(t)})},c.reject=function(n){return new c(function(e,t){t(n)})},c.race=function(i){return new c(function(e,t){for(var n=0,r=i.length;n<r;n++)i[n].then(e,t)})},c},Xt=window.Promise?window.Promise:Zt(),Kt=function(e,t){var n,r=window.requestAnimationFrame,i=["ms","moz","webkit"],o=function(e){window.setTimeout(e,0)};for(n=0;n<i.length&&!r;n++)r=window[i[n]+"RequestAnimationFrame"];r||(r=o),r(e,t)},$t=function(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)},Yt=function(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)},Jt=function(t,n){var r,e;return(e=function(){var e=arguments;clearTimeout(r),r=$t(function(){t.apply(this,e)},n)}).stop=function(){clearTimeout(r)},e},Qt={requestAnimationFrame:function(e,t){Tt?Tt.then(e):Tt=new Xt(function(e){t||(t=document.body),Kt(e,t)}).then(e)},setTimeout:$t,setInterval:Yt,setEditorTimeout:function(e,t,n){return $t(function(){e.removed||t()},n)},setEditorInterval:function(e,t,n){var r;return r=Yt(function(){e.removed?clearInterval(r):t()},n)},debounce:Jt,throttle:Jt,clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)}},en="mce-data-",tn=/^(?:mouse|contextmenu)|click/,nn={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},rn=function(e){return e.isDefaultPrevented===an||e.isDefaultPrevented===on},on=function(){return!1},an=function(){return!0},sn=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)},un=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)},ln=function(e,t){if(e.composedPath){var n=e.composedPath();if(n&&0<n.length)return n[0]}return t},cn=function(e,t){var n,r=t||{};for(n in e)nn[n]||(r[n]=e[n]);if(r.target||(r.target=r.srcElement||document),Gt.experimentalShadowDom&&(r.target=ln(e,r.target)),e&&tn.test(e.type)&&e.pageX===undefined&&e.clientX!==undefined){var i=r.target.ownerDocument||document,o=i.documentElement,a=i.body;r.pageX=e.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),r.pageY=e.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}return r.preventDefault=function(){r.isDefaultPrevented=an,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},r.stopPropagation=function(){r.isPropagationStopped=an,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},!(r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=an,r.stopPropagation()})===rn(r)&&(r.isDefaultPrevented=on,r.isPropagationStopped=on,r.isImmediatePropagationStopped=on),"undefined"==typeof r.metaKey&&(r.metaKey=!1),r},fn=function(e,t,n){var r=e.document,i={type:"ready"};if(n.domLoaded)t(i);else{var o=function(){return"complete"===r.readyState||"interactive"===r.readyState&&r.body},a=function(){n.domLoaded||(n.domLoaded=!0,t(i))},s=function(){o()&&(un(r,"readystatechange",s),a())},u=function(){try{r.documentElement.doScroll("left")}catch(e){return void Qt.setTimeout(u)}a()};!r.addEventListener||Gt.ie&&Gt.ie<11?(sn(r,"readystatechange",s),r.documentElement.doScroll&&e.self===e.top&&u()):o()?a():sn(e,"DOMContentLoaded",a),sn(e,"load",a)}},pn=function(){var d,h,m,g,y,v=this,_={};h=en+(+new Date).toString(32),g="onmouseenter"in document.documentElement,m="onfocusin"in document.documentElement,y={mouseenter:"mouseover",mouseleave:"mouseout"},d=1,v.domLoaded=!1,v.events=_;var b=function(e,t){var n,r,i,o,a=_[t];if(n=a&&a[e.type])for(r=0,i=n.length;r<i;r++)if((o=n[r])&&!1===o.func.call(o.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return};v.bind=function(e,t,n,r){var i,o,a,s,u,l,c,f=window,p=function(e){b(cn(e||f.event),i)};if(e&&3!==e.nodeType&&8!==e.nodeType){for(e[h]?i=e[h]:(i=d++,e[h]=i,_[i]={}),r=r||e,a=(t=t.split(" ")).length;a--;)l=p,u=c=!1,"DOMContentLoaded"===(s=t[a])&&(s="ready"),v.domLoaded&&"ready"===s&&"complete"===e.readyState?n.call(r,cn({type:s})):(g||(u=y[s])&&(l=function(e){var t,n;if(t=e.currentTarget,(n=e.relatedTarget)&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=cn(e||f.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,b(e,i))}),m||"focusin"!==s&&"focusout"!==s||(c=!0,u="focusin"===s?"focus":"blur",l=function(e){(e=cn(e||f.event)).type="focus"===e.type?"focusin":"focusout",b(e,i)}),(o=_[i][s])?"ready"===s&&v.domLoaded?n({type:s}):o.push({func:n,scope:r}):(_[i][s]=o=[{func:n,scope:r}],o.fakeName=u,o.capture=c,o.nativeHandler=l,"ready"===s?fn(e,l,v):sn(e,u||s,l,c)));return e=o=0,n}},v.unbind=function(e,t,n){var r,i,o,a,s,u;if(!e||3===e.nodeType||8===e.nodeType)return v;if(r=e[h]){if(u=_[r],t){for(o=(t=t.split(" ")).length;o--;)if(i=u[s=t[o]]){if(n)for(a=i.length;a--;)if(i[a].func===n){var l=i.nativeHandler,c=i.fakeName,f=i.capture;(i=i.slice(0,a).concat(i.slice(a+1))).nativeHandler=l,i.fakeName=c,i.capture=f,u[s]=i}n&&0!==i.length||(delete u[s],un(e,i.fakeName||s,i.nativeHandler,i.capture))}}else{for(s in u)i=u[s],un(e,i.fakeName||s,i.nativeHandler,i.capture);u={}}for(s in u)return v;delete _[r];try{delete e[h]}catch(p){e[h]=null}}return v},v.fire=function(e,t,n){var r;if(!e||3===e.nodeType||8===e.nodeType)return v;for((n=cn(null,n)).type=t,n.target=e;(r=e[h])&&b(n,r),(e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow)&&!n.isPropagationStopped(););return v},v.clean=function(e){var t,n,r=v.unbind;if(!e||3===e.nodeType||8===e.nodeType)return v;if(e[h]&&r(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(r(e),t=(n=e.getElementsByTagName("*")).length;t--;)(e=n[t])[h]&&r(e);return v},v.destroy=function(){_={}},v.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}};pn.Event=new pn,pn.Event.bind(window,"ready",function(){});var dn="sizzle"+-new Date,hn=window.document,mn=0,gn=0,yn=e(),vn=e(),_n=e(),bn=function(e,t){return e===t&&(Bt=!0),0},xn=typeof undefined,wn=1<<31,En={}.hasOwnProperty,Cn=[],Sn=Cn.pop,Tn=Cn.push,An=Cn.push,kn=Cn.slice,In=Cn.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},Dn="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Pn="[\\x20\\t\\r\\n\\f]",On="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",Rn="\\["+Pn+"*("+On+")(?:"+Pn+"*([*^$|!~]?=)"+Pn+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+On+"))|)"+Pn+"*\\]",Nn=":("+On+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Rn+")*)|.*)\\)|)",Ln=new RegExp("^"+Pn+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Pn+"+$","g"),Mn=new RegExp("^"+Pn+"*,"+Pn+"*"),Bn=new RegExp("^"+Pn+"*([>+~]|"+Pn+")"+Pn+"*"),zn=new RegExp("="+Pn+"*([^\\]'\"]*?)"+Pn+"*\\]","g"),Fn=new RegExp(Nn),jn=new RegExp("^"+On+"$"),Un={ID:new RegExp("^#("+On+")"),CLASS:new RegExp("^\\.("+On+")"),TAG:new RegExp("^("+On+"|[*])"),ATTR:new RegExp("^"+Rn),PSEUDO:new RegExp("^"+Nn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Pn+"*(even|odd|(([+-]|)(\\d*)n|)"+Pn+"*(?:([+-]|)"+Pn+"*(\\d+)|))"+Pn+"*\\)|)","i"),bool:new RegExp("^(?:"+Dn+")$","i"),needsContext:new RegExp("^"+Pn+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Pn+"*((?:-\\d)?\\d*)"+Pn+"*\\)|)(?=[^-]|$)","i")},Vn=/^(?:input|select|textarea|button)$/i,qn=/^h\d$/i,Hn=/^[^{]+\{\s*\[native \w/,Wn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Gn=/[+~]/,Zn=/'|\\/g,Xn=new RegExp("\\\\([\\da-f]{1,6}"+Pn+"?|("+Pn+")|.)","ig"),Kn=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{An.apply(Cn=kn.call(hn.childNodes),hn.childNodes),Cn[hn.childNodes.length].nodeType}catch(eP){An={apply:Cn.length?function(e,t){Tn.apply(e,kn.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}var $n=function(e,t,n,r){var i,o,a,s,u,l,c,f,p,d;if((t?t.ownerDocument||t:hn)!==Ft&&zt(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=(t=t||Ft).nodeType)&&9!==s)return[];if(Ut&&!r){if(i=Wn.exec(e))if(a=i[1]){if(9===s){if(!(o=t.getElementById(a))||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&Wt(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return An.apply(n,t.getElementsByTagName(e)),n;if((a=i[3])&&kt.getElementsByClassName)return An.apply(n,t.getElementsByClassName(a)),n}if(kt.qsa&&(!Vt||!Vt.test(e))){if(f=c=dn,p=t,d=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=Ot(e),(c=t.getAttribute("id"))?f=c.replace(Zn,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",u=l.length;u--;)l[u]=f+g(l[u]);p=Gn.test(e)&&m(t.parentNode)||t,d=l.join(",")}if(d)try{return An.apply(n,p.querySelectorAll(d)),n}catch(h){}finally{c||t.removeAttribute("id")}}}return Nt(e.replace(Ln,"$1"),t,n,r)};for(At in kt=$n.support={},Pt=$n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},zt=$n.setDocument=function(e){function t(e){try{return e.top}catch(t){}return null}var n,u=e?e.ownerDocument||e:hn,r=u.defaultView;return u!==Ft&&9===u.nodeType&&u.documentElement?(jt=(Ft=u).documentElement,Ut=!Pt(u),r&&r!==t(r)&&(r.addEventListener?r.addEventListener("unload",function(){zt()},!1):r.attachEvent&&r.attachEvent("onunload",function(){zt()})),kt.attributes=!0,kt.getElementsByTagName=!0,kt.getElementsByClassName=Hn.test(u.getElementsByClassName),kt.getById=!0,It.find.ID=function(e,t){if(typeof t.getElementById!==xn&&Ut){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},It.filter.ID=function(e){var t=e.replace(Xn,Kn);return function(e){return e.getAttribute("id")===t}},It.find.TAG=kt.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==xn)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},It.find.CLASS=kt.getElementsByClassName&&function(e,t){if(Ut)return t.getElementsByClassName(e)},qt=[],Vt=[],kt.disconnectedMatch=!0,Vt=Vt.length&&new RegExp(Vt.join("|")),qt=qt.length&&new RegExp(qt.join("|")),n=Hn.test(jt.compareDocumentPosition),Wt=n||Hn.test(jt.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},bn=n?function(e,t){if(e===t)return Bt=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!kt.sortDetached&&t.compareDocumentPosition(e)===n?e===u||e.ownerDocument===hn&&Wt(hn,e)?-1:t===u||t.ownerDocument===hn&&Wt(hn,t)?1:Mt?In.call(Mt,e)-In.call(Mt,t):0:4&n?-1:1)}:function(e,t){if(e===t)return Bt=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===u?-1:t===u?1:i?-1:o?1:Mt?In.call(Mt,e)-In.call(Mt,t):0;if(i===o)return l(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?l(a[r],s[r]):a[r]===hn?-1:s[r]===hn?1:0},u):Ft},$n.matches=function(e,t){return $n(e,null,null,t)},$n.matchesSelector=function(e,t){if((e.ownerDocument||e)!==Ft&&zt(e),t=t.replace(zn,"='$1']"),kt.matchesSelector&&Ut&&(!qt||!qt.test(t))&&(!Vt||!Vt.test(t)))try{var n=Ht.call(e,t);if(n||kt.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(eP){}return 0<$n(t,Ft,null,[e]).length},$n.contains=function(e,t){return(e.ownerDocument||e)!==Ft&&zt(e),Wt(e,t)},$n.attr=function(e,t){(e.ownerDocument||e)!==Ft&&zt(e);var n=It.attrHandle[t.toLowerCase()],r=n&&En.call(It.attrHandle,t.toLowerCase())?n(e,t,!Ut):undefined;return r!==undefined?r:kt.attributes||!Ut?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},$n.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},$n.uniqueSort=function(e){var t,n=[],r=0,i=0;if(Bt=!kt.detectDuplicates,Mt=!kt.sortStable&&e.slice(0),e.sort(bn),Bt){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return Mt=null,e},Dt=$n.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=Dt(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=Dt(t);return n},(It=$n.selectors={cacheLength:50,createPseudo:n,match:Un,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Xn,Kn),e[3]=(e[3]||e[4]||e[5]||"").replace(Xn,Kn),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||$n.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&$n.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Un.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&Fn.test(n)&&(t=Ot(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Xn,Kn).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=yn[e+" "];return t||(t=new RegExp("(^|"+Pn+")"+e+"("+Pn+"|$)"))&&yn(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==xn&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=$n.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(d,e,t,h,m){var g="nth"!==d.slice(0,3),y="last"!==d.slice(-4),v="of-type"===e;return 1===h&&0===m?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=g!==y?"nextSibling":"previousSibling",c=e.parentNode,f=v&&e.nodeName.toLowerCase(),p=!n&&!v;if(c){if(g){for(;l;){for(o=e;o=o[l];)if(v?o.nodeName.toLowerCase()===f:1===o.nodeType)return!1;u=l="only"===d&&!u&&"nextSibling"}return!0}if(u=[y?c.firstChild:c.lastChild],y&&p){for(s=(r=(i=c[dn]||(c[dn]={}))[d]||[])[0]===mn&&r[1],a=r[0]===mn&&r[2],o=s&&c.childNodes[s];o=++s&&o&&o[l]||(a=s=0)||u.pop();)if(1===o.nodeType&&++a&&o===e){i[d]=[mn,s,a];break}}else if(p&&(r=(e[dn]||(e[dn]={}))[d])&&r[0]===mn)a=r[1];else for(;(o=++s&&o&&o[l]||(a=s=0)||u.pop())&&((v?o.nodeName.toLowerCase()!==f:1!==o.nodeType)||!++a||(p&&((o[dn]||(o[dn]={}))[d]=[mn,a]),o!==e)););return(a-=m)===h||a%h==0&&0<=a/h}}},PSEUDO:function(e,o){var t,a=It.pseudos[e]||It.setFilters[e.toLowerCase()]||$n.error("unsupported pseudo: "+e);return a[dn]?a(o):1<a.length?(t=[e,e,"",o],It.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,r=a(e,o),i=r.length;i--;)e[n=In.call(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:n(function(e){var r=[],i=[],s=Rt(e.replace(Ln,"$1"));return s[dn]?n(function(e,t,n,r){for(var i,o=s(e,null,r,[]),a=e.length;a--;)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),!i.pop()}}),has:n(function(t){return function(e){return 0<$n(t,e).length}}),contains:n(function(t){return t=t.replace(Xn,Kn),function(e){return-1<(e.textContent||e.innerText||Dt(e)).indexOf(t)}}),lang:n(function(n){return jn.test(n||"")||$n.error("unsupported lang: "+n),n=n.replace(Xn,Kn).toLowerCase(),function(e){var t;do{if(t=Ut?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===jt},focus:function(e){return e===Ft.activeElement&&(!Ft.hasFocus||Ft.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!It.pseudos.empty(e)},header:function(e){return qn.test(e.nodeName)},input:function(e){return Vn.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:i(function(){return[0]}),last:i(function(e,t){return[t-1]}),eq:i(function(e,t,n){return[n<0?n+t:n]}),even:i(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:i(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:i(function(e,t,n){for(var r=n<0?n+t:n;0<=--r;)e.push(r);return e}),gt:i(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=It.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})It.pseudos[At]=t(At);for(At in{submit:!0,reset:!0})It.pseudos[At]=r(At);o.prototype=It.filters=It.pseudos,It.setFilters=new o,Ot=$n.tokenize=function(e,t){var n,r,i,o,a,s,u,l=vn[e+" "];if(l)return t?0:l.slice(0);for(a=e,s=[],u=It.preFilter;a;){for(o in n&&!(r=Mn.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=Bn.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(Ln," ")}),a=a.slice(n.length)),It.filter)!(r=Un[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?$n.error(e):vn(e,s).slice(0)},Rt=$n.compile=function(e,t){var n,r=[],i=[],o=_n[e+" "];if(!o){for(t||(t=Ot(e)),n=t.length;n--;)(o=d(t[n]))[dn]?r.push(o):i.push(o);(o=_n(e,a(i,r))).selector=e}return o},Nt=$n.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&Ot(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&kt.getById&&9===t.nodeType&&Ut&&It.relative[o[1].type]){if(!(t=(It.find.ID(a.matches[0].replace(Xn,Kn),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=Un.needsContext.test(e)?0:o.length;i--&&(a=o[i],!It.relative[s=a.type]);)if((u=It.find[s])&&(r=u(a.matches[0].replace(Xn,Kn),Gn.test(o[0].type)&&m(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&g(o)))return An.apply(n,r),n;break}}return(l||Rt(e,c))(r,t,!Ut,n,Gn.test(e)&&m(t.parentNode)||t),n},kt.sortStable=dn.split("").sort(bn).join("")===dn,kt.detectDuplicates=!!Bt,zt(),kt.sortDetached=!0;var Yn=Array.isArray,Jn=function(e){var t,n,r=e;if(!Yn(e))for(r=[],t=0,n=e.length;t<n;t++)r[t]=e[t];return r},Qn=function(e,t,n){var r,i;if(!e)return 0;if(n=n||e,e.length!==undefined){for(r=0,i=e.length;r<i;r++)if(!1===t.call(n,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return 0;return 1},er=function(n,r){var i=[];return Qn(n,function(
e,t){i.push(r(e,t,n))}),i},tr=function(n,r){var i=[];return Qn(n,function(e,t){r&&!r(e,t,n)||i.push(e)}),i},nr=function(e,t,n){var r,i;for(r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e))return r;return-1},rr=function(e,t,n){var r=nr(e,t,n);return-1!==r?e[r]:undefined},ir={isArray:Yn,toArray:Jn,each:Qn,map:er,filter:tr,indexOf:function(e,t){var n,r;if(e)for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},reduce:function(e,t,n,r){var i=0;for(arguments.length<3&&(n=e[0]);i<e.length;i++)n=t.call(r,n,e[i],i);return n},findIndex:nr,find:rr,last:function(e){return e[e.length-1]}},or=/^\s*|\s*$/g,ar=function(e){return null===e||e===undefined?"":(""+e).replace(or,"")},sr=function(e,t){return t?!("array"!==t||!ir.isArray(e))||typeof e===t:e!==undefined},ur=function(e,t,n){var r;for(t=t||",","string"==typeof(e=e||[])&&(e=e.split(t)),n=n||{},r=e.length;r--;)n[e[r]]={};return n},lr=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},cr=function(e,t,n){var r,i,o,a,s,u=this,l=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),o=e[3].match(/(^|\.)(\w+)$/i)[2],!(i=u.createNS(e[3].replace(/\.\w+$/,""),n))[o]){if("static"===e[2])return i[o]=t,void(this.onCreate&&this.onCreate(e[2],e[3],i[o]));t[o]||(t[o]=function(){},l=1),i[o]=t[o],u.extend(i[o].prototype,t),e[5]&&(r=u.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],s=i[o],i[o]=l?function(){return r[a].apply(this,arguments)}:function(){return this.parent=r[a],s.apply(this,arguments)},i[o].prototype[o]=i[o],u.each(r,function(e,t){i[o].prototype[t]=r[t]}),u.each(t,function(e,t){r[t]?i[o].prototype[t]=function(){return this.parent=r[t],e.apply(this,arguments)}:t!==o&&(i[o].prototype[t]=e)})),u.each(t["static"],function(e,t){i[o][t]=e})}},fr=function(e,t){for(var n,r,i,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var s,u=arguments;for(n=1,r=u.length;n<r;n++)for(i in t=u[n])t.hasOwnProperty(i)&&(s=t[i])!==undefined&&(e[i]=s);return e},pr=function(e,n,r,i){i=i||this,e&&(r&&(e=e[r]),ir.each(e,function(e,t){if(!1===n.call(i,e,t,r))return!1;pr(e,n,r,i)}))},dr=function(e,t){var n,r;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)t[r=e[n]]||(t[r]={}),t=t[r];return t},hr=function(e,t){var n,r;for(t=t||window,n=0,r=(e=e.split(".")).length;n<r&&(t=t[e[n]]);n++);return t},mr=function(e,t){return!e||sr(e,"array")?e:ir.map(e.split(t||","),ar)},gr=function(e){var t=Gt.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e},yr={trim:ar,isArray:ir.isArray,is:sr,toArray:ir.toArray,makeMap:ur,each:ir.each,map:ir.map,grep:ir.filter,inArray:ir.indexOf,hasOwn:lr,extend:fr,create:cr,walk:pr,createNS:dr,resolve:hr,explode:mr,_addCacheSuffix:gr},vr=document,_r=Array.prototype.push,br=Array.prototype.slice,xr=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,wr=pn.Event,Er=yr.makeMap("children,contents,next,prev"),Cr=function(e){return void 0!==e},Sr=function(e){return"string"==typeof e},Tr=function(e){return e&&e===e.window},Ar=function(e,t){var n,r,i;for(i=(t=t||vr).createElement("div"),n=t.createDocumentFragment(),i.innerHTML=e;r=i.firstChild;)n.appendChild(r);return n},kr=function(e,t,n,r){var i;if(Sr(t))t=Ar(t,qr(e[0]));else if(t.length&&!t.nodeType){if(t=Br.makeArray(t),r)for(i=t.length-1;0<=i;i--)kr(e,t[i],n,r);else for(i=0;i<t.length;i++)kr(e,t[i],n,r);return e}if(t.nodeType)for(i=e.length;i--;)n.call(e[i],t);return e},Ir=function(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},Dr=function(e,t,n){var r,i;return t=Br(t)[0],e.each(function(){var e=this;n&&r===e.parentNode||(r=e.parentNode,i=t.cloneNode(!1),e.parentNode.insertBefore(i,e)),i.appendChild(e)}),e},Pr=yr.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),Or=yr.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),Rr={"for":"htmlFor","class":"className",readonly:"readOnly"},Nr={"float":"cssFloat"},Lr={},Mr={},Br=function(e,t){return new Br.fn.init(e,t)},zr=function(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1},Fr=/^\s*|\s*$/g,jr=function(e){return null===e||e===undefined?"":(""+e).replace(Fr,"")},Ur=function(e,t){var n,r,i,o;if(e)if((n=e.length)===undefined){for(r in e)if(e.hasOwnProperty(r)&&(o=e[r],!1===t.call(o,r,o)))break}else for(i=0;i<n&&(o=e[i],!1!==t.call(o,i,o));i++);return e},Vr=function(e,n){var r=[];return Ur(e,function(e,t){n(t,e)&&r.push(t)}),r},qr=function(e){return e?9===e.nodeType?e:e.ownerDocument:vr};Br.fn=Br.prototype={constructor:Br,selector:"",context:null,length:0,init:function(e,t){var n,r,i=this;if(!e)return i;if(e.nodeType)return i.context=i[0]=e,i.length=1,i;if(t&&t.nodeType)i.context=t;else{if(t)return Br(e).attr(t);i.context=t=document}if(Sr(e)){if(!(n="<"===(i.selector=e).charAt(0)&&">"===e.charAt(e.length-1)&&3<=e.length?[null,e,null]:xr.exec(e)))return Br(t).find(e);if(n[1])for(r=Ar(e,qr(t)).firstChild;r;)_r.call(i,r),r=r.nextSibling;else{if(!(r=qr(t).getElementById(n[2])))return i;if(r.id!==n[2])return i.find(e);i.length=1,i[0]=r}}else this.add(e,!1);return i},toArray:function(){return yr.toArray(this)},add:function(e,t){var n,r,i=this;if(Sr(e))return i.add(Br(e));if(!1!==t)for(n=Br.unique(i.toArray().concat(Br.makeArray(e))),i.length=n.length,r=0;r<n.length;r++)i[r]=n[r];else _r.apply(i,Br.makeArray(e));return i},attr:function(t,n){var e,r=this;if("object"==typeof t)Ur(t,function(e,t){r.attr(e,t)});else{if(!Cr(n)){if(r[0]&&1===r[0].nodeType){if((e=Lr[t])&&e.get)return e.get(r[0],t);if(Or[t])return r.prop(t)?t:undefined;null===(n=r[0].getAttribute(t,2))&&(n=undefined)}return n}this.each(function(){var e;if(1===this.nodeType){if((e=Lr[t])&&e.set)return void e.set(this,n);null===n?this.removeAttribute(t,2):this.setAttribute(t,n,2)}})}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=Rr[e]||e))Ur(e,function(e,t){n.prop(e,t)});else{if(!Cr(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1===this.nodeType&&(this[e]=t)})}return n},css:function(n,r){var e,i,o=this,t=function(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})},a=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})};if("object"==typeof n)Ur(n,function(e,t){o.css(e,t)});else if(Cr(r))n=t(n),"number"!=typeof r||Pr[n]||(r=r.toString()+"px"),o.each(function(){var e=this.style;if((i=Mr[n])&&i.set)i.set(this,r);else{try{this.style[Nr[n]||n]=r}catch(t){}null!==r&&""!==r||(e.removeProperty?e.removeProperty(a(n)):e.removeAttribute(n))}});else{if(e=o[0],(i=Mr[n])&&i.get)return i.get(e);if(!e.ownerDocument.defaultView)return e.currentStyle?e.currentStyle[t(n)]:"";try{return e.ownerDocument.defaultView.getComputedStyle(e,null).getPropertyValue(a(n))}catch(s){return undefined}}return o},remove:function(){for(var e,t=this,n=this.length;n--;)e=t[n],wr.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this,n=this.length;n--;)for(e=t[n];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t,n=this;if(Cr(e)){t=n.length;try{for(;t--;)n[t].innerHTML=e}catch(r){Br(n[t]).empty().append(e)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var t,n=this;if(Cr(e)){for(t=n.length;t--;)"innerText"in n[t]?n[t].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return kr(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return kr(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?kr(e,arguments,function(e){this.parentNode.insertBefore(e,this)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?kr(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):e},appendTo:function(e){return Br(e).append(this),this},prependTo:function(e){return Br(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return Dr(this,e)},wrapAll:function(e){return Dr(this,e,!0)},wrapInner:function(e){return this.each(function(){Br(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){Br(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),Br(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(i,o){var e=this;return"string"!=typeof i||(-1!==i.indexOf(" ")?Ur(i.split(" "),function(){e.toggleClass(this,o)}):e.each(function(e,t){var n,r;(r=Ir(t,i))!==o&&(n=t.className,r?t.className=jr((" "+n+" ").replace(" "+i+" "," ")):t.className+=n?" "+i:i)})),e},hasClass:function(e){return Ir(this[0],e)},each:function(e){return Ur(this,e)},on:function(e,t){return this.each(function(){wr.bind(this,e,t)})},off:function(e,t){return this.each(function(){wr.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?wr.fire(this,e.type,e):wr.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new Br(br.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,r=[];for(t=0,n=this.length;t<n;t++)Br.find(e,this[t],r);return Br(r)},filter:function(n){return Br("function"==typeof n?Vr(this.toArray(),function(e,t){return n(t,e)}):Br.filter(n,this.toArray()))},closest:function(n){var r=[];return n instanceof Br&&(n=n[0]),this.each(function(e,t){for(;t;){if("string"==typeof n&&Br(t).is(n)){r.push(t);break}if(t===n){r.push(t);break}t=t.parentNode}}),Br(r)},offset:function(e){var t,n,r,i,o=0,a=0;return e?this.css(e):((t=this[0])&&(r=(n=t.ownerDocument).documentElement,t.getBoundingClientRect&&(o=(i=t.getBoundingClientRect()).left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft,a=i.top+(r.scrollTop||n.body.scrollTop)-r.clientTop)),{left:o,top:a})},push:_r,sort:[].sort,splice:[].splice},yr.extend(Br,{extend:yr.extend,makeArray:function(e){return Tr(e)||e.nodeType?[e]:yr.toArray(e)},inArray:zr,isArray:yr.isArray,each:Ur,trim:jr,grep:Vr,find:$n,expr:$n.selectors,unique:$n.uniqueSort,text:$n.getText,contains:$n.contains,filter:function(e,t,n){var r=t.length;for(n&&(e=":not("+e+")");r--;)1!==t[r].nodeType&&t.splice(r,1);return t=1===t.length?Br.find.matchesSelector(t[0],e)?[t[0]]:[]:Br.find.matches(e,t)}});var Hr=function(e,t,n){var r=[],i=e[t];for("string"!=typeof n&&n instanceof Br&&(n=n[0]);i&&9!==i.nodeType;){if(n!==undefined){if(i===n)break;if("string"==typeof n&&Br(i).is(n))break}1===i.nodeType&&r.push(i),i=i[t]}return r},Wr=function(e,t,n,r){var i=[];for(r instanceof Br&&(r=r[0]);e;e=e[t])if(!n||e.nodeType===n){if(r!==undefined){if(e===r)break;if("string"==typeof r&&Br(e).is(r))break}i.push(e)}return i},Gr=function(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType===n)return e;return null};Ur({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Hr(e,"parentNode")},next:function(e){return Gr(e,"nextSibling",1)},prev:function(e){return Gr(e,"previousSibling",1)},children:function(e){return Wr(e.firstChild,"nextSibling",1)},contents:function(e){return yr.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,r){Br.fn[e]=function(t){var n=[];return this.each(function(){var e=r.call(n,this,t,n);e&&(Br.isArray(e)?n.push.apply(n,e):n.push(e))}),1<this.length&&(Er[e]||(n=Br.unique(n)),0===e.indexOf("parents")&&(n=n.reverse())),n=Br(n),t?n.filter(t):n}}),Ur({parentsUntil:function(e,t){return Hr(e,"parentNode",t)},nextUntil:function(e,t){return Wr(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return Wr(e,"previousSibling",1,t).slice(1)}},function(r,i){Br.fn[r]=function(t,e){var n=[];return this.each(function(){var e=i.call(n,this,t,n);e&&(Br.isArray(e)?n.push.apply(n,e):n.push(e))}),1<this.length&&(n=Br.unique(n),0!==r.indexOf("parents")&&"prevUntil"!==r||(n=n.reverse())),n=Br(n),e?n.filter(e):n}}),Br.fn.is=function(e){return!!e&&0<this.filter(e).length},Br.fn.init.prototype=Br.fn,Br.overrideDefaults=function(n){var r,i=function(e,t){return r=r||n(),0===arguments.length&&(e=r.element),t||(t=r.context),new i.fn.init(e,t)};return Br.extend(i,this),i};var Zr=function(n,r,e){Ur(e,function(e,t){n[e]=n[e]||{},n[e][r]=t})};Gt.ie&&Gt.ie<8&&(Zr(Lr,"get",{maxlength:function(e){var t=e.maxLength;return 2147483647===t?undefined:t},size:function(e){var t=e.size;return 20===t?undefined:t},"class":function(e){return e.className},style:function(e){var t=e.style.cssText;return 0===t.length?undefined:t}}),Zr(Lr,"set",{"class":function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),Gt.ie&&Gt.ie<9&&(Nr["float"]="styleFloat",Zr(Mr,"set",{opacity:function(e,t){var n=e.style;null===t||""===t?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*t+")")}})),Br.attrHooks=Lr,Br.cssHooks=Mr;var Xr,Kr,$r,Yr=function(n){var r,i=!1;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i||(i=!0,r=n.apply(null,e)),r}},Jr=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}return undefined},Qr=function(e,t){var n=Jr(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return ni(r(1),r(2))},ei=function(e,t){var n=String(t).toLowerCase();return 0===e.length?ti():Qr(e,n)},ti=function(){return ni(0,0)},ni=function(e,t){return{major:e,minor:t}},ri={nu:ni,detect:ei,unknown:ti},ii="Edge",oi="Chrome",ai="IE",si="Opera",ui="Firefox",li="Safari",ci=function(e,t){return function(){return t===e}},fi=function(){return pi({current:undefined,version:ri.unknown()})},pi=function(e){var t=e.current;return{current:t,version:e.version,isEdge:ci(ii,t),isChrome:ci(oi,t),isIE:ci(ai,t),isOpera:ci(si,t),isFirefox:ci(ui,t),isSafari:ci(li,t)}},di={unknown:fi,nu:pi,edge:ye(ii),chrome:ye(oi),ie:ye(ai),opera:ye(si),firefox:ye(ui),safari:ye(li)},hi="Windows",mi="iOS",gi="Android",yi="Linux",vi="OSX",_i="Solaris",bi="FreeBSD",xi=function(e,t){return function(){return t===e}},wi=function(){return Ei({current:undefined,version:ri.unknown()})},Ei=function(e){var t=e.current;return{current:t,version:e.version,isWindows:xi(hi,t),isiOS:xi(mi,t),isAndroid:xi(gi,t),isOSX:xi(vi,t),isLinux:xi(yi,t),isSolaris:xi(_i,t),isFreeBSD:xi(bi,t)}},Ci={unknown:wi,nu:Ei,windows:ye(hi),ios:ye(mi),android:ye(gi),linux:ye(yi),osx:ye(vi),solaris:ye(_i),freebsd:ye(bi)},Si=function(e,t){var n=String(t).toLowerCase();return tt(e,function(e){return e.search(n)})},Ti={detectBrowser:function(e,n){return Si(e,n).map(function(e){var t=ri.detect(e.versionRegexes,n);return{current:e.name,version:t}})},detectOs:function(e,n){return Si(e,n).map(function(e){var t=ri.detect(e.versionRegexes,n);return{current:e.name,version:t}})}},Ai=function(e,t){return-1!==e.indexOf(t)},ki=function(e){return e.replace(/^\s+|\s+$/g,"")},Ii=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Di=function(t){return function(e){return Ai(e,t)}},Pi=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Ai(e,"edge/")&&Ai(e,"chrome")&&Ai(e,"safari")&&Ai(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ii],search:function(e){return Ai(e,"chrome")&&!Ai(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Ai(e,"msie")||Ai(e,"trident")}},{name:"Opera",versionRegexes:[Ii,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Di("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Di("firefox")},{name:"Safari",versionRegexes:[Ii,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Ai(e,"safari")||Ai(e,"mobile/"))&&Ai(e,"applewebkit")}}],Oi=[{name:"Windows",search:Di("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Ai(e,"iphone")||Ai(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Di("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Di("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Di("linux"),versionRegexes:[]},{name:"Solaris",search:Di("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Di("freebsd"),versionRegexes:[]}],Ri={browsers:ye(Pi),oses:ye(Oi)},Ni={detect:function(e){var t=Ri.browsers(),n=Ri.oses(),r=Ti.detectBrowser(t,e).fold(di.unknown,di.nu),i=Ti.detectOs(n,e).fold(Ci.unknown,Ci.nu);return{browser:r,os:i,deviceType:s(i,r,e)}}},Li={detect:Yr(function(){var e=navigator.userAgent;return Ni.detect(e)})},Mi=function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",e),"HTML must have a single root node";return Fi(n.childNodes[0])},Bi=function(e,t){var n=(t||document).createElement(e);return Fi(n)},zi=function(e,t){var n=(t||document).createTextNode(e);return Fi(n)},Fi=function(e){if(null===e||e===undefined)throw new Error("Node cannot be null or undefined");return{dom:ye(e)}},ji={fromHtml:Mi,fromTag:Bi,fromText:zi,fromDom:Fi,fromPoint:function(e,t,n){var r=e.dom();return Ne.from(r.elementFromPoint(t,n)).map(Fi)}},Ui={ATTRIBUTE:Node.ATTRIBUTE_NODE,CDATA_SECTION:Node.CDATA_SECTION_NODE,COMMENT:Node.COMMENT_NODE,DOCUMENT:Node.DOCUMENT_NODE,DOCUMENT_TYPE:Node.DOCUMENT_TYPE_NODE,DOCUMENT_FRAGMENT:Node.DOCUMENT_FRAGMENT_NODE,ELEMENT:Node.ELEMENT_NODE,TEXT:Node.TEXT_NODE,PROCESSING_INSTRUCTION:Node.PROCESSING_INSTRUCTION_NODE,ENTITY_REFERENCE:Node.ENTITY_REFERENCE_NODE,ENTITY:Node.ENTITY_NODE,NOTATION:Node.NOTATION_NODE},Vi=function(e){return e.dom().nodeName.toLowerCase()},qi=function(e){return e.dom().nodeType},Hi=function(e){return e.dom().nodeValue},Wi=function(t){return function(e){return qi(e)===t}},Gi=function(e){return qi(e)===Ui.COMMENT||"#comment"===Vi(e)},Zi=Wi(Ui.ELEMENT),Xi=Wi(Ui.TEXT),Ki=Wi(Ui.DOCUMENT),$i={name:Vi,type:qi,value:Hi,isElement:Zi,isText:Xi,isDocument:Ki,isComment:Gi},Yi=Object.keys,Ji=function(e,t){for(var n=Yi(e),r=0,i=n.length;r<i;r++){var o=n[r];t(e[o],o,e)}},Qi=function(e,r){return eo(e,function(e,t,n){return{k:t,v:r(e,t,n)}})},eo=function(r,i){var o={};return Ji(r,function(e,t){var n=i(e,t,r);o[n.k]=n.v}),o},to=function(e,n){var r={},i={};return Ji(e,function(e,t){(n(e,t)?r:i)[t]=e}),{t:r,f:i}},no=function(e,t,n){if(!(Be(n)||Ue(n)||qe(n)))throw console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},ro=function(e,t,n){no(e.dom(),t,n)},io=function(e,t){var n=e.dom().getAttribute(t);return null===n?undefined:n},oo=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},ao=function(e,t,n){oo(e,n)&&!oo(t,n)&&ro(t,n,io(e,n))},so={clone:function(e){return et(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},set:ro,setAll:function(e,t){var n=e.dom();Ji(t,function(e,t){no(n,t,e)})},get:io,has:oo,remove:function(e,t){e.dom().removeAttribute(t)},hasNone:function(e){var t=e.dom().attributes;return t===undefined||null===t||0===t.length},transfer:function(t,n,e){$i.isElement(t)&&$i.isElement(n)&&Ke(e,function(e){ao(t,n,e)})}},uo=function(e){var t=$i.isText(e)?e.dom().parentNode:e.dom();return t!==undefined&&null!==t&&t.ownerDocument.body.contains(t)},lo=Yr(function(){return co(ji.fromDom(document))}),co=function(e){var t=e.dom().body;if(null===t||t===undefined)throw"Body is not available yet";return ji.fromDom(t)},fo={body:lo,getBody:co,inBody:uo},po={isSupported:function(e){return e.style!==undefined}},ho=function(e,t,n){if(!Be(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);po.isSupported(e)&&e.style.setProperty(t,n)},mo=function(e,t){po.isSupported(e)&&e.style.removeProperty(t)},go=function(e,t,n){var r=e.dom();ho(r,t,n)},yo=function(e,t){var n=e.dom(),r=window.getComputedStyle(n).getPropertyValue(t),i=""!==r||fo.inBody(e)?r:vo(n,t);return null===i?undefined:i},vo=function(e,t){return po.isSupported(e)?e.style.getPropertyValue(t):""},_o=function(e,t){var n=e.dom(),r=vo(n,t);return Ne.from(r).filter(function(e){return 0<e.length})},bo=function(e,t,n){var r=ji.fromTag(e);return go(r,t,n),_o(r,t).isSome()},xo=function(e,t,n){_o(e,n).each(function(e){_o(t,n).isNone()&&go(t,n,e)})},wo={copy:function(e,t){var n=e.dom(),r=t.dom();po.isSupported(n)&&po.isSupported(r)&&(r.style.cssText=n.style.cssText)},set:go,preserve:function(e,t){var n=so.get(e,"style"),r=t(e);return(n===undefined?so.remove:so.set)(e,"style",n),r},setAll:function(e,t){var n=e.dom();Ji(t,function(e,t){ho(n,t,e)})},setOptions:function(e,t){var n=e.dom();Ji(t,function(e,t){e.fold(function(){mo(n,t)},function(e){ho(n,t,e)})})},remove:function(e,t){var n=e.dom();mo(n,t),so.has(e,"style")&&""===ki(so.get(e,"style"))&&so.remove(e,"style")},get:yo,getRaw:_o,getAllRaw:function(e){var t={},n=e.dom();if(po.isSupported(n))for(var r=0;r<n.style.length;r++){var i=n.style.item(r);t[i]=n.style[i]}return t},isValidValue:bo,reflow:function(e){return e.dom().offsetWidth},transfer:function(t,n,e){$i.isElement(t)&&$i.isElement(n)&&Ke(e,function(e){xo(t,n,e)})}},Eo=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(t.length!==n.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+n.length+" arguments");var r={};return Ke(t,function(e,t){r[e]=ye(n[t])}),r}},Co={toArray:function(e,t){for(var n=[],r=function(e){return n.push(e),t(e)},i=t(e);(i=i.bind(r)).isSome(););return n}},So=function(){return bt.getOrDie("Node")},To=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},Ao={documentPositionPreceding:function(e,t){return To(e,t,So().DOCUMENT_POSITION_PRECEDING)},documentPositionContainedBy:function(e,t){return To(e,t,So().DOCUMENT_POSITION_CONTAINED_BY)}},ko=Ui.ELEMENT,Io=Ui.DOCUMENT,Do=function(e){return e.nodeType!==ko&&e.nodeType!==Io||0===e.childElementCount},Po={all:function(e,t){var n=t===undefined?document:t.dom();return Do(n)?[]:Xe(n.querySelectorAll(e),ji.fromDom)},is:function(e,t){var n=e.dom();if(n.nodeType!==ko)return!1;if(n.matches!==undefined)return n.matches(t);if(n.msMatchesSelector!==undefined)return n.msMatchesSelector(t);if(n.webkitMatchesSelector!==undefined)return n.webkitMatchesSelector(t);if(n.mozMatchesSelector!==undefined)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},one:function(e,t){var n=t===undefined?document:t.dom();return Do(n)?Ne.none():Ne.from(n.querySelector(e)).map(ji.fromDom)}},Oo=function(e,t){return e.dom()===t.dom()},Ro=function(e,t){return e.dom().isEqualNode(t.dom())},No=function(e,t){return Ze(t,_e(Oo,e))},Lo=function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},Mo=function(e,t){return Ao.documentPositionContainedBy(e.dom(),t.dom())},Bo=Li.detect().browser.isIE()?Mo:Lo,zo={eq:Oo,isEqualNode:Ro,member:No,contains:Bo,is:Po.is},Fo=function(e){return ji.fromDom(e.dom().ownerDocument)},jo=function(e){return ji.fromDom(e.dom().ownerDocument.documentElement)},Uo=function(e){var t=e.dom().ownerDocument.defaultView;return ji.fromDom(t)},Vo=function(e){var t=e.dom();return Ne.from(t.parentNode).map(ji.fromDom)},qo=function(n){return Vo(n).bind(function(e){var t=Yo(e);return nt(t,function(e){return zo.eq(n,e)})})},Ho=function(e,t){for(var n=Ve(t)?t:ye(!1),r=e.dom(),i=[];null!==r.parentNode&&r.parentNode!==undefined;){var o=r.parentNode,a=ji.fromDom(o);if(i.push(a),!0===n(a))break;r=o}return i},Wo=function(t){var e=function(e){return Je(e,function(e){return!zo.eq(t,e)})};return Vo(t).map(Yo).map(e).getOr([])},Go=function(e){var t=e.dom();return Ne.from(t.offsetParent).map(ji.fromDom)},Zo=function(e){var t=e.dom();return Ne.from(t.previousSibling).map(ji.fromDom)},Xo=function(e){var t=e.dom();return Ne.from(t.nextSibling).map(ji.fromDom)},Ko=function(e){return lt(Co.toArray(e,Zo))},$o=function(e){return Co.toArray(e,Xo)},Yo=function(e){var t=e.dom();return Xe(t.childNodes,ji.fromDom)},Jo=function(e,t){var n=e.dom().childNodes;return Ne.from(n[t]).map(ji.fromDom)},Qo=function(e){return Jo(e,0)},ea=function(e){return Jo(e,e.dom().childNodes.length-1)},ta=function(e){return e.dom().childNodes.length},na=function(e){return e.dom().hasChildNodes()},ra=Eo("element","offset"),ia=function(e,t){var n=Yo(e);return 0<n.length&&t<n.length?ra(n[t],0):ra(e,t)},oa={owner:Fo,defaultView:Uo,documentElement:jo,parent:Vo,findIndex:qo,parents:Ho,siblings:Wo,prevSibling:Zo,offsetParent:Go,prevSiblings:Ko,nextSibling:Xo,nextSiblings:$o,children:Yo,child:Jo,firstChild:Qo,lastChild:ea,childNodesCount:ta,hasChildNodes:na,leaf:ia},aa=Li.detect().browser,sa=function(e){return tt(e,$i.isElement)},ua=function(e){return aa.isFirefox()&&"table"===$i.name(e)?sa(oa.children(e)).filter(function(e){return"caption"===$i.name(e)}).bind(function(i){return sa(oa.nextSiblings(i)).map(function(e){var t=e.dom().offsetTop,n=i.dom().offsetTop,r=i.dom().offsetHeight;return t<=n?-r:0})}).getOr(0):0},la={getPos:function(e,t,n){var r,i,o=0,a=0,s=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===wo.get(ji.fromDom(e),"position"))return{x:o=(i=t.getBoundingClientRect()).left+(s.documentElement.scrollLeft||e.scrollLeft)-s.documentElement.clientLeft,y:a=i.top+(s.documentElement.scrollTop||e.scrollTop)-s.documentElement.clientTop};for(r=t;r&&r!==n&&r.nodeType;)o+=r.offsetLeft||0,a+=r.offsetTop||0,r=r.offsetParent;for(r=t.parentNode;r&&r!==n&&r.nodeType;)o-=r.scrollLeft||0,a-=r.scrollTop||0,r=r.parentNode;a+=ua(ji.fromDom(t))}return{x:o,y:a}}},ca=function(e){var n=Ne.none(),t=[],r=function(n){return ca(function(t){i(function(e){t(n(e))})})},i=function(e){a()?u(e):t.push(e)},o=function(e){n=Ne.some(e),s(t),t=[]},a=function(){return n.isSome()},s=function(e){Ke(e,u)},u=function(t){n.each(function(e){setTimeout(function(){t(e)},0)})};return e(o),{get:i,map:r,isReady:a}},fa=function(t){return ca(function(e){e(t)})},pa={nu:ca,pure:fa},da=function(r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this;setTimeout(function(){r.apply(n,e)},0)}},ha=function(t){var i=function(e){t(da(e))},n=function(){return pa.nu(i)},e=function(){var t=null;return ha(function(e){null===t&&(t=n()),t.get(e)})};return{map:function(r){return ha(function(n){i(function(e){var t=r(e);n(t)})})},bind:function(n){return ha(function(t){i(function(e){n(e).get(t)})})},anonBind:function(t){return ha(function(e){i(function(){t.get(e)})})},toLazy:n,toCached:e,get:i}},ma=function(t){return ha(function(e){e(t)})},ga={nu:ha,pure:ma},ya=function(a,e){return e(function(n){var r=[],i=0,o=function(t){return function(e){r[t]=e,++i>=a.length&&n(r)}};0===a.length?n([]):Ke(a,function(e,t){e.get(o(t))})})},va=function(e){return ya(e,ga.nu)},_a=function(n){var e=function(){return _a(n)},t=function(){return _a(n)},r=function(e){return _a(e(n))},i=function(e){e(n)},o=function(e){return e(n)},a=function(e,t){return t(n)},s=function(e){return e(n)},u=function(e){return e(n)},l=function(){return Ne.some(n)};return{is:function(e){return n===e},isValue:Ae,isError:Te,getOr:ye(n),getOrThunk:ye(n),getOrDie:ye(n),or:e,orThunk:t,fold:a,map:r,each:i,bind:o,exists:s,forall:u,toOption:l}},ba=function(t){return{is:Te,isValue:Te,isError:Ae,getOr:ve,getOrThunk:function(e){return e()},getOrDie:function(){return Se(String(t))()},or:function(e){return e},orThunk:function(e){return e()},fold:function(e){return e(t)},map:function(){return ba(t)},each:me,bind:function(){return ba(t)},exists:Te,forall:Ae,toOption:Ne.none}},xa={value:_a,error:ba},wa=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],Ea=["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"],Ca=["td","th"],Sa=["thead","tbody","tfoot"],Ta=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Aa=["li","dd","dt"],ka=["ul","ol","dl"],Ia=["pre","script","textarea","style"],Da=function(t){var n;return function(e){return(n=n||ft(t,ye(!0))).hasOwnProperty($i.name(e))}},Pa=Da(["h1","h2","h3","h4","h5","h6"]),Oa=Da(wa),Ra=function(e){return $i.isElement(e)&&!Oa(e)},Na=function(e){return $i.isElement(e)&&"br"===$i.name(e)},La=Da(Ta),Ma=Da(ka),Ba=Da(Aa),za=Da(Ea),Fa=Da(Sa),ja=Da(Ca),Ua=Da(Ia),Va=function(t){return function(e){return!!e&&e.nodeType===t}},qa=Va(1),Ha=function(e){var r=e.toLowerCase().split(" ");return function(e){var t,n;if(e&&e.nodeType)for(n=e.nodeName.toLowerCase(),t=0;t<r.length;t++)if(n===r[t])return!0;return!1}},Wa=function(r,e){var i=e.toLowerCase().split(" ");return function(e){var t;if(qa(e))for(t=0;t<i.length;t++){var n=e.ownerDocument.defaultView.getComputedStyle(e,null);if((n?n.getPropertyValue(r):null)===i[t])return!0}return!1}},Ga=function(t,n){return function(e){return qa(e)&&e[t]===n}},Za=function(t){return function(e){return qa(e)&&e.hasAttribute(t)}},Xa=function(t,n){return function(e){return qa(e)&&e.getAttribute(t)===n}},Ka=function(e){return qa(e)&&e.hasAttribute("data-mce-bogus")},$a=function(e){return qa(e)&&"all"===e.getAttribute("data-mce-bogus")},Ya=function(e){return qa(e)&&"TABLE"===e.tagName},Ja=function(t){return function(e){if(qa(e)){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}},Qa=Va(3),es=Va(8),ts=Va(9),ns=Ha("br"),rs=Ja("true"),is=Ja("false"),os={isText:Qa,isElement:qa,isComment:es,isDocument:ts,isBr:ns,isContentEditableTrue:rs,isContentEditableFalse:is,matchNodeNames:Ha,hasPropValue:Ga,hasAttribute:Za,hasAttributeValue:Xa,matchStyleValues:Wa,isBogus:Ka,isBogusAll:$a,isTable:Ya},as=function(e){var t=e.previousSibling&&"SPAN"===e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"===e.nextSibling.nodeName;return t&&n},ss=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},us=function(e,t){var n,r=t.childNodes;if(!os.isElement(t)||!ss(t)){for(n=r.length-1;0<=n;n--)us(e,r[n]);if(!1===os.isDocument(t)){if(os.isText(t)&&0<t.nodeValue.length){var i=yr.trim(t.nodeValue).length;if(e.isBlock(t.parentNode)||0<i)return;if(0===i&&as(t))return}else if(os.isElement(t)&&(1===(r=t.childNodes).length&&ss(r[0])&&t.parentNode.insertBefore(r[0],t),r.length||za(ji.fromDom(t))))return;e.remove(t)}return t}},ls={trimNode:us},cs=yr.makeMap,fs=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ps=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ds=/[<>&\"\']/g,hs=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,ms={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"};Kr={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},$r={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var gs=function(e){var t;return(t=ji.fromTag("div").dom()).innerHTML=e,t.textContent||t.innerText||e},ys=function(e,t){var n,r,i,o={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),Kr[r]||(i="&"+e[n+1]+";",o[r]=i,o[i]=r);return o}};Xr=ys(
"50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var vs,_s=function(e,t){return e.replace(t?fs:ps,function(e){return Kr[e]||e})},bs=function(e,t){return e.replace(t?fs:ps,function(e){return 1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":Kr[e]||"&#"+e.charCodeAt(0)+";"})},xs=function(e,t,n){return n=n||Xr,e.replace(t?fs:ps,function(e){return Kr[e]||n[e]||e})},ws=function(e,t){var n=ys(t)||Xr,r=function(e,t){return e.replace(t?fs:ps,function(e){return Kr[e]!==undefined?Kr[e]:n[e]!==undefined?n[e]:1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"})},i=function(e,t){return xs(e,t,n)},o=cs(e.replace(/\+/g,","));return o.named&&o.numeric?r:o.named?t?i:xs:o.numeric?bs:_s},Es={encodeRaw:_s,encodeAllRaw:function(e){return(""+e).replace(ds,function(e){return Kr[e]||e})},encodeNumeric:bs,encodeNamed:xs,getEncodeFunc:ws,decode:function(e){return e.replace(hs,function(e,t){return t?65535<(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):ms[t]||String.fromCharCode(t):$r[e]||Xr[e]||gs(e)})}},Cs={},Ss={},Ts=yr.makeMap,As=yr.each,ks=yr.extend,Is=yr.explode,Ds=yr.inArray,Ps=function(e,t){return(e=yr.trim(e))?e.split(t||" "):[]},Os=function(e){var s,t,n,r,i,o,u={},a=function(e,t,n){var r,i,o,a=function(e,t){var n,r,i={};for(n=0,r=e.length;n<r;n++)i[e[n]]=t||{};return i};for(t=t||"","string"==typeof(n=n||[])&&(n=Ps(n)),r=(e=Ps(e)).length;r--;)o={attributes:a(i=Ps([s,t].join(" "))),attributesOrder:i,children:a(n,Ss)},u[e[r]]=o},l=function(e,t){var n,r,i,o;for(n=(e=Ps(e)).length,t=Ps(t);n--;)for(r=u[e[n]],i=0,o=t.length;i<o;i++)r.attributes[t[i]]={},r.attributesOrder.push(t[i])};return Cs[e]?Cs[e]:(s="id accesskey class dir lang style tabindex title role",t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(s+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",t+=" article aside details dialog figure header footer hgroup section nav",n+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(s+=" xml:lang",n=[n,o="acronym applet basefont big font strike tt"].join(" "),As(Ps(o),function(e){a(e,"",n)}),t=[t,i="center dir isindex noframes"].join(" "),r=[t,n].join(" "),As(Ps(i),function(e){a(e,"",r)})),r=r||[t,n].join(" "),a("html","manifest","head body"),a("head","","base command link meta noscript script style title"),a("title hr noscript br"),a("base","href target"),a("link","href rel media hreflang type sizes hreflang"),a("meta","name http-equiv content charset"),a("style","media type scoped"),a("script","src async defer type charset"),a("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),a("address dt dd div caption","",r),a("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",n),a("blockquote","cite",r),a("ol","reversed start type","li"),a("ul","","li"),a("li","value",r),a("dl","","dt dd"),a("a","href target rel media hreflang type",n),a("q","cite",n),a("ins del","cite datetime",r),a("img","src sizes srcset alt usemap ismap width height"),a("iframe","src name width height",r),a("embed","src type width height"),a("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),a("param","name value"),a("map","name",[r,"area"].join(" ")),a("area","alt coords shape href target rel media hreflang type"),a("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),a("colgroup","span","col"),a("col","span"),a("tbody thead tfoot","","tr"),a("tr","","td th"),a("td","colspan rowspan headers",r),a("th","colspan rowspan headers scope abbr",r),a("form","accept-charset action autocomplete enctype method name novalidate target",r),a("fieldset","disabled form name",[r,"legend"].join(" ")),a("label","form for",n),a("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),a("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?r:n),a("select","disabled form multiple name required size","option optgroup"),a("optgroup","disabled label","option"),a("option","disabled label selected value"),a("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),a("menu","type label",[r,"li"].join(" ")),a("noscript","",r),"html4"!==e&&(a("wbr"),a("ruby","",[n,"rt rp"].join(" ")),a("figcaption","",r),a("mark rt rp summary bdi","",n),a("canvas","width height",r),a("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),a("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),a("picture","","img source"),a("source","src srcset type media sizes"),a("track","kind src srclang label default"),a("datalist","",[n,"option"].join(" ")),a("article section nav aside header footer","",r),a("hgroup","","h1 h2 h3 h4 h5 h6"),a("figure","",[r,"figcaption"].join(" ")),a("time","datetime",n),a("dialog","open",r),a("command","type label icon disabled checked radiogroup command"),a("output","for form name",n),a("progress","value max",n),a("meter","value min max low high optimum",n),a("details","open",[r,"summary"].join(" ")),a("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(l("script","language xml:space"),l("style","xml:space"),l("object","declare classid code codebase codetype archive standby align border hspace vspace"),l("embed","align name hspace vspace"),l("param","valuetype type"),l("a","charset name rev shape coords"),l("br","clear"),l("applet","codebase archive code object alt name width height align hspace vspace"),l("img","name longdesc align border hspace vspace"),l("iframe","longdesc frameborder marginwidth marginheight scrolling align"),l("font basefont","size color face"),l("input","usemap align"),l("select","onchange"),l("textarea"),l("h1 h2 h3 h4 h5 h6 div p legend caption","align"),l("ul","type compact"),l("li","type"),l("ol dl menu dir","compact"),l("pre","width xml:space"),l("hr","align noshade size width"),l("isindex","prompt"),l("table","summary width frame rules cellspacing cellpadding align bgcolor"),l("col","width align char charoff valign"),l("colgroup","width align char charoff valign"),l("thead","align char charoff valign"),l("tr","align char charoff valign bgcolor"),l("th","axis align char charoff valign nowrap bgcolor width height"),l("form","accept"),l("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),l("tfoot","align char charoff valign"),l("tbody","align char charoff valign"),l("area","nohref"),l("body","background bgcolor text link vlink alink")),"html4"!==e&&(l("input button select textarea","autofocus"),l("input textarea","placeholder"),l("a","download"),l("link script img","crossorigin"),l("iframe","sandbox seamless allowfullscreen")),As(Ps("a form meter progress dfn"),function(e){u[e]&&delete u[e].children[e]}),delete u.caption.children.table,delete u.script,Cs[e]=u)},Rs=function(e,n){var r;return e&&(r={},"string"==typeof e&&(e={"*":e}),As(e,function(e,t){r[t]=r[t.toUpperCase()]="map"===n?Ts(e,/[, ]/):Is(e,/[, ]/)})),r},Ns=function(e,t,n,r){var i=function(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e};return"#"+i(t)+i(n)+i(r)},Ls=yr.each,Ms=yr.grep,Bs=Gt.ie,zs=/^([a-z0-9],?)+$/i,Fs=/^[ \t\r\n]*$/,js=function(n,r,i){var e={},o=r.keep_values,t={set:function(e,t,n){r.url_converter&&(t=r.url_converter.call(r.url_converter_scope||i(),t,n,e[0])),e.attr("data-mce-"+n,t).attr(n,t)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}};return e={style:{set:function(e,t){null===t||"object"!=typeof t?(o&&e.attr("data-mce-style",t),e.attr("style",t)):e.css(t)},get:function(e){var t=e.attr("data-mce-style")||e.attr("style");return t=n.serialize(n.parse(t),e[0].nodeName)}}},o&&(e.href=e.src=t),e},Us=function(e,t){var n=t.attr("style"),r=e.serialize(e.parse(n),t[0].nodeName);r||(r=null),t.attr("data-mce-style",r)},Vs=function(e,t){var n,r,i=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!==r||r!==n&&e.nodeValue.length)&&(i++,n=r);return i};(vs=Ce||(Ce={})).DOM=vs(document),vs.nodeIndex=Vs;var qs=Ce,Hs=qs.DOM,Ws=yr.each,Gs=yr.grep,Zs=function(e){return"function"==typeof e},Xs=function(){var i=0,s=1,u=2,l=3,c={},o=[],f={},p=[],d=0,h=function(e,t,n){var r,i,o=Hs,a=function(){o.remove(i),r&&(r.onreadystatechange=r.onload=r=null),t()},s=function(){Zs(n)?n():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+e)};i=o.uniqueId(),(r=document.createElement("script")).id=i,r.type="text/javascript",r.src=yr._addCacheSuffix(e),r.onload=a,r.onerror=s,(document.getElementsByTagName("head")[0]||document.body).appendChild(r)};this.isDone=function(e){return c[e]===u},this.markDone=function(e){c[e]=u},this.add=this.load=function(e,t,n,r){c[e]===undefined&&(o.push(e),c[e]=i),t&&(f[e]||(f[e]=[]),f[e].push({success:t,failure:r,scope:n||this}))},this.remove=function(e){delete c[e],delete f[e]},this.loadQueue=function(e,t,n){this.loadScripts(o,e,t,n)},this.loadScripts=function(n,e,t,r){var i,o=[],a=function(t,e){Ws(f[e],function(e){Zs(e[t])&&e[t].call(e.scope)}),f[e]=undefined};p.push({success:e,failure:r,scope:t||this}),(i=function(){var e=Gs(n);if(n.length=0,Ws(e,function(e){c[e]!==u?c[e]!==l?c[e]!==s&&(c[e]=s,d++,h(e,function(){c[e]=u,d--,a("success",e),i()},function(){c[e]=l,d--,o.push(e),a("failure",e),i()})):a("failure",e):a("success",e)}),!d){var t=p.slice(0);p.length=0,Ws(t,function(e){0===o.length?Zs(e.success)&&e.success.call(e.scope):Zs(e.failure)&&e.failure.call(e.scope,o)})}})()}};Xs.ScriptLoader=new Xs;var Ks,$s=yr.each;(Ks=h||(h={})).PluginManager=Ks(),Ks.ThemeManager=Ks();var Ys,Js=function(t,n){oa.parent(t).each(function(e){e.dom().insertBefore(n.dom(),t.dom())})},Qs=function(e,t){oa.nextSibling(e).fold(function(){oa.parent(e).each(function(e){tu(e,t)})},function(e){Js(e,t)})},eu=function(t,n){oa.firstChild(t).fold(function(){tu(t,n)},function(e){t.dom().insertBefore(n.dom(),e.dom())})},tu=function(e,t){e.dom().appendChild(t.dom())},nu=function(e,t,n){oa.child(e,n).fold(function(){tu(e,t)},function(e){Js(e,t)})},ru=function(e,t){Js(e,t),tu(t,e)},iu={before:Js,after:Qs,prepend:eu,append:tu,appendAt:nu,wrap:ru},ou={before:function(t,e){Ke(e,function(e){iu.before(t,e)})},after:function(r,i){Ke(i,function(e,t){var n=0===t?r:i[t-1];iu.after(n,e)})},prepend:function(t,e){Ke(e.slice().reverse(),function(e){iu.prepend(t,e)})},append:function(t,e){Ke(e,function(e){iu.append(t,e)})}},au=function(e){e.dom().textContent="",Ke(oa.children(e),function(e){su(e)})},su=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},uu=function(e){var t=oa.children(e);0<t.length&&ou.before(e,t),su(e)},lu={empty:au,remove:su,unwrap:uu},cu=function(n,r){var i=null;return{cancel:function(){null!==i&&(clearTimeout(i),i=null)},throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null===i&&(i=setTimeout(function(){n.apply(null,e),i=null},r))}}},fu=function(n,r){var i=null;return{cancel:function(){null!==i&&(clearTimeout(i),i=null)},throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null!==i&&clearTimeout(i),i=setTimeout(function(){n.apply(null,e),i=null},r)}}},pu=function(e){var t=e,n=function(){return t},r=function(){return pu(n())};return{get:n,set:function(e){t=e},clone:r}},du=function(e,t){var n=so.get(e,t);return n===undefined||""===n?[]:n.split(" ")},hu=function(e,t,n){var r=du(e,t).concat([n]);return so.set(e,t,r.join(" ")),!0},mu=function(e,t,n){var r=Je(du(e,t),function(e){return e!==n});return 0<r.length?so.set(e,t,r.join(" ")):so.remove(e,t),!1},gu={read:du,add:hu,remove:mu},yu=function(e){return gu.read(e,"class")},vu=function(e,t){return gu.add(e,"class",t)},_u=function(e,t){return gu.remove(e,"class",t)},bu=function(e,t){return Ge(yu(e),t)?_u(e,t):vu(e,t)},xu={get:yu,add:vu,remove:_u,toggle:bu,supports:function(e){return e.dom().classList!==undefined}},wu=function(e){0===(xu.supports(e)?e.dom().classList:xu.get(e)).length&&so.remove(e,"class")},Eu=function(e,t){var n=xu.supports(e),r=e.dom().classList;return u(function(){n?r.remove(t):xu.remove(e,t)},function(){n?r.add(t):xu.add(e,t)},Cu(e,t))},Cu=function(e,t){return xu.supports(e)&&e.dom().classList.contains(t)},Su={add:function(e,t){xu.supports(e)?e.dom().classList.add(t):xu.add(e,t)},remove:function(e,t){xu.supports(e)?e.dom().classList.remove(t):xu.remove(e,t),wu(e)},toggle:function(e,t){return xu.supports(e)?e.dom().classList.toggle(t):xu.toggle(e,t)},toggler:Eu,has:Cu},Tu=function(e){return Au(fo.body(),e)},Au=function(e,t){var n=[];return Ke(oa.children(e),function(e){t(e)&&(n=n.concat([e])),n=n.concat(Au(e,t))}),n},ku={all:Tu,ancestors:function(e,t,n){return Je(oa.parents(e,n),t)},siblings:function(e,t){return Je(oa.siblings(e),t)},children:function(e,t){return Je(oa.children(e),t)},descendants:Au},Iu={all:function(e){return Po.all(e)},ancestors:function(e,t,n){return ku.ancestors(e,function(e){return Po.is(e,t)},n)},siblings:function(e,t){return ku.siblings(e,function(e){return Po.is(e,t)})},children:function(e,t){return ku.children(e,function(e){return Po.is(e,t)})},descendants:function(e,t){return Po.all(t,e)}},Du=function(e){return Nu(fo.body(),e)},Pu=function(e,t,n){for(var r=e.dom(),i=Ve(n)?n:ye(!1);r.parentNode;){r=r.parentNode;var o=ji.fromDom(r);if(t(o))return Ne.some(o);if(i(o))break}return Ne.none()},Ou=function(t,n){var e=t.dom();return e.parentNode?Ru(ji.fromDom(e.parentNode),function(e){return!zo.eq(t,e)&&n(e)}):Ne.none()},Ru=function(e,t){return tt(e.dom().childNodes,ge(t,ji.fromDom)).map(ji.fromDom)},Nu=function(e,r){var i=function(e){for(var t=0;t<e.childNodes.length;t++){if(r(ji.fromDom(e.childNodes[t])))return Ne.some(ji.fromDom(e.childNodes[t]));var n=i(e.childNodes[t]);if(n.isSome())return n}return Ne.none()};return i(e.dom())},Lu={first:Du,ancestor:Pu,closest:function(e,t,n){return c(function(e){return t(e)},Pu,e,t,n)},sibling:Ou,child:Ru,descendant:Nu},Mu=function(e,t,n){return Lu.ancestor(e,function(e){return Po.is(e,t)},n)},Bu={first:function(e){return Po.one(e)},ancestor:Mu,sibling:function(e,t){return Lu.sibling(e,function(e){return Po.is(e,t)})},child:function(e,t){return Lu.child(e,function(e){return Po.is(e,t)})},descendant:function(e,t){return Po.one(t,e)},closest:function(e,t,n){return c(Po.is,Mu,e,t,n)}},zu=ye("mce-annotation"),Fu=ye("data-mce-annotation"),ju=ye("data-mce-annotation-uid"),Uu=function(r,e){var t=r.selection.getRng(),n=ji.fromDom(t.startContainer),i=ji.fromDom(r.getBody()),o=e.fold(function(){return"."+zu()},function(e){return"["+Fu()+'="'+e+'"]'}),a=oa.child(n,t.startOffset).getOr(n),s=Bu.closest(a,o,function(e){return zo.eq(e,i)}),u=function(e,t){return so.has(e,t)?Ne.some(so.get(e,t)):Ne.none()};return s.bind(function(e){return u(e,""+ju()).bind(function(n){return u(e,""+Fu()).map(function(e){var t=qu(r,n);return{uid:n,name:e,elements:t}})})})},Vu=function(e){return $i.isElement(e)&&Su.has(e,zu())},qu=function(e,t){var n=ji.fromDom(e.getBody());return Iu.descendants(n,"["+ju()+'="'+t+'"]')},Hu=function(e,t){var n=ji.fromDom(e.getBody()),r=Iu.descendants(n,"["+Fu()+'="'+t+'"]'),i={};return Ke(r,function(e){var t=so.get(e,ju()),n=i.hasOwnProperty(t)?i[t]:[];i[t]=n.concat([e])}),i},Wu=function(n){var i=pu({}),o=function(){return{listeners:[],previous:pu(Ne.none())}},e=function(e,t){r(e,function(e){return t(e),e})},r=function(e,t){var n=i.get(),r=t(n.hasOwnProperty(e)?n[e]:o());n[e]=r,i.set(n)},a=function(t,n,r){e(t,function(e){Ke(e.listeners,function(e){return e(!0,t,{uid:n,nodes:Xe(r,function(e){return e.dom()})})})})},s=function(t){e(t,function(e){Ke(e.listeners,function(e){return e(!1,t)})})},t=fu(function(){var e=i.get(),t=pt(Yi(e));Ke(t,function(e){r(e,function(i){var o=i.previous.get();return Uu(n,Ne.some(e)).fold(function(){o.isSome()&&(s(e),i.previous.set(Ne.none()))},function(e){var t=e.uid,n=e.name,r=e.elements;o.is(t)||(a(n,t,r),i.previous.set(Ne.some(t)))}),{previous:i.previous,listeners:i.listeners}})})},30);return n.on("remove",function(){t.cancel()}),n.on("nodeChange",function(){t.throttle()}),{addListener:function(e,t){r(e,function(e){return{previous:e.previous,listeners:e.listeners.concat([t])}})}}},Gu=function(e,t){var n=function(e){return Ne.from(e.attributes.map[Fu()]).bind(t.lookup)};e.on("init",function(){e.serializer.addNodeFilter("span",function(e){Ke(e,function(t){n(t).each(function(e){!1===e.persistent&&t.unwrap()})})})})},Zu=function(){var n={};return{register:function(e,t){n[e]={name:e,settings:t}},lookup:function(e){return n.hasOwnProperty(e)?Ne.from(n[e]).map(function(e){return e.settings}):Ne.none()}}},Xu=0,Ku=function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++Xu+String(t)},$u=function(e){for(var t=e.dom().classList,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t.item(r);return n},Yu={add:function(t,e){Ke(e,function(e){Su.add(t,e)})},remove:function(t,e){Ke(e,function(e){Su.remove(t,e)})},toggle:function(t,e){Ke(e,function(e){Su.toggle(t,e)})},hasAll:function(t,e){return st(e,function(e){return Su.has(t,e)})},hasAny:function(t,e){return Ze(e,function(e){return Su.has(t,e)})},get:function(e){return xu.supports(e)?$u(e):xu.get(e)}},Ju=function(e,t){return ji.fromDom(e.dom().cloneNode(t))},Qu=function(e){return Ju(e,!0)},el=function(e,t){var n=ji.fromTag(t),r=so.clone(e);return so.setAll(n,r),n},tl=function(e,t){var n=el(e,t),r=oa.children(Qu(e));return ou.append(n,r),n},nl=function(e,t){var n=el(e,t);iu.before(e,n);var r=oa.children(e);return ou.append(n,r),lu.remove(e),n},rl={shallow:function(e){return Ju(e,!1)},shallowAs:el,deep:Qu,copy:tl,mutate:nl},il=[].slice,ol=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=il.call(arguments);return r.length-1>=e.length?e.apply(this,r.slice(1)):function(){var e=r.concat([].slice.call(arguments));return ol.apply(this,e)}},al={constant:function(e){return function(){return e}},negate:function(t){return function(e){return!t(e)}},and:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=il.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(!n[t](e))return!1;return!0}},or:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=il.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(n[t](e))return!0;return!1}},curry:ol,compose:function(t,n){return function(e){return t(n(e))}},noop:function(){}},sl="\ufeff",ul={isZwsp:function(e){return e===sl},ZWSP:sl,trim:function(e){return e.replace(new RegExp(sl,"g"),"")}},ll=os.isElement,cl=os.isText,fl=function(e){return cl(e)&&(e=e.parentNode),ll(e)&&e.hasAttribute("data-mce-caret")},pl=function(e){return cl(e)&&ul.isZwsp(e.data)},dl=function(e){return fl(e)||pl(e)},hl=function(e){return e.firstChild!==e.lastChild||!os.isBr(e.firstChild)},ml=function(e,t){var n,r,i;if(r=e.ownerDocument.createTextNode(ul.ZWSP),i=e.parentNode,t){if(n=e.previousSibling,cl(n)){if(dl(n))return n;if(xl(n))return n.splitText(n.data.length-1)}i.insertBefore(r,e)}else{if(n=e.nextSibling,cl(n)){if(dl(n))return n;if(bl(n))return n.splitText(1),n}e.nextSibling?i.insertBefore(r,e.nextSibling):i.appendChild(r)}return r},gl=function(e){var t=e.container();return e&&os.isText(t)&&t.data.charAt(e.offset())===ul.ZWSP},yl=function(e){var t=e.container();return e&&os.isText(t)&&t.data.charAt(e.offset()-1)===ul.ZWSP},vl=function(){var e=document.createElement("br");return e.setAttribute("data-mce-bogus","1"),e},_l=function(e,t,n){var r,i;return(r=t.ownerDocument.createElement(e)).setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(vl()),i=t.parentNode,n?i.insertBefore(r,t):t.nextSibling?i.insertBefore(r,t.nextSibling):i.appendChild(r),r},bl=function(e){return cl(e)&&e.data[0]===ul.ZWSP},xl=function(e){return cl(e)&&e.data[e.data.length-1]===ul.ZWSP},wl=function(e){var t=e.getElementsByTagName("br"),n=t[t.length-1];os.isBogus(n)&&n.parentNode.removeChild(n)},El=function(e){return e&&e.hasAttribute("data-mce-caret")?(wl(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null},Cl=function(e){return fl(e.startContainer)},Sl=os.isContentEditableTrue,Tl=os.isContentEditableFalse,Al=os.isBr,kl=os.isText,Il=os.matchNodeNames("script style textarea"),Dl=os.matchNodeNames("img input textarea hr iframe video audio object"),Pl=os.matchNodeNames("table"),Ol=dl,Rl=function(e){return!Ol(e)&&(kl(e)?!Il(e.parentNode):Dl(e)||Al(e)||Pl(e)||Ll(e))},Nl=function(e){return os.isElement(e)&&"true"===e.getAttribute("unselectable")},Ll=function(e){return!1===Nl(e)&&Tl(e)},Ml=function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(Ll(e))return!1;if(Sl(e))return!0}return!0},Bl=function(e){return!!Ll(e)&&!0!==ir.reduce(e.getElementsByTagName("*"),function(e,t){return e||Sl(t)},!1)},zl=function(e){return Dl(e)||Bl(e)},Fl=function(e,t){return Rl(e)&&Ml(e,t)},jl=Math.round,Ul=function(e){return e?{left:jl(e.left),top:jl(e.top),bottom:jl(e.bottom),right:jl(e.right),width:jl(e.width),height:jl(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},Vl=function(e,t){return e=Ul(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e},ql=function(e,t){return e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right},Hl=function(e,t,n){return 0<=e&&e<=Math.min(t.height,n.height)/2},Wl=function(e,t){return e.bottom-e.height/2<t.top||!(e.top>t.bottom)&&Hl(t.top-e.bottom,e,t)},Gl=function(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&Hl(t.bottom-e.top,e,t)},Zl=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},Xl=function(e,t){return t.left>e.left&&t.right<e.right?0:t.left<e.left?t.left-e.left:t.right-e.right},Kl=function(e,t){return t.top>e.top&&t.bottom<e.bottom?0:t.top<e.top?t.top-e.top:t.bottom-e.bottom},$l=function(e,t){return{x:Xl(e,t),y:Kl(e,t)}},Yl=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Jl=function(e,t){return 1===e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},Ql=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),ec=function(e){return"string"==typeof e&&768<=e.charCodeAt(0)&&Ql.test(e)},tc=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r];if(!i.isSome())return Ne.none();n.push(i.getOrDie())}return Ne.some(t.apply(null,n))},nc=os.isElement,rc=Rl,ic=os.matchStyleValues("display","block table"),oc=os.matchStyleValues("float","left right"),ac=al.and(nc,rc,al.negate(oc)),sc=al.negate(os.matchStyleValues("white-space","pre pre-line pre-wrap")),uc=os.isText,lc=os.isBr,cc=qs.nodeIndex,fc=Jl,pc=function(e){return"createRange"in e?e.createRange():qs.DOM.createRng()},dc=function(e){return e&&/[\r\n\t ]/.test(e)},hc=function(e){return!!e.setStart&&!!e.setEnd},mc=function(e){var t,n=e.startContainer,r=e.startOffset;return!!(dc(e.toString())&&sc(n.parentNode)&&os.isText(n)&&(t=n.data,dc(t[r-1])||dc(t[r+1])))},gc=function(e){var t,n=e.ownerDocument,r=pc(n),i=n.createTextNode("\xa0"),o=e.parentNode;return o.insertBefore(i,e),r.setStart(i,0),r.setEnd(i,1),t=Ul(r.getBoundingClientRect()),o.removeChild(i),t},yc=function(e){var t=e.startContainer,n=e.endContainer,r=e.startOffset,i=e.endOffset;if(t===n&&os.isText(n)&&0===r&&1===i){var o=e.cloneRange();return o.setEndAfter(n),_c(o)}return null},vc=function(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom},_c=function(e){var t,n;return t=0<(n=e.getClientRects()).length?Ul(n[0]):Ul(e.getBoundingClientRect()),!hc(e)&&lc(e)&&vc(t)?gc(e):vc(t)&&hc(e)?yc(e):t},bc=function(e,t){var n=Vl(e,t);return n.width=1,n.right=n.left+1,n},xc=function(e){var t,n,r=[],i=function(e){0!==e.height&&(0<r.length&&ql(e,r[r.length-1])||r.push(e))},o=function(e,t){var n=pc(e.ownerDocument);if(t<e.data.length){if(ec(e.data[t]))return r;if(ec(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!mc(n)))return i(bc(_c(n),!1)),r}0<t&&(n.setStart(e,t-1),n.setEnd(e,t),mc(n)||i(bc(_c(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),mc(n)||i(bc(_c(n),!0)))};if(uc(e.container()))return o(e.container(),e.offset()),r;if(nc(e.container()))if(e.isAtEnd())n=fc(e.container(),e.offset()),uc(n)&&o(n,n.data.length),ac(n)&&!lc(n)&&i(bc(_c(n),!1));else{if(n=fc(e.container(),e.offset()),uc(n)&&o(n,0),ac(n)&&e.isAtEnd())return i(bc(_c(n),!1)),r;t=fc(e.container(),e.offset()-1),ac(t)&&!lc(t)&&(ic(t)||ic(n)||!ac(n))&&i(bc(_c(t),!1)),ac(n)&&i(bc(_c(n),!0))}return r};(Ys=y||(y={})).fromRangeStart=function(e){return Ys(e.startContainer,e.startOffset)},Ys.fromRangeEnd=function(e){return Ys(e.endContainer,e.endOffset)},Ys.after=function(e){return Ys(e.parentNode,cc(e)+1)},Ys.before=function(e){return Ys(e.parentNode,cc(e))},Ys.isAbove=function(e,t){return tc([dt(t.getClientRects()),ht(e.getClientRects())],Wl).getOr(!1)},Ys.isBelow=function(e,t){return tc([ht(t.getClientRects()),dt(e.getClientRects())],Gl).getOr(!1)},Ys.isAtStart=function(e){return!!e&&e.isAtStart()},Ys.isAtEnd=function(e){return!!e&&e.isAtEnd()},Ys.isTextPosition=function(e){return!!e&&os.isText(e.container())},Ys.isElementPosition=function(e){return!1===Ys.isTextPosition(e)};var wc,Ec,Cc=y,Sc=os.isText,Tc=os.isBogus,Ac=qs.nodeIndex,kc=function(e){var t=e.parentNode;return Tc(t)?kc(t):t},Ic=function(e){return e?ir.reduce(e.childNodes,function(e,t){return Tc(t)&&"BR"!==t.nodeName?e=e.concat(Ic(t)):e.push(t),e},[]):[]},Dc=function(e,t){for(;(e=e.previousSibling)&&Sc(e);)t+=e.data.length;return t},Pc=function(t){return function(e){return t===e}},Oc=function(e){var r,t,n;return r=Ic(kc(e)),t=ir.findIndex(r,Pc(e),e),r=r.slice(0,t+1),n=ir.reduce(r,function(e,t,n){return Sc(t)&&Sc(r[n-1])&&e++,e},0),r=ir.filter(r,os.matchNodeNames(e.nodeName)),(t=ir.findIndex(r,Pc(e),e))-n},Rc=function(e){return(Sc(e)?"text()":e.nodeName.toLowerCase())+"["+Oc(e)+"]"},Nc=function(e,t,n){var r=[];for(t=t.parentNode;!(t===e||n&&n(t));t=t.parentNode)r.push(t);return r},Lc=function(e,t){var n,r,i,o,a,s=[];return n=t.container(),r=t.offset(),Sc(n)?i=Dc(n,r):(r>=(o=n.childNodes).length?(i="after",r=o.length-1):i="before",n=o[r]),s.push(Rc(n)),a=Nc(e,n),a=ir.filter(a,al.negate(os.isBogus)),(s=s.concat(ir.map(a,function(e){return Rc(e)}))).reverse().join("/")+","+i},Mc=function(e,t,n){var r=Ic(e);return r=ir.filter(r,function(e,t){return!Sc(e)||!Sc(r[t-1])}),(r=ir.filter(r,os.matchNodeNames(t)))[n]},Bc=function(e,t){for(var n,r=e,i=0;Sc(r);){if(n=r.data.length,i<=t&&t<=i+n){e=r,t-=i;break}if(!Sc(r.nextSibling)){e=r,t=n;break}i+=n,r=r.nextSibling}return Sc(e)&&t>e.data.length&&(t=e.data.length),Cc(e,t)},zc=function(e,t){var n,r,i;return t?(t=(n=t.split(","))[0].split("/"),i=1<n.length?n[1]:"before",(r=ir.reduce(t,function(e,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),Mc(e,t[1],parseInt(t[2],10))):null},e))?Sc(r)?Bc(r,parseInt(i,10)):(i="after"===i?Ac(r)+1:Ac(r),Cc(r.parentNode,i)):null):null},Fc=os.isContentEditableFalse,jc=function(e,t,n){var r,i;for(i=e(t.data.slice(0,n)).length,r=t.previousSibling;r&&os.isText(r);r=r.previousSibling)i+=e(r.data).length;return i},Uc=function(e,t,n,r,i){var o,a=r[i?"startContainer":"endContainer"],s=r[i?"startOffset":"endOffset"],u=[],l=0,c=e.getRoot();for(os.isText(a)?u.push(n?jc(t,a,s):s):(s>=(o=a.childNodes).length&&o.length&&(l=1,s=Math.max(0,o.length-1)),u.push(e.nodeIndex(o[s],n)+l));a&&a!==c;a=a.parentNode)u.push(e.nodeIndex(a,n));return u},Vc=function(e,t,n,r){var i=t.dom,o={};return o.start=Uc(i,e,n,r,!0),t.isCollapsed()||(o.end=Uc(i,e,n,r,!1)),o},qc=function(e){os.isText(e)&&0===e.data.length&&e.parentNode.removeChild(e)},Hc=function(e,t,n){var r=0;return yr.each(e.select(
t),function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!==n&&void r++}),r},Wc=function(e,t){var n,r,i,o=t?"start":"end";n=e[o+"Container"],r=e[o+"Offset"],os.isElement(n)&&"TR"===n.nodeName&&(n=(i=n.childNodes)[Math.min(t?r:r-1,i.length-1)])&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r))},Gc=function(e){return Wc(e,!0),Wc(e,!1),e},Zc=function(e,t){var n;if(os.isElement(e)&&(e=Jl(e,t),Fc(e)))return e;if(dl(e)){if(os.isText(e)&&fl(e)&&(e=e.parentNode),n=e.previousSibling,Fc(n))return n;if(n=e.nextSibling,Fc(n))return n}},Xc=function(e){return Zc(e.startContainer,e.startOffset)||Zc(e.endContainer,e.endOffset)},Kc=function(e,t,n){var r=n.getNode(),i=r?r.nodeName:null,o=n.getRng();if(Fc(r)||"IMG"===i)return{name:i,index:Hc(n.dom,i,r)};var a=Xc(o);return a?{name:i=a.tagName,index:Hc(n.dom,i,a)}:Vc(e,n,t,o)},$c=function(e){var t=e.getRng();return{start:Lc(e.dom.getRoot(),Cc.fromRangeStart(t)),end:Lc(e.dom.getRoot(),Cc.fromRangeEnd(t))}},Yc=function(e){return{rng:e.getRng()}},Jc=function(e,t,n){var r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",r,"&#xFEFF;"):e.create("span",r)},Qc=function(e,t){var n=e.dom,r=e.getRng(),i=n.uniqueId(),o=e.isCollapsed(),a=e.getNode(),s=a.nodeName;if("IMG"===s)return{name:s,index:Hc(n,s,a)};var u=Gc(r.cloneRange());if(!o){u.collapse(!1);var l=Jc(n,i+"_end",t);u.insertNode(l),qc(l.nextSibling)}(r=Gc(r)).collapse(!0);var c=Jc(n,i+"_start",t);return r.insertNode(c),qc(c.previousSibling),qc(c.nextSibling),e.moveToBookmark({id:i,keep:1}),{id:i}},ef={getBookmark:function(e,t,n){return 2===t?Kc(ul.trim,n,e):3===t?$c(e):t?Yc(e):Qc(e,!1)},getUndoBookmark:_e(Kc,ve,!0),getPersistentBookmark:Qc},tf="_mce_caret",nf=function(e){return os.isElement(e)&&e.id===tf},rf=function(e,t){for(;t&&t!==e;){if(t.id===tf)return t;t=t.parentNode}return null},of=os.isElement,af=os.isText,sf=function(e){var t=e.parentNode;t&&t.removeChild(e)},uf=function(e){try{return e.nodeValue}catch(t){return""}},lf=function(e,t){0===t.length?sf(e):e.nodeValue=t},cf=function(e){var t=ul.trim(e);return{count:e.length-t.length,text:t}},ff=function(e,t){return gf(e),t},pf=function(e,t){var n=cf(e.data.substr(0,t.offset())),r=cf(e.data.substr(t.offset())),i=n.text+r.text;return 0<i.length?(lf(e,i),Cc(e,t.offset()-n.count)):t},df=function(e,t){var n=t.container(),r=We(mt(n.childNodes),e).map(function(e){return e<t.offset()?Cc(n,t.offset()-1):t}).getOr(t);return gf(e),r},hf=function(e,t){return af(e)&&t.container()===e?pf(e,t):ff(e,t)},mf=function(e,t){return t.container()===e.parentNode?df(e,t):ff(e,t)},gf=function(e){if(of(e)&&dl(e)&&(hl(e)?e.removeAttribute("data-mce-caret"):sf(e)),af(e)){var t=ul.trim(uf(e));lf(e,t)}},yf={removeAndReposition:function(e,t){return Cc.isTextPosition(t)?hf(e,t):mf(e,t)},remove:gf},vf=os.isContentEditableTrue,_f=os.isContentEditableFalse,bf=function(e,t,n,r,i){return t._selectionOverrides.showCaret(e,n,r,i)},xf=function(e){var t=e.ownerDocument.createRange();return t.selectNode(e),t},wf=function(e,t){return e.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?null:xf(t)},Ef=function(e,t,n){var r=ad(1,e.getBody(),t),i=Cc.fromRangeStart(r),o=i.getNode();if(_f(o))return bf(1,e,o,!i.isAtEnd(),!1);var a=i.getNode(!0);if(_f(a))return bf(1,e,a,!1,!1);var s=e.dom.getParent(i.getNode(),function(e){return _f(e)||vf(e)});return _f(s)?bf(1,e,s,!1,n):null},Cf=function(e,t,n){if(!t||!t.collapsed)return t;var r=Ef(e,t,n);return r||t};(Ec=wc||(wc={}))[Ec.Backwards=-1]="Backwards",Ec[Ec.Forwards=1]="Forwards";var Sf,Tf,Af=os.isContentEditableFalse,kf=os.isText,If=os.isElement,Df=os.isBr,Pf=Rl,Of=zl,Rf=Fl,Nf=function(e,t){for(var n=[];e&&e!==t;)n.push(e),e=e.parentNode;return n},Lf=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},Mf=function(e,t){if(Xp(e)){if(Pf(t.previousSibling)&&!kf(t.previousSibling))return Cc.before(t);if(kf(t))return Cc(t,0)}if(Kp(e)){if(Pf(t.nextSibling)&&!kf(t.nextSibling))return Cc.after(t);if(kf(t))return Cc(t,t.data.length)}return Kp(e)?Df(t)?Cc.before(t):Cc.after(t):Cc.before(t)},Bf=function(e,t){var n;return!!os.isBr(e)&&!!(n=zf(1,Cc.after(e),t))&&!Qp(Cc.before(e),Cc.before(n),t)},zf=function(e,t,n){var r,i,o,a,s;if(!If(n)||!t)return null;if(t.isEqual(Cc.after(n))&&n.lastChild){if(s=Cc.after(n.lastChild),Kp(e)&&Pf(n.lastChild)&&If(n.lastChild))return Df(n.lastChild)?Cc.before(n.lastChild):s}else s=t;var u=s.container(),l=s.offset();if(kf(u)){if(Kp(e)&&0<l)return Cc(u,--l);if(Xp(e)&&l<u.length)return Cc(u,++l);r=u}else{if(Kp(e)&&0<l&&(i=Lf(u,l-1),Pf(i)))return!Of(i)&&(o=Yp(i,e,Rf,i))?kf(o)?Cc(o,o.data.length):Cc.after(o):kf(i)?Cc(i,i.data.length):Cc.before(i);if(Xp(e)&&l<u.childNodes.length&&(i=Lf(u,l),Pf(i)))return Df(i)&&n.lastChild===i?null:Bf(i,n)?zf(e,Cc.after(i),n):!Of(i)&&(o=Yp(i,e,Rf,i))?kf(o)?Cc(o,0):Cc.before(o):kf(i)?Cc(i,0):Cc.after(i);r=i||s.getNode()}return(Xp(e)&&s.isAtEnd()||Kp(e)&&s.isAtStart())&&(r=Yp(r,e,al.constant(!0),n,!0),Rf(r,n))?Mf(e,r):(i=Yp(r,e,Rf,n),!(a=ir.last(ir.filter(Nf(u,n),Af)))||i&&a.contains(i)?i?Mf(e,i):null:s=Xp(e)?Cc.after(a):Cc.before(a))},Ff=function(t){return{next:function(e){return zf(wc.Forwards,e,t)},prev:function(e){return zf(wc.Backwards,e,t)}}};(Tf=Sf||(Sf={}))[Tf.Br=0]="Br",Tf[Tf.Block=1]="Block",Tf[Tf.Wrap=2]="Wrap",Tf[Tf.Eol=3]="Eol";var jf=function(e,t){return e===wc.Backwards?t.reverse():t},Uf=function(e,t,n){return e===wc.Forwards?t.next(n):t.prev(n)},Vf=function(e,t,n,r){return os.isBr(r.getNode(t===wc.Forwards))?Sf.Br:!1===Qp(n,r)?Sf.Block:Sf.Wrap},qf=function(e,t,n,r){for(var i,o=Ff(n),a=r,s=[];a&&(i=Uf(t,o,a));){if(os.isBr(i.getNode(!1)))return t===wc.Forwards?{positions:jf(t,s).concat([i]),breakType:Sf.Br,breakAt:Ne.some(i)}:{positions:jf(t,s),breakType:Sf.Br,breakAt:Ne.some(i)};if(i.isVisible()){if(e(a,i)){var u=Vf(n,t,a,i);return{positions:jf(t,s),breakType:u,breakAt:Ne.some(i)}}s.push(i),a=i}else a=i}return{positions:jf(t,s),breakType:Sf.Eol,breakAt:Ne.none()}},Hf=function(n,r,i,e){return r(i,e).breakAt.map(function(e){var t=r(i,e).positions;return n===wc.Backwards?t.concat(e):[e].concat(t)}).getOr([])},Wf=function(e,o){return et(e,function(e,i){return e.fold(function(){return Ne.some(i)},function(r){return tc([dt(r.getClientRects()),dt(i.getClientRects())],function(e,t){var n=Math.abs(o-e.left);return Math.abs(o-t.left)<=n?i:r}).or(e)})},Ne.none())},Gf=function(t,e){return dt(e.getClientRects()).bind(function(e){return Wf(t,e.left)})},Zf=_e(qf,y.isAbove,-1),Xf=_e(qf,y.isBelow,1),Kf=_e(Hf,-1,Zf),$f=_e(Hf,1,Xf),Yf=function(t){return Sd.firstPositionIn(t).map(function(e){return[e].concat(Xf(t,e).positions)}).getOr([])},Jf=function(t){return Sd.lastPositionIn(t).map(function(e){return Zf(t,e).positions.concat(e)}).getOr([])},Qf=function(e,t){return{left:e.left-t,top:e.top-t,right:e.right+2*t,bottom:e.bottom+2*t,width:e.width+t,height:e.height+t}},ep=function(n,e){return at(e,function(e){var t=Qf(Ul(e.getBoundingClientRect()),-1);return[{x:t.left,y:n(t),cell:e},{x:t.right,y:n(t),cell:e}]})},tp=function(e,i,o){return et(e,function(e,r){return e.fold(function(){return Ne.some(r)},function(e){var t=Math.sqrt(Math.abs(e.x-i)+Math.abs(e.y-o)),n=Math.sqrt(Math.abs(r.x-i)+Math.abs(r.y-o));return Ne.some(n<t?r:e)})},Ne.none())},np=function(e,t,n,r,i){var o=Iu.descendants(ji.fromDom(n),"td,th,caption").map(function(e){return e.dom()}),a=Je(ep(e,o),function(e){return t(e,i)});return tp(a,r,i).map(function(e){return e.cell})},rp=function(e){return e.top},ip=function(e,t){return e.y>t},op=_e(np,function(e){return e.bottom},function(e,t){return e.y<t}),ap=_e(np,rp,ip),sp=function(t,n){return dt(n.getClientRects()).bind(function(e){return op(t,e.left,e.top)}).bind(function(e){return Gf(Jf(e),n)})},up=function(t,n){return ht(n.getClientRects()).bind(function(e){return ap(t,e.left,e.top)}).bind(function(e){return Gf(Yf(e),n)})},lp=function(e){for(var t=0,n=0,r=e;r&&r.nodeType;)t+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:t,y:n}},cp=function(e,t,n){var r={elm:t,alignToTop:n};return e.fire("scrollIntoView",r),r.isDefaultPrevented()},fp=function(e){if(e.inline)return e.getBody().getBoundingClientRect();var t=e.getWin();return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight,width:t.innerWidth,height:t.innerHeight}},pp=function(e,t,n){e.inline?(e.getBody().scrollLeft+=t,e.getBody().scrollTop+=n):e.getWin().scrollBy(t,n)},dp={scrollElementIntoView:function(e,t,n){var r,i,o,a,s=e.dom,u=s.getRoot(),l=0;if(!cp(e,t,n)&&os.isElement(t)){if(!1===n&&(l=t.offsetHeight),"BODY"!==u.nodeName){var c=e.selection.getScrollContainer();if(c)return r=lp(t).y-lp(c).y+l,a=c.clientHeight,void((r<(o=c.scrollTop)||o+a<r+25)&&(c.scrollTop=r<o?r:r-a+25))}i=s.getViewPort(e.getWin()),r=s.getPos(t).y+l,o=i.y,a=i.h,(r<i.y||o+a<r+25)&&e.getWin().scrollTo(0,r<o?r:r-a+25)}},scrollRangeIntoView:function(a,e){dt(y.fromRangeStart(e).getClientRects()).each(function(e){var t=fp(a),n=$l(t,e),r=4,i=0<n.x?n.x+r:n.x-r,o=0<n.y?n.y+r:n.y-r;pp(a,0!==n.x?i:0,0!==n.y?o:0)})}},hp=function(e,t,n){var r=e.getParam(t,n);if(-1!==r.indexOf("=")){var i=e.getParam(t,"","hash");return i.hasOwnProperty(e.id)?i[e.id]:n}return r},mp={getIframeAttrs:function(e){return e.getParam("iframe_attrs",{})},getDocType:function(e){return e.getParam("doctype","<!DOCTYPE html>")},getDocumentBaseUrl:function(e){return e.getParam("document_base_url","")},getBodyId:function(e){return hp(e,"body_id","tinymce")},getBodyClass:function(e){return hp(e,"body_class","")},getContentSecurityPolicy:function(e){return e.getParam("content_security_policy","")},shouldPutBrInPre:function(e){return e.getParam("br_in_pre",!0)},getForcedRootBlock:function(e){if(e.getParam("force_p_newlines",!1))return"p";var t=e.getParam("forced_root_block","p");return!1===t?"":t},getForcedRootBlockAttrs:function(e){return e.getParam("forced_root_block_attrs",{})},getBrNewLineSelector:function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},getNoNewLineSelector:function(e){return e.getParam("no_newline_selector","")},shouldKeepStyles:function(e){return e.getParam("keep_styles",!0)},shouldEndContainerOnEmptyBlock:function(e){return e.getParam("end_container_on_empty_block",!1)},getFontStyleValues:function(e){return yr.explode(e.getParam("font_size_style_values",""))},getFontSizeClasses:function(e){return yr.explode(e.getParam("font_size_classes",""))},getImagesDataImgFilter:function(e){return e.getParam("images_dataimg_filter",ye(!0),"function")},isAutomaticUploadsEnabled:function(e){return e.getParam("automatic_uploads",!0,"boolean")},shouldReuseFileName:function(e){return e.getParam("images_reuse_filename",!1,"boolean")},shouldReplaceBlobUris:function(e){return e.getParam("images_replace_blob_uris",!0,"boolean")},getImageUploadUrl:function(e){return e.getParam("images_upload_url","","string")},getImageUploadBasePath:function(e){return e.getParam("images_upload_base_path","","string")},getImagesUploadCredentials:function(e){return e.getParam("images_upload_credentials",!1,"boolean")},getImagesUploadHandler:function(e){return e.getParam("images_upload_handler",null,"function")}},gp=Li.detect().browser,yp=function(){return gp.isIE()||gp.isEdge()||gp.isFirefox()},vp=function(e,t){e.selection.setRng(t),dp.scrollRangeIntoView(e,t)},_p=function(t,n,e){return e.breakAt.map(function(e){return t(n,e).breakAt.isSome()}).getOr(!1)},bp=function(e){return e.breakType===Sf.Wrap&&0===e.positions.length},xp=function(e){return e.breakType===Sf.Br&&1===e.positions.length},wp=function(e,t,n){var r=e(t,n);return bp(r)||!os.isBr(n.getNode())&&xp(r)?!_p(e,t,r):r.breakAt.isNone()},Ep=al.curry(wp,Zf),Cp=al.curry(wp,Xf),Sp=function(e,t,n){var r=Cc.fromRangeStart(t);return Sd.positionIn(!e,n).map(function(e){return e.isEqual(r)}).getOr(!1)},Tp=function(e,t,n){var r=e.selection.getRng(),i=t?1:-1;if(yp()&&Sp(t,r,n)){var o=bf(i,e,n,!t,!0);return vp(e,o),!0}return!1},Ap=function(t,n,e){return sp(n,e).orThunk(function(){return dt(e.getClientRects()).bind(function(e){return Wf(Kf(t,Cc.before(n)),e.left)})}).getOr(Cc.before(n))},kp=function(t,n,e){return up(n,e).orThunk(function(){return dt(e.getClientRects()).bind(function(e){return Wf($f(t,Cc.after(n)),e.left)})}).getOr(Cc.after(n))},Ip=function(e,t){var n=t.getNode(e);return os.isElement(n)&&"TABLE"===n.nodeName?Ne.some(n):Ne.none()},Dp=function(n,r,i,e){var o=mp.getForcedRootBlock(r);o?r.undoManager.transact(function(){var e=ji.fromTag(o);so.setAll(e,mp.getForcedRootBlockAttrs(r)),iu.append(e,ji.fromTag("br")),n?iu.after(ji.fromDom(i),e):iu.before(ji.fromDom(i),e);var t=r.dom.createRng();t.setStart(e.dom(),0),t.setEnd(e.dom(),0),vp(r,t)}):vp(r,e.toRange())},Pp=function(t,n,r){var e=Ip(!!n,r),i=!1===n;e.fold(function(){return vp(t,r.toRange())},function(e){return Sd.positionIn(i,t.getBody()).filter(function(e){return e.isEqual(r)}).fold(function(){return vp(t,r.toRange())},function(){return Dp(n,t,e,r)})})},Op=function(e,t,n,r){var i=e.selection.getRng(),o=Cc.fromRangeStart(i),a=e.getBody();if(!t&&Ep(r,o)){var s=Ap(a,n,o);return Pp(e,t,s),!0}return!(!t||!Cp(r,o))&&(s=kp(a,n,o),Pp(e,t,s),!0)},Rp=function(n,r){return function(){return Ne.from(n.dom.getParent(n.selection.getNode(),"td,th")).bind(function(t){return Ne.from(n.dom.getParent(t,"table")).map(function(e){return Tp(n,r,e,t)})}).getOr(!1)}},Np=function(n,r){return function(){return Ne.from(n.dom.getParent(n.selection.getNode(),"td,th")).bind(function(t){return Ne.from(n.dom.getParent(t,"table")).map(function(e){return Op(n,r,e,t)})}).getOr(!1)}},Lp=os.isContentEditableFalse,Mp=function(e){return os.isElement(e)&&/^(TD|TH)$/i.test(e.tagName)},Bp=function(e,t,n){var r,i,o,a,s,u=Vl(t.getBoundingClientRect(),n);return"BODY"===e.tagName?(r=e.ownerDocument.documentElement,i=e.scrollLeft||r.scrollLeft,o=e.scrollTop||r.scrollTop):(s=e.getBoundingClientRect(),i=e.scrollLeft-s.left,o=e.scrollTop-s.top),u.left+=i,u.right+=i,u.top+=o,u.bottom+=o,u.width=1,0<(a=t.offsetWidth-t.clientWidth)&&(n&&(a*=-1),u.left+=a,u.right+=a),u},zp=function(e){var t,n,r,i,o;for(t=Br("*[contentEditable=false]",e),i=0;i<t.length;i++)r=(n=t[i]).previousSibling,xl(r)&&(1===(o=r.data).length?r.parentNode.removeChild(r):r.deleteData(o.length-1,1)),r=n.nextSibling,bl(r)&&(1===(o=r.data).length?r.parentNode.removeChild(r):r.deleteData(0,1))},Fp=function(o,a,e){var t,s,u=pu(Ne.none()),n=function(t,e){var n,r;if(l(),Mp(e))return null;if(!a(e))return s=ml(e,t),r=e.ownerDocument.createRange(),Lp(s.nextSibling)?(r.setStart(s,0),r.setEnd(s,0)):(r.setStart(s,1),r.setEnd(s,1)),r;s=_l("p",e,t),n=Bp(o,e,t),Br(s).css("top",n.top);var i=Br('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(n).appendTo(o)[0];return u.set(Ne.some({caret:i,element:e,before:t})),u.get().each(function(e){t&&Br(e.caret).addClass("mce-visual-caret-before")}),c(),(r=e.ownerDocument.createRange()).setStart(s,0),r.setEnd(s,0),r},l=function(){zp(o),s&&(yf.remove(s),s=null),u.get().each(function(e){Br(e.caret).remove(),u.set(Ne.none())}),clearInterval(t)},c=function(){t=Qt.setInterval(function(){e()?Br("div.mce-visual-caret",o).toggleClass("mce-visual-caret-hidden"):Br("div.mce-visual-caret",o).addClass("mce-visual-caret-hidden")},500)};return{show:n,hide:l,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){u.get().each(function(e){var t=Bp(o,e.element,e.before);Br(e.caret).css(t)})},destroy:function(){return Qt.clearInterval(t)}}},jp=function(e){return Lp(e)||os.isTable(e)&&yp()},Up=os.isContentEditableFalse,Vp=os.matchStyleValues("display","block table table-cell table-caption list-item"),qp=dl,Hp=fl,Wp=al.curry,Gp=os.isElement,Zp=Rl,Xp=function(e){return 0<e},Kp=function(e){return e<0},$p=function(e,t){for(var n;n=e(t);)if(!Hp(n))return n;return null},Yp=function(e,t,n,r,i){var o=new xe(e,r);if(Kp(t)){if((Up(e)||Hp(e))&&n(e=$p(o.prev,!0)))return e;for(;e=$p(o.prev,i);)if(n(e))return e}if(Xp(t)){if((Up(e)||Hp(e))&&n(e=$p(o.next,!0)))return e;for(;e=$p(o.next,i);)if(n(e))return e}return null},Jp=function(e,t){for(;e&&e!==t;){if(Vp(e))return e;e=e.parentNode}return null},Qp=function(e,t,n){return Jp(e.container(),n)===Jp(t.container(),n)},ed=function(e,t){var n,r;return t?(n=t.container(),r=t.offset(),Gp(n)?n.childNodes[r+e]:null):null},td=function(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},nd=function(e,t,n){return Jp(t,e)===Jp(n,e)},rd=function(e,t,n){var r,i;for(i=e?"previousSibling":"nextSibling";n&&n!==t;){if(r=n[i],qp(r)&&(r=r[i]),Up(r)){if(nd(t,r,n))return r;break}if(Zp(r))break;n=n.parentNode}return null},id=Wp(td,!0),od=Wp(td,!1),ad=function(e,t,n){var r,i,o,a,s=Wp(rd,!0,t),u=Wp(rd,!1,t);if(i=n.startContainer,o=n.startOffset,fl(i)){if(Gp(i)||(i=i.parentNode),"before"===(a=i.getAttribute("data-mce-caret"))&&(r=i.nextSibling,jp(r)))return id(r);if("after"===a&&(r=i.previousSibling,jp(r)))return od(r)}if(!n.collapsed)return n;if(os.isText(i)){if(qp(i)){if(1===e){if(r=u(i))return id(r);if(r=s(i))return od(r)}if(-1===e){if(r=s(i))return od(r);if(r=u(i))return id(r)}return n}if(xl(i)&&o>=i.data.length-1)return 1===e&&(r=u(i))?id(r):n;if(bl(i)&&o<=1)return-1===e&&(r=s(i))?od(r):n;if(o===i.data.length)return(r=u(i))?id(r):n;if(0===o)return(r=s(i))?od(r):n}return n},sd=function(e,t){var n=ed(e,t);return Up(n)&&!os.isBogusAll(n)},ud=function(e,t){return os.isTable(ed(e,t))},ld=function(e,t){return Ne.from(ed(e?0:-1,t)).filter(Up)},cd=function(e,t,n){var r=ad(e,t,n);return-1===e?y.fromRangeStart(r):y.fromRangeEnd(r)},fd=Wp(sd,0),pd=Wp(sd,-1),dd=Wp(ud,0),hd=Wp(ud,-1),md=function(e,t,n){var r=e?Cc.before(n):Cc.after(n);return wd(e,t,r)},gd=function(e){return os.isBr(e)?Cc.before(e):Cc.after(e)},yd=function(e){return Cc.isTextPosition(e)?0===e.offset():Rl(e.getNode())},vd=function(e){if(Cc.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}return Rl(e.getNode(!0))},_d=function(e,t){return!Cc.isTextPosition(e)&&!Cc.isTextPosition(t)&&e.getNode()===t.getNode(!0)},bd=function(e){return!Cc.isTextPosition(e)&&os.isBr(e.getNode())},xd=function(e,t,n){return e?!_d(t,n)&&!bd(t)&&vd(t)&&yd(n):!_d(n,t)&&yd(t)&&vd(n)},wd=function(e,t,n){var r=Ff(t);return Ne.from(e?r.next(n):r.prev(n))},Ed=function(t,n,r){return wd(t,n,r).bind(function(e){return Qp(r,e,n)&&xd(t,r,e)?wd(t,n,e):Ne.some(e)})},Cd=function(e,t){var n=e?t.firstChild:t.lastChild;return os.isText(n)?Ne.some(Cc(n,e?0:n.data.length)):n?Rl(n)?Ne.some(e?Cc.before(n):gd(n)):md(e,t,n):Ne.none()},Sd={fromPosition:wd,nextPosition:_e(wd,!0),prevPosition:_e(wd,!1),navigate:Ed,positionIn:Cd,firstPositionIn:_e(Cd,!0),lastPositionIn:_e(Cd,!1)},Td=function(e){return"string"==typeof e.start},Ad=function(e){return e.hasOwnProperty("rng")},kd=function(e){return e.hasOwnProperty("id")},Id=function(e){return e.hasOwnProperty("name")},Dd=function(e){return yr.isArray(e.start)},Pd=function(e,t){return!e.isBlock(t)||t.innerHTML||Gt.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t},Od=function(e,t){var n,r;return n=e.createRng(),r=zc(e.getRoot(),t.start),n.setStart(r.container(),r.offset()),r=zc(e.getRoot(),t.end),n.setEnd(r.container(),r.offset()),n},Rd=function(e,t){var n=e.ownerDocument.createTextNode(ul.ZWSP);e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)},Nd=function(e){return!1===e.hasChildNodes()},Ld=function(e,t){return Sd.lastPositionIn(e).fold(function(){return!1},function(e){return t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0})},Md=function(e,t,n){return!(!Nd(t)||!rf(e,t)||(Rd(t,n),0))},Bd=function(e,t,n,r){var i,o,a,s,u=n[t?"start":"end"],l=e.getRoot();if(u){for(a=u[0],o=l,i=u.length-1;1<=i;i--){if(s=o.childNodes,Md(l,o,r))return!0;if(u[i]>s.length-1)return!!Md(l,o,r)||Ld(o,r);o=s[u[i]]}3===o.nodeType&&(a=Math.min(u[0],o.nodeValue.length)),1===o.nodeType&&(a=Math.min(u[0],o.childNodes.length)),t?r.setStart(o,a):r.setEnd(o,a)}return!0},zd=function(e){return os.isText(e)&&0<e.data.length},Fd=function(e,t,n){var r,i,o,a,s,u,l=e.get(n.id+"_"+t),c=n.keep;if(l){if(r=l.parentNode,"start"===t?c?l.hasChildNodes()?(r=l.firstChild,i=1):zd(l.nextSibling)?(r=l.nextSibling,i=0):zd(l.previousSibling)?(r=l.previousSibling,i=l.previousSibling.data.length):(r=l.parentNode,i=e.nodeIndex(l)+1):i=e.nodeIndex(l):c?l.hasChildNodes()?(r=l.firstChild,i=1):zd(l.previousSibling)?(r=l.previousSibling,i=l.previousSibling.data.length):(r=l.parentNode,i=e.nodeIndex(l)):i=e.nodeIndex(l),s=r,u=i,!c){for(a=l.previousSibling,o=l.nextSibling,yr.each(yr.grep(l.childNodes),function(e){os.isText(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});l=e.get(n.id+"_"+t);)e.remove(l,!0);a&&o&&a.nodeType===o.nodeType&&os.isText(a)&&!Gt.opera&&(i=a.nodeValue.length,a.appendData(o.nodeValue),e.remove(o),s=a,u=i)}return Ne.some(Cc(s,u))}return Ne.none()},jd=function(e,t){return e.isSome()?e:t},Ud=function(e,t){var n=e.createRng();return Bd(e,!0,t,n)&&Bd(e,!1,t,n)?Ne.some(n):Ne.none()},Vd=function(r,e){var t=Fd(r,"start",e),n=Fd(r,"end",e);return tc([t,jd(n,t)],function(e,t){var n=r.createRng();return n.setStart(Pd(r,e.container()),e.offset()),n.setEnd(Pd(r,t.container()),t.offset()),n})},qd=function(n,e){return Ne.from(n.select(e.name)[e.index]).map(function(e){var t=n.createRng();return t.selectNode(e),t})},Hd={resolve:function(e,t){var n=e.dom;if(t){if(Dd(t))return Ud(n,t);if(Td(t))return Ne.some(Od(n,t));if(kd(t))return Vd(n,t);if(Id(t))return qd(n,t);if(Ad(t))return Ne.some(t.rng)}return Ne.none()}},Wd={getBookmark:function(e,t,n){return ef.getBookmark(e,t,n)},moveToBookmark:function(t,e){Hd.resolve(t,e).each(function(e){t.setRng(e)})},isBookmarkNode:function(e){return os.isElement(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")}},Gd=function(e){return e&&/^(IMG)$/.test(e.nodeName)},Zd=function(e,t,n){var r,i,o,a=n.startOffset,s=n.startContainer;if((n.startContainer!==n.endContainer||!Gd(n.startContainer.childNodes[n.startOffset]))&&1===s.nodeType)for(a<(o=s.childNodes).length?r=new xe(s=o[a],e.getParent(s,e.isBlock)):(r=new xe(s=o[o.length-1],e.getParent(s,e.isBlock))).next(!0),i=r.current();i;i=r.next())if(3===i.nodeType&&!Kd(i))return n.setStart(i,0),void t.setRng(n)},Xd=function(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1===e.nodeType||!Kd(e))return e},Kd=function(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)},$d=function(e,t,n){return"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t)),"fontWeight"===n&&700===t&&(t="bold"),"fontFamily"===n&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t},Yd=function(e,t,n){return $d(e,e.getStyle(t,n),n)},Jd={isInlineBlock:Gd,moveStart:Zd,getNonWhiteSpaceSibling:Xd,isTextBlock:function(e,t){return t.nodeType&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]},isValid:function(e,t,n){return e.schema.isValidChild(t,n)},isWhiteSpaceNode:Kd,replaceVars:function(e,n){return"string"!=typeof e?e=e(n):n&&(e=e.replace(/%(\w+)/g,function(e,t){return n[t]||e})),e},isEq:function(e,t){return t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()},normalizeStyleValue:$d,getStyle:Yd,getTextDecoration:function(t,e){var n;return t.getParent(e,function(e){return(n=t.getStyle(e,"text-decoration"))&&"none"!==n}),n},getParents:function(e,t,n){return e.getParents(t,n,e.getRoot())}},Qd=Wd.isBookmarkNode,eh=Jd.getParents,th=Jd.isWhiteSpaceNode,nh=Jd.isTextBlock,rh=function(e,t){for(void 0===t&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}},ih=function(e,t){var n=rh(e,t);if(n.node){for(;n.node&&0===n.offset&&n.node.previousSibling;)n=rh(n.node.previousSibling);n.node&&0<n.offset&&3===n.node.nodeType&&" "===n.node.nodeValue.charAt(n.offset-1)&&1<n.offset&&(e=n.node).splitText(n.offset-1)}return e},oh=function(e){return"BR"===e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling},ah=function(e,t){for(var n=t;n;){if(1===n.nodeType&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},sh=function(e,t,n,r){var i,o,a=n.nodeValue;return void 0===r&&(r=e?a.length:0),e?(i=a.lastIndexOf(" ",r),-1===(i=(o=a.lastIndexOf("\xa0",r))<i?i:o)||t||i++):(i=a.indexOf(" ",r),o=a.indexOf("\xa0",r),i=-1!==i&&(-1===o||i<o)?i:o),i},uh=function(e,t,n,r,i,o){var a,s,u,l;if(3===n.nodeType){if(-1!==(u=sh(i,o,n,r)))return{container:n,offset:u};l=n}for(a=new xe(n,e.getParent(n,e.isBlock)||t);s=a[i?"prev":"next"]();)if(3!==s.nodeType||Qd(s.parentNode)){if(e.isBlock(s)||Jd.isEq(s,"BR"))break}else if(-1!==(u=sh(i,o,l=s)))return{container:s,offset:u};if(l)return{container:l,offset:r=i?0:l.length}},lh=function(e,t,n,r,i){var o,a,s,u;for(3===r.nodeType&&0===r.nodeValue.length&&r[i]&&(r=r[i]),o=eh(e,r),a=0;a<o.length;a++)for(s=0;s<t.length;s++)if(!("collapsed"in(u=t[s])&&u.collapsed!==n.collapsed)&&e.is(o[a],u.selector))return o[a];return r},ch=function(t,e,n,r){var i,o=t.dom,a=o.getRoot();if(e[0].wrapper||(i=o.getParent(n,e[0].block,a)),!i){var s=o.getParent(n,"LI,TD,TH");i=o.getParent(3===n.nodeType?n.parentNode:n,function(e){return e!==a&&nh(t,e)},s)}if(i&&e[0].wrapper&&(i=eh(o,i,"ul,ol").reverse()[0]||i),!i)for(i=n;i[r]&&!o.isBlock(i[r])&&(i=i[r],!Jd.isEq(i,"br")););return i||n},fh=function(e,t,n,r,i,o,a){var s,u,l,c,f;if(s=u=a?n:i,c=a?"previousSibling":"nextSibling",f=e.getRoot(),3===s.nodeType&&!th(s)&&(a?0<r:o<s.nodeValue.length))return s;for(;;){if(!t[0].block_expand&&e.isBlock(u))return u;for(l=u[c];l;l=l[c])if(!Qd(l)&&!th(l)&&!oh(l))return u;if(u===f||u.parentNode===f){s=u;break}u=u.parentNode}return s},ph={expandRng:function(e,t,n,r){var i,o=t.startContainer,a=t.startOffset,s=t.endContainer,u=t.endOffset,l=e.dom;return 1===o.nodeType&&o.hasChildNodes()&&3===(o=Jl(o,a)).nodeType&&(a=0),1===s.nodeType&&s.hasChildNodes()&&3===(s=Jl(s,t.collapsed?u:u-1)).nodeType&&(u=s.nodeValue.length),o=ah(l,o),s=ah(l,s),(Qd(o.parentNode)||Qd(o))&&(o=Qd(o)?o:o.parentNode,3===(o=t.collapsed?o.previousSibling||o:o.nextSibling||o).nodeType&&(a=t.collapsed?o.length:0)),(Qd(s.parentNode)||Qd(s))&&(s=Qd(s)?s:s.parentNode,3===(s=t.collapsed?s.nextSibling||s:s.previousSibling||s).nodeType&&(u=t.collapsed?0:s.length)),t.collapsed&&((i=uh(l,e.getBody(),o,a,!0,r))&&(o=i.container,a=i.offset),(i=uh(l,e.getBody(),s,u,!1,r))&&(s=i.container,u=i.offset)),n[0].inline&&(s=r?s:ih(s,u)),(n[0].inline||n[0].block_expand)&&(n[0].inline&&3===o.nodeType&&0!==a||(o=fh(l,n,o,a,s,u,!0)),n[0].inline&&3===s.nodeType&&u!==s.nodeValue.length||(s=fh(l,n,o,a,s,u,!1))),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(o=lh(l,n,t,o,"previousSibling"),s=lh(l,n,t,s,"nextSibling")),(n[0].block||n[0].selector)&&(o=ch(e,n,o,"previousSibling"),s=ch(e,n,s,"nextSibling"),n[0].block&&(l.isBlock(o)||(o=fh(l,n,o,a,s,u,!0)),l.isBlock(s)||(s=fh(l,n,o,a,s,u,!1)))),1===o.nodeType&&(a=l.nodeIndex(o),o=o.parentNode),1===s.nodeType&&(u=l.nodeIndex(s)+1,s=s.parentNode),{startContainer:o,startOffset:a,endContainer:s,endOffset:u}}},dh=yr.each,hh=function(e,t){var n=e.childNodes;return--t>n.length-1?t=n.length-1:t<0&&(t=0),n[t]||e},mh={walk:function(e,t,i){var n,r,o,a,s,u,l,c=t.startContainer,f=t.startOffset,p=t.endContainer,d=t.endOffset;if(0<(l=e.select("td[data-mce-selected],th[data-mce-selected]")).length)dh(l,function(e){i([e])});else{var h=function(e){var t;return 3===(t=e[0]).nodeType&&t===c&&f>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===d&&0<e.length&&t===p&&3===t.nodeType&&e.splice(e.length-1,1),e},m=function(e,t,n){for(var r=[];e&&e!==n;e=e[t])r.push(e);return r},g=function(e,t){do{if(e.parentNode===t)return e;e=e.parentNode}while(e)},y=function(e,t,n){var r=n?"nextSibling":"previousSibling";for(s=(a=e).parentNode;a&&a!==t;a=s)s=a.parentNode,(u=m(a===e?a:a[r],r)).length&&(n||u.reverse(),i(h(u)))};if(1===c.nodeType&&c.hasChildNodes()&&(c=c.childNodes[f]),1===p.nodeType&&p.hasChildNodes()&&(p=hh(p,d)),c===p)return i(h([c]));for(n=e.findCommonAncestor(c,p),a=c;a;a=a.parentNode){if(a===p)return y(c,n,!0);if(a===n)break}for(a=p;a;a=a.parentNode){if(a===c)return y(p,n);if(a===n)break}r=g(c,n)||c,o=g(p,n)||p,y(c,r,!0),(u=m(r===c?r:r.nextSibling,"nextSibling",o===p?o.nextSibling:o)).length&&i(h(u)),y(p,o)}}},gh=function(){return"\ufeff"},yh=x($i.isText,"text"),vh={get:function(e){return yh.get(e)},getOption:function(e){return yh.getOption(e)},set:function(e,t){yh.set(e,t)}},_h=function(e){return $i.isText(e)&&vh.get(e)===gh()},bh=function(t,n,r,i){return oa.parent(n).fold(function(){return"skipping"},function(e){return"br"===i||_h(n)?"skipping":Vu(n)?"existing":nf(n)?"caret":Jd.isValid(t,r,i)&&Jd.isValid(t,$i.name(e),r)?"valid":"invalid-child"})},xh=undefined&&undefined.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n},wh=function(e,t){var n=ph.expandRng(e,t,[{inline:!0}],!1);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)},Eh=function(r,e,t,n,i){var o=i.uid,a=void 0===o?Ku("mce-annotation"):o,s=xh(i,["uid"]),u=[],l=ji.fromTag("span");Su.add(l,zu()),so.set(l,""+ju(),a),so.set(l,""+Fu(),t);var c=n(a,s),f=c.attributes,p=void 0===f?{}:f,d=c.classes,h=void 0===d?[]:d;so.setAll(l,p),Yu.add(l,h);var m=pu(Ne.none()),g=function(){m.set(Ne.none())},y=function(){return m.get().getOrThunk(function(){var e=rl.shallow(l);return u.push(e),m.set(Ne.some(e)),e})},v=function(e){Ke(e,_)},_=function(e){switch(bh(r,e,"span",$i.name(e))){case"invalid-child":g();var t=oa.children(e);v(t),g();break;case"valid":var n=y();iu.wrap(e,n)}},b=function(e){var t=Xe(e,ji.fromDom);v(t)};return mh.walk(r.dom,e,function(e){g(),b(e)}),u},Ch=function(r,i,o,a){r.undoManager.transact(function(){var e=r.selection.getRng();e.collapsed&&wh(r,e);var t=ef.getPersistentBookmark(r.selection,!0),n=r.selection.getRng();Eh(r,n,i,o.decorate,a),r.selection.moveToBookmark(t)})},Sh=function(e){return e.firstChild&&e.firstChild===e.lastChild},Th=function(e){return"br"===e.name||"\xa0"===e.value},Ah=function(e,t){return e.getBlockElements()[t.name]&&Sh(t)&&Th(t.firstChild)},kh=function(e,t){var n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||Ah(e,t))},Ih=function(e){var t=e.firstChild,n=e.lastChild;return t&&"META"===t.nodeName&&t.parentNode.removeChild(t),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e},Dh=function(e,t,n){var r=t.serialize(n),i=e.createFragment(r);return Ih(i)},Ph=function(e){return yr.grep(e.childNodes,function(e){return"LI"===e.nodeName})},Oh=function(e){return"\xa0"===e.data||os.isBr(e)},Rh=function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&Oh(e.firstChild)},Nh=function(e){return!e.firstChild||Rh(e)},Lh=function(e){return 0<e.length&&Nh(e[e.length-1])?e.slice(0,-1):e},Mh=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},Bh=function(e,t){var n=t.cloneRange(),r=t.cloneRange();return n.setStartBefore(e),r.setEndAfter(e),[n.cloneContents(),r.cloneContents()]},zh=function(e,t){var n=Cc.before(e),r=Ff(t).next(n);return r?r.toRange():null},Fh=function(e,t){var n=Cc.after(e),r=Ff(t).prev(n);return r?r.toRange():null},jh=function(t,e,n,r){var i=Bh(t,r),o=t.parentNode;return o.insertBefore(i[0],t),yr.each(e,function(e){o.insertBefore(e,t)}),o.insertBefore(i[1],t),o.removeChild(t),Fh(e[e.length-1],n)},Uh=function(t,e,n){var r=t.parentNode;return yr.each(e,function(e){r.insertBefore(e,t)}),zh(t,n)},Vh=function(e,t,n,r){return r.insertAfter(t.reverse(),e),Fh(t[0],n)},qh={isListFragment:function(e,t){var n=t.firstChild,r=t.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),kh(e,r)&&(r=r.prev),!(!n||n!==r||"ul"!==n.name&&"ol"!==n.name)},insertAtCaret:function(e,i,o,t){var n=Dh(i,e,t),a=Mh(i,o.startContainer),r=Lh(Ph(n.firstChild)),s=1,u=2,l=i.getRoot(),c=function(e){var t=Cc.fromRangeStart(o),n=Ff(i.getRoot()),r=e===s?n.prev(t):n.next(t);return!r||Mh(i,r.getNode())!==a};return c(s)?Uh(a,r,l):c(u)?Vh(a,r,l,i):jh(a,r,l,o)},isParentBlockLi:function(e,t){return!!Mh(e,t)},trimListItems:Lh,listItems:Ph},Hh=yr.each,Wh=function(i){this.compare=function(e,t){if(e.nodeName!==t.nodeName)return!1;var n=function(n){var r={};return Hh(i.getAttribs(n),function(e){var t=e.nodeName.toLowerCase();0!==t.indexOf("_")&&"style"!==t&&0!==t.indexOf("data-")&&(r[t]=i.getAttrib(n,t))}),r},r=function(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(void 0===(n=t[r]))return!1;if(e[r]!==n)return!1;delete t[r]}for(r in t)if(
t.hasOwnProperty(r))return!1;return!0};return!(!r(n(e),n(t))||!r(i.parseStyle(i.getAttrib(e,"style")),i.parseStyle(i.getAttrib(t,"style")))||Wd.isBookmarkNode(e)||Wd.isBookmarkNode(t))}},Gh=function(e){for(var t=[],n=e.dom();n;)t.push(ji.fromDom(n)),n=n.lastChild;return t},Zh=function(e){return $i.isText(e)?"\xa0"===vh.get(e):Na(e)},Xh={removeTrailingBr:function(e){var t=Iu.descendants(e,"br"),n=Je(Gh(e).slice(-1),Na);t.length===n.length&&Ke(n,lu.remove)},fillWithPaddingBr:function(e){lu.empty(e),iu.append(e,ji.fromHtml('<br data-mce-bogus="1">'))},isPaddedElement:function(e){return 1===Je(oa.children(e),Zh).length},trimBlockTrailingBr:function(n){oa.lastChild(n).each(function(t){oa.prevSibling(t).each(function(e){Oa(n)&&Na(t)&&Oa(e)&&lu.remove(t)})})}},Kh=yr.makeMap,$h=function(e,t,n,r){var i=document.createRange();return i.setStart(e,t),i.setEnd(n,r),i},Yh=function(t){var n=Cc.fromRangeStart(t),r=Cc.fromRangeEnd(t),i=t.commonAncestorContainer;return Sd.fromPosition(!1,i,r).map(function(e){return!Qp(n,r,i)&&Qp(n,e,i)?$h(n.container(),n.offset(),e.container(),e.offset()):t}).getOr(t)},Jh={normalize:function(e){return e.collapsed?e:Yh(e)}},Qh=os.matchNodeNames("td th"),em=function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var r=n.firstChild,i=n.lastChild;!r||r===i&&"BR"===r.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t)}},tm=function(e,t){Ne.from(e.getParent(t,"td,th")).map(ji.fromDom).each(Xh.trimBlockTrailingBr)},nm=function(a,r,e){var t,n,i,o,s,u,l,c,f,p,d,h,m=a.schema.getTextInlineElements(),g=a.selection,y=a.dom,v=function(e){var t,n,r;t=g.getRng(),n=t.startContainer,r=t.startOffset;var i=function(e){return n[e]&&3===n[e].nodeType};return 3===n.nodeType&&(0<r?e=e.replace(/^&nbsp;/," "):i("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),r<n.length?e=e.replace(/&nbsp;(<br>|)$/," "):i("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e},_=function(){var e,t,n;t=(e=g.getRng()).startContainer,n=e.startOffset,3===t.nodeType&&e.collapsed&&("\xa0"===t.data[n]?(t.deleteData(n,1),/[\u00a0| ]$/.test(r)||(r+=" ")):"\xa0"===t.data[n-1]&&(t.deleteData(n-1,1),/[\u00a0| ]$/.test(r)||(r=" "+r)))},b=function(){if(h){var n=a.getBody(),r=new Wh(y);yr.each(y.select("*[data-mce-fragment]"),function(e){for(var t=e.parentNode;t&&t!==n;t=t.parentNode)m[e.nodeName.toLowerCase()]&&r.compare(t,e)&&y.remove(e,!0)})}},x=function(e){for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")},w=function(e){yr.each(e.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")})},E=function(e){return!!e.getAttribute("data-mce-fragment")},C=function(e){return e&&!a.schema.getShortEndedElements()[e.nodeName]},S=function(e){var t,n,r,i=function(e){for(var t=a.getBody();e&&e!==t;e=e.parentNode)if("false"===a.dom.getContentEditable(e))return e;return null};if(e){if(g.scrollIntoView(e),t=i(e))return y.remove(e),void g.select(t);c=y.createRng(),(f=e.previousSibling)&&3===f.nodeType?(c.setStart(f,f.nodeValue.length),Gt.ie||(p=e.nextSibling)&&3===p.nodeType&&(f.appendData(p.data),p.parentNode.removeChild(p))):(c.setStartBefore(e),c.setEndBefore(e));var o=function(e){var t=Cc.fromRangeStart(e);if(t=Ff(a.getBody()).next(t))return t.toRange()};n=y.getParent(e,y.isBlock),y.remove(e),n&&y.isEmpty(n)&&(a.$(n).empty(),c.setStart(n,0),c.setEnd(n,0),Qh(n)||E(n)||!(r=o(c))?y.add(n,y.create("br",{"data-mce-bogus":"1"})):(c=r,y.remove(n))),g.setRng(c)}};if(/^ | $/.test(r)&&(r=v(r)),t=a.parser,h=e.merge,n=I({validate:a.settings.validate},a.schema),d='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',u={content:r,format:"html",selection:!0,paste:e.paste},(u=a.fire("BeforeSetContent",u)).isDefaultPrevented())a.fire("SetContent",{content:u.content,format:"html",selection:!0,paste:e.paste});else{-1===(r=u.content).indexOf("{$caret}")&&(r+="{$caret}"),r=r.replace(/\{\$caret\}/,d);var T=(c=g.getRng()).startContainer||(c.parentElement?c.parentElement():null),A=a.getBody();T===A&&g.isCollapsed()&&y.isBlock(A.firstChild)&&C(A.firstChild)&&y.isEmpty(A.firstChild)&&((c=y.createRng()).setStart(A.firstChild,0),c.setEnd(A.firstChild,0),g.setRng(c)),g.isCollapsed()||(a.selection.setRng(Jh.normalize(a.selection.getRng())),a.getDoc().execCommand("Delete",!1,null),_());var k={context:(i=g.getNode()).nodeName.toLowerCase(),data:e.data,insert:!0};if(s=t.parse(r,k),!0===e.paste&&qh.isListFragment(a.schema,s)&&qh.isParentBlockLi(y,i))return c=qh.insertAtCaret(n,y,a.selection.getRng(),s),a.selection.setRng(c),void a.fire("SetContent",u);if(x(s),"mce_marker"===(f=s.lastChild).attr("id"))for(f=(l=f).prev;f;f=f.walk(!0))if(3===f.type||!y.isBlock(f.name)){a.schema.isValidChild(f.parent.name,"span")&&f.parent.insert(l,f,"br"===f.name);break}if(a._selectionOverrides.showBlockCaretContainer(i),k.invalid){for(g.setContent(d),i=g.getNode(),o=a.getBody(),9===i.nodeType?i=f=o:f=i;f!==o;)f=(i=f).parentNode;r=i===o?o.innerHTML:y.getOuterHTML(i),r=n.serialize(t.parse(r.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return n.serialize(s)}))),i===o?y.setHTML(o,r):y.setOuterHTML(i,r)}else r=n.serialize(s),em(a,r,i);b(),S(y.get("mce_marker")),w(a.getBody()),tm(a.dom,a.selection.getStart()),a.fire("SetContent",u),a.addVisual()}},rm=function(e){var t;return"string"!=typeof e?(t=yr.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:t}):{content:e,details:{}}},im={insertAtCaret:function(e,t){var n=rm(t);nm(e,n.content,n.details)}},om=Eo("sections","settings"),am=Li.detect().deviceType.isTouch(),sm=["lists","autolink","autosave"],um={theme:"mobile"},lm=function(e){var t=Fe(e)?e.join(" "):e,n=Xe(Be(t)?t.split(" "):[],ki);return Je(n,function(e){return 0<e.length})},cm=function(e){return Je(e,_e(Ge,sm))},fm=function(n,e){var t=to(e,function(e,t){return Ge(n,t)});return om(t.t,t.f)},pm=function(e,t,n){var r=e.sections(),i=r.hasOwnProperty(t)?r[t]:{};return yr.extend({},n,i)},dm=function(e,t){return e.sections().hasOwnProperty(t)},hm=function(e,t,n){return{id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:t,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:n.convertURL,url_converter_scope:n,ie7_compat:!0}},mm=function(e,t){var n=t.external_plugins?t.external_plugins:{};return e&&e.external_plugins?yr.extend({},e.external_plugins,n):n},gm=function(e,t){return[].concat(lm(e)).concat(lm(t))},ym=function(e,t,n,r){var i=lm(n.forced_plugins),o=lm(r.plugins),a=e&&dm(t,"mobile")?cm(o):o,s=gm(i,a);return yr.extend(r,{plugins:s.join(" ")})},vm=function(e,t){var n=t.settings().inline;return e&&dm(t,"mobile")&&!n},_m=function(e,t,n,r){var i=fm(["mobile"],r),o=yr.extend(t,n,i.settings(),vm(e,i)?pm(i,"mobile",um):{},{validate:!0,content_editable:i.settings().inline,external_plugins:mm(n,i.settings())});return ym(e,i,n,o)},bm=function(e,t,n,r,i){var o=hm(t,n,e);return _m(am,o,r,i)},xm=function(e,t,n){return Ne.from(t.settings[n]).filter(e)},wm=_e(xm,Be),Em=function(e){var n={};return"string"==typeof e?Ke(0<e.indexOf("=")?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),function(e){var t=e.split("=");1<t.length?n[yr.trim(t[0])]=yr.trim(t[1]):n[yr.trim(t[0])]=yr.trim(t)}):n=e,n},Cm=function(t){return function(e){return Fe(e)&&st(e,t)}},Sm=function(e,t,n,r){var i=t in e.settings?e.settings[t]:n;return"hash"===r?Em(i):"string"===r?xm(Be,e,t).getOr(n):"number"===r?xm(qe,e,t).getOr(n):"boolean"===r?xm(Ue,e,t).getOr(n):"object"===r?xm(ze,e,t).getOr(n):"array"===r?xm(Fe,e,t).getOr(n):"string[]"===r?xm(Cm(Be),e,t).getOr(n):"function"===r?xm(Ve,e,t).getOr(n):i},Tm=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Am=function(e){return Tm.test(e)},km=function(e,t,n){return Je(qs.DOM.getParents(n.container(),"*",t),e)},Im=function(e,t,n){var r=Jp(t,e),i=Jp(n,e);return r&&r===i},Dm=function(e,t){var n=t.container(),r=t.offset();return e?pl(n)?os.isText(n.nextSibling)?Cc(n.nextSibling,0):Cc.after(n):gl(t)?Cc(n,r+1):t:pl(n)?os.isText(n.previousSibling)?Cc(n.previousSibling,n.previousSibling.data.length):Cc.before(n):yl(t)?Cc(n,r-1):t},Pm={isInlineTarget:function(e,t){var n=wm(e,"inline_boundaries_selector").getOr("a[href],code");return Po.is(ji.fromDom(t),n)},findRootInline:function(e,t,n){var r=km(e,t,n);return Ne.from(r[r.length-1])},isRtl:function(e){return"rtl"===qs.DOM.getStyle(e,"direction",!0)||Am(e.textContent)},isAtZwsp:function(e){return gl(e)||yl(e)},normalizePosition:Dm,normalizeForwards:_e(Dm,!0),normalizeBackwards:_e(Dm,!1),hasSameParentBlock:Im},Om=function(t){return function(e){return zo.eq(t,ji.fromDom(e.dom().parentNode))}},Rm=function(e){var t=e.getBody(),n=t.firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t;e.selection.setCursorLocation(n,0)},Nm={getParentBlock:function(e,t){return zo.contains(e,t)?Lu.closest(t,function(e){return La(e)||Ba(e)},Om(e)):Ne.none()},paddEmptyBody:function(e){e.dom.isEmpty(e.getBody())&&(e.setContent(""),Rm(e))},willDeleteLastPositionInElement:function(o,a,s){return tc([Sd.firstPositionIn(s),Sd.lastPositionIn(s)],function(e,t){var n=Pm.normalizePosition(!0,e),r=Pm.normalizePosition(!1,t),i=Pm.normalizePosition(!1,a);return o?Sd.nextPosition(s,i).map(function(e){return e.isEqual(r)&&a.isEqual(n)}).getOr(!1):Sd.prevPosition(s,i).map(function(e){return e.isEqual(n)&&a.isEqual(r)}).getOr(!1)}).getOr(!0)}},Lm={any:function(e){return Bu.first(e).isSome()},ancestor:function(e,t,n){return Bu.ancestor(e,t,n).isSome()},sibling:function(e,t){return Bu.sibling(e,t).isSome()},child:function(e,t){return Bu.child(e,t).isSome()},descendant:function(e,t){return Bu.descendant(e,t).isSome()},closest:function(e,t,n){return Bu.closest(e,t,n).isSome()}},Mm=function(e,t){var n=ji.fromDom(e),r=ji.fromDom(t);return Lm.ancestor(r,"pre,code",_e(zo.eq,n))},Bm=function(e,t){return os.isText(t)&&/^[ \t\r\n]*$/.test(t.data)&&!1===Mm(e,t)},zm=function(e){return os.isElement(e)&&"A"===e.nodeName&&e.hasAttribute("name")},Fm=function(e,t){return Rl(t)&&!1===Bm(e,t)||zm(t)||jm(t)},jm=os.hasAttribute("data-mce-bookmark"),Um=os.hasAttribute("data-mce-bogus"),Vm=os.hasAttributeValue("data-mce-bogus","all"),qm=function(e){var t,n,r=0;if(Fm(e,e))return!1;if(!(n=e.firstChild))return!0;t=new xe(n,e);do{if(Vm(n))n=t.next(!0);else if(Um(n))n=t.next();else if(os.isBr(n))r++,n=t.next();else{if(Fm(e,n))return!1;n=t.next()}}while(n);return r<=1},Hm={isEmpty:function(e){return qm(e.dom())}},Wm=Eo("block","position"),Gm=Eo("from","to"),Zm=function(e,t){var n=ji.fromDom(e),r=ji.fromDom(t.container());return Nm.getParentBlock(n,r).map(function(e){return Wm(e,t)})},Xm=function(e){return!1===zo.eq(e.from().block(),e.to().block())},Km=function(e){return oa.parent(e.from().block()).bind(function(t){return oa.parent(e.to().block()).filter(function(e){return zo.eq(t,e)})}).isSome()},$m=function(e){return!1===os.isContentEditableFalse(e.from().block())&&!1===os.isContentEditableFalse(e.to().block())},Ym=function(t,n,r){return os.isBr(r.position().getNode())&&!1===Hm.isEmpty(r.block())?Sd.positionIn(!1,r.block().dom()).bind(function(e){return e.isEqual(r.position())?Sd.fromPosition(n,t,e).bind(function(e){return Zm(t,e)}):Ne.some(r)}).getOr(r):r},Jm=function(t,n,e){var r=Zm(t,Cc.fromRangeStart(e)),i=r.bind(function(e){return Sd.fromPosition(n,t,e.position()).bind(function(e){return Zm(t,e).map(function(e){return Ym(t,n,e)})})});return tc([r,i],Gm).filter(function(e){return Xm(e)&&Km(e)&&$m(e)})},Qm={read:function(e,t,n){return n.collapsed?Jm(e,t,n):Ne.none()}},eg=function(e){return e.slice(0,-1)},tg=function(e,t,n){return zo.contains(t,e)?eg(oa.parents(e,function(e){return n(e)||zo.eq(e,t)})):[]},ng=function(e,t){return tg(e,t,ye(!1))},rg=function(e,t){return[e].concat(ng(e,t))},ig={parentsUntil:tg,parents:ng,parentsAndSelf:rg},og=function(e){var t=oa.children(e);return nt(t,Oa).fold(function(){return t},function(e){return t.slice(0,e)})},ag=function(e){var t=og(e);return Ke(t,lu.remove),t},sg=function(e,t){var n=ig.parentsAndSelf(t,e);return tt(n.reverse(),Hm.isEmpty).each(lu.remove)},ug=function(e){return 0===Je(oa.prevSiblings(e),function(e){return!Hm.isEmpty(e)}).length},lg=function(e,t,n,r){if(Hm.isEmpty(n))return Xh.fillWithPaddingBr(n),Sd.firstPositionIn(n.dom());ug(r)&&Hm.isEmpty(t)&&iu.before(r,ji.fromTag("br"));var i=Sd.prevPosition(n.dom(),Cc.before(r.dom()));return Ke(ag(t),function(e){iu.before(r,e)}),sg(e,t),i},cg=function(e,t,n){if(Hm.isEmpty(n))return lu.remove(n),Hm.isEmpty(t)&&Xh.fillWithPaddingBr(t),Sd.firstPositionIn(t.dom());var r=Sd.lastPositionIn(n.dom());return Ke(ag(t),function(e){iu.append(n,e)}),sg(e,t),r},fg=function(e,t){var n=ig.parentsAndSelf(t,e);return Ne.from(n[n.length-1])},pg=function(e,t){return zo.contains(t,e)?fg(t,e):Ne.none()},dg=function(e,t){Sd.positionIn(e,t.dom()).map(function(e){return e.getNode()}).map(ji.fromDom).filter(Na).each(lu.remove)},hg=function(e,t,n){return dg(!0,t),dg(!1,n),pg(t,n).fold(_e(cg,e,t,n),_e(lg,e,t,n))},mg={mergeBlocks:function(e,t,n,r){return t?hg(e,r,n):hg(e,n,r)}},gg={backspaceDelete:function(t,n){var e,r=ji.fromDom(t.getBody());return(e=Qm.read(r.dom(),n,t.selection.getRng()).bind(function(e){return mg.mergeBlocks(r,n,e.from().block(),e.to().block())})).each(function(e){t.selection.setRng(e.toRange())}),e.isSome()}},yg=function(n,r){var i=r.getRng();return tc([Nm.getParentBlock(n,ji.fromDom(i.startContainer)),Nm.getParentBlock(n,ji.fromDom(i.endContainer))],function(e,t){return!1===zo.eq(e,t)&&(i.deleteContents(),mg.mergeBlocks(n,!0,e,t).each(function(e){r.setRng(e.toRange())}),!0)}).getOr(!1)},vg=function(e,t){var n=ji.fromDom(t),r=_e(zo.eq,e);return Lu.ancestor(n,ja,r).isSome()},_g=function(e,t){return vg(e,t.startContainer)||vg(e,t.endContainer)},bg=function(e,t){var n=Sd.prevPosition(e.dom(),Cc.fromRangeStart(t)).isNone(),r=Sd.nextPosition(e.dom(),Cc.fromRangeEnd(t)).isNone();return!_g(e,t)&&n&&r},xg=function(e){return e.setContent(""),e.selection.setCursorLocation(),!0},wg=function(e){var t=ji.fromDom(e.getBody()),n=e.selection.getRng();return bg(t,n)?xg(e):yg(t,e.selection)},Eg={backspaceDelete:function(e){return!e.selection.isCollapsed()&&wg(e)}},Cg={generate:function(a){if(!Fe(a))throw new Error("cases must be an array");if(0===a.length)throw new Error("there must be at least one case");var s=[],n={};return Ke(a,function(e,r){var t=Yi(e);if(1!==t.length)throw new Error("one and only one name per case");var i=t[0],o=e[i];if(n[i]!==undefined)throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!Fe(o))throw new Error("case arguments must be an array");s.push(i),n[i]=function(){var e=arguments.length;if(e!==o.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+o.length+" ("+o+"), got "+e);for(var n=new Array(e),t=0;t<n.length;t++)n[t]=arguments[t];return{fold:function(){if(arguments.length!==a.length)throw new Error("Wrong number of arguments to fold. Expected "+a.length+", got "+arguments.length);return arguments[r].apply(null,n)},match:function(e){var t=Yi(e);if(s.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+"\nActual: "+t.join(","));if(!st(s,function(e){return Ge(t,e)}))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+s.join(", "));return e[i].apply(null,n)},log:function(e){console.log(e,{constructors:s,constructor:i,params:n})}}}}),n}},Sg=function(e){return ja(ji.fromDom(e))||Ba(ji.fromDom(e))},Tg=Cg.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Ag=function(e,t){var n=t.getNode(!1===e),r=e?"after":"before";return os.isElement(n)&&n.getAttribute("data-mce-caret")===r},kg=function(t,e,n,r){var i=function(e){return Ra(ji.fromDom(e))&&!Qp(n,r,t)};return ld(!e,n).fold(function(){return ld(e,r).fold(ye(!1),i)},i)},Ig=function(e,t,n,r){var i=r.getNode(!1===t);return Nm.getParentBlock(ji.fromDom(e),ji.fromDom(n.getNode())).map(function(e){return Hm.isEmpty(e)?Tg.remove(e.dom()):Tg.moveToElement(i)}).orThunk(function(){return Ne.some(Tg.moveToElement(i))})},Dg=function(t,n,r){return Sd.fromPosition(n,t,r).bind(function(e){return Sg(e.getNode())?Ne.none():kg(t,n,r,e)?Ne.none():n&&os.isContentEditableFalse(e.getNode())?Ig(t,n,r,e):!1===n&&os.isContentEditableFalse(e.getNode(!0))?Ig(t,n,r,e):n&&pd(r)?Ne.some(Tg.moveToPosition(e)):!1===n&&fd(r)?Ne.some(Tg.moveToPosition(e)):Ne.none()})},Pg=function(e,t){return e&&os.isContentEditableFalse(t.nextSibling)?Ne.some(Tg.moveToElement(t.nextSibling)):!1===e&&os.isContentEditableFalse(t.previousSibling)?Ne.some(Tg.moveToElement(t.previousSibling)):Ne.none()},Og=function(t,n,e){return e.fold(function(e){return Ne.some(Tg.remove(e))},function(e){return Ne.some(Tg.moveToElement(e))},function(e){return Qp(n,e,t)?Ne.none():Ne.some(Tg.moveToPosition(e))})},Rg=function(t,e,n){return Ag(e,n)?Pg(e,n.getNode(!1===e)).fold(function(){return Dg(t,e,n)},Ne.some):Dg(t,e,n).bind(function(e){return Og(t,n,e)})},Ng=function(e,t,n){var r=ad(t?1:-1,e,n),i=Cc.fromRangeStart(r);return!1===t&&pd(i)?Ne.some(Tg.remove(i.getNode(!0))):t&&fd(i)?Ne.some(Tg.remove(i.getNode())):Rg(e,t,i)},Lg=function(e,t){var n=e.container(),r=e.offset();return!1===Cc.isTextPosition(e)&&n===t.parentNode&&r>Cc.before(t).offset()},Mg=function(e,t){return Lg(t,e)?Cc(t.container(),t.offset()-1):t},Bg=function(e){return os.isText(e)?Cc(e,0):Cc.before(e)},zg=function(e){return os.isText(e)?Cc(e,e.data.length):Cc.after(e)},Fg=function(e){return Rl(e.previousSibling)?Ne.some(zg(e.previousSibling)):e.previousSibling?Sd.lastPositionIn(e.previousSibling):Ne.none()},jg=function(e){return Rl(e.nextSibling)?Ne.some(Bg(e.nextSibling)):e.nextSibling?Sd.firstPositionIn(e.nextSibling):Ne.none()},Ug=function(e,t){var n=Cc.before(t.previousSibling?t.previousSibling:t.parentNode);return Sd.prevPosition(e,n).fold(function(){return Sd.nextPosition(e,Cc.after(t))},Ne.some)},Vg=function(e,t){return Sd.nextPosition(e,Cc.after(t)).fold(function(){return Sd.prevPosition(e,Cc.before(t))},Ne.some)},qg=function(e,t){return Fg(t).orThunk(function(){return jg(t)}).orThunk(function(){return Ug(e,t)})},Hg=function(e,t){return jg(t).orThunk(function(){return Fg(t)}).orThunk(function(){return Vg(e,t)})},Wg=function(e,t,n){return e?Hg(t,n):qg(t,n)},Gg=function(e,t,n){return Wg(e,t,n).map(_e(Mg,n))},Zg=function(t,n,e){e.fold(function(){t.focus()},function(e){t.selection.setRng(e.toRange(),n)})},Xg=function(t){return function(e){return e.dom()===t}},Kg=function(e,t){return t&&e.schema.getBlockElements().hasOwnProperty($i.name(t))},$g=function(e){if(Hm.isEmpty(e)){var t=ji.fromHtml('<br data-mce-bogus="1">');return lu.empty(e),iu.append(e,t),Ne.some(Cc.before(t.dom()))}return Ne.none()},Yg=function(a,e){return tc([oa.prevSibling(a),oa.nextSibling(a),e],function(e,t,n){var r,i=e.dom(),o=t.dom();return os.isText(i)&&os.isText(o)?(r=i.data.length,i.appendData(o.data),lu.remove(t),lu.remove(a),n.container()===o?Cc(i,r):n):(lu.remove(a),n)}).orThunk(function(){return lu.remove(a),e})},Jg={deleteElement:function(t,n,e){var r=Gg(n,t.getBody(),e.dom()),i=Lu.ancestor(e,_e(Kg,t),Xg(t.getBody())),o=Yg(e,r);t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):i.bind($g).fold(function(){Zg(t,n,o)},function(e){Zg(t,n,Ne.some(e))})}},Qg=function(t,n){return function(e){return t._selectionOverrides.hideFakeCaret(),Jg.deleteElement(t,n,ji.fromDom(e)),!0}},ey=function(n,r){return function(e){var t=r?Cc.before(e):Cc.after(e);return n.selection.setRng(t.toRange()),!0}},ty=function(t){return function(e){return t.selection.setRng(e.toRange()),!0}},ny=function(t,n){return Ng(t.getBody(),n,t.selection.getRng()).map(function(e){return e.fold(Qg(t,n),ey(t,n),ty(t))}).getOr(!1)},ry=function(e){Ke(Iu.descendants(e,".mce-offscreen-selection"),lu.remove)},iy=function(e,t){var n=e.selection.getNode();return!!os.isContentEditableFalse(n)&&(ry(ji.fromDom(e.getBody())),Jg.deleteElement(e,t,ji.fromDom(e.selection.getNode())),Nm.paddEmptyBody(e),!0)},oy=function(e,t){for(;t&&t!==e;){if(os.isContentEditableTrue(t)||os.isContentEditableFalse(t))return t;t=t.parentNode}return null},ay={backspaceDelete:function(e,t){return e.selection.isCollapsed()?ny(e,t):iy(e,t)},paddEmptyElement:function(e){var t,n=oy(e.getBody(),e.selection.getNode());return os.isContentEditableTrue(n)&&e.dom.isBlock(n)&&e.dom.isEmpty(n)&&(t=e.dom.create("br",{"data-mce-bogus":"1"}),e.dom.setHTML(n,""),n.appendChild(t),e.selection.setRng(Cc.before(t).toRange())),!0}},sy=os.isText,uy=function(e){return sy(e)&&e.data[0]===ul.ZWSP},ly=function(e){return sy(e)&&e.data[e.data.length-1]===ul.ZWSP},cy=function(e){return e.ownerDocument.createTextNode(ul.ZWSP)},fy=function(e){if(sy(e.previousSibling))return ly(e.previousSibling)||e.previousSibling.appendData(ul.ZWSP),e.previousSibling;if(sy(e))return uy(e)||e.insertData(0,ul.ZWSP),e;var t=cy(e);return e.parentNode.insertBefore(t,e),t},py=function(e){if(sy(e.nextSibling))return uy(e.nextSibling)||e.nextSibling.insertData(0,ul.ZWSP),e.nextSibling;if(sy(e))return ly(e)||e.appendData(ul.ZWSP),e;var t=cy(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t},dy=function(e,t){return e?fy(t):py(t)},hy=_e(dy,!0),my=_e(dy,!1),gy=function(e,t){return os.isText(e.container())?dy(t,e.container()):dy(t,e.getNode())},yy=function(e,t){var n=t.get();return n&&e.container()===n&&pl(n)},vy={renderCaret:function(n,e){return e.fold(function(e){yf.remove(n.get());var t=hy(e);return n.set(t),Ne.some(Cc(t,t.length-1))},function(e){return Sd.firstPositionIn(e).map(function(e){if(yy(e,n))return Cc(n.get(),1);yf.remove(n.get());var t=gy(e,!0);return n.set(t),Cc(t,1)})},function(e){return Sd.lastPositionIn(e).map(function(e){if(yy(e,n))return Cc(n.get(),n.get().length-1);yf.remove(n.get());var t=gy(e,!1);return n.set(t),Cc(t,t.length-1)})},function(e){yf.remove(n.get());var t=my(e);return n.set(t),Ne.some(Cc(t,1))})}},_y={evaluateUntil:function(e,t){for(var n=0;n<e.length;n++){var r=e[n].apply(null,t);if(r.isSome())return r}return Ne.none()}},by=Cg.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),xy=function(e,t){var n=Jp(t,e);return n||e},wy=function(e,t,n){var r=Pm.normalizeForwards(n),i=xy(t,r.container());return Pm.findRootInline(e,i,r).fold(function(){return Sd.nextPosition(i,r).bind(_e(Pm.findRootInline,e,i)).map(function(e){return by.before(e)})},Ne.none)},Ey=function(e,t){return null===rf(e,t)},Cy=function(e,t,n){return Pm.findRootInline(e,t,n).filter(_e(Ey,t))},Sy=function(e,t,n){var r=Pm.normalizeBackwards(n);return Cy(e,t,r).bind(function(e){return Sd.prevPosition(e,r).isNone()?Ne.some(by.start(e)):Ne.none()})},Ty=function(e,t,n){var r=Pm.normalizeForwards(n);return Cy(e,t,r).bind(function(e){return Sd.nextPosition(e,r).isNone()?Ne.some(by.end(e)):Ne.none()})},Ay=function(e,t,n){var r=Pm.normalizeBackwards(n),i=xy(t,r.container());return Pm.findRootInline(e,i,r).fold(function(){return Sd.prevPosition(i,r).bind(_e(Pm.findRootInline,e,i)).map(function(e){return by.after(e)})},Ne.none)},ky=function(e){return!1===Pm.isRtl(Dy(e))},Iy=function(e,t,n){return _y.evaluateUntil([wy,Sy,Ty,Ay],[e,t,n]).filter(ky)},Dy=function(e){return e.fold(ve,ve,ve,ve)},Py=function(e){return e.fold(ye("before"),ye("start"),ye("end"),ye("after"))},Oy=function(e){return e.fold(by.before,by.before,by.after,by.after)},Ry=function(e){return e.fold(by.start,by.start,by.end,by.end)},Ny=function(e,t){return Py(e)===Py(t)&&Dy(e)===Dy(t)},Ly=function(n,e,r,t,i,o){return tc([Pm.findRootInline(e,r,t),Pm.findRootInline(e,r,i)],function(e,t){return e!==t&&Pm.hasSameParentBlock(r,e,t)?by.after(n?e:t):o}).getOr(o)},My=function(e,t){return e.fold(ye(!0),function(e){return!Ny(e,t)})},By=function(t,n,r,i,e){var o=Pm.normalizePosition(t,e);return Sd.fromPosition(t,r,o).map(_e(Pm.normalizePosition,t)).fold(function(){return i.map(Oy)},function(e){return Iy(n,r,e).map(_e(Ly,t,n,r,o,e)).filter(_e(My,i))}).filter(ky)},zy=function(e,t){return e?t.fold(ge(Ne.some,by.start),Ne.none,ge(Ne.some,by.after),Ne.none):t.fold(Ne.none,ge(Ne.some,by.before),Ne.none,ge(Ne.some,by.end))},Fy=function(e,t,n,r){var i=Pm.normalizePosition(e,r),o=Iy(t,n,i);return Iy(t,n,i).bind(_e(zy,e)).orThunk(function(){return By(e,t,n,o,r)})},jy={readLocation:Iy,findLocation:Fy,prevLocation:_e(Fy,!1),nextLocation:_e(Fy,!0),getElement:Dy,outside:Oy,inside:Ry},Uy=function(e){return Ve(e.selection.getSel().modify)},Vy=function(e,t,n){var r=e?1:-1;return t.setRng(Cc(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},qy=function(e,t){var n=t.selection.getRng(),r=e?Cc.fromRangeEnd(n):Cc.fromRangeStart(n);return!!Uy(t)&&(e&&gl(r)?Vy(!0,t.selection,r):!(e||!yl(r))&&Vy(!1,t.selection,r))},Hy={hasSelectionModifyApi:Uy,moveByWord:qy},Wy=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},Gy=function(e){return!1!==e.settings.inline_boundaries},Zy=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},Xy=function(t,e,n){return vy.renderCaret(e,n).map(function(e){return Wy(t,e),n})},Ky=function(t,n,e){var r=t.getBody(),i=Cc.fromRangeStart(t.selection.getRng()),o=_e(Pm.isInlineTarget,t);return jy.findLocation(e,o,r,i).bind(function(e){return Xy(t,n,e)})},$y=function(e,t,n){var r=Je(t.select('*[data-mce-selected="inline-boundary"]'),e),i=Je(n,e);Ke(ct(r,i),_e(Zy,!1)),Ke(ct(i,r),_e(Zy,!0))},Yy=function(e,t){if(e.selection.isCollapsed()&&!0!==e.composing&&t.get()){var n=Cc.fromRangeStart(e.selection.getRng());Cc.isTextPosition(n)&&!1===Pm.isAtZwsp(n)&&(Wy(e,yf.removeAndReposition(t.get(),n)),t.set(null))}},Jy=function(t,n,r,e){if(n.selection.isCollapsed()){var i=Je(e,t);Ke(i,function(){var e=Cc.fromRangeStart(n.selection.getRng());jy.readLocation(t,n.getBody(),e).bind(function(e){return Xy(n,r,e)})})}},Qy=function(e,t){return function(){return!!Gy(t)&&Hy.moveByWord(e,t)}},ev=function(t){var n=pu(null),r=_e(Pm.isInlineTarget,t);return t.on("NodeChange",function(e){Gy(t)&&($y(r,t.dom,e.parents),Yy(t,n),Jy(r,t,n,e.parents))}),n},tv={move:function(e,t,n){return function(){return!!Gy(e)&&Ky(e,t,n).isSome()}},moveNextWord:_e(Qy,!0),movePrevWord:_e(Qy,!1),setupSelectedState:ev,setCaretPosition:Wy},nv=function(e){return!1!==e.settings.inline_boundaries},rv=function(e,t){var n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},iv=function(i){return tc([Sd.firstPositionIn(i),Sd.lastPositionIn(i)],function(e,t){var n=Pm.normalizePosition(!0,e),r=Pm.normalizePosition(!1,t);return Sd.nextPosition(i,n).map(function(e){return e.isEqual(r)}).getOr(!0)}).getOr(!0)},ov=function(t,n){return function(e){return vy.renderCaret(n,e).map(function(e){return tv.setCaretPosition(t,e),!0}).getOr(!1)}},av=function(e,t,n,r){var i=e.getBody(),o=_e(Pm.isInlineTarget,e);e.undoManager.ignore(function(){e.selection.setRng(rv(n,r)),e.execCommand("Delete"),jy.readLocation(o,i,Cc.fromRangeStart(e.selection.getRng())).map(jy.inside).map(ov(e,t))}),e.nodeChanged()},sv=function(e,t){var n=Jp(t,e);return n||e},uv=function(n,r,i,o){var a=sv(n.getBody(),o.container()),s=_e(Pm.isInlineTarget,n),u=jy.readLocation(s,a,o);return u.bind(function(e){return i?e.fold(ye(Ne.some(jy.inside(e))),Ne.none,ye(Ne.some(jy.outside(e))),Ne.none):e.fold(Ne.none,ye(Ne.some(jy.outside(e))),Ne.none,ye(Ne.some(jy.inside(e))))}).map(ov(n,r)).getOrThunk(function(){var e=Sd.navigate(i,a,o),t=e.bind(function(e){return jy.readLocation(s,a,e)});return u.isSome()&&t.isSome()?Pm.findRootInline(s,a,o).map(function(e){return!!iv(e)&&(Jg.deleteElement(n,i,ji.fromDom(e)),!0)}).getOr(!1):t.bind(function(){return e.map(function(e){return i?av(n,r,o,e):av(n,r,e,o),!0})}).getOr(!1)})},lv={backspaceDelete:function(e,t,n){if(e.selection.isCollapsed()&&nv(e)){var r=Cc.fromRangeStart(e.selection.getRng());return uv(e,t,n,r)}return!1}},cv=Eo("start","end"),fv=Eo("rng","table","cells"),pv=Cg.generate([{removeTable:["element"]},{emptyCells:["cells"]}]),dv=function(e){return _e(zo.eq,e)},hv=function(e,t){return Bu.closest(ji.fromDom(e),"td,th",t)},mv=function(e,t){return Bu.ancestor(e,"table",t)},gv=function(e){return!1===zo.eq(e.start(),e.end())},yv=function(e,n){return mv(e.start(),n).bind(function(t){return mv(e.end(),n).bind(function(e){return zo.eq(t,e)?Ne.some(t):Ne.none()})})},vv=function(e){return Iu.descendants(e,"td,th")},_v=function(t,e){return mv(t.start(),e).bind(function(e){return ht(vv(e)).map(function(e){return cv(t.start(),e)})})},bv=function(n,e){var t=hv(e.startContainer,n),r=hv(e.endContainer,n);return e.collapsed?Ne.none():tc([t,r],cv).fold(function(){return t.fold(function(){return r.bind(function(t){return mv(t,n).bind(function(e){return dt(vv(e)).map(function(e){return cv(e,t)})})})},function(t){return mv(t,n).bind(function(e){return ht(vv(e)).map(function(e){return cv(t,e)})})})},function(e){return xv(n,e)?Ne.none():_v(e,n)})},xv=function(e,t){return yv(t,e).isSome()},wv=function(e,t){var n=hv(e.startContainer,t),r=hv(e.endContainer,t);return tc([n,r],cv).filter(gv).filter(function(e){return xv(t,e)}).orThunk(function(){return bv(t,e)})},Ev=function(t,e){return yv(t,e).map(function(e){return fv(t,e,vv(e))})},Cv=function(e,t){var n=dv(e);return wv(t,n).bind(function(e){return Ev(e,n)})},Sv=function(e,t){return nt(e,function(e){return zo.eq(e,t)})},Tv=function(n){return tc([Sv(n.cells(),n.rng().start()),Sv(n.cells(),n.rng().end())],function(e,t){return n.cells().slice(e,t+1)})},Av=function(n){return Tv(n).map(function(e){var t=n.cells();return e.length===t.length?pv.removeTable(n.table()):pv.emptyCells(e)})},kv={getActionFromRange:function(e,t){return Cv(e,t).bind(Av)},getActionFromCells:function(e){return pv.emptyCells(e)}},Iv=function(e){var t=[];if(e)for(var n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},Dv=function(e){return 1<Iv(e).length},Pv={getRanges:Iv,getSelectedNodes:function(e){return at(e,function(e){var t=Yl(e);return t?[ji.fromDom(t)]:[]})},hasMultipleRanges:Dv},Ov=function(e){return Je(Pv.getSelectedNodes(e),ja)},Rv=function(e){return Iu.descendants(e,"td[data-mce-selected],th[data-mce-selected]")},Nv=function(e,t){var n=Rv(t),r=Ov(e);return 0<n.length?n:r},Lv=function(e){return Nv(Pv.getRanges(e.selection.getSel()),ji.fromDom(e.getBody()))},Mv={getCellsFromRanges:Ov,getCellsFromElement:Rv,getCellsFromElementOrRanges:Nv,getCellsFromEditor:Lv},Bv=function(e,t){return Ke(t,Xh.fillWithPaddingBr),e.selection.setCursorLocation(t[0].dom(),0),!0},zv=function(e,t){return Jg.deleteElement(e,!1,t),!0},Fv=function(t,e,n){return kv.getActionFromRange(e,n).map(function(e){return e.fold(_e(zv,t),_e(Bv,t))})},jv=function(e,t){return Gv(e,t)},Uv=function(t,e,n,r){return Hv(e,r).fold(function(){return Fv(t,e,n)},function(e){return jv(t,e)}).getOr(!1)},Vv=function(e,t){var n=ji.fromDom(e.getBody()),r=e.selection.getRng(),i=Mv.getCellsFromEditor(e);return 0!==i.length?Bv(e,i):Uv(e,n,r,t)},qv=function(e,t){return tt(ig.parentsAndSelf(t,e),ja)},Hv=function(e,t){return tt(ig.parentsAndSelf(t,e),function(e){return"caption"===$i.name(e)})},Wv=function(e,t,n,r,i){return Sd.navigate(n,e.getBody(),i).bind(function(e){return qv(t,ji.fromDom(e.getNode())).map(function(e){return!1===zo.eq(e,r)})})},Gv=function(e,t){return Xh.fillWithPaddingBr(t),e.selection.setCursorLocation(t.dom(),0),Ne.some(!0)},Zv=function(e,n,r,i){return Sd.firstPositionIn(e.dom()).bind(function(t){return Sd.lastPositionIn(e.dom()).map(function(e){return n?r.isEqual(t)&&i.isEqual(e):r.isEqual(e)&&i.isEqual(t)})}).getOr(!0)},Xv=function(e,t){return Gv(e,t)},Kv=function(e,t,n){return Hv(e,ji.fromDom(n.getNode())).map(function(e){return!1===zo.eq(e,t)})},$v=function(t,n,r,i,o){return Sd.navigate(r,t.getBody(),o).bind(function(e){return Zv(i,r,o,e)?Xv(t,i):Kv(n,i,e)}).or(Ne.some(!0))},Yv=function(t,n,r,e){var i=Cc.fromRangeStart(
t.selection.getRng());return qv(r,e).bind(function(e){return Hm.isEmpty(e)?Gv(t,e):Wv(t,r,n,e,i)})},Jv=function(e,t,n,r){var i=Cc.fromRangeStart(e.selection.getRng());return Hm.isEmpty(r)?Gv(e,r):$v(e,n,t,r,i)},Qv=function(t,n,e){var r=ji.fromDom(t.getBody());return Hv(r,e).fold(function(){return Yv(t,n,r,e)},function(e){return Jv(t,n,r,e)}).getOr(!1)},e_={backspaceDelete:function(e,t){var n=ji.fromDom(e.selection.getStart(!0)),r=Mv.getCellsFromEditor(e);return e.selection.isCollapsed()&&0===r.length?Qv(e,t,n):Vv(e,n)}},t_=function(e,t){e.getDoc().execCommand(t,!1,null)},n_={deleteCommand:function(e){ay.backspaceDelete(e,!1)||lv.backspaceDelete(e,!1)||gg.backspaceDelete(e,!1)||e_.backspaceDelete(e)||Eg.backspaceDelete(e,!1)||(t_(e,"Delete"),Nm.paddEmptyBody(e))},forwardDeleteCommand:function(e){ay.backspaceDelete(e,!0)||lv.backspaceDelete(e,!0)||gg.backspaceDelete(e,!0)||e_.backspaceDelete(e)||Eg.backspaceDelete(e,!0)||t_(e,"ForwardDelete")}},r_=function(t,n,e){var r=function(e){return wo.getRaw(e,t)},i=function(e){return zo.eq(ji.fromDom(n),e)};return Lu.closest(ji.fromDom(e),function(e){return r(e).isSome()},i).bind(r)},i_=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},o_=function(e,t){return/[0-9.]+px$/.test(e)?i_(72*parseInt(e,10)/96,t||0)+"pt":e},a_=function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},s_=function(e,t){return Ne.from(qs.DOM.getStyle(t,e,!0))},u_=function(n){return function(t,e){return Ne.from(e).map(ji.fromDom).filter($i.isElement).bind(function(e){return r_(n,t,e.dom()).or(s_(n,e.dom()))}).getOr("")}},l_={getFontSize:u_("font-size"),getFontFamily:ge(a_,u_("font-family")),toPt:o_},c_=function(e){return Sd.firstPositionIn(e.getBody()).map(function(e){var t=e.container();return os.isText(t)?t.parentNode:t})},f_=function(e,t){return e.startContainer===t&&0===e.startOffset},p_=function(n){return Ne.from(n.selection.getRng()).bind(function(e){var t=n.getBody();return f_(e,t)?Ne.none():Ne.from(n.selection.getStart(!0))})},d_=function(e,t){if(/^[0-9\.]+$/.test(t)){var n=parseInt(t,10);if(1<=n&&n<=7){var r=mp.getFontStyleValues(e),i=mp.getFontSizeClasses(e);return i?i[n-1]||t:r[n-1]||t}return t}return t},h_=function(e,t){e.formatter.toggle("fontname",{value:d_(e,t)}),e.nodeChanged()},m_=function(t){return p_(t).fold(function(){return c_(t).map(function(e){return l_.getFontFamily(t.getBody(),e)}).getOr("")},function(e){return l_.getFontFamily(t.getBody(),e)})},g_=function(e,t){e.formatter.toggle("fontsize",{value:d_(e,t)}),e.nodeChanged()},y_=function(t){return p_(t).fold(function(){return c_(t).map(function(e){return l_.getFontSize(t.getBody(),e)}).getOr("")},function(e){return l_.getFontSize(t.getBody(),e)})},v_={isEq:function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}},__=function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null},b_=function(e,t,n){return null!==__(e,t,n)},x_=function(e,t,n){return b_(e,t,function(e){return e.nodeName===n})},w_=function(e){return e&&"TABLE"===e.nodeName},E_=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},C_=function(e,t){return dl(e)&&!1===b_(e,t,nf)},S_=function(e,t,n){for(var r=new xe(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=r[n?"prev":"next"]();)if(os.isBr(t))return!0},T_=function(e,t){return e.previousSibling&&e.previousSibling.nodeName===t},A_=function(e,t){for(;t&&t!==e;){if(os.isContentEditableFalse(t))return!0;t=t.parentNode}return!1},k_=function(e,t,n,r,i){var o,a,s,u,l=e.getRoot(),c=e.schema.getNonEmptyElements();if(s=e.getParent(i.parentNode,e.isBlock)||l,r&&os.isBr(i)&&t&&e.isEmpty(s))return Ne.some(y(i.parentNode,e.nodeIndex(i)));for(o=new xe(i,s);u=o[r?"prev":"next"]();){if("false"===e.getContentEditableParent(u)||C_(u,l))return Ne.none();if(os.isText(u)&&0<u.nodeValue.length)return!1===x_(u,l,"A")?Ne.some(y(u,r?u.nodeValue.length:0)):Ne.none();if(e.isBlock(u)||c[u.nodeName.toLowerCase()])return Ne.none();a=u}return n&&a?Ne.some(y(a,0)):Ne.none()},I_=function(e,t,n,r){var i,o,a,s,u,l,c,f=e.getRoot(),p=!1;if(i=r[(n?"start":"end")+"Container"],o=r[(n?"start":"end")+"Offset"],c=os.isElement(i)&&o===i.childNodes.length,u=e.schema.getNonEmptyElements(),l=n,dl(i))return Ne.none();if(os.isElement(i)&&o>i.childNodes.length-1&&(l=!1),os.isDocument(i)&&(i=f,o=0),i===f){if(l&&(s=i.childNodes[0<o?o-1:0])){if(dl(s))return Ne.none();if(u[s.nodeName]||w_(s))return Ne.none()}if(i.hasChildNodes()){if(o=Math.min(!l&&0<o?o-1:o,i.childNodes.length-1),i=i.childNodes[o],o=os.isText(i)&&c?i.data.length:0,!t&&i===f.lastChild&&w_(i))return Ne.none();if(A_(f,i)||dl(i))return Ne.none();if(i.hasChildNodes()&&!1===w_(i)){a=new xe(s=i,f);do{if(os.isContentEditableFalse(s)||dl(s)){p=!1;break}if(os.isText(s)&&0<s.nodeValue.length){o=l?0:s.nodeValue.length,i=s,p=!0;break}if(u[s.nodeName.toLowerCase()]&&!E_(s)){o=e.nodeIndex(s),i=s.parentNode,l||o++,p=!0;break}}while(s=l?a.next():a.prev())}}}return t&&(os.isText(i)&&0===o&&k_(e,c,t,!0,i).each(function(e){i=e.container(),o=e.offset(),p=!0}),os.isElement(i)&&((s=i.childNodes[o])||(s=i.childNodes[o-1]),!s||!os.isBr(s)||T_(s,"A")||S_(e,s,!1)||S_(e,s,!0)||k_(e,c,t,!0,s).each(function(e){i=e.container(),o=e.offset(),p=!0}))),l&&!t&&os.isText(i)&&o===i.nodeValue.length&&k_(e,c,t,!1,i).each(function(e){i=e.container(),o=e.offset(),p=!0}),p?Ne.some(y(i,o)):Ne.none()},D_={normalize:function(e,t){var n=t.collapsed,r=t.cloneRange(),i=y.fromRangeStart(t);return I_(e,n,!0,r).each(function(e){n&&y.isAbove(i,e)||r.setStart(e.container(),e.offset())}),n||I_(e,n,!1,r).each(function(e){r.setEnd(e.container(),e.offset())}),n&&r.collapse(!0),v_.isEq(t,r)?Ne.none():Ne.some(r)}},P_=function(e,t,n){for(var r,i=new xe(t,n),o=e.getNonEmptyElements();r=i.next();)if(o[r.nodeName.toLowerCase()]||0<r.length)return!0},O_=function(e,t,n){var r=e.create("span",{},"&nbsp;");n.parentNode.insertBefore(r,n),t.scrollIntoView(r),e.remove(r)},R_=function(e,t,n,r){var i=e.createRng();r?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)),t.setRng(i)},N_=function(e,t){var n,r,i=e.selection,o=e.dom,a=i.getRng();D_.normalize(o,a).each(function(e){a.setStart(e.startContainer,e.startOffset),a.setEnd(e.endContainer,e.endOffset)});var s=a.startOffset,u=a.startContainer;if(1===u.nodeType&&u.hasChildNodes()){var l=s>u.childNodes.length-1;u=u.childNodes[Math.min(s,u.childNodes.length-1)]||u,s=l&&3===u.nodeType?u.nodeValue.length:0}var c=o.getParent(u,o.isBlock),f=c?o.getParent(c.parentNode,o.isBlock):null,p=f?f.nodeName.toUpperCase():"",d=t&&t.ctrlKey;"LI"!==p||d||(c=f),u&&3===u.nodeType&&s>=u.nodeValue.length&&(P_(e.schema,u,c)||(n=o.create("br"),a.insertNode(n),a.setStartAfter(n),a.setEndAfter(n),r=!0)),n=o.create("br"),a.insertNode(n),O_(o,i,n),R_(o,i,n,r),e.undoManager.add()},L_=function(e,t){var n=ji.fromTag("br");iu.before(ji.fromDom(t),n),e.undoManager.add()},M_=function(e,t){z_(e.getBody(),t)||iu.after(ji.fromDom(t),ji.fromTag("br"));var n=ji.fromTag("br");iu.after(ji.fromDom(t),n),O_(e.dom,e.selection,n.dom()),R_(e.dom,e.selection,n.dom(),!1),e.undoManager.add()},B_=function(e){return os.isBr(e.getNode())},z_=function(e,t){return!!B_(Cc.after(t))||Sd.nextPosition(e,Cc.after(t)).map(function(e){return os.isBr(e.getNode())}).getOr(!1)},F_=function(e){return e&&"A"===e.nodeName&&"href"in e},j_=function(e){return e.fold(ye(!1),F_,F_,ye(!1))},U_=function(e){var t=_e(Pm.isInlineTarget,e),n=Cc.fromRangeStart(e.selection.getRng());return jy.readLocation(t,e.getBody(),n).filter(j_)},V_=function(e,t){t.fold(me,_e(L_,e),_e(M_,e),me)},q_={insert:function(e,t){var n=U_(e);n.isSome()?n.each(_e(V_,e)):N_(e,t)}},H_=Cg.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),W_=function(e,t,n,r){return e.fold(t,n,r)},G_=function(e){return e.fold(ve,ve,ve)},Z_={before:H_.before,on:H_.on,after:H_.after,cata:W_,getStart:G_},X_=Cg.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),K_=Eo("start","soffset","finish","foffset"),$_=function(e){return X_.exact(e.start(),e.soffset(),e.finish(),e.foffset())},Y_=function(e){return e.match({domRange:function(e){return ji.fromDom(e.startContainer)},relative:function(e){return Z_.getStart(e)},exact:function(e){return e}})},J_=function(e){var t=Y_(e);return oa.defaultView(t)},Q_={domRange:X_.domRange,relative:X_.relative,exact:X_.exact,exactFromRange:$_,range:K_,getWin:J_},eb=Li.detect().browser,tb=function(e,t){var n=$i.isText(t)?vh.get(t).length:oa.children(t).length+1;return n<e?n:e<0?0:e},nb=function(e){return Q_.range(e.start(),tb(e.soffset(),e.start()),e.finish(),tb(e.foffset(),e.finish()))},rb=function(e,t){return zo.contains(e,t)||zo.eq(e,t)},ib=function(t){return function(e){return rb(t,e.start())&&rb(t,e.finish())}},ob=function(e){return!0===e.inline||eb.isIE()},ab=function(e){return Q_.range(ji.fromDom(e.startContainer),e.startOffset,ji.fromDom(e.endContainer),e.endOffset)},sb=function(e){var t=e.getSelection();return(t&&0!==t.rangeCount?Ne.from(t.getRangeAt(0)):Ne.none()).map(ab)},ub=function(e){var t=oa.defaultView(e);return sb(t.dom()).filter(ib(e))},lb=function(e,t){return Ne.from(t).filter(ib(e)).map(nb)},cb=function(e){var t=document.createRange();try{return t.setStart(e.start().dom(),e.soffset()),t.setEnd(e.finish().dom(),e.foffset()),Ne.some(t)}catch(n){return Ne.none()}},fb=function(e){return(e.bookmark?e.bookmark:Ne.none()).bind(_e(lb,ji.fromDom(e.getBody()))).bind(cb)},pb={store:function(e){var t=ob(e)?ub(ji.fromDom(e.getBody())):Ne.none();e.bookmark=t.isSome()?t:e.bookmark},storeNative:function(e,t){var n=ji.fromDom(e.getBody()),r=(ob(e)?Ne.from(t):Ne.none()).map(ab).filter(ib(n));e.bookmark=r.isSome()?r:e.bookmark},readRange:sb,restore:function(t){fb(t).each(function(e){t.selection.setRng(e)})},getRng:fb,getBookmark:ub,validate:lb},db=function(e,t,n,r,i,o){if("false"!==e.getContentEditable(o)&&"LI"!==o.nodeName){var a=n?"margin":"padding";if(a="TABLE"===o.nodeName?"margin":a,a+="rtl"===e.getStyle(o,"direction",!0)?"Right":"Left","outdent"===t){var s=Math.max(0,parseInt(o.style[a]||0,10)-r);e.setStyle(o,a,s?s+i:"")}else s=parseInt(o.style[a]||0,10)+r+i,e.setStyle(o,a,s)}},hb=function(e,t){var n=e.settings,r=e.dom,i=e.selection,o=e.formatter,a=/[a-z%]+$/i.exec(n.indentation)[0],s=parseInt(n.indentation,10),u=e.getParam("indent_use_margin",!1);e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertOrderedList")||(n.forced_root_block||r.getParent(i.getNode(),r.isBlock)||o.apply("div"),Ke(i.getSelectedBlocks(),function(e){return db(r,t,u,s,a,e)}))},mb=yr.each,gb=yr.extend,yb=yr.map,vb=yr.inArray,_b=yr.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),bb=function(a){var s,u,l=this,c={},f=function(){return!1},p=function(){return!0};s=(a=a||{}).scope||l,u=a.toggleEvent||f;var e=function(e,t){var n,r,i,o;if(e=e.toLowerCase(),(t=t||{}).type=e,t.target||(t.target=s),t.preventDefault||(t.preventDefault=function(){t.isDefaultPrevented=p},t.stopPropagation=function(){t.isPropagationStopped=p},t.stopImmediatePropagation=function(){t.isImmediatePropagationStopped=p},t.isDefaultPrevented=f,t.isPropagationStopped=f,t.isImmediatePropagationStopped=f),a.beforeFire&&a.beforeFire(t),n=c[e])for(r=0,i=n.length;r<i;r++){if((o=n[r]).once&&d(e,o.func),t.isImmediatePropagationStopped())return t.stopPropagation(),t;if(!1===o.func.call(s,t))return t.preventDefault(),t}return t},r=function(e,t,n,r){var i,o,a;if(!1===t&&(t=f),t)for(t={func:t},r&&yr.extend(t,r),a=(o=e.toLowerCase().split(" ")).length;a--;)e=o[a],(i=c[e])||(i=c[e]=[],u(e,!0)),n?i.unshift(t):i.push(t);return l},d=function(e,t){var n,r,i,o,a;if(e)for(n=(o=e.toLowerCase().split(" ")).length;n--;){if(e=o[n],r=c[e],!e){for(i in c)u(i,!1),delete c[i];return l}if(r){if(t)for(a=r.length;a--;)r[a].func===t&&(r=r.slice(0,a).concat(r.slice(a+1)),c[e]=r);else r.length=0;r.length||(u(e,!1),delete c[e])}}else{for(e in c)u(e,!1);c={}}return l},t=function(e,t,n){return r(e,t,n,{once:!0})},n=function(e){return e=e.toLowerCase(),!(!c[e]||0===c[e].length)};l.fire=e,l.on=r,l.off=d,l.once=t,l.has=n};bb.isNative=function(e){return!!_b[e.toLowerCase()]};var xb,wb,Eb,Cb=function(n){return n._eventDispatcher||(n._eventDispatcher=new bb({scope:n,toggleEvent:function(e,t){bb.isNative(e)&&n.toggleNativeEvent&&n.toggleNativeEvent(e,t)}})),n._eventDispatcher},Sb={fire:function(e,t,n){var r=this;if(r.removed&&"remove"!==e)return t;if(t=Cb(r).fire(e,t,n),!1!==n&&r.parent)for(var i=r.parent();i&&!t.isPropagationStopped();)i.fire(e,t,!1),i=i.parent();return t},on:function(e,t,n){return Cb(this).on(e,t,n)},off:function(e,t){return Cb(this).off(e,t)},once:function(e,t){return Cb(this).once(e,t)},hasEventListeners:function(e){return Cb(this).has(e)}},Tb={firePreProcess:function(e,t){return e.fire("PreProcess",t)},firePostProcess:function(e,t){return e.fire("PostProcess",t)},fireRemove:function(e){return e.fire("remove")},fireSwitchMode:function(e,t){return e.fire("SwitchMode",{mode:t})},fireObjectResizeStart:function(e,t,n,r){e.fire("ObjectResizeStart",{target:t,width:n,height:r})},fireObjectResized:function(e,t,n,r){e.fire("ObjectResized",{target:t,width:n,height:r})}},Ab=function(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(r){}},kb=function(e,t,n){Su.has(e,t)&&!1===n?Su.remove(e,t):n&&Su.add(e,t)},Ib=function(e,t){kb(ji.fromDom(e.getBody()),"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e.readonly=!0,e.getBody().contentEditable="false"):(e.readonly=!1,e.getBody().contentEditable="true",Ab(e,"StyleWithCSS",!1),Ab(e,"enableInlineTableEditing",!1),Ab(e,"enableObjectResizing",!1),e.focus(),e.nodeChanged())},Db=function(e,t){t!==Pb(e)&&(e.initialized?Ib(e,"readonly"===t):e.on("init",function(){Ib(e,"readonly"===t)}),Tb.fireSwitchMode(e,t))},Pb=function(e){return e.readonly?"readonly":"design"},Ob=function(e){return!0===e.readonly},Rb=qs.DOM,Nb=function(e,t){return"selectionchange"===t?e.getDoc():!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=Rb.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()},Lb=function(e){return!e.hidden&&!e.readonly},Mb=function(e,t,n){Lb(e)?e.fire(t,n):Ob(e)&&n.preventDefault()},Bb=function(o,a){var e,t;if(o.delegates||(o.delegates={}),!o.delegates[a]&&!o.removed)if(e=Nb(o,a),o.settings.event_root){if(xb||(xb={},o.editorManager.on("removeEditor",function(){var e;if(!o.editorManager.activeEditor&&xb){for(e in xb)o.dom.unbind(Nb(o,e));xb=null}})),xb[a])return;t=function(e){for(var t=e.target,n=o.editorManager.get(),r=n.length;r--;){var i=n[r].getBody();(i===t||Rb.isChildOf(t,i))&&Mb(n[r],a,e)}},xb[a]=t,Rb.bind(e,a,t)}else t=function(e){Mb(o,a,e)},Rb.bind(e,a,t),o.delegates[a]=t},zb={bindPendingEventDelegates:function(){var t=this;yr.each(t._pendingNativeEvents,function(e){Bb(t,e)})},toggleNativeEvent:function(e,t){var n=this;"focus"!==e&&"blur"!==e&&(t?n.initialized?Bb(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(Nb(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this,n=t.getBody(),r=t.dom;if(t.delegates){for(e in t.delegates)t.dom.unbind(Nb(t,e),e,t.delegates[e]);delete t.delegates}!t.inline&&n&&r&&(n.onload=null,r.unbind(t.getWin()),r.unbind(t.getDoc())),r&&(r.unbind(n),r.unbind(t.getContainer()))}},Fb=zb=yr.extend({},Sb,zb),jb=yr.each,Ub=yr.explode,Vb={f9:120,f10:121,f11:122},qb=yr.makeMap("alt,ctrl,shift,meta,access"),Hb={any:function(e){return Lu.first(e).isSome()},ancestor:function(e,t,n){return Lu.ancestor(e,t,n).isSome()},closest:function(e,t,n){return Lu.closest(e,t,n).isSome()},sibling:function(e,t){return Lu.sibling(e,t).isSome()},child:function(e,t){return Lu.child(e,t).isSome()},descendant:function(e,t){return Lu.descendant(e,t).isSome()}},Wb=function(e){e.dom().focus()},Gb=function(e){var t=e!==undefined?e.dom():document;return Ne.from(t.activeElement).map(ji.fromDom)},Zb=function(t){var e=oa.owner(t);Gb(e).filter(function(e){return Hb.closest(e,_e(zo.eq,t))}).fold(function(){Wb(t)},me)},Xb=function(t){return Gb(oa.owner(t)).filter(function(e){return t.dom().contains(e.dom())})},Kb={hasFocus:function(e){var t=oa.owner(e).dom();return e.dom()===t.activeElement},focus:Wb,blur:function(e){e.dom().blur()},active:Gb,search:Xb,focusInside:Zb},$b=function(t,e){return t.dom.getParent(e,function(e){return"true"===t.dom.getContentEditable(e)})},Yb=function(e){return e.collapsed?Ne.from(Jl(e.startContainer,e.startOffset)).map(ji.fromDom):Ne.none()},Jb=function(t,e){return Yb(e).bind(function(e){return Fa(e)?Ne.some(e):!1===zo.contains(t,e)?Ne.some(t):Ne.none()})},Qb=function(t,e){Jb(ji.fromDom(t.getBody()),e).bind(function(e){return Sd.firstPositionIn(e.dom())}).fold(function(){t.selection.normalize()},function(e){return t.selection.setRng(e.toRange())})},ex=function(e){if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},tx=function(e){return Kb.hasFocus(e)||Kb.search(e).isSome()},nx=function(e){return e.iframeElement&&Kb.hasFocus(ji.fromDom(e.iframeElement))},rx=function(e){var t=e.getBody();return t&&tx(ji.fromDom(t))},ix=function(e){return e.inline?rx(e):nx(e)},ox=function(t){var e=t.selection,n=t.settings.content_editable,r=t.getBody(),i=e.getRng();t.quirks.refreshContentEditable();var o=$b(t,e.getNode());if(t.$.contains(r,o))return ex(o),Qb(t,i),void ax(t);t.bookmark!==undefined&&!1===ix(t)&&pb.getRng(t).each(function(e){t.selection.setRng(e),i=e}),n||(Gt.opera||ex(r),t.getWin().focus()),(Gt.gecko||n)&&(ex(r),Qb(t,i)),ax(t)},ax=function(e){return e.editorManager.setActive(e)},sx={focus:function(e,t){e.removed||(t?ax(e):ox(e))},hasFocus:ix},ux=function(e,t){return t.dom()[e]},lx=function(e,t){return parseInt(wo.get(t,e),10)},cx=_e(ux,"clientWidth"),fx=_e(ux,"clientHeight"),px=_e(lx,"margin-top"),dx=_e(lx,"margin-left"),hx=function(e){return e.dom().getBoundingClientRect()},mx=function(e,t,n){var r=cx(e),i=fx(e);return 0<=t&&0<=n&&t<=r&&n<=i},gx=function(e,t,n,r){var i=hx(t);return{x:n-(e?i.left+t.dom().clientLeft+dx(t):0),y:r-(e?i.top+t.dom().clientTop+px(t):0)}},yx=function(e){return Ne.from(e).map(ji.fromDom)},vx={isXYInContentArea:function(e,t,n){var r=ji.fromDom(e.getBody()),i=e.inline?r:oa.documentElement(r),o=gx(e.inline,i,t,n);return mx(i,o.x,o.y)},isEditorAttachedToDom:function(e){var t=e.inline?e.getBody():e.getContentAreaContainer();return yx(t).map(function(e){return zo.contains(oa.owner(e),e)}).getOr(!1)}},_x=h.PluginManager,bx=function(e,t){for(var n in _x.urls)if(_x.urls[n]+"/plugin"+t+".js"===e)return n;return null},xx=function(e,t){var n=bx(t,e.suffix);return n?"Failed to load plugin: "+n+" from url "+t:"Failed to load plugin url: "+t},wx=function(e,t){e.notificationManager.open({type:"error",text:t})},Ex=function(e,t){e._skinLoaded?wx(e,t):e.on("SkinLoaded",function(){wx(e,t)})},Cx={pluginLoadError:function(e,t){Ex(e,xx(e,t))},uploadError:function(e,t){Ex(e,"Failed to upload image: "+t)},displayError:Ex,initError:function(){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var n=window.console;n&&(n.error?n.error.apply(n,arguments):n.log.apply(n,arguments))}},Sx=h.PluginManager,Tx=h.ThemeManager,Ax={atob:function(e){return bt.getOrDie("atob")(e)},requestAnimationFrame:function(e){bt.getOrDie("requestAnimationFrame")(e)}},kx=function(o){return new Xt(function(e,t){var n=function(){t("Cannot convert "+o+" to Blob. Resource might not exist or is inaccessible.")};try{var r=new P;r.open("GET",o,!0),r.responseType="blob",r.onload=function(){200===this.status?e(this.response):n()},r.onerror=n,r.send()}catch(i){n()}})},Ix=function(e){var t,n,r=decodeURIComponent(e).split(",");return(n=/data:([^;]+)/.exec(r[0]))&&(t=n[1]),{type:t,data:r[1]}},Dx=function(o){return new Xt(function(e){var t,n,r,i=Ix(o);try{t=Ax.atob(i.data)}catch(eP){return void e(new Blob([]))}for(n=new N(t.length),r=0;r<n.length;r++)n[r]=t.charCodeAt(r);e(new Blob([n],{type:i.type}))})},Px={uriToBlob:function(e){return 0===e.indexOf("blob:")?kx(e):0===e.indexOf("data:")?Dx(e):null},blobToDataUri:function(n){return new Xt(function(e){var t=new R;t.onloadend=function(){e(t.result)},t.readAsDataURL(n)})},parseDataUri:Ix},Ox=0,Rx=function(e){return(e||"blobid")+Ox++},Nx=function(n,r,i,t){var o,a;0!==r.src.indexOf("blob:")?(o=Px.parseDataUri(r.src).data,(a=n.findFirst(function(e){return e.base64()===o}))?i({image:r,blobInfo:a}):Px.uriToBlob(r.src).then(function(e){a=n.create(Rx(),e,o),n.add(a),i({image:r,blobInfo:a})},function(e){t(e)})):(a=n.getByUri(r.src))?i({image:r,blobInfo:a}):Px.uriToBlob(r.src).then(function(t){Px.blobToDataUri(t).then(function(e){o=Px.parseDataUri(e).data,a=n.create(Rx(),t,o),n.add(a),i({image:r,blobInfo:a})})},function(e){t(e)})},Lx=function(e){return e?e.getElementsByTagName("img"):[]},Mx=0,Bx=function(){var e=function(){return Math.round(4294967295*Math.random()).toString(36)};return"s"+(new Date).getTime().toString(36)+e()+e()+e()},zx={uuid:function(e){return e+Mx+++Bx()}},Fx=function(e,t){return e.hasOwnProperty(t.nodeName)},jx=function(e,t){return!!os.isText(t)||!!os.isElement(t)&&!Fx(e,t)&&!Wd.isBookmarkNode(t)},Ux=function(t,e,n){return Ze(ig.parents(ji.fromDom(n),ji.fromDom(e)),function(e){return Fx(t,e.dom())})},Vx=function(e,t){if(os.isText(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||Fx(e,t.nextSibling)))return!0}return!1},qx=function(e){var t,n,r,i,o,a,s,u,l,c,f,p=e.settings,d=e.dom,h=e.selection,m=e.schema,g=m.getBlockElements(),y=h.getStart(),v=e.getBody();if(f=p.forced_root_block,y&&os.isElement(y)&&f&&(c=v.nodeName.toLowerCase(),m.isValidChild(c,f.toLowerCase())&&!Ux(g,v,y))){for(n=(t=h.getRng()).startContainer,r=t.startOffset,i=t.endContainer,o=t.endOffset,l=sx.hasFocus(e),y=v.firstChild;y;)if(jx(g,y)){if(Vx(g,y)){y=(s=y).nextSibling,d.remove(s);continue}a||(a=d.create(f,e.settings.forced_root_block_attrs),y.parentNode.insertBefore(a,y),u=!0),y=(s=y).nextSibling,a.appendChild(s)}else a=null,y=y.nextSibling;u&&l&&(t.setStart(n,r),t.setEnd(i,o),h.setRng(t),e.nodeChanged())}},Hx={setup:function(e){e.settings.forced_root_block&&e.on("NodeChange",_e(qx,e))}},Wx=function(e){var t=e.startContainer,n=e.startOffset;return os.isText(t)?0===n?Ne.some(ji.fromDom(t)):Ne.none():Ne.from(t.childNodes[n]).map(ji.fromDom)},Gx=function(e){var t=e.endContainer,n=e.endOffset;return os.isText(t)?n===t.data.length?Ne.some(ji.fromDom(t)):Ne.none():Ne.from(t.childNodes[n-1]).map(ji.fromDom)},Zx=function(t){return oa.firstChild(t).fold(ye([t]),function(e){return[t].concat(Zx(e))})},Xx=function(t){return oa.lastChild(t).fold(ye([t]),function(e){return"br"===$i.name(e)?oa.prevSibling(e).map(function(e){return[t].concat(Xx(e))}).getOr([]):[t].concat(Xx(e))})},Kx=function(i,e){return tc([Wx(e),Gx(e)],function(e,t){var n=tt(Zx(i),_e(zo.eq,e)),r=tt(Xx(i),_e(zo.eq,t));return n.isSome()&&r.isSome()}).getOr(!1)},$x=function(e,t,n,r){var i=n,o=new xe(n,i),a=e.schema.getNonEmptyElements();do{if(3===n.nodeType&&0!==yr.trim(n.nodeValue).length)return void(r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(a[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName))return void(r?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(Gt.ie&&Gt.ie<11&&e.isBlock(n)&&e.isEmpty(n))return void(r?t.setStart(n,0):t.setEnd(n,0))}while(n=r?o.next():o.prev());"BODY"===i.nodeName&&(r?t.setStart(i,0):t.setEnd(i,i.childNodes.length))},Yx=function(e){var t=e.selection.getSel();return t&&0<t.rangeCount},Jx=function(e){var t,n,r,i;return i=e.getBoundingClientRect(),n=(t=e.ownerDocument).documentElement,r=t.defaultView,{top:i.top+r.pageYOffset-n.clientTop,left:i.left+r.pageXOffset-n.clientLeft}},Qx=function(e){return e.inline?Jx(e.getBody()):{left:0,top:0}},ew=function(e){var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},tw=function(e){var t=e.getBody(),n=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},i={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?r:i},nw=function(e,t){if(t.target.ownerDocument!==e.getDoc()){var n=Jx(e.getContentAreaContainer()),r=tw(e);return{left:t.pageX-n.left+r.left,top:t.pageY-n.top+r.top}}return{left:t.pageX,top:t.pageY}},rw=function(e,t,n){return{pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}},iw={calc:function(e,t){return rw(Qx(e),ew(e),nw(e,t))}},ow=os.isContentEditableFalse,aw=os.isContentEditableTrue,sw=function(e,t){return ow(t)&&t!==e},uw=function(e,t,n){return t!==n&&!e.dom.isChildOf(t,n)&&!ow(t)},lw=function(e){var t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t},cw=function(e,t,n,r){var i=t.cloneNode(!0);e.dom.setStyles(i,{width:n,height:r}),e.dom.setAttrib(i,"data-mce-selected",null);var o=e.dom.create("div",{"class":"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return e.dom.setStyles(o,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),e.dom.setStyles(i,{margin:0,boxSizing:"border-box"}),o.appendChild(i),o},fw=function(e,t){e.parentNode!==t&&t.appendChild(e)},pw=function(e,t,n,r,i,o){var a=0,s=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>i&&(a=t.pageX+n-i),t.pageY+r>o&&(s=t.pageY+r-o),e.style.width=n-a+"px",e.style.height=r-s+"px"},dw=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},hw=function(e){return 0===e.button},mw=function(e){return e.element},gw=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}},yw=function(o,a){return function(e){if(hw(e)){var t=ir.find(a.dom.getParents(e.target),al.or(ow,aw));if(sw(a.getBody(),t)){var n=a.dom.getPos(t),r=a.getBody(),i=a.getDoc().documentElement;o.element=t,o.screenX=e.screenX,o.screenY=e.screenY,o.maxX=(a.inline?r.scrollWidth:i.offsetWidth)-2,o.maxY=(a.inline?r.scrollHeight:i.offsetHeight)-2,o.relX=e.pageX-n.x,o.relY=e.pageY-n.y,o.width=t.offsetWidth,o.height=t.offsetHeight,o.ghost=cw(a,t,o.width,o.height)}}}},vw=function(r,i){var o=Qt.throttle(function(e,t){i._selectionOverrides.hideFakeCaret(),i.selection.placeCaretAt(e,t)},0);return function(e){var t=Math.max(Math.abs(e.screenX-r.screenX),Math.abs(e.screenY-r.screenY));if(mw(r)&&!r.dragging&&10<t){if(i.fire("dragstart",{target:r.element}).isDefaultPrevented())return;r.dragging=!0,i.focus()}if(r.dragging){var n=gw(r,iw.calc(i,e));fw(r.ghost,i.getBody()),pw(r.ghost,n,r.width,r.height,r.maxX,r.maxY),o(e.clientX,e.clientY)}}},_w=function(e){var t=e.getSel().getRangeAt(0).startContainer;return 3===t.nodeType?t.parentNode:t},bw=function(r,i){return function(e){if(r.dragging&&uw(i,_w(i.selection),r.element)){var t=lw(r.element),n=i.fire("drop",{targetClone:t,clientX:e.clientX,clientY:e.clientY});n.isDefaultPrevented()||(t=n.targetClone,i.undoManager.transact(function(){dw(r.element),i.insertContent(i.dom.getOuterHTML(t)),i._selectionOverrides.hideFakeCaret()}))}ww(r)}},xw=function(e,t){return function(){e.dragging&&t.fire("dragend"),ww(e)}},ww=function(e){e.dragging=!1,e.element=null,dw(e.ghost)},Ew=function(e){var t,n,r,i,o,a,s={};t=qs.DOM,a=document,n=yw(s,e),r=vw(s,e),i=bw(s,e),o=xw(s,e),e.on("mousedown",n),e.on("mousemove",r),e.on("mouseup",i),t.bind(a,"mousemove",r),t.bind(a,"mouseup",o),e.on("remove",function(){t.unbind(a,"mousemove",r),t.unbind(a,"mouseup",o)})},Cw=function(n){n.on("drop",function(e){var t="undefined"!=typeof e.clientX?n.getDoc().elementFromPoint(e.clientX,e.clientY):null;(ow(t)||ow(n.dom.getContentEditableParent(t)))&&e.preventDefault()})},Sw={init:function(e){Ew(e),Cw(e)}},Tw=function(t){var e=function(e){return ir.map(e,function(e){return(e=Ul(e)).node=t,e})};if(os.isElement(t))return e(t.getClientRects());if(os.isText(t)){var n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}},Aw=function(e){return ir.reduce(e,function(e,t){return e.concat(Tw(t))},[])};(Eb=wb||(wb={}))[Eb.Up=-1]="Up",Eb[Eb.Down=1]="Down";var kw=function(e,t,n,r){for(;r=Yp(r,e,Fl,t);)if(n(r))return},Iw=function(i,o,a,e,s,t){var n,u,l=0,c=[],r=function(e){var t,n,r;for(r=Aw([e]),-1===i&&(r=r.reverse()),t=0;t<r.length;t++)if(n=r[t],!a(n,u)){if(0<c.length&&o(n,ir.last(c))&&l++,n.line=l,s(n))return!0;c.push(n)}};return(u=ir.last(t.getClientRects()))&&(r(n=t.getNode()),kw(i,e,r,n)),c},Dw=function(e,t){return t.line>e},Pw=function(e,t){return t.line===e},Ow=_e(Iw,wb.Up,Wl,Gl),Rw=_e(Iw,wb.Down,Gl,Wl),Nw=function(e,t,n,r){var i,o,a,s,u,l,c=Ff(t),f=[],p=0,d=function(e){return ir.last(e.getClientRects())};1===e?(i=c.next,o=Gl,a=Wl,s=Cc.after(r)):(i=c.prev,o=Wl,a=Gl,s=Cc.before(r)),l=d(s);do{if(s.isVisible()&&!a(u=d(s),l)){if(0<f.length&&o(u,ir.last(f))&&p++,(u=Ul(u)).position=s,u.line=p,n(u))return f;f.push(u)}}while(s=i(s));return f},Lw=function(t){return function(e){return Dw(t,e)}},Mw=function(t){return function(e){return Pw(t,e)}},Bw=os.isContentEditableFalse,zw=Yp,Fw=function(e,t){return Math.abs(e.left-t)},jw=function(e,t){return Math.abs(e.right-t)},Uw=function(e,t){return e>=t.left&&e<=t.right},Vw=function(e,i){return ir.reduce(e,function(e,t){var n,r;return n=Math.min(Fw(e,i),jw(e,i)),r=Math.min(Fw(t,i),jw(t,i)),Uw(i,t)?t:Uw(i,e)?e:r===n&&Bw(t.node)?t:r<n?t:e})},qw=function(e,t,n,r){for(;r=zw(r,e,Fl,t);)if(n(r))return},Hw=function(e,r){var i=[],t=function(t,e){var n;return n=ir.filter(Aw([e]),function(e){return!t(e,r)}),i=i.concat(n),0===n.length};return i.push(r),qw(wb.Up,e,_e(t,Wl),r.node),qw(wb.Down,e,_e(t,Gl),r.node),i},Ww=function(e){return ir.filter(ir.toArray(e.getElementsByTagName("*")),jp)},Gw=function(e,t){return{node:e.node,before:Fw(e,t)<jw(e,t)}},Zw=function(e,t,n){var r,i=Aw(Ww(e)),o=ir.filter(i,function(e){return n>=e.top&&n<=e.bottom});return(r=Vw(o,t))&&(r=Vw(Hw(e,r),t))&&jp(r.node)?Gw(r,t):null},Xw={isXYWithinRange:function(n,r,e){return!e.collapsed&&et(e.getClientRects(),function(e,t){return e||Zl(t,n,r)},!1)}},Kw={setup:function(t){var e=cu(function(){if(!t.removed&&t.selection.getRng().collapsed){var e=Cf(t,t.selection.getRng(),!1);t.selection.setRng(e)}},0);t.on("focus",function(){e.throttle()}),t.on("blur",function(){e.cancel()})}},$w={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return Gt.mac?e.metaKey:e.ctrlKey&&!e.altKey}},Yw=os.isContentEditableTrue,Jw=os.isContentEditableFalse,Qw=pd,eE=fd,tE=function(e,t){for(var n=e.getBody();t&&t!==n;){if(Yw(t)||Jw(t))return t;t=t.parentNode}return null},nE=function(h){var m,e=function(e){return h.dom.isBlock(e)},u=h.getBody(),l=Fp(h.getBody(),e,function(){return sx.hasFocus(h)}),g="sel-"+h.dom.uniqueId(),c=function(e){return h.dom.hasClass(e,"mce-offscreen-selection")},f=function(){var e=h.dom.get(g);return e?e.getElementsByTagName("*")[0]:e},p=function(e){e&&h.selection.setRng(e)},d=function(){return h.selection.getRng()},y=function(e,t,n,r){return void 0===r&&(r=!0),h.fire("ShowCaret",{target:t,direction:e,before:n}).isDefaultPrevented()?null:(r&&h.selection.scrollIntoView(t,-1===e),l.show(n,t))},v=function(e,t){return t=ad(e,u,t),-1===e?Cc.fromRangeStart(t):Cc.fromRangeEnd(t)},t=function(e){e.hasAttribute("data-mce-caret")&&(El(e),p(d()),h.selection.scrollIntoView(e[0]))},n=function(){h.on("mouseup",function(e){var t=d();t.collapsed&&vx.isXYInContentArea(h,e.clientX,e.clientY)&&p(Ef(h,t,!1))}),h.on("click",function(e){var t;(t=tE(h,e.target))&&(Jw(t)&&(e.preventDefault(),h.focus()),Yw(t)&&h.dom.isChildOf(t,h.selection.getNode())&&x())}),h.on("blur NewBlock",function(){x()}),h.on("ResizeWindow FullscreenStateChanged",function(){return l.reposition()});var n,r,i=function(e){var t=Ff(e);if(!e.firstChild)return!1;var n=Cc.before(e.firstChild),r=t.next(n);return r&&!eE(r)&&!Qw(r)},o=function(e,t){return h.dom.getParent(e,h.dom.isBlock)===h.dom.getParent(t,h.dom.isBlock)},a=function(e,t){var n=h.dom.getParent(e,h.dom.isBlock),r=h.dom.getParent(t,h.dom.isBlock);return!(!n||!h.dom.isChildOf(n,r)||!1!==Jw(tE(h,n)))||n&&!o(n,r)&&i(n)};r=!1,(n=h).on("touchstart",function(){r=!1}),n.on("touchmove",function(){r=!0}),n.on("touchend",function(e){var t=tE(n,e.target);Jw(t)&&(r||(e.preventDefault(),b(wf(n,t))))}),h.on("mousedown",function(e){var t,n=e.target;if((n===u||"HTML"===n.nodeName||h.dom.isChildOf(n,u))&&!1!==vx.isXYInContentArea(h,e.clientX,e.clientY))if(t=tE(h,n))Jw(t)?(e.preventDefault(),b(wf(h,t))):(x(),Yw(t
)&&e.shiftKey||Xw.isXYWithinRange(e.clientX,e.clientY,h.selection.getRng())||(w(),h.selection.placeCaretAt(e.clientX,e.clientY)));else if(!1===jp(n)){x(),w();var r=Zw(u,e.clientX,e.clientY);if(r&&!a(e.target,r.node)){e.preventDefault();var i=y(1,r.node,r.before,!1);h.getBody().focus(),p(i)}}}),h.on("keypress",function(e){$w.modifierPressed(e)||(e.keyCode,Jw(h.selection.getNode())&&e.preventDefault())}),h.on("getSelectionRange",function(e){var t=e.range;if(m){if(!m.parentNode)return void(m=null);(t=t.cloneRange()).selectNode(m),e.range=t}}),h.on("setSelectionRange",function(e){var t;(t=b(e.range,e.forward))&&(e.range=t)});var s=function(e){return"mcepastebin"===e.id};h.on("AfterSetSelectionRange",function(e){var t=e.range;_(t)||s(t.startContainer.parentNode)||w(),c(t.startContainer.parentNode)||x()}),h.on("copy",function(e){var t=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!Gt.ie){var n=f();n&&(e.preventDefault(),t.clearData(),t.setData("text/html",n.outerHTML),t.setData("text/plain",n.outerText))}}),Sw.init(h),Kw.setup(h)},r=function(){var e=h.contentStyles,t=".mce-content-body";e.push(l.getCss()),e.push(t+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+t+" *[contentEditable=false] {cursor: default;}"+t+" *[contentEditable=true] {cursor: text;}")},i=function(e){return dl(e)||bl(e)||xl(e)},_=function(e){return i(e.startContainer)||i(e.endContainer)},b=function(e,t){var n,r,i,o,a,s,u,l,c,f,p=h.$,d=h.dom;if(!e)return null;if(e.collapsed){if(!_(e))if(!1===t){if(l=v(-1,e),jp(l.getNode(!0)))return y(-1,l.getNode(!0),!1,!1);if(jp(l.getNode()))return y(-1,l.getNode(),!l.isAtEnd(),!1)}else{if(l=v(1,e),jp(l.getNode()))return y(1,l.getNode(),!l.isAtEnd(),!1);if(jp(l.getNode(!0)))return y(1,l.getNode(!0),!1,!1)}return null}return o=e.startContainer,a=e.startOffset,s=e.endOffset,3===o.nodeType&&0===a&&Jw(o.parentNode)&&(o=o.parentNode,a=d.nodeIndex(o),o=o.parentNode),1!==o.nodeType?null:(s===a+1&&(n=o.childNodes[a]),Jw(n)?(c=f=n.cloneNode(!0),(u=h.fire("ObjectSelected",{target:n,targetClone:c})).isDefaultPrevented()?null:(r=Bu.descendant(ji.fromDom(h.getBody()),"#"+g).fold(function(){return p([])},function(e){return p([e.dom()])}),c=u.targetClone,0===r.length&&(r=p('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",g)).appendTo(h.getBody()),e=h.dom.createRng(),c===f&&Gt.ie?(r.empty().append('<p style="font-size: 0" data-mce-bogus="all">\xa0</p>').append(c),e.setStartAfter(r[0].firstChild.firstChild),e.setEndAfter(c)):(r.empty().append("\xa0").append(c).append("\xa0"),e.setStart(r[0].firstChild,1),e.setEnd(r[0].lastChild,0)),r.css({top:d.getPos(n,h.getBody()).y}),r[0].focus(),(i=h.selection.getSel()).removeAllRanges(),i.addRange(e),Ke(Iu.descendants(ji.fromDom(h.getBody()),"*[data-mce-selected]"),function(e){so.remove(e,"data-mce-selected")}),n.setAttribute("data-mce-selected","1"),m=n,w(),e)):null)},x=function(){m&&(m.removeAttribute("data-mce-selected"),Bu.descendant(ji.fromDom(h.getBody()),"#"+g).each(lu.remove),m=null),Bu.descendant(ji.fromDom(h.getBody()),"#"+g).each(lu.remove),m=null},o=function(){l.destroy(),m=null},w=function(){l.hide()};return Gt.ceFalse&&(n(),r()),{showCaret:y,showBlockCaretContainer:t,hideFakeCaret:w,destroy:o}},rE=function(e){return 0===e.indexOf("data-")||0===e.indexOf("aria-")},iE=function(e){return e.replace(/<!--|-->/g,"")},oE=function(e,t){return!e.allow_html_data_urls&&(/^data:image\//i.test(t)?!1===e.allow_svg_data_urls&&/^data:image\/svg\+xml/i.test(t):/^data:/i.test(t))},aE=function(e,t,n){var r,i,o,a,s=1;for(a=e.getShortEndedElements(),(o=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g).lastIndex=r=n;i=o.exec(t);){if(r=o.lastIndex,"/"===i[1])s--;else if(!i[1]){if(i[2]in a)continue;s++}if(0===s)break}return r};(j||(j={})).findEndTag=aE;var sE,uE,lE=j,cE=function(e,t){var n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")},fE=function(e,t){var n,r,i,o,a,s=t,u=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,l=e.schema;for(s=cE(e.getTempAttrs(),s),a=l.getShortEndedElements();o=u.exec(s);)r=u.lastIndex,i=o[0].length,n=a[o[1]]?r:lE.findEndTag(l,s,r),s=s.substring(0,r-i)+s.substring(n),u.lastIndex=r-i;return ul.trim(s)},pE={trimExternal:fE,trimInternal:fE},dE=0,hE=1,mE=2,gE={KEEP:dE,DELETE:mE,INSERT:hE,diff:function(h,m){var e=h.length+m.length+2,g=new Array(e),y=new Array(e),o=function(e,t,n){return{start:e,end:t,diag:n}},l=function(e,t,n,r,i){var o=c(e,t,n,r);if(null===o||o.start===t&&o.diag===t-r||o.end===e&&o.diag===e-n)for(var a=e,s=n;a<t||s<r;)a<t&&s<r&&h[a]===m[s]?(i.push([dE,h[a]]),++a,++s):r-n<t-e?(i.push([mE,h[a]]),++a):(i.push([hE,m[s]]),++s);else{l(e,o.start,n,o.start-o.diag,i);for(var u=o.start;u<o.end;++u)i.push([dE,h[u]]);l(o.end,t,o.end-o.diag,r,i)}},v=function(e,t,n,r){for(var i=e;i-t<r&&i<n&&h[i]===m[i-t];)++i;return o(e,i,t)},c=function(e,t,n,r){var i=t-e,o=r-n;if(0===i||0===o)return null;var a,s,u,l,c,f=i-o,p=o+i,d=(p%2==0?p:p+1)/2;for(g[1+d]=e,y[1+d]=t+1,a=0;a<=d;++a){for(s=-a;s<=a;s+=2){for(u=s+d,s===-a||s!==a&&g[u-1]<g[u+1]?g[u]=g[u+1]:g[u]=g[u-1]+1,c=(l=g[u])-e+n-s;l<t&&c<r&&h[l]===m[c];)g[u]=++l,++c;if(f%2!=0&&f-a<=s&&s<=f+a&&y[u-f]<=g[u])return v(y[u-f],s+e-n,t,r)}for(s=f-a;s<=f+a;s+=2){for(u=s+d-f,s===f-a||s!==f+a&&y[u+1]<=y[u-1]?y[u]=y[u+1]-1:y[u]=y[u-1],c=(l=y[u]-1)-e+n-s;e<=l&&n<=c&&h[l]===m[c];)y[u]=l--,c--;if(f%2==0&&-a<=s&&s<=a&&y[u]<=g[u+f])return v(y[u],s+e-n,t,r)}}},t=[];return l(0,h.length,0,m.length,t),t}},yE=function(e){return os.isElement(e)?e.outerHTML:os.isText(e)?Es.encodeRaw(e.data,!1):os.isComment(e)?"<!--"+e.data+"-->":""},vE=function(e){var t,n,r;for(r=document.createElement("div"),t=document.createDocumentFragment(),e&&(r.innerHTML=e);n=r.firstChild;)t.appendChild(n);return t},_E=function(e,t,n){var r=vE(t);if(e.hasChildNodes()&&n<e.childNodes.length){var i=e.childNodes[n];i.parentNode.insertBefore(r,i)}else e.appendChild(r)},bE=function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}},xE=function(e,t){var n=0;ir.each(e,function(e){e[0]===gE.KEEP?n++:e[0]===gE.INSERT?(_E(t,e[1],n),n++):e[0]===gE.DELETE&&bE(t,n)})},wE={read:function(e){return ir.filter(ir.map(e.childNodes,yE),function(e){return 0<e.length})},write:function(e,t){var n=ir.map(t.childNodes,yE);return xE(gE.diff(n,e),t),t}},EE={fromHtml:function(e,t){var n=(t||document).createElement("div");return n.innerHTML=e,oa.children(ji.fromDom(n))},fromTags:function(e,t){return Xe(e,function(e){return ji.fromTag(e,t)})},fromText:function(e,t){return Xe(e,function(e){return ji.fromText(e,t)})},fromDom:function(e){return Xe(e,ji.fromDom)}},CE=function(e){return e.dom().innerHTML},SE=function(e){var t=ji.fromTag("div"),n=ji.fromDom(e.dom().cloneNode(!0));return iu.append(t,n),CE(t)},TE={get:CE,set:function(e,t){var n=oa.owner(e).dom(),r=ji.fromDom(n.createDocumentFragment()),i=EE.fromHtml(t,n);ou.append(r,i),lu.empty(e),iu.append(e,r)},getOuter:SE},AE=pu(Ne.none()),kE=function(){return AE.get().getOrThunk(function(){var e=document.implementation.createHTMLDocument("undo");return AE.set(Ne.some(e)),e})},IE=function(e){return-1!==e.indexOf("</iframe>")},DE=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}},PE=function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}},OE=function(n){var e,t,r;return e=wE.read(n.getBody()),t=(r=at(e,function(e){var t=pE.trimInternal(n.serializer,e);return 0<t.length?[t]:[]})).join(""),IE(t)?DE(r):PE(t)},RE=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},NE=function(e){var t=ji.fromTag("body",kE());return TE.set(t,RE(e)),Ke(Iu.descendants(t,"*[data-mce-bogus]"),lu.unwrap),TE.get(t)},LE=function(e,t){return RE(e)===RE(t)},ME=function(e,t){return NE(e)===NE(t)},BE={createFragmentedLevel:DE,createCompleteLevel:PE,createFromEditor:OE,applyToEditor:function(e,t,n){"fragmented"===t.type?wE.write(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw"}),e.selection.moveToBookmark(n?t.beforeBookmark:t.bookmark)},isEq:function(e,t){return!(!e||!t)&&(!!LE(e,t)||ME(e,t))}},zE=Jd.isEq,FE=function(e,t,n){var r=e.formatter.get(n);if(r)for(var i=0;i<r.length;i++)if(!1===r[i].inherit&&e.dom.is(t,r[i].selector))return!0;return!1},jE=function(t,e,n,r){var i=t.dom.getRoot();return e!==i&&(e=t.dom.getParent(e,function(e){return!!FE(t,e,n)||e.parentNode===i||!!qE(t,e,n,r,!0)}),qE(t,e,n,r))},UE=function(e,t,n){return!!zE(t,n.inline)||!!zE(t,n.block)||(n.selector?1===t.nodeType&&e.is(t,n.selector):void 0)},VE=function(e,t,n,r,i,o){var a,s,u,l=n[r];if(n.onmatch)return n.onmatch(t,n,r);if(l)if("undefined"==typeof l.length){for(a in l)if(l.hasOwnProperty(a)){if(s="attributes"===r?e.getAttrib(t,a):Jd.getStyle(e,t,a),i&&!s&&!n.exact)return;if((!i||n.exact)&&!zE(s,Jd.normalizeStyleValue(e,Jd.replaceVars(l[a],o),a)))return}}else for(u=0;u<l.length;u++)if("attributes"===r?e.getAttrib(t,l[u]):Jd.getStyle(e,t,l[u]))return n;return n},qE=function(e,t,n,r,i){var o,a,s,u,l=e.formatter.get(n),c=e.dom;if(l&&t)for(a=0;a<l.length;a++)if(o=l[a],UE(e.dom,t,o)&&VE(c,t,o,"attributes",i,r)&&VE(c,t,o,"styles",i,r)){if(u=o.classes)for(s=0;s<u.length;s++)if(!e.dom.hasClass(t,u[s]))return;return o}},HE=function(r,i,o){var e,a=[],s={};return e=r.selection.getStart(),r.dom.getParent(e,function(e){var t,n;for(t=0;t<i.length;t++)n=i[t],!s[n]&&qE(r,e,n,o)&&(s[n]=!0,a.push(n))},r.dom.getRoot()),a},WE={matchNode:qE,matchName:UE,match:function(e,t,n,r){var i;return r?jE(e,r,t,n):(r=e.selection.getNode(),!!jE(e,r,t,n)||!((i=e.selection.getStart())===r||!jE(e,i,t,n)))},matchAll:HE,canApply:function(e,t){var n,r,i,o,a,s=e.formatter.get(t),u=e.dom;if(s)for(n=e.selection.getStart(),r=Jd.getParents(u,n),o=s.length-1;0<=o;o--){if(!(a=s[o].selector)||s[o].defaultBlock)return!0;for(i=r.length-1;0<=i;i--)if(u.is(r[i],a))return!0}return!1},matchesUnInheritedFormatSelector:FE},GE=function(e,t){return e.splitText(t)},ZE={split:function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,i=e.endOffset;return t===r&&os.isText(t)?0<n&&n<t.nodeValue.length&&(t=(r=GE(t,n)).previousSibling,n<i?(t=r=GE(r,i-=n).previousSibling,i=r.nodeValue.length,n=0):i=0):(os.isText(t)&&0<n&&n<t.nodeValue.length&&(t=GE(t,n),n=0),os.isText(r)&&0<i&&i<r.nodeValue.length&&(i=(r=GE(r,i).previousSibling).nodeValue.length)),{startContainer:t,startOffset:n,endContainer:r,endOffset:i}}},XE=ul.ZWSP,KE="_mce_caret",$E=function(e,t){return e.importNode(t,!0)},YE=function(e){for(var t=[];e;){if(3===e.nodeType&&e.nodeValue!==XE||1<e.childNodes.length)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t},JE=function(e){return 0<YE(e).length},QE=function(e){var t;if(e)for(e=(t=new xe(e,e)).current();e;e=t.next())if(3===e.nodeType)return e;return null},eC=function(e){var t=ji.fromTag("span");return so.setAll(t,{id:KE,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&iu.append(t,ji.fromText(XE)),t},tC=function(e){var t=QE(e);return t&&t.nodeValue.charAt(0)===XE&&t.deleteData(0,1),t},nC=function(e,t,n,r){var i,o,a;i=t.getRng(!0),o=e.getParent(n,e.isBlock),JE(n)?(!1!==r&&(i.setStartBefore(n),i.setEndBefore(n)),e.remove(n)):(a=tC(n),i.startContainer===a&&0<i.startOffset&&i.setStart(a,i.startOffset-1),i.endContainer===a&&0<i.endOffset&&i.setEnd(a,i.endOffset-1),e.remove(n,!0)),o&&e.isEmpty(o)&&Xh.fillWithPaddingBr(ji.fromDom(o)),t.setRng(i)},rC=function(e,t,n,r,i){if(r)nC(t,n,r,i);else if(!(r=rf(e,n.getStart())))for(;r=t.get(KE);)nC(t,n,r,!1)},iC=function(e,t,n){var r=e.dom,i=r.getParent(n,al.curry(Jd.isTextBlock,e));i&&r.isEmpty(i)?n.parentNode.replaceChild(t,n):(Xh.removeTrailingBr(ji.fromDom(n)),r.isEmpty(n)?n.parentNode.replaceChild(t,n):r.insertAfter(t,n))},oC=function(e,t){return e.appendChild(t),t},aC=function(e,t){var n=Qe(e,function(e,t){return oC(e,t.cloneNode(!1))},t);return oC(n,n.ownerDocument.createTextNode(XE))},sC=function(e,t,n){var r,i,o,a,s,u,l=e.selection;a=(r=l.getRng(!0)).startOffset,u=r.startContainer.nodeValue,(i=rf(e.getBody(),l.getStart()))&&(o=QE(i));var c=/[^\s\u00a0\u00ad\u200b\ufeff]/;u&&0<a&&a<u.length&&c.test(u.charAt(a))&&c.test(u.charAt(a-1))?(s=l.getBookmark(),r.collapse(!0),r=ph.expandRng(e,r,e.formatter.get(t)),r=ZE.split(r),e.formatter.apply(t,n,r),l.moveToBookmark(s)):(i&&o.nodeValue===XE||(o=(i=$E(e.getDoc(),eC(!0).dom())).firstChild,r.insertNode(i),a=1),e.formatter.apply(t,n,i),l.setCursorLocation(o,a))},uC=function(e,t,n,r){var i,o,a,s,u,l,c,f=e.dom,p=e.selection,d=[],h=p.getRng();for(i=h.startContainer,o=h.startOffset,3===(u=i).nodeType&&(o!==i.nodeValue.length&&(s=!0),u=u.parentNode);u;){if(WE.matchNode(e,u,t,n,r)){l=u;break}u.nextSibling&&(s=!0),d.push(u),u=u.parentNode}if(l)if(s){a=p.getBookmark(),h.collapse(!0);var m=ph.expandRng(e,h,e.formatter.get(t),!0);m=ZE.split(m),e.formatter.remove(t,n,m),p.moveToBookmark(a)}else{c=rf(e.getBody(),l);var g=eC(!1).dom(),y=aC(d,g);iC(e,g,c||l),nC(f,p,c,!1),p.setCursorLocation(y,1),f.isEmpty(l)&&f.remove(l)}},lC=function(e,t,n,r){rC(e,t,n,null,!1),8===r&&n.isCollapsed()&&n.getStart().innerHTML===XE&&rC(e,t,n,rf(e,n.getStart())),37!==r&&39!==r||rC(e,t,n,rf(e,n.getStart()))},cC=function(e){var t=e.dom,n=e.selection,r=e.getBody();e.on("mouseup keydown",function(e){lC(r,t,n,e.keyCode)})},fC=function(e,t){var n=eC(!1),r=aC(t,n.dom());return iu.before(ji.fromDom(e),n),lu.remove(ji.fromDom(e)),Cc(r,0)},pC=function(e,t){return e.schema.getTextInlineElements().hasOwnProperty($i.name(t))&&!nf(t.dom())&&!os.isBogus(t.dom())},dC={},hC=ir.filter,mC=ir.each,gC=function(e,t){mC(dC[e],function(e){e(t)})};uE=function(e){var t,n,r=e.selection.getRng(),i=function(e){return t(e.previousSibling)&&-1!==ir.indexOf(n,e.previousSibling)},o=function(e,t){Br(t).remove(),Br(e).append("<br><br>").append(t.childNodes)};t=os.matchNodeNames("pre"),r.collapsed||(n=e.selection.getSelectedBlocks(),mC(hC(hC(n,t),i),function(e){o(e.previousSibling,e)}))},dC[sE="pre"]||(dC[sE]=[]),dC[sE].push(uE);var yC,vC={postProcess:gC},_C=/^(src|href|style)$/,bC=yr.each,xC=Jd.isEq,wC=function(e){return/^(TH|TD)$/.test(e.nodeName)},EC=function(e,t,n){var r,i,o;return r=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],os.isElement(r)&&(o=r.childNodes.length-1,!n&&i&&i--,r=r.childNodes[o<i?o:i]),os.isText(r)&&n&&i>=r.nodeValue.length&&(r=new xe(r,e.getBody()).next()||r),os.isText(r)&&!n&&0===i&&(r=new xe(r,e.getBody()).prev()||r),r},CC=function(e,t,n,r){var i=e.create(n,r);return t.parentNode.insertBefore(i,t),i.appendChild(t),i},SC=function(e,t,n,r,i){var o=(r?"next":"previous")+"Sibling",a=e.create(n,i);t.parentNode.insertBefore(a,t);for(var s=[t],u=t;u=u[o];)s.push(u);return s.forEach(function(e){return a.appendChild(e)}),a},TC=function(e,t,n){return!!xC(t,n.inline)||!!xC(t,n.block)||(n.selector?os.isElement(t)&&e.is(t,n.selector):void 0)},AC=function(e,t){return t.links&&"A"===e.tagName},kC=function(e,t,n,r){return!(t=Jd.getNonWhiteSpaceSibling(t,n,r))||"BR"===t.nodeName||e.isBlock(t)},IC=function(t,e,n){var r,i=e.parentNode,o=t.dom,a=t.settings.forced_root_block;n.block&&(a?i===o.getRoot()&&(n.list_block&&xC(e,n.list_block)||bC(yr.grep(e.childNodes),function(e){Jd.isValid(t,a,e.nodeName.toLowerCase())?r?r.appendChild(e):(r=CC(o,e,a),o.setAttribs(r,t.settings.forced_root_block_attrs)):r=0})):o.isBlock(e)&&!o.isBlock(i)&&(kC(o,e,!1)||kC(o,e.firstChild,!0,1)||e.insertBefore(o.create("br"),e.firstChild),kC(o,e,!0)||kC(o,e.lastChild,!1,1)||e.appendChild(o.create("br")))),n.selector&&n.inline&&!xC(n.inline,e)||o.remove(e,1)},DC=function(e,n,r,i,o){var t,a,s,u=e.dom;if(!TC(u,i,n)&&!AC(i,n))return!1;if("all"!==n.remove)for(bC(n.styles,function(e,t){e=Jd.normalizeStyleValue(u,Jd.replaceVars(e,r),t),"number"==typeof t&&(t=e,o=0),(n.remove_similar||!o||xC(Jd.getStyle(u,o,t),e))&&u.setStyle(i,t,""),s=1}),s&&""===u.getAttrib(i,"style")&&(i.removeAttribute("style"),i.removeAttribute("data-mce-style")),bC(n.attributes,function(e,t){var n;if(e=Jd.replaceVars(e,r),"number"==typeof t&&(t=e,o=0),!o||xC(u.getAttrib(o,t),e)){if("class"===t&&(e=u.getAttrib(i,t))&&(n="",bC(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(n+=(n?" ":"")+e)}),n))return void u.setAttrib(i,t,n);"class"===t&&i.removeAttribute("className"),_C.test(t)&&i.removeAttribute("data-mce-"+t),i.removeAttribute(t)}}),bC(n.classes,function(e){e=Jd.replaceVars(e,r),o&&!u.hasClass(o,e)||u.removeClass(i,e)}),a=u.getAttribs(i),t=0;t<a.length;t++){var l=a[t].nodeName;if(0!==l.indexOf("_")&&0!==l.indexOf("data-"))return!1}return"none"!==n.remove?(IC(e,i,n),!0):void 0},PC=function(n,e,r,i,o){var a;return bC(Jd.getParents(n.dom,e.parentNode).reverse(),function(e){var t;a||"_start"===e.id||"_end"===e.id||(t=WE.matchNode(n,e,r,i,o))&&!1!==t.split&&(a=e)}),a},OC=function(e,t,n,r,i,o,a,s){var u,l,c,f,p,d,h=e.dom;if(n){for(d=n.parentNode,u=r.parentNode;u&&u!==d;u=u.parentNode){for(l=h.clone(u,!1),p=0;p<t.length;p++)if(DC(e,t[p],s,l,l)){l=0;break}l&&(c&&l.appendChild(c),f||(f=l),c=l)}!o||a.mixed&&h.isBlock(n)||(r=h.split(n,r)),c&&(i.parentNode.insertBefore(c,i),f.appendChild(i))}return r},RC=function(a,n,s,e,r){var t,i,u=a.formatter.get(n),l=u[0],c=!0,f=a.dom,o=a.selection,p=function(e){var t=PC(a,e,n,s,r);return OC(a,u,t,e,e,!0,l,s)},d=function(e){var t,n,r,i,o;if(os.isElement(e)&&f.getContentEditable(e)&&(i=c,c="true"===f.getContentEditable(e),o=!0),t=yr.grep(e.childNodes),c&&!o)for(n=0,r=u.length;n<r&&!DC(a,u[n],s,e,e);n++);if(l.deep&&t.length){for(n=0,r=t.length;n<r;n++)d(t[n]);o&&(c=i)}},h=function(e){var t=f.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return Wd.isBookmarkNode(n)&&(n=n[e?"firstChild":"lastChild"]),os.isText(n)&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),f.remove(t,!0),n},m=function(e){var t,n,r=e.commonAncestorContainer;if(e=ph.expandRng(a,e,u,!0),l.split){if(e=ZE.split(e),(t=EC(a,e,!0))!==(n=EC(a,e))){if(/^(TR|TH|TD)$/.test(t.nodeName)&&t.firstChild&&(t="TR"===t.nodeName?t.firstChild.firstChild||t:t.firstChild||t),r&&/^T(HEAD|BODY|FOOT|R)$/.test(r.nodeName)&&wC(n)&&n.firstChild&&(n=n.firstChild||n),f.isChildOf(t,n)&&t!==n&&!f.isBlock(n)&&!wC(t)&&!wC(n)){var i=SC(f,t,"span",!0,{id:"_start","data-mce-type":"bookmark"});return p(i),void(t=h(!0))}t=CC(f,t,"span",{id:"_start","data-mce-type":"bookmark"}),n=CC(f,n,"span",{id:"_end","data-mce-type":"bookmark"}),p(t),p(n),t=h(!0),n=h()}else t=n=p(t);e.startContainer=t.parentNode?t.parentNode:t,e.startOffset=f.nodeIndex(t),e.endContainer=n.parentNode?n.parentNode:n,e.endOffset=f.nodeIndex(n)+1}mh.walk(f,e,function(e){bC(e,function(e){d(e),os.isElement(e)&&"underline"===a.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===Jd.getTextDecoration(f,e.parentNode)&&DC(a,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})};if(e)e.nodeType?((i=f.createRng()).setStartBefore(e),i.setEndAfter(e),m(i)):m(e);else if("false"!==f.getContentEditable(o.getNode()))o.isCollapsed()&&l.inline&&!f.select("td[data-mce-selected],th[data-mce-selected]").length?uC(a,n,s,r):(t=ef.getPersistentBookmark(a.selection,!0),m(o.getRng()),o.moveToBookmark(t),l.inline&&WE.match(a,n,s,o.getStart())&&Jd.moveStart(f,o,o.getRng()),a.nodeChanged());else{e=o.getNode();for(var g=0,y=u.length;g<y&&(!u[g].ceFalseOverride||!DC(a,u[g],s,e,e));g++);}},NC={removeFormat:DC,remove:RC},LC=yr.each,MC=function(e){return e&&1===e.nodeType&&!Wd.isBookmarkNode(e)&&!nf(e)&&!os.isBogus(e)},BC=function(e,t){var n;for(n=e;n;n=n[t]){if(3===n.nodeType&&0!==n.nodeValue.length)return e;if(1===n.nodeType&&!Wd.isBookmarkNode(n))return n}return e},zC=function(e,t,n){var r,i,o=new Wh(e);if(t&&n&&(t=BC(t,"previousSibling"),n=BC(n,"nextSibling"),o.compare(t,n))){for(r=t.nextSibling;r&&r!==n;)r=(i=r).nextSibling,t.appendChild(i);return e.remove(n),yr.each(yr.grep(n.childNodes),function(e){t.appendChild(e)}),t}return n},FC=function(e,t,n){LC(e.childNodes,function(e){MC(e)&&(t(e)&&n(e),e.hasChildNodes()&&FC(e,t,n))})},jC=function(n,e){return _e(function(e,t){return!(!t||!Jd.getStyle(n,t,e))},e)},UC=function(r,e,t){return _e(function(e,t,n){r.setStyle(n,e,t),""===n.getAttribute("style")&&n.removeAttribute("style"),VC(r,n)},e,t)},VC=function(e,t){"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)},qC=function(e,t){var n;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(n=Jd.getTextDecoration(e,t.parentNode),e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null))},HC=function(r,e,t){if(e.clear_child_styles){var n=e.links?"*:not(a)":"*";LC(r.select(n,t),function(n){MC(n)&&LC(e.styles,function(e,t){r.setStyle(n,t,"")})})}},WC={mergeWithChildren:function(n,e,r,i){LC(e,function(t){LC(n.dom.select(t.inline,i),function(e){MC(e)&&NC.removeFormat(n,t,r,e,t.exact?e:null)}),HC(n.dom,t,i)})},mergeUnderlineAndColor:function(e,t,n,r){(t.styles.color||t.styles.textDecoration)&&(yr.walk(r,_e(qC,e),"childNodes"),qC(e,r))},mergeBackgroundColorAndFontSize:function(e,t,n,r){t.styles&&t.styles.backgroundColor&&FC(r,jC(e,"fontSize"),UC(e,"backgroundColor",Jd.replaceVars(t.styles.backgroundColor,n)))},mergeSubSup:function(e,t,n,r){"sub"!==t.inline&&"sup"!==t.inline||(FC(r,jC(e,"fontSize"),UC(e,"fontSize","")),e.remove(e.select("sup"===t.inline?"sub":"sup",r),!0))},mergeSiblings:function(e,t,n,r){r&&!1!==t.merge_siblings&&(r=zC(e,Jd.getNonWhiteSpaceSibling(r),r),r=zC(e,r,Jd.getNonWhiteSpaceSibling(r,!0)))},mergeWithParents:function(t,n,r,i,o){WE.matchNode(t,o.parentNode,r,i)&&NC.removeFormat(t,n,i,o)||n.merge_with_parents&&t.dom.getParent(o.parentNode,function(e){if(WE.matchNode(t,e,r,i))return NC.removeFormat(t,n,i,o),!0})}},GC=yr.each,ZC=function(e){return e&&1===e.nodeType&&!Wd.isBookmarkNode(e)&&!nf(e)&&!os.isBogus(e)},XC=function(h,m,g,r){var e,t,y=h.formatter.get(m),v=y[0],i=!r&&h.selection.isCollapsed(),o=h.dom,n=h.selection,_=function(n,e){if(e=e||v,n){if(e.onformat&&e.onformat(n,e,g,r),GC(e.styles,function(e,t){o.setStyle(n,t,Jd.replaceVars(e,g))}),e.styles){var t=o.getAttrib(n,"style");t&&n.setAttribute("data-mce-style",t)}GC(e.attributes,function(e,t){o.setAttrib(n,t,Jd.replaceVars(e,g))}),GC(e.classes,function(e){e=Jd.replaceVars(e,g),o.hasClass(n,e)||o.addClass(n,e)})}},b=function(e,t){var n=!1;return!!v.selector&&(GC(e,function(e){if(!("collapsed"in e&&e.collapsed!==i))return o.is(t,e.selector)&&!nf(t)?(_(t,e),!(n=!0)):void 0}),n)},a=function(u,e,t,l){var c,f,p=[],d=!0;c=v.inline||v.block,f=u.create(c),_(f),mh.walk(u,e,function(e){var a,s=function(e){var t,n,r,i;if(i=d,t=e.nodeName.toLowerCase(),n=e.parentNode.nodeName.toLowerCase(),1===e.nodeType&&u.getContentEditable(e)&&(i=d,d="true"===u.getContentEditable(e),r=!0),Jd.isEq(t,"br"))return a=0,void(v.block&&u.remove(e));if(v.wrapper&&WE.matchNode(h,e,m,g))a=0;else{if(d&&!r&&v.block&&!v.wrapper&&Jd.isTextBlock(h,t)&&Jd.isValid(h,n,c))return e=u.rename(e,c),_(e),p.push(e),void(a=0);if(v.selector){var o=b(y,e);if(!v.inline||o)return void(a=0)}!d||r||!Jd.isValid(h,c,t)||!Jd.isValid(h,n,c)||!l&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||nf(e)||v.inline&&u.isBlock(e)?(a=0,GC(yr.grep(e.childNodes),s),r&&(d=i),a=0):(a||(a=u.clone(f,!1),e.parentNode.insertBefore(a,e),p.push(a)),a.appendChild(e))}};GC(e,s)}),!0===v.links&&GC(p,function(e){var t=function(e){"A"===e.nodeName&&_(e,v),GC(yr.grep(e.childNodes),t)};t(e)}),GC(p,function(e){var t,n,r=function(e){var t=!1;return GC(e.childNodes,function(e){if(ZC(e))return t=e,!1}),t},i=function(e){var t,n;return(t=r(e))&&!Wd.isBookmarkNode(t)&&WE.matchName(u,t,v)&&(n=u.clone(t,!1),_(n),u.replace(n,e,!0),u.remove(t,1)),n||e};n=0,GC(e.childNodes,function(e){Jd.isWhiteSpaceNode(e)||Wd.isBookmarkNode(e)||n++}),t=n,!(1<p.length)&&u.isBlock(e)||0!==t?(v.inline||v.wrapper)&&(v.exact||1!==t||(e=i(e)),WC.mergeWithChildren(h,y,g,e),WC.mergeWithParents(h,v,m,g,e),WC.mergeBackgroundColorAndFontSize(u,v,g,e),WC.mergeSubSup(u,v,g,e),WC.mergeSiblings(u,v,g,e)):u.remove(e,1)})};if("false"!==o.getContentEditable(n.getNode())){if(v){if(r)r.nodeType?b(y,r)||((t=o.createRng()).setStartBefore(r),t.setEndAfter(r),a(o,ph.expandRng(h,t,y),null,!0)):a(o,r,null,!0);else if(i&&v.inline&&!o.select("td[data-mce-selected],th[data-mce-selected]").length)sC(h,m,g);else{var s=h.selection.getNode();h.settings.forced_root_block||!y[0].defaultBlock||o.getParent(s,o.isBlock)||XC(h,y[0].defaultBlock),h.selection.setRng(Jh.normalize(h.selection.getRng())),e=ef.getPersistentBookmark(h.selection,!0),a(o,ph.expandRng(h,n.getRng(),y),e),v.styles&&WC.mergeUnderlineAndColor(o,v,g,s),n.moveToBookmark(e),Jd.moveStart(o,n,n.getRng()),h.nodeChanged()}vC.postProcess(m,h)}}else{r=n.getNode();for(var u=0,l=y.length;u<l;u++)if(y[u].ceFalseOverride&&o.is(r,y[u].selector))return void _(r,y[u])}},KC={applyFormat:XC},$C=yr.each,YC=function(e,o){var a={};e.set({}),o.on("NodeChange",function(n){var r=Jd.getParents(o.dom,n.element),i={};r=yr.grep(r,function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")}),$C(e.get(),function(e,n){$C(r,function(t){return o.formatter.matchNode(t,n,{},e.similar)?(a[n]||($C(e,function(e){e(!0,{node:t,format:n,parents:r})}),a[n]=e),i[n]=e,!1):!WE.matchesUnInheritedFormatSelector(o,t,n)&&void 0})}),$C(a,function(e,t){i[t]||(delete a[t],$C(e,function(e){e(!1,{node:n.element,format:t,parents:r})}))})})},JC=function(e,t,n,r){var i=e.get();$C(t.split(","),function(e){i[e]||(i[e]=[],i[e].similar=r),i[e].push(n)}),e.set(i)},QC={formatChanged:function(e,t,n,r,i){null===t.get()&&YC(t,e),JC(t,n,r,i)}},eS={get:function(r){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(n,e,t){yr.each(t,function(e,t){r.setAttrib(n,t,e)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return yr.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){t[e]={block:e,remove:"all"}}),t}},tS=yr.each,nS=qs.DOM,rS=function(e,t){var n,r,i,o=t&&t.schema||we({}),a=function(e,t){t.classes.length&&nS.addClass(e,t.classes.join(" ")),nS.setAttribs(e,t.attrs)},u=function(e){var t;return r="string"==typeof e?{name:e,classes:[],attrs:{}}:e,t=nS.create(r.name),a(t,r),t},l=function(e,t){var n="string"!=typeof e?e.nodeName.toLowerCase():e,r=o.getElementRule(n),i=r&&r.parentsRequired;return!(!i||!i.length)&&(t&&-1!==yr.inArray(i,t)?t:i[0])},c=function(n,e,t){var r,i,o,a=0<e.length&&e[0],s=a&&a.name;if(o=l(n,s))s===o?(i=e[0],e=e.slice(1)):i=o;else if(a)i=e[0],e=e.slice(1);else if(!t)return n;return i&&(r=u(i)).appendChild(n),t&&(r||(r=nS.create("div")).appendChild(n),yr.each(t,function(e){var t=u(e);r.insertBefore(t,n)})),c(r,e,i&&i.siblings)};return e&&e.length?(r=e[0],n=u(r),(i=nS.create("div")).appendChild(c(n,e.slice(1),r.siblings)),i):""},iS=function(e,t){return rS(aS(e),t)},oS=function(e){var t,a={classes:[],attrs:{}};return"*"!==(e=a.selector=yr.trim(e))&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,t,n,r,i){switch(t){case"#":a.attrs.id=n;break;case".":a.classes.push(n);break;case":":-1!==yr.inArray("checked disabled enabled read-only required".split(" "),n)&&(a.attrs[n]=n)}if("["===r){var o=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);o&&(a.attrs[o[1]]=o[2])}return""})),a.name=t||"div",a},aS=function(e){return e&&"string"==typeof e?(e=(e=e.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),yr.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var t=yr.map(e.split(/(?:~\+|~|\+)/),oS),n=t.pop();return t.length&&(n.siblings=t),n}).reverse()):[]},sS={getCssText:function(n,e){var t,r,i,o,a,s,u="";if(!1===(s=n.settings.preview_styles))return"";"string"!=typeof s&&(s="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");var l=function(e){return e.replace(/%(\w+)/g,"")};if("string"==typeof e){if(!(e=n.formatter.get(e)))return;e=e[0]}return"preview"in e&&!1===(s=e.preview)?"":(t=e.block||e.inline||"span",(o=aS(e.selector)).length?(o[0].name||(o[0].name=t),t=e.selector,r=rS(o,n)):r=rS([t],n),i=nS.select(t,r)[0]||r.firstChild,tS(e.styles,function(e,t){(e=l(e))&&nS.setStyle(i,t,e)}),tS(e.attributes,function(e,t){(e=l(e))&&nS.setAttrib(i,t,e)}),tS(e.classes,function(e){e=l(e),nS.hasClass(i,e)||nS.addClass(i,e)}),n.fire("PreviewFormats"),nS.setStyles(r,{position:"absolute",left:-65535}),n.getBody().appendChild(r),a=nS.getStyle(n.getBody(),"fontSize",!0),a=/px$/.test(a)?parseInt(a,10):0,tS(s.split(" "),function(e){var t=nS.getStyle(i,e,!0);if(!("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=nS.getStyle(n.getBody(),e,!0),"#ffffff"===nS.toHex(t).toLowerCase())||"color"===e&&"#000000"===nS.toHex(t).toLowerCase())){if("font-size"===e&&/em|%$/.test(t)){if(0===a)return;t=parseFloat(t)/(/%$/.test(t)?100:1)*a+"px"}"border"===e&&t&&(u+="padding:0 2px;"),u+=e+":"+t+";"}}),n.fire("AfterPreviewFormats"),nS.remove(r),u)},parseSelector:aS,selectorToHtml:iS},uS={toggle:function(e,t,n,r,i){var o=t.get(n);!WE.match(e,n,r,i)||"toggle"in o[0]&&!o[0].toggle?KC.applyFormat(e,n,r,i):NC.remove(e,n,r,i)}},lS={setup:function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])}},cS=Object.prototype.hasOwnProperty,fS=(yC=function(e,t){return t},function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var i=e[r];for(var o in i)cS.call(i,o)&&(n[o]=yC(n[o],i[o]))}return n}),pS={register:function(t,u,l){t.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,r=e.length;r--;)(n=e[r]).attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)}),
t.addAttributeFilter("src,href,style",function(e,t){for(var n,r,i=e.length,o="data-mce-"+t,a=u.url_converter,s=u.url_converter_scope;i--;)(r=(n=e[i]).attributes.map[o])!==undefined?(n.attr(t,0<r.length?r:null),n.attr(o,null)):(r=n.attributes.map[t],"style"===t?r=l.serializeStyle(l.parseStyle(r),n.name):a&&(r=a.call(s,r,t,n.name)),n.attr(t,0<r.length?r:null))}),t.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)(n=(t=e[r]).attr("class"))&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",0<n.length?n:null))}),t.addAttributeFilter("data-mce-type",function(e,t,n){for(var r,i=e.length;i--;)"bookmark"!==(r=e[i]).attributes.map["data-mce-type"]||n.cleanup||r.remove()}),t.addNodeFilter("noscript",function(e){for(var t,n=e.length;n--;)(t=e[n].firstChild)&&(t.value=Es.decode(t.value))}),t.addNodeFilter("script,style",function(e,t){for(var n,r,i,o=e.length,a=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};o--;)r=(n=e[o]).firstChild?n.firstChild.value:"","script"===t?((i=n.attr("type"))&&n.attr("type","mce-no/type"===i?null:i.replace(/^mce\-/,"")),"xhtml"===u.element_format&&0<r.length&&(n.firstChild.value="// <![CDATA[\n"+a(r)+"\n// ]]>")):"xhtml"===u.element_format&&0<r.length&&(n.firstChild.value="<!--\n"+a(r)+"\n-->")}),t.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)0===(t=e[n]).value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),t.addNodeFilter("xml:namespace,input",function(e,t){for(var n,r=e.length;r--;)7===(n=e[r]).type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),t.addAttributeFilter("data-mce-type",function(e){Ke(e,function(e){"format-caret"===e.attr("data-mce-type")&&(e.isEmpty(t.schema.getNonEmptyElements())?e.remove():e.unwrap())})}),t.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})},trimTrailingBr:function(e){var t,n,r=function(e){return e&&"br"===e.name};r(t=e.lastChild)&&r(n=t.prev)&&(t.remove(),n.remove())}},dS=function(e,t,n){var r,i,o,a=e.dom;return t=t.cloneNode(!0),(r=document.implementation).createHTMLDocument&&(i=r.createHTMLDocument(""),yr.each("BODY"===t.nodeName?t.childNodes:[t],function(e){i.body.appendChild(i.importNode(e,!0))}),t="BODY"!==t.nodeName?i.body.firstChild:i.body,o=a.doc,a.doc=i),Tb.firePreProcess(e,fS(n,{node:t})),o&&(a.doc=o),t},hS=function(e,t){return e&&e.hasEventListeners("PreProcess")&&!t.no_events},mS={process:function(e,t,n){return hS(e,n)?dS(e,t,n):t}},gS=function(t,e){Ke(e,function(e){t.attr(e,null)})},yS=function(e,o,a){e.addNodeFilter("font",function(e){Ke(e,function(e){var t=o.parse(e.attr("style")),n=e.attr("color"),r=e.attr("face"),i=e.attr("size");n&&(t.color=n),r&&(t["font-family"]=r),i&&(t["font-size"]=a[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",o.serialize(t)),gS(e,["color","face","size"])})})},vS=function(e,n){e.addNodeFilter("strike",function(e){Ke(e,function(e){var t=n.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",n.serialize(t))})})},_S=function(e,t){var n=Ee();t.convert_fonts_to_spans&&yS(e,n,yr.explode(t.font_size_legacy_values)),vS(e,n)},bS={register:function(e,t){t.inline_styles&&_S(e,t)}},xS=/^[ \t\r\n]*$/,wS={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},ES=function(e,t,n){var r,i,o=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[o])return e[o];if(e!==t){if(r=e[a])return r;for(i=e.parent;i&&i!==t;i=i.parent)if(r=i[a])return r}},CS=function(){function s(e,t){this.name=e,1===(this.type=t)&&(this.attributes=[],this.attributes.map={})}return s.create=function(e,t){var n,r;if(n=new s(e,wS[e]||1),t)for(r in t)n.attr(r,t[r]);return n},s.prototype.replace=function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},s.prototype.attr=function(e,t){var n,r,i=this;if("string"!=typeof e){for(r in e)i.attr(r,e[r]);return i}if(n=i.attributes){if(t!==undefined){if(null===t){if(e in n.map)for(delete n.map[e],r=n.length;r--;)if(n[r].name===e)return n=n.splice(r,1),i;return i}if(e in n.map){for(r=n.length;r--;)if(n[r].name===e){n[r].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,i}return n.map[e]}},s.prototype.clone=function(){var e,t,n,r,i,o=this,a=new s(o.name,o.type);if(n=o.attributes){for((i=[]).map={},e=0,t=n.length;e<t;e++)"id"!==(r=n[e]).name&&(i[i.length]={name:r.name,value:r.value},i.map[r.name]=r.value);a.attributes=i}return a.value=o.value,a.shortEnded=o.shortEnded,a},s.prototype.wrap=function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},s.prototype.unwrap=function(){var e,t,n=this;for(e=n.firstChild;e;)t=e.next,n.insert(e,n,!0),e=t;n.remove()},s.prototype.remove=function(){var e=this,t=e.parent,n=e.next,r=e.prev;return t&&(t.firstChild===e?(t.firstChild=n)&&(n.prev=null):r.next=n,t.lastChild===e?(t.lastChild=r)&&(r.next=null):n.prev=r,e.parent=e.next=e.prev=null),e},s.prototype.append=function(e){var t,n=this;return e.parent&&e.remove(),(t=n.lastChild)?((t.next=e).prev=t,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e},s.prototype.insert=function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,(e.next=t).prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,(e.prev=t).next=e),e.parent=r,e},s.prototype.getAll=function(e){var t,n=this,r=[];for(t=n.firstChild;t;t=ES(t,n))t.name===e&&r.push(t);return r},s.prototype.empty=function(){var e,t,n,r=this;if(r.firstChild){for(e=[],n=r.firstChild;n;n=ES(n,r))e.push(n);for(t=e.length;t--;)(n=e[t]).parent=n.firstChild=n.lastChild=n.next=n.prev=null}return r.firstChild=r.lastChild=null,r},s.prototype.isEmpty=function(e,t,n){var r,i,o=this,a=o.firstChild;if(t=t||{},a)do{if(1===a.type){if(a.attributes.map["data-mce-bogus"])continue;if(e[a.name])return!1;for(r=a.attributes.length;r--;)if("name"===(i=a.attributes[r].name)||0===i.indexOf("data-mce-bookmark"))return!1}if(8===a.type)return!1;if(3===a.type&&!xS.test(a.value))return!1;if(3===a.type&&a.parent&&t[a.parent.name]&&xS.test(a.value))return!1;if(n&&n(a))return!1}while(a=ES(a,o));return!0},s.prototype.walk=function(e){return ES(this,null,e)},s}(),SS=function(e,t,n,r){(e.padd_empty_with_br||t.insert)&&n[r.name]?r.empty().append(new CS("br",1)).shortEnded=!0:r.empty().append(new CS("#text",3)).value="\xa0"},TS=function(e){return AS(e,"#text")&&"\xa0"===e.firstChild.value},AS=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},kS=function(e,t){var n=e.getElementRule(t.name);return n&&n.paddEmpty},IS=function(t,e,n,r){return r.isEmpty(e,n,function(e){return kS(t,e)})},DS=function(e,t){return e&&(t[e.name]||"br"===e.name)},PS=function(e,m){var g=e.schema;m.remove_trailing_brs&&e.addNodeFilter("br",function(e,t,n){var r,i,o,a,s,u,l,c,f=e.length,p=yr.extend({},g.getBlockElements()),d=g.getNonEmptyElements(),h=g.getNonEmptyElements();for(p.body=1,r=0;r<f;r++)if(o=(i=e[r]).parent,p[i.parent.name]&&i===o.lastChild){for(s=i.prev;s;){if("span"!==(u=s.name)||"bookmark"!==s.attr("data-mce-type")){if("br"!==u)break;if("br"===u){i=null;break}}s=s.prev}i&&(i.remove(),IS(g,d,h,o)&&(l=g.getElementRule(o.name))&&(l.removeEmpty?o.remove():l.paddEmpty&&SS(m,n,p,o)))}else{for(a=i;o&&o.firstChild===a&&o.lastChild===a&&!p[(a=o).name];)o=o.parent;a===o&&!0!==m.padd_empty_with_br&&((c=new CS("#text",3)).value="\xa0",i.replace(c))}}),e.addAttributeFilter("href",function(e){var t,n=e.length,r=function(e){return e.split(" ").filter(function(e){return 0<e.length}).concat(["noopener"]).sort().join(" ")},i=function(e){var t=e?yr.trim(e):"";return/\b(noopener)\b/g.test(t)?t:r(t)};if(!m.allow_unsafe_link_target)for(;n--;)"a"===(t=e[n]).name&&"_blank"===t.attr("target")&&t.attr("rel",i(t.attr("rel")))}),m.allow_html_in_named_anchor||e.addAttributeFilter("id,name",function(e){for(var t,n,r,i,o=e.length;o--;)if("a"===(i=e[o]).name&&i.firstChild&&!i.attr("href"))for(r=i.parent,t=i.lastChild;n=t.prev,r.insert(t,i),t=n;);}),m.fix_list_elements&&e.addNodeFilter("ul,ol",function(e){for(var t,n,r=e.length;r--;)if("ul"===(n=(t=e[r]).parent).name||"ol"===n.name)if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{var i=new CS("li",1);i.attr("style","list-style-type: none"),t.wrap(i)}}),m.validate&&g.getValidClasses()&&e.addAttributeFilter("class",function(e){for(var t,n,r,i,o,a,s,u=e.length,l=g.getValidClasses();u--;){for(n=(t=e[u]).attr("class").split(" "),o="",r=0;r<n.length;r++)i=n[r],s=!1,(a=l["*"])&&a[i]&&(s=!0),a=l[t.name],!s&&a&&a[i]&&(s=!0),s&&(o&&(o+=" "),o+=i);o.length||(o=null),t.attr("class",o)}})},OS=yr.makeMap,RS=yr.each,NS=yr.explode,LS=yr.extend,MS=function(e,t,n){-1===yr.inArray(t,n)&&(e.addAttributeFilter(n,function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),t.push(n))},BS=function(e,t,n){return!t.no_events&&e?Tb.firePostProcess(e,fS(t,{content:n})).content:n},zS=function(e,t,n){var r=ul.trim(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||Ua(ji.fromDom(t))?r:yr.trim(r)},FS=function(e,t,n){var r=n.selection?fS({forced_root_block:!1},n):n,i=e.parse(t,r);return pS.trimTrailingBr(i),i},jS=function(e,t,n){return I(e,t).serialize(n)},US=function(e,t,n,r,i){var o=jS(t,n,r);return BS(e,i,o)};(Z||(Z={})).isBookmarkNode=Wd.isBookmarkNode;var VS=Z,qS=os.isContentEditableFalse,HS=os.isContentEditableTrue,WS=function(e,t){for(;t&&t!==e;){if(HS(t)||qS(t))return t;t=t.parentNode}return null},GS=function(r,a){var s,u,l,c,f,p,d,h,m,g,y,v,o,_,b,x,w,E=a.dom,C=yr.each,S=a.getDoc(),T=document,A=Math.abs,k=Math.round,I=a.getBody();c={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var e=".mce-content-body";a.contentStyles.push(e+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+e+" .mce-resizehandle:hover {background: #000}"+e+" img[data-mce-selected],"+e+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+e+" .mce-clonedresizable {position: absolute;"+(Gt.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+e+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var D=function(e){return e&&("IMG"===e.nodeName||a.dom.is(e,"figure.image"))},n=function(e,t){return D(e.target)&&!Xw.isXYWithinRange(e.clientX,e.clientY,t)},i=function(e){var t=e.target;n(e,a.selection.getRng())&&!e.isDefaultPrevented()&&(e.preventDefault(),a.selection.select(t))},P=function(e){return a.dom.is(e,"figure.image")?e.querySelector("img"):e},O=function(e){var t=a.settings.object_resizing;return!1!==t&&!Gt.iOS&&("string"!=typeof t&&(t="table,img,figure.image,div"),"false"!==e.getAttribute("data-mce-resize")&&e!==a.getBody()&&Po.is(ji.fromDom(e),t))},R=function(e){var t,n,r,i;t=e.screenX-p,n=e.screenY-d,_=t*f[2]+g,b=n*f[3]+y,_=_<5?5:_,b=b<5?5:b,(D(s)&&!1!==a.settings.resize_img_proportional?!$w.modifierPressed(e):$w.modifierPressed(e)||D(s)&&f[2]*f[3]!=0)&&(A(t)>A(n)?(b=k(_*v),_=k(b/v)):(_=k(b/v),b=k(_*v))),E.setStyles(P(u),{width:_,height:b}),r=0<(r=f.startPos.x+t)?r:0,i=0<(i=f.startPos.y+n)?i:0,E.setStyles(l,{left:r,top:i,display:"block"}),l.innerHTML=_+" &times; "+b,f[2]<0&&u.clientWidth<=_&&E.setStyle(u,"left",h+(g-_)),f[3]<0&&u.clientHeight<=b&&E.setStyle(u,"top",m+(y-b)),(t=I.scrollWidth-x)+(n=I.scrollHeight-w)!=0&&E.setStyles(l,{left:r-t,top:i-n}),o||(Tb.fireObjectResizeStart(a,s,g,y),o=!0)},N=function(){o=!1;var e=function(e,t){t&&(s.style[e]||!a.schema.isValid(s.nodeName.toLowerCase(),e)?E.setStyle(P(s),e,t):E.setAttrib(P(s),e,t))};e("width",_),e("height",b),E.unbind(S,"mousemove",R),E.unbind(S,"mouseup",N),T!==S&&(E.unbind(T,"mousemove",R),E.unbind(T,"mouseup",N)),E.remove(u),E.remove(l),L(s),Tb.fireObjectResized(a,s,_,b),E.setAttrib(s,"style",E.getAttrib(s,"style")),a.nodeChanged()},L=function(e){var t,i,o,n,r;M(),F(),t=E.getPos(e,I),h=t.x,m=t.y,r=e.getBoundingClientRect(),i=r.width||r.right-r.left,o=r.height||r.bottom-r.top,s!==e&&(s=e,_=b=0),n=a.fire("ObjectSelected",{target:e}),O(e)&&!n.isDefaultPrevented()?C(c,function(t,e){var n,r=function(e){p=e.screenX,d=e.screenY,g=P(s).clientWidth,y=P(s).clientHeight,v=y/g,(f=t).startPos={x:i*t[0]+h,y:o*t[1]+m},x=I.scrollWidth,w=I.scrollHeight,u=s.cloneNode(!0),E.addClass(u,"mce-clonedresizable"),E.setAttrib(u,"data-mce-bogus","all"),u.contentEditable=!1,u.unSelectabe=!0,E.setStyles(u,{left:h,top:m,margin:0}),u.removeAttribute("data-mce-selected"),I.appendChild(u),E.bind(S,"mousemove",R),E.bind(S,"mouseup",N),T!==S&&(E.bind(T,"mousemove",R),E.bind(T,"mouseup",N)),l=E.add(I,"div",{"class":"mce-resize-helper","data-mce-bogus":"all"},g+" &times; "+y)};(n=E.get("mceResizeHandle"+e))&&E.remove(n),n=E.add(I,"div",{id:"mceResizeHandle"+e,"data-mce-bogus":"all","class":"mce-resizehandle",unselectable:!0,style:"cursor:"+e+"-resize; margin:0; padding:0"}),11===Gt.ie&&(n.contentEditable=!1),E.bind(n,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),r(e)}),t.elm=n,E.setStyles(n,{left:i*t[0]+h-n.offsetWidth/2,top:o*t[1]+m-n.offsetHeight/2})}):M(),s.setAttribute("data-mce-selected","1")},M=function(){var e,t;for(e in F(),s&&s.removeAttribute("data-mce-selected"),c)(t=E.get("mceResizeHandle"+e))&&(E.unbind(t),E.remove(t))},B=function(e){var t,n=function(e,t){if(e)do{if(e===t)return!0}while(e=e.parentNode)};o||a.removed||(C(E.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),t="mousedown"===e.type?e.target:r.getNode(),n(t=E.$(t).closest("table,img,figure.image,hr")[0],I)&&(j(),n(r.getStart(!0),t)&&n(r.getEnd(!0),t))?L(t):M())},z=function(e){return qS(WS(a.getBody(),e))},F=function(){for(var e in c){var t=c[e];t.elm&&(E.unbind(t.elm),delete t.elm)}},j=function(){try{a.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}};return a.on("init",function(){j(),Gt.ie&&11<=Gt.ie&&(a.on("mousedown click",function(e){var t=e.target,n=t.nodeName;o||!/^(TABLE|IMG|HR)$/.test(n)||z(t)||(2!==e.button&&a.selection.select(t,"TABLE"===n),"mousedown"===e.type&&a.nodeChanged())}),a.dom.bind(I,"mscontrolselect",function(e){var t=function(e){Qt.setEditorTimeout(a,function(){a.selection.select(e)})};if(z(e.target))return e.preventDefault(),void t(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName&&t(e.target))}));var t=Qt.throttle(function(e){a.composing||B(e)});a.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",t),a.on("keyup compositionend",function(e){s&&"TABLE"===s.nodeName&&t(e)}),a.on("hide blur",M),a.on("contextmenu",i)}),a.on("remove",F),{isResizable:O,showResizeRect:L,hideResizeRect:M,updateResizeRect:B,destroy:function(){s=u=null}}},ZS=function(e){return os.isContentEditableTrue(e)||os.isContentEditableFalse(e)},XS=function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null},KS=function(e,n,t){var r,i,o;if(r=t.elementFromPoint(e,n),i=t.body.createTextRange(),r&&"HTML"!==r.tagName||(r=t.body),i.moveToElementText(r),0<(o=(o=yr.toArray(i.getClientRects())).sort(function(e,t){return(e=Math.abs(Math.max(e.top-n,e.bottom-n)))-(t=Math.abs(Math.max(t.top-n,t.bottom-n)))})).length){n=(o[0].bottom+o[0].top)/2;try{return i.moveToPoint(e,n),i.collapse(!0),i}catch(a){}}return null},$S=function(e,t){var n=e&&e.parentElement?e.parentElement():null;return os.isContentEditableFalse(XS(n,t,ZS))?null:e},YS={fromPoint:function(e,t,n){var r,i,o=n;if(o.caretPositionFromPoint)(i=o.caretPositionFromPoint(e,t))&&((r=n.createRange()).setStart(i.offsetNode,i.offset),r.collapse(!0));else if(n.caretRangeFromPoint)r=n.caretRangeFromPoint(e,t);else if(o.body.createTextRange){r=o.body.createTextRange();try{r.moveToPoint(e,t),r.collapse(!0)}catch(a){r=KS(e,t,n)}return $S(r,n.body)}return r}},JS={processRanges:function(n,e){return Xe(e,function(e){var t=n.fire("GetSelectionRange",{range:e});return t.range!==e?t.range:e})}},QS={fromElements:function(e,t){var n=(t||document).createDocumentFragment();return Ke(e,function(e){n.appendChild(e.dom())}),ji.fromDom(n)}},eT=Eo("element","width","rows"),tT=Eo("element","cells"),nT=Eo("x","y"),rT=function(e,t){var n=parseInt(so.get(e,t),10);return isNaN(n)?1:n},iT=function(e,t,n,r,i){for(var o=rT(i,"rowspan"),a=rT(i,"colspan"),s=e.rows(),u=n;u<n+o;u++){s[u]||(s[u]=tT(rl.deep(r),[]));for(var l=t;l<t+a;l++)s[u].cells()[l]=u===n&&l===t?i:rl.shallow(i)}},oT=function(e,t,n){var r=e.rows();return!!(r[n]?r[n].cells():[])[t]},aT=function(e,t,n){for(;oT(e,t,n);)t++;return t},sT=function(e){return et(e,function(e,t){return t.cells().length>e?t.cells().length:e},0)},uT=function(e,t){for(var n=e.rows(),r=0;r<n.length;r++)for(var i=n[r].cells(),o=0;o<i.length;o++)if(zo.eq(i[o],t))return Ne.some(nT(o,r));return Ne.none()},lT=function(e,t,n,r,i){for(var o=[],a=e.rows(),s=n;s<=i;s++){var u=a[s].cells(),l=t<r?u.slice(t,r+1):u.slice(r,t+1);o.push(tT(a[s].element(),l))}return o},cT=function(e,t,n){var r=t.x(),i=t.y(),o=n.x(),a=n.y(),s=i<a?lT(e,r,i,o,a):lT(e,r,a,o,i);return eT(e.element(),sT(s),s)},fT=function(e,t){var n=rl.shallow(e.element()),r=ji.fromTag("tbody");return ou.append(r,t),iu.append(n,r),n},pT=function(e){return Xe(e.rows(),function(e){var t=Xe(e.cells(),function(e){var t=rl.deep(e);return so.remove(t,"colspan"),so.remove(t,"rowspan"),t}),n=rl.shallow(e.element());return ou.append(n,t),n})},dT={fromDom:function(e){var i=eT(rl.shallow(e),0,[]);return Ke(Iu.descendants(e,"tr"),function(n,r){Ke(Iu.descendants(n,"td,th"),function(e,t){iT(i,aT(i,t,r),r,n,e)})}),eT(i.element(),sT(i.rows()),i.rows())},toDom:function(e){return fT(e,pT(e))},subsection:function(n,e,r){return uT(n,e).bind(function(t){return uT(n,r).map(function(e){return cT(n,t,e)})})}},hT=function(e){return tt(e,function(e){return"ul"===$i.name(e)||"ol"===$i.name(e)})},mT=function(e,t){return tt(e,function(e){return"li"===$i.name(e)&&Kx(e,t)}).fold(ye([]),function(){return hT(e).map(function(e){return[ji.fromTag("li"),ji.fromTag($i.name(e))]}).getOr([])})},gT=function(e,t){var n=et(t,function(e,t){return iu.append(t,e),t},e);return 0<t.length?QS.fromElements([n]):n},yT=function(t){return Ba(t)?oa.parent(t).filter(Ma).fold(ye([]),function(e){return[t,e]}):Ma(t)?[t]:[]},vT=function(e,t){var n=ji.fromDom(t.commonAncestorContainer),r=ig.parentsAndSelf(n,e),i=Je(r,function(e){return Ra(e)||Pa(e)}),o=mT(r,t),a=i.concat(o.length?o:yT(n));return Xe(a,rl.shallow)},_T=function(){return QS.fromElements([])},bT=function(e,t){return gT(ji.fromDom(t.cloneContents()),vT(e,t))},xT=function(e,t){return Bu.ancestor(t,"table",_e(zo.eq,e))},wT=function(e,i){return xT(e,i[0]).bind(function(e){var t=i[0],n=i[i.length-1],r=dT.fromDom(e);return dT.subsection(r,t,n).map(function(e){return QS.fromElements([dT.toDom(e)])})}).getOrThunk(_T)},ET=function(e,t){return 0<t.length&&t[0].collapsed?_T():bT(e,t[0])},CT={read:function(e,t){var n=Mv.getCellsFromElementOrRanges(t,e);return 0<n.length?wT(e,n):ET(e,t)}},ST={getContent:function(e,t){var n,r=e.selection.getRng(),i=e.dom.create("body"),o=e.selection.getSel(),a=JS.processRanges(e,Pv.getRanges(o));if((t=t||{}).get=!0,t.format=t.format||"html",t.selection=!0,(t=e.fire("BeforeGetContent",t)).isDefaultPrevented())return e.fire("GetContent",t),t.content;if("text"===t.format)return e.selection.isCollapsed()?"":ul.trim(r.text||(o.toString?o.toString():""));r.cloneContents?(n=t.contextual?CT.read(ji.fromDom(e.getBody()),a).dom():r.cloneContents())&&i.appendChild(n):r.item!==undefined||r.htmlText!==undefined?(i.innerHTML="<br>"+(r.item?r.item(0).outerHTML:r.htmlText),i.removeChild(i.firstChild)):i.innerHTML=r.toString(),t.getInner=!0;var s=e.selection.serializer.serialize(i,t);return"tree"===t.format?s:(t.content=e.selection.isCollapsed()?"":s,e.fire("GetContent",t),t.content)}},TT={setContent:function(e,t,n){var r,i,o,a=e.selection.getRng(),s=e.getDoc();if((n=n||{format:"html"}).set=!0,n.selection=!0,n.content=t,n.no_events||!(n=e.fire("BeforeSetContent",n)).isDefaultPrevented()){if(t=n.content,a.insertNode){t+='<span id="__caret">_</span>',a.startContainer===s&&a.endContainer===s?s.body.innerHTML=t:(a.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=t:a.createContextualFragment?a.insertNode(a.createContextualFragment(t)):(i=s.createDocumentFragment(),o=s.createElement("div"),i.appendChild(o),o.outerHTML=t,a.insertNode(i))),r=e.dom.get("__caret"),(a=s.createRange()).setStartBefore(r),a.setEndBefore(r),e.selection.setRng(a),e.dom.remove("__caret");try{e.selection.setRng(a)}catch(u){}}else a.item&&(s.execCommand("Delete",!1,null),a=e.getRng()),/^\s+/.test(t)?(a.pasteHTML('<span id="__mce_tmp">_</span>'+t),e.dom.remove("__mce_tmp")):a.pasteHTML(t);n.no_events||e.fire("SetContent",n)}else e.fire("SetContent",n)}},AT=function(e,t,n,r,i){var o=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return Ne.from(o).map(ji.fromDom).map(function(e){return r&&t.collapsed?e:oa.child(e,i(e,a)).getOr(e)}).bind(function(e){return $i.isElement(e)?Ne.some(e):oa.parent(e)}).map(function(e){return e.dom()}).getOr(e)},kT=function(e,t,n){return AT(e,t,!0,n,function(e,t){return Math.min(oa.childNodesCount(e),t)})},IT=function(e,t,n){return AT(e,t,!1,n,function(e,t){return 0<t?t-1:t})},DT=function(e,t){for(var n=e;e&&os.isText(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},PT=function(e,t){var n,r,i,o,a;return t?(r=t.startContainer,i=t.endContainer,o=t.startOffset,a=t.endOffset,n=t.commonAncestorContainer,!t.collapsed&&(r===i&&a-o<2&&r.hasChildNodes()&&(n=r.childNodes[o]),3===r.nodeType&&3===i.nodeType&&(r=r.length===o?DT(r.nextSibling,!0):r.parentNode,i=0===a?DT(i.previousSibling,!1):i.parentNode,r&&r===i))?r:n&&3===n.nodeType?n.parentNode:n):e},OT=function(e,t,n,r){var i,o,a=[];if(o=e.getRoot(),n=e.getParent(n||kT(o,t,t.collapsed),e.isBlock),r=e.getParent(r||IT(o,t,t.collapsed),e.isBlock),n&&n!==o&&a.push(n),n&&r&&n!==r)for(var s=new xe(i=n,o);(i=s.next())&&i!==r;)e.isBlock(i)&&a.push(i);return r&&n!==r&&r!==o&&a.push(r),a},RT=function(r,e,i){return Ne.from(e).map(function(e){var t=r.nodeIndex(e),n=r.createRng();return n.setStart(e.parentNode,t),n.setEnd(e.parentNode,t+1),i&&($x(r,n,e,!0),$x(r,n,e,!1)),n})},NT=yr.each,LT=function(e){return!!e.select},MT=function(e){return!(!e||!e.ownerDocument)&&zo.contains(ji.fromDom(e.ownerDocument),ji.fromDom(e))},BT=function(e){return!!e&&(!!LT(e)||MT(e.startContainer)&&MT(e.endContainer))},zT=function(s,u,e,l){var n,t,c,f,a,r=function(e,t){var n=s.createRng();e?(n.setStart(e,t),n.setEnd(e,t),v(n),m(!1)):($x(s,n,l.getBody(),!0),v(n))},i=function(e,t){return TT.setContent(l,e,t)},o=function(e){return kT(l.getBody(),y(),e)},p=function(e){return IT(l.getBody(),y(),e)},d=function(e,t){return RT(s,e,t).each(v),e},h=function(){var e=y(),t=g();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},m=function(e){var t=y();t.collapse(!!e),v(t)},g=function(){return u.getSelection?u.getSelection():u.document.selection},y=function(){var e,t,n,r,i=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(r){return-1}};if(!u)return null;if(null==(r=u.document))return null;if(l.bookmark!==undefined&&!1===sx.hasFocus(l)){var o=pb.getRng(l);if(o.isSome())return o.map(function(e){return JS.processRanges(l,[e])[0]}).getOr(r.createRange())}try{(e=g())&&(t=0<e.rangeCount?e.getRangeAt(0):e.createRange?e.createRange():r.createRange())}catch(a){}return(t=JS.processRanges(l,[t])[0])||(t=r.createRange?r.createRange():r.body.createTextRange()),t.setStart&&9===t.startContainer.nodeType&&t.collapsed&&(n=s.getRoot(),t.setStart(n,0),t.setEnd(n,0)),c&&f&&(0===i(t.START_TO_START,t,c)&&0===i(t.END_TO_END,t,c)?t=f:f=c=null),t},v=function(e,t){var n,r;if(BT(e)){var i=LT(e)?e:null;if(i){f=null;try{i.select()}catch(o){}}else{if(n=g(),e=l.fire("SetSelectionRange",{range:e,forward:t}).range,n){f=e;try{n.removeAllRanges(),n.addRange(e)}catch(o){}!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),c=0<n.rangeCount?n.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!n.setBaseAndExtent||Gt.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(r=e.startContainer.childNodes[e.startOffset])&&"IMG"===r.tagName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||n.setBaseAndExtent(r,0,r,1)),l.fire("AfterSetSelectionRange",{range:e,forward:t})}}},_=function(e){return i(s.getOuterHTML(e)),e},b=function(){return PT(l.getBody(),y())},x=function(e,t){return OT(s,y(),e,t)},w=function(){var e,t,n=g();return!(n&&n.anchorNode&&n.focusNode)||((e=s.createRng()).setStart(n.anchorNode,n.anchorOffset),e.collapse(!0),(t=s.createRng()).setStart(n.focusNode,n.focusOffset),t.collapse(!0),e.compareBoundaryPoints(e.START_TO_START,t)<=0)},E=function(){var e=y(),t=g();if(!Pv.hasMultipleRanges(t)&&Yx(l)){var n=D_.normalize(s,e);return n.each(function(e){v(e,w())}),n.getOr(e)}return e},C=function(e,t){var o;return a||(a={},o={},l.on("NodeChange",function(e){var n=e.element,r=s.getParents(n,null,s.getRoot()),i={};NT(a,function(e,n){NT(r,function(t){if(s.is(t,n))return o[n]||(NT(e,function(e){e(!0,{node:t,selector:n,parents:r})}),o[n]=e),i[n]=e,!1})}),NT(o,function(e,t){i[t]||(delete o[t],NT(e,function(e){e(!1,{node:n,selector:t,parents:r})}))})})),a[e]||(a[e]=[]),a[e].push(t),I},S=function(){for(var e,t=s.getRoot();t&&"BODY"!==t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},T=function(e,t){return v(YS.fromPoint(e,t,l.getDoc()))},A=function(){var e=y();return e.collapsed?Cc.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},k=function(){u=c=f=null,t.destroy()},I={bookmarkManager:null,controlSelection:null,dom:s,win:u,serializer:e,editor:l,collapse:m,setCursorLocation:r,getContent:function(e){return ST.getContent(l,e)},setContent:i,getBookmark:function(e,t){return n.getBookmark(e,t)},moveToBookmark:function(e){return n.moveToBookmark(e)},select:d,isCollapsed:h,isForward:w,setNode:_,getNode:b,getSel:g,setRng:v,getRng:y,getStart:o,getEnd:p,getSelectedBlocks:x,normalize:E,selectorChanged:C,getScrollContainer:S,scrollIntoView:function(e,t){return dp.scrollElementIntoView(l,e,t)},placeCaretAt:T,getBoundingClientRect:A,destroy:k};return n=VS(I),t=GS(I,l),I.bookmarkManager=n,I.controlSelection=t,I},FT=os.isContentEditableFalse,jT=Yl,UT=pd,VT=fd,qT=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},HT=function(e,t){var n=Qp(e,t);return!(n||!os.isBr(e.getNode()))||n},WT=function(e,t,n,r){var i,o,a,s,u=e===wc.Forwards,l=u?VT:UT;return!r.collapsed&&(i=jT(r),FT(i))?bf(e,t,i,e===wc.Backwards,!0):(s=Cl(r),l(o=cd(e,t.getBody(),r))?wf(t,o.getNode(!u)):(o=n(o))?l(o)?bf(e,t,o.getNode(!u),u,!0):l(a=n(o))&&HT(o,a)?bf(e,t,a.getNode(!u),u,!0):s?Cf(t,o.toRange(),!0):null:s?r:null)},GT=function(e,t,n,r){var i,o,a,s,u,l,c,f,p;if(p=jT(r),i=cd(e,t.getBody(),r),o=n(t.getBody(),Lw(1),i),a=ir.filter(o,Mw(1)),u=ir.last(i.getClientRects()),(VT(i)||dd(i))&&(p=i.getNode()),(UT(i)||hd(i))&&(p=i.getNode(!0)),!u)return null;if(l=u.left,(s=Vw(a,l))&&FT(s.node))return c=Math.abs(l-s.left),f=Math.abs(l-s.right),bf(e,t,s.node,c<f,!0);if(p){var d=Nw(e,t.getBody(),Lw(1),p);if(s=Vw(ir.filter(d,Mw(1)),l))return Cf(t,s.position.toRange(),!0);if(s=ir.last(ir.filter(d,Mw(0))))return Cf(t,s.position.toRange(),!0)}},ZT=function(e){var t=e.dom.create(e.settings.forced_root_block);return(!Gt.ie||11<=Gt.ie)&&(t.innerHTML='<br data-mce-bogus="1">'),t},XT=function(e,t,n){var r,i,o=Ff(e.getBody()),a=al.curry(qT,o.next),s=al.curry(qT,o.prev);if(n.collapsed&&e.settings.forced_root_block){if(!(r=e.dom.getParent(n.startContainer,"PRE")))return;(1===t?a(Cc.fromRangeStart(n)):s(Cc.fromRangeStart(n)))||(i=ZT(e),1===t?e.$(r).after(i):e.$(r).before(i),e.selection.select(i,!0),e.selection.collapse())}},KT=function(e,t){var n,r=Ff(e.getBody()),i=al.curry(qT,r.next),o=al.curry(qT,r.prev),a=t?wc.Forwards:wc.Backwards,s=t?i:o,u=e.selection.getRng();return(n=WT(a,e,s,u))?n:(n=XT(e,a,u))||null},$T=function(e,t){var n,r=t?1:-1,i=t?Rw:Ow,o=e.selection.getRng();return(n=GT(r,e,i,o))?n:(n=XT(e,r,o))||null},YT=function(t,n){return function(){var e=KT(t,n);return!!e&&(t.selection.setRng(e),!0)}},JT=function(t,n){return function(){var e=$T(t,n);return!!e&&(t.selection.setRng(e),!0)}},QT=function(e){return Xe(e,function(e){return fS({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:me},e)})},eA=function(e,t){return t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey},tA=function(e,t){return at(QT(e),function(e){return eA(e,t)?[e]:[]})},nA=function(e,t){return tt(tA(e,t),function(e){return e.action()})},rA={match:tA,action:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,r)}},execute:nA},iA=function(e,t,n){var r=Li.detect().os;rA.execute([{keyCode:$w.RIGHT,action:YT(e,!0)},{keyCode:$w.LEFT,action:YT(e,!1)},{keyCode:$w.UP,action:JT(e,!1)},{keyCode:$w.DOWN,action:JT(e,!0)},{keyCode:$w.RIGHT,action:Rp(e,!0)},{keyCode:$w.LEFT,action:Rp(e,!1)},{keyCode:$w.UP,action:Np(e,!1)},{keyCode:$w.DOWN,action:Np(e,!0)},{keyCode:$w.RIGHT,action:tv.move(e,t,!0)},{keyCode:$w.LEFT,action:tv.move(e,t,!1)},{keyCode:$w.RIGHT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:tv.moveNextWord(e,t)},{keyCode:$w.LEFT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:tv.movePrevWord(e,t)}],n).each(function(){n.preventDefault()})},oA={setup:function(t,n){t.on("keydown",function(e){!1===e.isDefaultPrevented()&&iA(t,n,e)})}},aA=function(e,t){var n=ig.parentsAndSelf(t,e);return nt(n,Oa).fold(ye(n),function(e){return n.slice(0,e)})},sA=function(e){return 1===oa.children(e).length},uA=function(e,t,n,r){var i=_e(pC,t),o=Xe(Je(r,i),function(e){return e.dom()});if(0===o.length)Jg.deleteElement(t,e,n);else{var a=fC(n.dom(),o);t.selection.setRng(a.toRange())}},lA=function(n,r){var e=ji.fromDom(n.getBody()),t=ji.fromDom(n.selection.getStart()),i=Je(aA(e,t),sA);return ht(i).map(function(e){var t=Cc.fromRangeStart(n.selection.getRng());return!!Nm.willDeleteLastPositionInElement(r,t,e.dom())&&(uA(r,n,e,i),!0)}).getOr(!1)},cA={backspaceDelete:function(e,t){return!!e.selection.isCollapsed()&&lA(e,t)}},fA=function(e,t,n){rA.execute([{keyCode:$w.BACKSPACE,action:rA.action(ay.backspaceDelete,e,!1)},{keyCode:$w.DELETE,action:rA.action(ay.backspaceDelete,e,!0)},{keyCode:$w.BACKSPACE,action:rA.action(lv.backspaceDelete,e,t,!1)},{keyCode:$w.DELETE,action:rA.action(lv.backspaceDelete,e,t,!0)},{keyCode:$w.BACKSPACE,action:rA.action(e_.backspaceDelete,e,!1)},{keyCode:$w.DELETE,action:rA.action(e_.backspaceDelete,e,!0)},{keyCode:$w.BACKSPACE,action:rA.action(Eg.backspaceDelete,e,!1)},{keyCode:$w.DELETE,action:rA.action(Eg.backspaceDelete,e,!0)},{keyCode:$w.BACKSPACE,action:rA.action(gg.backspaceDelete,e,!1)},{keyCode:$w.DELETE,action:rA.action(gg.backspaceDelete,e,!0)},{keyCode:$w.BACKSPACE,action:rA.action(cA.backspaceDelete,e,!1)},{keyCode:$w.DELETE,action:rA.action(cA.backspaceDelete,e,!0)}],n).each(function(){n.preventDefault()})},pA=function(e,t){rA.execute([{keyCode:$w.BACKSPACE,action:rA.action(ay.paddEmptyElement,e)},{keyCode:$w.DELETE,action:rA.action(ay.paddEmptyElement,e)}],t)},dA={setup:function(t,n){t.on("keydown",function(e){!1===e.isDefaultPrevented()&&fA(t,n,e)}),t.on("keyup",function(e){!1===e.isDefaultPrevented()&&pA(t,e)})}},hA=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}},mA=function(e){return Ne.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},gA=function(e){return mA(e).fold(ye(""),function(e){return e.nodeName.toUpperCase()})},yA=function(e){return mA(e).filter(function(e){return Ba(ji.fromDom(e))}).isSome()},vA={moveToCaretPosition:function(e,t){var n,r,i,o,a=t,s=e.dom,u=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)){var l=hA(t.firstChild);l&&/^(UL|OL|DL)$/.test(l.nodeName)&&t.insertBefore(s.doc.createTextNode("\xa0"),
t.firstChild)}if(i=s.createRng(),t.normalize(),t.hasChildNodes()){for(n=new xe(t,t);r=n.current();){if(os.isText(r)){i.setStart(r,0),i.setEnd(r,0);break}if(u[r.nodeName.toLowerCase()]){i.setStartBefore(r),i.setEndBefore(r);break}a=r,r=n.next()}r||(i.setStart(a,0),i.setEnd(a,0))}else os.isBr(t)?t.nextSibling&&s.isBlock(t.nextSibling)?(i.setStartBefore(t),i.setEndBefore(t)):(i.setStartAfter(t),i.setEndAfter(t)):(i.setStart(t,0),i.setEnd(t,0));e.selection.setRng(i),s.remove(o),e.selection.scrollIntoView(t)}},getEditableRoot:function(e,t){var n,r,i=e.getRoot();for(n=t;n!==i&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==i?r:i},getParentBlock:mA,getParentBlockName:gA,isListItemParentBlock:yA},_A=function(e,t){return e.firstChild&&e.firstChild.nodeName===t},bA=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},xA=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},wA=function(e){return xA(e)&&xA(e.parentNode)},EA=function(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},CA=function(e,t,n){for(var r=e[n?"firstChild":"lastChild"];r&&!os.isElement(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},SA={insert:function(e,t,n,r,i){var o=e.dom,a=e.selection.getRng();if(n!==e.getBody()){wA(n)&&(i="LI");var s=i?t(i):o.create("BR");if(CA(n,r,!0)&&CA(n,r,!1))bA(n,"LI")?o.insertAfter(s,EA(n)):o.replace(s,n);else if(CA(n,r,!0))bA(n,"LI")?(o.insertAfter(s,EA(n)),s.appendChild(o.doc.createTextNode(" ")),s.appendChild(n)):n.parentNode.insertBefore(s,n);else if(CA(n,r,!1))o.insertAfter(s,EA(n));else{n=EA(n);var u=a.cloneRange();u.setStartAfter(r),u.setEndAfter(n);var l=u.extractContents();"LI"===i&&_A(l,"LI")?(s=l.firstChild,o.insertAfter(l,n)):(o.insertAfter(l,n),o.insertAfter(s,n))}o.remove(r),vA.moveToCaretPosition(e,s)}}},TA=function(e){return e&&"A"===e.nodeName&&0===yr.trim(ul.trim(e.innerText||e.textContent)).length},AA=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},kA=function(e){e.innerHTML='<br data-mce-bogus="1">'},IA=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},DA=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},PA=function(e,t,n){var r,i=n,o=[];if(i){for(;i=i.firstChild;){if(e.isBlock(i))return;os.isElement(i)&&!t[i.nodeName.toLowerCase()]&&o.push(i)}for(r=o.length;r--;)!(i=o[r]).hasChildNodes()||i.firstChild===i.lastChild&&""===i.firstChild.nodeValue?e.remove(i):TA(i)&&e.remove(i)}},OA=function(e,t,n){return!1===os.isText(t)?n:e?1===n&&t.data.charAt(n-1)===ul.ZWSP?0:n:n===t.data.length-1&&t.data.charAt(n)===ul.ZWSP?t.data.length:n},RA=function(e){var t=e.cloneRange();return t.setStart(e.startContainer,OA(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,OA(!1,e.endContainer,e.endOffset)),t},NA=function(e){for(;os.isText(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;);},LA=function(e,t){var n,r,i=e.getRoot();for(n=t;n!==i&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==i?r:i},MA=function(e,t){var n=mp.getForcedRootBlock(e);n&&n.toLowerCase()===t.tagName.toLowerCase()&&e.dom.setAttribs(t,mp.getForcedRootBlockAttrs(e))},BA=function(e,t,n,r,i){var o,a,s,u,l,c,f=t||"P",p=e.dom,d=LA(p,r);if(!(a=p.getParent(r,p.isBlock))||!DA(p,a)){if(c=(a=a||d)===e.getBody()||AA(a)?a.nodeName.toLowerCase():a.parentNode.nodeName.toLowerCase(),!a.hasChildNodes())return o=p.create(f),MA(e,o),a.appendChild(o),n.setStart(o,0),n.setEnd(o,0),o;for(u=r;u.parentNode!==a;)u=u.parentNode;for(;u&&!p.isBlock(u);)u=(s=u).previousSibling;if(s&&e.schema.isValidChild(c,f.toLowerCase())){for(o=p.create(f),MA(e,o),s.parentNode.insertBefore(o,s),u=s;u&&!p.isBlock(u);)l=u.nextSibling,o.appendChild(u),u=l;n.setStart(r,i),n.setEnd(r,i)}}return r},zA=function(e,t){var n;t.normalize(),(n=t.lastChild)&&!/^(left|right)$/gi.test(e.getStyle(n,"float",!0))||e.add(t,"br")},FA={insert:function(a,e){var t,s,u,o,l,n,r,i,c,f,p,d,h,m=a.dom,g=a.schema,y=g.getNonEmptyElements(),v=a.selection.getRng(),_=function(e){var t,n,r,i=u,o=g.getTextInlineElements();if(e||"TABLE"===f||"HR"===f?(t=m.create(e||d),MA(a,t)):t=l.cloneNode(!1),r=t,!1===mp.shouldKeepStyles(a))m.setAttrib(t,"style",null),m.setAttrib(t,"class",null);else do{if(o[i.nodeName]){if(nf(i))continue;n=i.cloneNode(!1),m.setAttrib(n,"id",""),t.hasChildNodes()?n.appendChild(t.firstChild):r=n,t.appendChild(n)}}while((i=i.parentNode)&&i!==s);return kA(r),t},b=function(e){var t,n,r,i;if(i=OA(e,u,o),os.isText(u)&&(e?0<i:i<u.nodeValue.length))return!1;if(u.parentNode===l&&h&&!e)return!0;if(e&&os.isElement(u)&&u===l.firstChild)return!0;if(IA(u,"TABLE")||IA(u,"HR"))return h&&!e||!h&&e;for(t=new xe(u,l),os.isText(u)&&(e&&0===i?t.prev():e||i!==u.nodeValue.length||t.next());n=t.current();){if(os.isElement(n)){if(!n.getAttribute("data-mce-bogus")&&(r=n.nodeName.toLowerCase(),y[r]&&"br"!==r))return!1}else if(os.isText(n)&&!/^[ \t\r\n]*$/.test(n.nodeValue))return!1;e?t.prev():t.next()}return!0},x=function(){r=/^(H[1-6]|PRE|FIGURE)$/.test(f)&&"HGROUP"!==p?_(d):_(),mp.shouldEndContainerOnEmptyBlock(a)&&DA(m,c)&&m.isEmpty(l)?r=m.split(c,l):m.insertAfter(r,l),vA.moveToCaretPosition(a,r)};D_.normalize(m,v).each(function(e){v.setStart(e.startContainer,e.startOffset),v.setEnd(e.endContainer,e.endOffset)}),u=v.startContainer,o=v.startOffset,d=mp.getForcedRootBlock(a),n=e.shiftKey,os.isElement(u)&&u.hasChildNodes()&&(h=o>u.childNodes.length-1,u=u.childNodes[Math.min(o,u.childNodes.length-1)]||u,o=h&&os.isText(u)?u.nodeValue.length:0),(s=LA(m,u))&&((d&&!n||!d&&n)&&(u=BA(a,d,v,u,o)),l=m.getParent(u,m.isBlock),c=l?m.getParent(l.parentNode,m.isBlock):null,f=l?l.nodeName.toUpperCase():"","LI"!==(p=c?c.nodeName.toUpperCase():"")||e.ctrlKey||(c=(l=c).parentNode,f=p),/^(LI|DT|DD)$/.test(f)&&m.isEmpty(l)?SA.insert(a,_,c,l,d):d&&l===a.getBody()||(d=d||"P",fl(l)?(r=El(l),m.isEmpty(l)&&kA(l),vA.moveToCaretPosition(a,r)):b()?x():b(!0)?(r=l.parentNode.insertBefore(_(),l),vA.moveToCaretPosition(a,IA(l,"HR")?r:l)):((t=RA(v).cloneRange()).setEndAfter(l),i=t.extractContents(),NA(i),r=i.firstChild,m.insertAfter(i,l),PA(m,y,r),zA(m,l),m.isEmpty(l)&&kA(l),r.normalize(),m.isEmpty(r)?(m.remove(r),x()):vA.moveToCaretPosition(a,r)),m.setAttrib(r,"id",""),a.fire("NewBlock",{newBlock:r})))}},jA=function(e,t){return vA.getParentBlock(e).filter(function(e){return 0<t.length&&Po.is(ji.fromDom(e),t)}).isSome()},UA={shouldInsertBr:function(e){return jA(e,mp.getBrNewLineSelector(e))},shouldBlockNewLine:function(e){return jA(e,mp.getNoNewLineSelector(e))}},VA=Cg.generate([{br:[]},{block:[]},{none:[]}]),qA=function(e){return UA.shouldBlockNewLine(e)},HA=function(t){return function(e){return""===mp.getForcedRootBlock(e)===t}},WA=function(t){return function(e){return vA.isListItemParentBlock(e)===t}},GA=function(t,n){return function(e){return vA.getParentBlockName(e)===t.toUpperCase()===n}},ZA=function(e){return GA("pre",e)},XA=function(){return GA("summary",!0)},KA=function(t){return function(e){return mp.shouldPutBrInPre(e)===t}},$A=function(e){return UA.shouldInsertBr(e)},YA=function(e,t){return t},JA=function(e){var t=mp.getForcedRootBlock(e),n=vA.getEditableRoot(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t||"P")},QA=function(e,t){return function(n,r){return et(e,function(e,t){return e&&t(n,r)},!0)?Ne.some(t):Ne.none()}},ek={getAction:function(e,t){return _y.evaluateUntil([QA([qA],VA.none()),QA([XA()],VA.br()),QA([ZA(!0),KA(!1),YA],VA.br()),QA([ZA(!0),KA(!1)],VA.block()),QA([ZA(!0),KA(!0),YA],VA.block()),QA([ZA(!0),KA(!0)],VA.br()),QA([WA(!0),YA],VA.br()),QA([WA(!0)],VA.block()),QA([HA(!0),YA,JA],VA.block()),QA([HA(!0)],VA.br()),QA([$A],VA.br()),QA([HA(!1),YA],VA.br()),QA([JA],VA.block())],[e,t.shiftKey]).getOr(VA.none())}},tk={insert:function(e,t){ek.getAction(e,t).fold(function(){q_.insert(e,t)},function(){FA.insert(e,t)},me)}},nk=function(e){e.typing&&(e.typing=!1,e.add())},rk=function(e,t){t.isDefaultPrevented()||(t.preventDefault(),nk(e.undoManager),e.undoManager.transact(function(){!1===e.selection.isCollapsed()&&e.execCommand("Delete"),tk.insert(e,t)}))},ik={setup:function(t){t.on("keydown",function(e){e.keyCode===$w.ENTER&&rk(t,e)})}},ok=function(e,t){return lk(e)&&os.isText(t.container())},ak=function(e,t){var n=t.container(),r=t.offset();n.insertData(r,"\xa0"),e.selection.setCursorLocation(n,r+1)},sk=function(e,t,n){return!!ok(n,t)&&(ak(e,t),!0)},uk=function(e){var t=_e(Pm.isInlineTarget,e),n=Cc.fromRangeStart(e.selection.getRng());return jy.readLocation(t,e.getBody(),n).map(_e(sk,e,n)).getOr(!1)},lk=function(e){return e.fold(ye(!1),ye(!0),ye(!0),ye(!1))},ck={insertAtSelection:function(e){return!!e.selection.isCollapsed()&&uk(e)}},fk=function(e,t){rA.execute([{keyCode:$w.SPACEBAR,action:rA.action(ck.insertAtSelection,e)}],t).each(function(){t.preventDefault()})},pk={setup:function(t){t.on("keydown",function(e){!1===e.isDefaultPrevented()&&fk(t,e)})}},dk=function(e){return Bu.descendant(ji.fromDom(e.getBody()),"*[data-mce-caret]").fold(ye(null),function(e){return e.dom()})},hk=function(e){e.selection.setRng(e.selection.getRng())},mk=function(e,t){t.hasAttribute("data-mce-caret")&&(El(t),hk(e),e.selection.scrollIntoView(t))},gk=function(e,t){var n=dk(e);if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void mk(e,n)):void(hl(n)&&(mk(e,n),e.undoManager.add()))},yk={setup:function(e){e.on("keyup compositionstart",_e(gk,e))}},vk={setup:function(e){var t=tv.setupSelectedState(e);yk.setup(e),oA.setup(e,t),dA.setup(e,t),ik.setup(e),pk.setup(e)}},_k=function(e){return os.isElement(e)&&La(ji.fromDom(e))},bk=function(e){var t=e.selection.getRng(),n=y.fromRangeStart(t),r=y.fromRangeEnd(t);if(y.isElementPosition(n)){var i=n.container();_k(i)&&Sd.firstPositionIn(i).each(function(e){return t.setStart(e.container(),e.offset())})}y.isElementPosition(r)&&(i=n.container(),_k(i)&&Sd.lastPositionIn(i).each(function(e){return t.setEnd(e.container(),e.offset())})),e.selection.setRng(Jh.normalize(t))},xk=function(t){t.on("click",function(e){3<=e.detail&&bk(t)})},wk=function(t){t.on("click",function(e){t.dom.getParent(e.target,"details")&&e.preventDefault()})},Ek=function(e){e.parser.addNodeFilter("details",function(e){Ke(e,function(e){e.attr("data-mce-open",e.attr("open")),e.attr("open","open")})}),e.serializer.addNodeFilter("details",function(e){Ke(e,function(e){var t=e.attr("data-mce-open");e.attr("open",Be(t)?t:null),e.attr("data-mce-open",null)})})},Ck=function(e){wk(e),Ek(e)},Sk=qs.DOM,Tk=function(e,t){var n=ji.fromDom(e.getDoc().head),r=ji.fromTag("style");so.set(r,"type","text/css"),iu.append(r,ji.fromText(t)),iu.append(n,r)},Ak=function(s){var e=H(s.settings,s.schema);return e.addAttributeFilter("src,href,style,tabindex",function(e,t){for(var n,r,i,o=e.length,a=s.dom;o--;)if(r=(n=e[o]).attr(t),i="data-mce-"+t,!n.attributes.map[i]){if(0===r.indexOf("data:")||0===r.indexOf("blob:"))continue;"style"===t?((r=a.serializeStyle(a.parseStyle(r),n.name)).length||(r=null),n.attr(i,r),n.attr(t,r)):"tabindex"===t?(n.attr(i,r),n.attr(t,null)):n.attr(i,s.convertURL(r,t,n.name))}}),e.addNodeFilter("script",function(e){for(var t,n,r=e.length;r--;)0!==(n=(t=e[r]).attr("type")||"no/type").indexOf("mce-")&&t.attr("type","mce-"+n)}),e.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)(t=e[n]).type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),e.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var t,n=e.length,r=s.schema.getNonEmptyElements();n--;)(t=e[n]).isEmpty(r)&&0===t.getAll("br").length&&(t.append(new CS("br",1)).shortEnded=!0)}),e},kk=function(t){t.settings.auto_focus&&Qt.setEditorTimeout(t,function(){var e;(e=!0===t.settings.auto_focus?t:t.editorManager.get(t.settings.auto_focus)).destroyed||e.focus()},100)},Ik=function(e){e.bindPendingEventDelegates(),e.initialized=!0,e.fire("init"),e.focus(!0),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),kk(e)},Dk=function(e){return e.inline?Sk.styleSheetLoader:e.dom.styleSheetLoader},Pk={initContentBody:function(t,e){var n,r,i=t.settings,o=t.getElement(),a=t.getDoc();i.inline||(t.getElement().style.visibility=t.orgVisibility),e||i.content_editable||(a.open(),a.write(t.iframeHTML),a.close()),i.content_editable&&(t.on("remove",function(){var e=this.getBody();Sk.removeClass(e,"mce-content-body"),Sk.removeClass(e,"mce-edit-focus"),Sk.setAttrib(e,"contentEditable",null)}),Sk.addClass(o,"mce-content-body"),t.contentDocument=a=i.content_document||document,t.contentWindow=i.content_window||window,t.bodyElement=o,i.content_document=i.content_window=null,i.root_name=o.nodeName.toLowerCase()),(n=t.getBody()).disabled=!0,t.readonly=i.readonly,t.readonly||(t.inline&&"static"===Sk.getStyle(n,"position",!0)&&(n.style.position="relative"),n.contentEditable=t.getParam("content_editable_state",!0)),n.disabled=!1,t.editorUpload=z(t),t.schema=we(i),t.dom=qs(a,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,hex_colors:i.force_hex_style_colors,class_filter:i.class_filter,update_styles:!0,root_element:t.inline?t.getBody():null,collect:i.content_editable,schema:t.schema,onSetAttrib:function(e){t.fire("SetAttrib",e)}}),t.parser=Ak(t),t.serializer=G(i,t),t.selection=zT(t.dom,t.getWin(),t.serializer,t),t.annotator=w(t),t.formatter=q(t),t.undoManager=U(t),t._nodeChangeDispatcher=new F(t),t._selectionOverrides=nE(t),Ck(t),xk(t),vk.setup(t),Hx.setup(t),t.fire("PreInit"),i.browser_spellcheck||i.gecko_spellcheck||(a.body.spellcheck=!1,Sk.setAttrib(n,"spellcheck","false")),t.quirks=X(t),t.fire("PostRender"),i.directionality&&(n.dir=i.directionality),i.nowrap&&(n.style.whiteSpace="nowrap"),i.protect&&t.on("BeforeSetContent",function(t){yr.each(i.protect,function(e){t.content=t.content.replace(e,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),t.on("SetContent",function(){t.addVisual(t.getBody())}),t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),t.on("compositionstart compositionend",function(e){t.composing="compositionstart"===e.type}),0<t.contentStyles.length&&(r="",yr.each(t.contentStyles,function(e){r+=e+"\r\n"}),t.dom.addStyle(r)),Dk(t).loadAll(t.contentCSS,function(){Ik(t)},function(){Ik(t)}),i.content_style&&Tk(t,i.content_style)}},Ok=qs.DOM,Rk=function(e,t){if(document.domain!==window.location.hostname&&Gt.ie&&Gt.ie<12){var n=zx.uuid("mce");e[n]=function(){Pk.initContentBody(e)};var r='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+n+"(true);})()";return Ok.setAttrib(t,"src",r),!0}return!1},Nk=function(e){var t="number"==typeof e?e+"px":e;return t||""},Lk=function(e,t,n,r){var i=ji.fromTag("iframe");return so.setAll(i,r),so.setAll(i,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),wo.setAll(i,{width:"100%",height:Nk(n),display:"block"}),i},Mk=function(e){var t,n,r;return r=mp.getDocType(e)+"<html><head>",mp.getDocumentBaseUrl(e)!==e.documentBaseUrl&&(r+='<base href="'+e.documentBaseURI.getURI()+'" />'),r+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',t=mp.getBodyId(e),n=mp.getBodyClass(e),mp.getContentSecurityPolicy(e)&&(r+='<meta http-equiv="Content-Security-Policy" content="'+mp.getContentSecurityPolicy(e)+'" />'),r+='</head><body id="'+t+'" class="mce-content-body '+n+'" data-id="'+e.id+'"><br></body></html>'},Bk=function(e,t){var n=e.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),r=Lk(e.id,n,t.height,mp.getIframeAttrs(e)).dom();r.onload=function(){r.onload=null,e.fire("load")};var i=Rk(e,r);return e.contentAreaContainer=t.iframeContainer,e.iframeElement=r,e.iframeHTML=Mk(e),Ok.add(t.iframeContainer,r),i},zk={init:function(e,t){var n=Bk(e,t);t.editorContainer&&(Ok.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=Ok.isHidden(t.editorContainer)),e.getElement().style.display="none",Ok.setAttrib(e.id,"aria-hidden","true"),n||Pk.initContentBody(e)}},Fk=qs.DOM,jk=function(t,n,e){var r,i,o=Sx.get(e);if(r=Sx.urls[e]||t.documentBaseUrl.replace(/\/$/,""),e=yr.trim(e),o&&-1===yr.inArray(n,e)){if(yr.each(Sx.dependencies(e),function(e){jk(t,n,e)}),t.plugins[e])return;i=new o(t,r,t.$),(t.plugins[e]=i).init&&(i.init(t,r),n.push(e))}},Uk=function(e){return e.replace(/^\-/,"")},Vk=function(t){var n=[];yr.each(t.settings.plugins.split(/[ ,]/),function(e){jk(t,n,Uk(e))})},qk=function(e){var t,n=e.settings.theme;Be(n)?(e.settings.theme=Uk(n),t=Tx.get(n),e.theme=new t(e,Tx.urls[n]),e.theme.init&&e.theme.init(e,Tx.urls[n]||e.documentBaseUrl.replace(/\/$/,""),e.$)):e.theme={}},Hk=function(e){var t,n,r,i,o,a=e.settings,s=e.getElement();return t=a.width||Fk.getStyle(s,"width")||"100%",n=a.height||Fk.getStyle(s,"height")||s.offsetHeight,r=a.min_height||100,(i=/^[0-9\.]+(|px)$/i).test(""+t)&&(t=Math.max(parseInt(t,10),100)),i.test(""+n)&&(n=Math.max(parseInt(n,10),r)),o=e.theme.renderUI({targetNode:s,width:t,height:n,deltaWidth:a.delta_width,deltaHeight:a.delta_height}),a.content_editable||(n=(o.iframeHeight||n)+("number"==typeof n?o.deltaHeight||0:""))<r&&(n=r),o.height=n,o},Wk=function(e){var t,n=e.getElement();return(t=e.settings.theme(e,n)).editorContainer.nodeType&&(t.editorContainer.id=t.editorContainer.id||e.id+"_parent"),t.iframeContainer&&t.iframeContainer.nodeType&&(t.iframeContainer.id=t.iframeContainer.id||e.id+"_iframecontainer"),t.height=t.iframeHeight?t.iframeHeight:n.offsetHeight,t},Gk=function(e){return{editorContainer:e,iframeContainer:e}},Zk=function(e){var t=Fk.create("div");return Fk.insertAfter(t,e),Gk(t)},Xk=function(e){var t=e.getElement();return e.inline?Gk(null):Zk(t)},Kk=function(e){var t=e.settings,n=e.getElement();return e.orgDisplay=n.style.display,Be(t.theme)?Hk(e):Ve(t.theme)?Wk(e):Xk(e)},$k={init:function(t){var e,n=t.settings,r=t.getElement();return t.rtl=n.rtl_ui||t.editorManager.i18n.rtl,t.editorManager.i18n.setCode(n.language),n.aria_label=n.aria_label||Fk.getAttrib(r,"aria-label",t.getLang("aria.rich_text_area")),t.fire("ScriptsLoaded"),qk(t),Vk(t),e=Kk(t),t.editorContainer=e.editorContainer?e.editorContainer:null,n.content_css&&yr.each(yr.explode(n.content_css),function(e){t.contentCSS.push(t.documentBaseURI.toAbsolute(e))}),n.content_editable?Pk.initContentBody(t):zk.init(t,e)}},Yk=qs.DOM,Jk=function(e){return"-"===e.charAt(0)},Qk=function(e,t){var n=t.settings;n.language&&"en"!==n.language&&!n.language_url&&(n.language_url=t.editorManager.baseURL+"/langs/"+n.language+".js"),n.language_url&&!t.editorManager.i18n.data[n.language]&&e.add(n.language_url)},eI=function(e,t,n,r){var i=t.settings,o=i.theme;if(Be(o)){if(!Jk(o)&&!Tx.urls.hasOwnProperty(o)){var a=i.theme_url;a?Tx.load(o,t.documentBaseURI.toAbsolute(a)):Tx.load(o,"themes/"+o+"/theme"+n+".js")}e.loadQueue(function(){Tx.waitFor(o,r)})}else r()},tI=function(n,r){yr.isArray(n.plugins)&&(n.plugins=n.plugins.join(" ")),yr.each(n.external_plugins,function(e,t){Sx.load(t,e),n.plugins+=" "+t}),yr.each(n.plugins.split(/[ ,]/),function(e){if((e=yr.trim(e))&&!Sx.urls[e])if(Jk(e)){e=e.substr(1,e.length);var t=Sx.dependencies(e);yr.each(t,function(e){var t={prefix:"plugins/",resource:e,suffix:"/plugin"+r+".js"};e=Sx.createUrl(t,e),Sx.load(e.resource,e)})}else Sx.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+r+".js"})})},nI=function(t,e){var n=Xs.ScriptLoader;eI(n,t,e,function(){Qk(n,t),tI(t.settings,e),n.loadQueue(function(){t.removed||$k.init(t)},t,function(e){Cx.pluginLoadError(t,e[0]),t.removed||$k.init(t)})})},rI={render:function(t){var e=t.settings,n=t.id,r=function(){Yk.unbind(window,"ready",r),t.render()};if(pn.Event.domLoaded){if(t.getElement()&&Gt.contentEditable){e.inline?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");var i=t.getElement().form||Yk.getParent(n,"form");i&&(t.formElement=i,e.hidden_input&&!/TEXTAREA|INPUT/i.test(t.getElement().nodeName)&&(Yk.insertAfter(Yk.create("input",{type:"hidden",name:n}),n),t.hasHiddenInput=!0),t.formEventDelegate=function(e){t.fire(e.type,e)},Yk.bind(i,"submit reset",t.formEventDelegate),t.on("reset",function(){t.setContent(t.startContent,{format:"raw"})}),!e.submit_patch||i.submit.nodeType||i.submit.length||i._mceOldSubmit||(i._mceOldSubmit=i.submit,i.submit=function(){return t.editorManager.triggerSave(),t.setDirty(!1),i._mceOldSubmit(i)})),t.windowManager=D(t),t.notificationManager=A(t),"xml"===e.encoding&&t.on("GetContent",function(e){e.save&&(e.content=Yk.encode(e.content))}),e.add_form_submit_trigger&&t.on("submit",function(){t.initialized&&t.save()}),e.add_unload_trigger&&(t._beforeUnload=function(){!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),nI(t,t.suffix)}}else Yk.bind(window,"ready",r)}},iI={add:function(e,t,n){var r=e.sidebars?e.sidebars:[];r.push({name:t,settings:n}),e.sidebars=r}},oI=yr.each,aI=yr.trim,sI="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),uI={ftp:21,http:80,https:443,mailto:25},lI=function(r,e){var t,n,i=this;if(r=aI(r),t=(e=i.settings=e||{}).base_uri,/^([\w\-]+):([^\/]{2})/i.test(r)||/^\s*#/.test(r))i.source=r;else{var o=0===r.indexOf("//");0!==r.indexOf("/")||o||(r=(t&&t.protocol||"http")+"://mce_host"+r),/^[\w\-]*:?\/\//.test(r)||(n=e.base_uri?e.base_uri.path:new lI(document.location.href).directory,""==e.base_uri.protocol?r="//mce_host"+i.toAbsPath(n,r):(r=/([^#?]*)([#?]?.*)/.exec(r),r=(t&&t.protocol||"http")+"://mce_host"+i.toAbsPath(n,r[1])+r[2])),r=r.replace(/@@/g,"(mce_at)"),r=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(r),oI(sI,function(e,t){var n=r[t];n&&(n=n.replace(/\(mce_at\)/g,"@@")),i[e]=n}),t&&(i.protocol||(i.protocol=t.protocol),i.userInfo||(i.userInfo=t.userInfo),i.port||"mce_host"!==i.host||(i.port=t.port),i.host&&"mce_host"!==i.host||(i.host=t.host),i.source=""),o&&(i.protocol="")}};lI.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t,n=this;if("./"===e)return e;if("mce_host"!==(e=new lI(e,{base_uri:n})).host&&n.host!==e.host&&e.host||n.port!==e.port||n.protocol!==e.protocol&&""!==e.protocol)return e.getURI();var r=n.getURI(),i=e.getURI();return r===i||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===i?r:(t=n.toRelPath(n.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return(e=new lI(e,{base_uri:this})).getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=uI[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,r,i,o=0,a="";if(e=(e=e.substring(0,e.lastIndexOf("/"))).split("/"),n=t.split("/"),e.length>=n.length)for(r=0,i=e.length;r<i;r++)if(r>=n.length||e[r]!==n[r]){o=r+1;break}if(e.length<n.length)for(r=0,i=n.length;r<i;r++)if(r>=e.length||e[r]!==n[r]){o=r+1;break}if(1===o)return t;for(r=0,i=e.length-(o-1);r<i;r++)a+="../";for(r=o-1,i=n.length;r<i;r++)a+=r!==o-1?"/"+n[r]:n[r];return a},toAbsPath:function(e,t){var n,r,i,o=0,a=[];for(r=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),oI(e,function(e){e&&a.push(e)}),e=a,n=t.length-1,a=[];0<=n;n--)0!==t[n].length&&"."!==t[n]&&(".."!==t[n]?0<o?o--:a.push(t[n]):o++);return 0!==(i=(n=e.length-o)<=0?a.reverse().join("/"):e.slice(0,n).join("/")+"/"+a.reverse().join("/")).indexOf("/")&&(i="/"+i),r&&i.lastIndexOf("/")!==i.length-1&&(i+=r),i},getURI:function(e){var t,n=this;return n.source&&!e||(t="",e||(n.protocol?t+=n.protocol+"://":t+="//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},lI.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),(n=/data:([^;]+)/.exec(e[0]))&&(t=n[1]),{type:t,data:e[1]}},lI.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t};var cI="html",fI=function(e,t){var n=mp.getForcedRootBlock(e),r=new RegExp("^(<"+n+"[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/"+n+">[\r\n]*|<br \\/>[\r\n]*)$");return t.replace(r,"")},pI=function(e,t,n){var r;if(t.format=t.format?t.format:cI,t.get=!0,t.getInner=!0,t.no_events||e.fire("BeforeGetContent",t),"raw"===t.format)r=yr.trim(pE.trimExternal(e.serializer,n.innerHTML));else if("text"===t.format)r=ul.trim(n.innerText||n.textContent);else{if("tree"===t.format)return e.serializer.serialize(n,t);r=fI(e,e.serializer.serialize(n,t))}return"text"===t.format||Ua(ji.fromDom(n))?t.content=r:t.content=yr.trim(r),t.no_events||e.fire("GetContent",t),t.content},dI=function(t,n){return void 0===n&&(n={}),Ne.from(t.getBody()).fold(ye("tree"===n.format?new CS("body",11):""),function(e){return pI(t,n,e)})},hI=function(e,t){t(e),e.firstChild&&hI(e.firstChild,t),e.next&&hI(e.next,t)},mI=function(e,n,t){var r={},i={},o=[];for(var a in t.firstChild&&hI(t.firstChild,function(t){Ke(e,function(e){e.name===t.name&&(r[e.name]?r[e.name].nodes.push(t):r[e.name]={filter:e,nodes:[t]})}),Ke(n,function(e){"string"==typeof t.attr(e.name)&&(i[e.name]?i[e.name].nodes.push(t):i[e.name]={filter:e,nodes:[t]})})}),r)r.hasOwnProperty(a)&&o.push(r[a]);for(var a in i)i.hasOwnProperty(a)&&o.push(i[a]);return o},gI=function(e,t,n){var r=mI(e,t,n);Ke(r,function(t){Ke(t.filter.callbacks,function(e){e(t.nodes,t.filter.name,{})})})},yI="html",vI=function(e){return e instanceof CS},_I=function(r){sx.hasFocus(r)&&Sd.firstPositionIn(r.getBody()).each(function(e){var t=e.getNode(),n=os.isTable(t)?Sd.firstPositionIn(t).getOr(e):e;r.selection.setRng(n.toRange())})},bI=function(e,t){e.dom.setHTML(e.getBody(),t),_I(e)},xI=function(e,t,n,r){var i,o;return 0===n.length||/^\s+$/.test(n)?(o='<br data-mce-bogus="1">',"TABLE"===t.nodeName?n="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+o+"</li>"),(i=mp.getForcedRootBlock(e))&&e.schema.isValidChild(t.nodeName.toLowerCase(),i.toLowerCase())?(n=o,n=e.dom.createHTML(i,e.settings.forced_root_block_attrs,n)):n||(n='<br data-mce-bogus="1">'),bI(e,n),e.fire("SetContent",r)):("raw"!==r.format&&(n=I({validate:e.validate},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0}))),r.content=Ua(ji.fromDom(t))?n:yr.trim(n),bI(e,r.content),r.no_events||e.fire("SetContent",r)),r.content},wI=function(e,t,n,r){gI(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);var i=I({validate:e.validate},e.schema).serialize(n);return r.content=Ua(ji.fromDom(t))?i:yr.trim(i),bI(e,r.content),r.no_events||e.fire("SetContent",r),n},EI=function(t,n,r){return void 0===r&&(r={}),r.format=r.format?r.format:yI,r.set=!0,r.content=vI(n)?"":n,vI(n)||r.no_events||(t.fire("BeforeSetContent",r),n=r.content),Ne.from(t.getBody()).fold(ye(n),function(e){return vI(n)?wI(t,e,n,r):xI(t,e,n,r)})},CI=qs.DOM,SI=function(e){CI.setStyle(e.id,"display",e.orgDisplay)},TI=function(e){return Ne.from(e).each(function(e){return e.destroy()})},AI=function(e){e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)},kI=function(e){var t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),CI.unbind(t,"submit reset",e.formEventDelegate))},II=function(e){if(!e.removed){var t=e._selectionOverrides,n=e.editorUpload,r=e.getBody(),i=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&i&&CI.remove(i.nextSibling),!e.inline&&r&&SI(e),Tb.fireRemove(e),e.editorManager.remove(e),CI.remove(e.getContainer()),TI(t),TI(n),e.destroy()}},DI=function(e,t){var n=e.selection,r=e.dom;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),TI(n),TI(r)),kI(e),AI(e),e.destroyed=!0):e.remove())},PI=qs.DOM,OI=yr.extend,RI=yr.each,NI=yr.resolve,LI=Gt.ie,MI=function(e,t,n){var r=this,i=r.documentBaseUrl=n.documentBaseURL,o=n.baseURI;t=bm(r,e,i,n.defaultSettings,t),r.settings=t,h.language=t.language||"en",h.languageLoad=t.language_load,h.baseURL=n.baseURL,r.id=e,r.setDirty(!1),r.plugins={},r.documentBaseURI=new lI(t.document_base_url,{base_uri:o}),r.baseURI=o,r.contentCSS=[],r.contentStyles=[],r.shortcuts=new S(r),r.loadedCSS={},r.editorCommands=new C(r),r.suffix=n.suffix,r.editorManager=n,r.inline=t.inline,r.buttons={},r.menuItems={},t.cache_suffix&&(Gt.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,"")),!1===t.override_viewport&&(Gt.overrideViewPort=!1),n.fire("SetupEditor",{editor:r}),r.execCallback("setup",r),r.$=Br.overrideDefaults(function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}})};MI.prototype={render:function(){rI.render(this)},focus:function(e){sx.focus(this,e)},hasFocus:function(){return sx.hasFocus(this)},execCallback:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,i=this,o=i.settings[e];if(o)return i.callbackLookup&&(r=i.callbackLookup[e])&&(o=r.func,r=r.scope),"string"==typeof o&&(r=(r=o.replace(/\.\w+$/,""))?NI(r):0,o=NI(o),i.callbackLookup=i.callbackLookup||{},i.callbackLookup[e]={func:o,scope:r}),o.apply(r||i,Array.prototype.slice.call(arguments,1))},translate:function(e){if(e&&yr.is(e,"string")){var n=this.settings.language||"en",r=this.editorManager.i18n;e=r.data[n+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,t){return r.data[n+"."+t]||"{#"+t+"}"})}return this.editorManager.translate(e)},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(t!==undefined?t:"{#"+e+"}")},getParam:function(e,t,n){return Sm(this,e,t,n)},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.stateSelector&&"undefined"==typeof t.active&&(t.active=!1),t.text||t.icon||(t.icon=e),n.buttons=n.buttons,t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addSidebar:function(e,t){return iI.add(this,e,t)},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems,n.menuItems[e]=t},addContextToolbar:function(e,t){var n,r=this;r.contextToolbars=r.contextToolbars||[],"string"==typeof e&&(n=e,e=function(e){return r.dom.is(e,n)}),r.contextToolbars.push({id:zx.uuid("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable=!0:(PI.show(e.getContainer()),PI.hide(e.id)),e.load(),e.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(LI&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(PI.hide(e.getContainer()),PI.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t,n=this,r=n.getElement();return n.removed?"":r?((e=e||{}).load=!0,t=n.setContent(r.value!==undefined?r.value:r.innerHTML,e),e.element=r,e.no_events||n.fire("LoadContent",e),e.element=r=null,t):void 0},save:function(e){var t,n,r=this,i=r.getElement();if(i&&r.initialized&&!r.removed)return(e=e||{}).save=!0,e.element=i,t=e.content=r.getContent(e),e.no_events||r.fire("SaveContent",e),"raw"===e.format&&r.fire("RawSaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(i.nodeName)?i.value=t:(!e.is_removing&&r.inline||(i.innerHTML=t),(n=PI.getParent(r.id,"form"))&&RI(
n.elements,function(e){if(e.name===r.id)return e.value=t,!1})),e.element=i=null,!1!==e.set_dirty&&r.setDirty(!1),t},setContent:function(e,t){return EI(this,e,t)},getContent:function(e){return dI(this,e)},insertContent:function(e,t){t&&(e=OI({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.fire("dirty")},setMode:function(e){Db(this,e)},getContainer:function(){var e=this;return e.container||(e.container=PI.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=PI.get(this.id)),this.targetElm},getWin:function(){var e,t=this;return t.contentWindow||(e=t.iframeElement)&&(t.contentWindow=e.contentWindow),t.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin())&&(t.contentDocument=e.document),t.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var r=this,i=r.settings;return i.urlconverter_callback?r.execCallback("urlconverter_callback",e,n,!0,t):!i.convert_urls||n&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:i.relative_urls?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,i.remove_script_host)},addVisual:function(e){var n,r=this,i=r.settings,o=r.dom;e=e||r.getBody(),r.hasVisual===undefined&&(r.hasVisual=i.visual),RI(o.select("table,a",e),function(e){var t;switch(e.nodeName){case"TABLE":return n=i.visual_table_class||"mce-item-table",void((t=o.getAttrib(e,"border"))&&"0"!==t||!r.hasVisual?o.removeClass(e,n):o.addClass(e,n));case"A":return void(o.getAttrib(e,"href")||(t=o.getAttrib(e,"name")||e.id,n=i.visual_anchor_class||"mce-item-anchor",t&&r.hasVisual?o.addClass(e,n):o.removeClass(e,n)))}}),r.fire("VisualAid",{element:e,hasVisual:r.hasVisual})},remove:function(){II(this)},destroy:function(e){DI(this,e)},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},OI(MI.prototype,Fb);var BI,zI,FI,jI={isEditorUIElement:function(e){return-1!==e.className.toString().indexOf("mce-")}},UI=function(e){return"nodechange"===e.type&&e.selectionChange},VI=function(e,t){var n=function(){t.throttle()};qs.DOM.bind(document,"mouseup",n),e.on("remove",function(){qs.DOM.unbind(document,"mouseup",n)})},qI=function(e){e.on("focusout",function(){pb.store(e)})},HI=function(e,t){e.on("mouseup touchend",function(){t.throttle()})},WI=function(t,e){Li.detect().browser.isIE()?qI(t):HI(t,e),t.on("keyup nodechange",function(e){UI(e)||pb.store(t)})},GI={register:function(e){var t=cu(function(){pb.store(e)},0);e.inline&&VI(e,t),e.on("init",function(){WI(e,t)}),e.on("remove",function(){t.cancel()})}},ZI=qs.DOM,XI=function(e){return jI.isEditorUIElement(e)},KI=function(t,e){var n=t?t.settings.custom_ui_selector:"";return null!==ZI.getParent(e,function(e){return XI(e)||!!n&&t.dom.is(e,n)})},$I=function(){try{return document.activeElement}catch(e){return document.body}},YI=function(r,e){var t=e.editor;GI.register(t),t.on("focusin",function(){var e=this,t=r.focusedEditor;t!==e&&(t&&t.fire("blur",{focusedEditor:e}),r.setActive(e),(r.focusedEditor=e).fire("focus",{blurredEditor:t}),e.focus(!0))}),t.on("focusout",function(){var t=this;Qt.setEditorTimeout(t,function(){var e=r.focusedEditor;KI(t,$I())||e!==t||(t.fire("blur",{focusedEditor:null}),r.focusedEditor=null)})}),BI||(BI=function(e){var t,n=r.activeEditor;t=e.target,n&&t.ownerDocument===document&&(t===document.body||KI(n,t)||r.focusedEditor!==n||(n.fire("blur",{focusedEditor:null}),r.focusedEditor=null))},ZI.bind(document,"focusin",BI))},JI=function(e,t){e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(ZI.unbind(document,"focusin",BI),BI=null)},QI={setup:function(e){e.on("AddEditor",_e(YI,e)),e.on("RemoveEditor",_e(JI,e))},isEditorUIElement:XI,isUIElement:KI},eD={},tD="en",nD={setCode:function(e){e&&(tD=e,this.rtl=!!this.data[e]&&"rtl"===this.data[e]._dir)},getCode:function(){return tD},rtl:!1,add:function(e,t){var n=eD[e];for(var r in n||(eD[e]=n={}),t)n[r]=t[r];this.setCode(e)},translate:function(e){var t=eD[tD]||{},n=function(e){return yr.is(e,"function")?Object.prototype.toString.call(e):r(e)?"":""+e},r=function(e){return""===e||null===e||yr.is(e,"undefined")},i=function(e){return e=n(e),yr.hasOwn(t,e)?n(t[e]):e};if(r(e))return"";if(yr.is(e,"object")&&yr.hasOwn(e,"raw"))return n(e.raw);if(yr.is(e,"array")){var o=e.slice(1);e=i(e[0]).replace(/\{([0-9]+)\}/g,function(e,t){return yr.hasOwn(o,t)?n(o[t]):e})}return i(e).replace(/{context:\w+}$/,"")},data:eD},rD=qs.DOM,iD=yr.explode,oD=yr.each,aD=yr.extend,sD=0,uD=!1,lD=[],cD=[],fD=function(e){return"length"!==e},pD=function(t){oD(FI.get(),function(e){"scroll"===t.type?e.fire("ScrollWindow",t):e.fire("ResizeWindow",t)})},dD=function(e){e!==uD&&(e?Br(window).on("resize scroll",pD):Br(window).off("resize scroll",pD),uD=e)},hD=function(t){var e=cD;delete lD[t.id];for(var n=0;n<lD.length;n++)if(lD[n]===t){lD.splice(n,1);break}return cD=Je(cD,function(e){return t!==e}),FI.activeEditor===t&&(FI.activeEditor=0<cD.length?cD[0]:null),FI.focusedEditor===t&&(FI.focusedEditor=null),e.length!==cD.length},mD=function(e){return e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(hD(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null),e};aD(FI={defaultSettings:{},$:Br,majorVersion:"4",minorVersion:"8.3",releaseDate:"2018-09-13",editors:lD,i18n:nD,activeEditor:null,settings:{},setup:function(){var e,t,n,r,i=this,o="";if(t=lI.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),n=window.tinymce||window.tinyMCEPreInit)e=n.base||n.baseURL,o=n.suffix;else{for(var a=document.getElementsByTagName("script"),s=0;s<a.length;s++){var u=(r=a[s].src).substring(r.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(r)){-1!==u.indexOf(".min")&&(o=".min"),e=r.substring(0,r.lastIndexOf("/"));break}}!e&&document.currentScript&&(-1!==(r=document.currentScript.src).indexOf(".min")&&(o=".min"),e=r.substring(0,r.lastIndexOf("/")))}i.baseURL=new lI(t).toAbsolute(e),i.documentBaseURL=t,i.baseURI=new lI(i.baseURL),i.suffix=o,QI.setup(i)},overrideDefaults:function(e){var t,n;(t=e.base_url)&&(this.baseURL=new lI(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new lI(this.baseURL)),n=e.suffix,e.suffix&&(this.suffix=n);var r=(this.defaultSettings=e).plugin_base_urls;for(var i in r)h.PluginManager.urls[i]=r[i]},init:function(r){var n,i,s=this;i=yr.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var t=function(e,t){return e.inline&&t.tagName.toLowerCase()in i},u=function(e){var t=e.id;return t||(t=(t=e.name)&&!rD.get(t)?e.name:rD.uniqueId(),e.setAttribute("id",t)),t},e=function(e){var t=r[e];if(t)return t.apply(s,Array.prototype.slice.call(arguments,2))},o=function(e,t){return t.constructor===RegExp?t.test(e.className):rD.hasClass(e,t)},l=function(t){var e,n=[];if(Gt.ie&&Gt.ie<11)return Cx.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(t.types)return oD(t.types,function(e){n=n.concat(rD.select(e.selector))}),n;if(t.selector)return rD.select(t.selector);if(t.target)return[t.target];switch(t.mode){case"exact":0<(e=t.elements||"").length&&oD(iD(e),function(t){var e;(e=rD.get(t))?n.push(e):oD(document.forms,function(e){oD(e.elements,function(e){e.name===t&&(t="mce_editor_"+sD++,rD.setAttrib(e,"id",t),n.push(e))})})});break;case"textareas":case"specific_textareas":oD(rD.select("textarea"),function(e){t.editor_deselector&&o(e,t.editor_deselector)||t.editor_selector&&!o(e,t.editor_selector)||n.push(e)})}return n},c=function(e){n=e},f=function(){var i,o=0,a=[],n=function(e,t,n){var r=new MI(e,t,s);a.push(r),r.on("init",function(){++o===i.length&&c(a)}),r.targetElm=r.targetElm||n,r.render()};rD.unbind(window,"ready",f),e("onpageload"),i=Br.unique(l(r)),r.types?oD(r.types,function(t){yr.each(i,function(e){return!rD.is(e,t.selector)||(n(u(e),aD({},r,t),e),!1)})}):(yr.each(i,function(e){mD(s.get(e.id))}),0===(i=yr.grep(i,function(e){return!s.get(e.id)})).length?c([]):oD(i,function(e){t(r,e)?Cx.initError("Could not initialize inline editor on invalid inline target element",e):n(u(e),r,e)}))};return s.settings=r,rD.bind(window,"ready",f),new Xt(function(t){n?t(n):c=function(e){t(e)}})},get:function(t){return 0===arguments.length?cD.slice(0):Be(t)?tt(cD,function(e){return e.id===t}).getOr(null):qe(t)&&cD[t]?cD[t]:null},add:function(e){var t=this;return lD[e.id]===e||(null===t.get(e.id)&&(fD(e.id)&&(lD[e.id]=e),lD.push(e),cD.push(e)),dD(!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),zI||(zI=function(){t.fire("BeforeUnload")},rD.bind(window,"beforeunload",zI))),e},createEditor:function(e,t){return this.add(new MI(e,t,this))},remove:function(e){var t,n,r=this;if(e){if(!Be(e))return n=e,je(r.get(n.id))?null:(hD(n)&&r.fire("RemoveEditor",{editor:n}),0===cD.length&&rD.unbind(window,"beforeunload",zI),n.remove(),dD(0<cD.length),n);oD(rD.select(e),function(e){(n=r.get(e.id))&&r.remove(n)})}else for(t=cD.length-1;0<=t;t--)r.remove(cD[t])},execCommand:function(e,t,n){var r=this,i=r.get(n);switch(e){case"mceAddEditor":return r.get(n)||new MI(n,r.settings,r).render(),!0;case"mceRemoveEditor":return i&&i.remove(),!0;case"mceToggleEditor":return i?i.isHidden()?i.show():i.hide():r.execCommand("mceAddEditor",0,n),!0}return!!r.activeEditor&&r.activeEditor.execCommand(e,t,n)},triggerSave:function(){oD(cD,function(e){e.save()})},addI18n:function(e,t){nD.add(e,t)},translate:function(e){return nD.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},Sb),FI.setup();var gD,yD=FI;(gD=K||(K={})).compareRanges=v_.isEq,gD.getCaretRangeFromPoint=YS.fromPoint,gD.getSelectedNode=Yl,gD.getNode=Jl;var vD,_D,bD=K,xD=Math.min,wD=Math.max,ED=Math.round,CD=function(e,t,n){var r,i,o,a,s,u;return r=t.x,i=t.y,o=e.w,a=e.h,s=t.w,u=t.h,"b"===(n=(n||"").split(""))[0]&&(i+=u),"r"===n[1]&&(r+=s),"c"===n[0]&&(i+=ED(u/2)),"c"===n[1]&&(r+=ED(s/2)),"b"===n[3]&&(i-=a),"r"===n[4]&&(r-=o),"c"===n[3]&&(i-=ED(a/2)),"c"===n[4]&&(r-=ED(o/2)),ID(r,i,o,a)},SD=function(e,t,n,r){var i,o;for(o=0;o<r.length;o++)if((i=CD(e,t,r[o])).x>=n.x&&i.x+i.w<=n.w+n.x&&i.y>=n.y&&i.y+i.h<=n.h+n.y)return r[o];return null},TD=function(e,t,n){return ID(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},AD=function(e,t){var n,r,i,o;return n=wD(e.x,t.x),r=wD(e.y,t.y),i=xD(e.x+e.w,t.x+t.w),o=xD(e.y+e.h,t.y+t.h),i-n<0||o-r<0?null:ID(n,r,i-n,o-r)},kD=function(e,t,n){var r,i,o,a,s,u,l,c,f,p;return s=e.x,u=e.y,l=e.x+e.w,c=e.y+e.h,f=t.x+t.w,p=t.y+t.h,r=wD(0,t.x-s),i=wD(0,t.y-u),o=wD(0,l-f),a=wD(0,c-p),s+=r,u+=i,n&&(l+=r,c+=i,s-=o,u-=a),ID(s,u,(l-=o)-s,(c-=a)-u)},ID=function(e,t,n,r){return{x:e,y:t,w:n,h:r}},DD=function(e){return ID(e.left,e.top,e.width,e.height)},PD={inflate:TD,relativePosition:CD,findBestRelativePosition:SD,intersect:AD,clamp:kD,create:ID,fromClientRect:DD},OD={},RD={add:function(e,t){OD[e.toLowerCase()]=t},has:function(e){return!!OD[e.toLowerCase()]},get:function(e){var t=e.toLowerCase(),n=OD.hasOwnProperty(t)?OD[t]:null;if(null===n)throw new Error("Could not find module for type: "+e);return n},create:function(e,t){var n;if("string"==typeof e?(t=t||{}).type=e:e=(t=e).type,e=e.toLowerCase(),!(n=OD[e]))throw new Error("Could not find control by type: "+e);return(n=new n(t)).type=e,n}},ND=yr.each,LD=yr.extend,MD=function(){};MD.extend=vD=function(r){var e,t,n,i=this,o=i.prototype,a=function(){var e,t,n,r=this;if(!_D&&(r.init&&r.init.apply(r,arguments),t=r.Mixins))for(e=t.length;e--;)(n=t[e]).init&&n.init.apply(r,arguments)},s=function(){return this},u=function(r,i){return function(){var e,t=this,n=t._super;return t._super=o[r],e=i.apply(t,arguments),t._super=n,e}};for(t in _D=!0,e=new i,_D=!1,r.Mixins&&(ND(r.Mixins,function(e){for(var t in e)"init"!==t&&(r[t]=e[t])}),o.Mixins&&(r.Mixins=o.Mixins.concat(r.Mixins))),r.Methods&&ND(r.Methods.split(","),function(e){r[e]=s}),r.Properties&&ND(r.Properties.split(","),function(e){var n="_"+e;r[e]=function(e){var t=this;return e!==undefined?(t[n]=e,t):t[n]}}),r.Statics&&ND(r.Statics,function(e,t){a[t]=e}),r.Defaults&&o.Defaults&&(r.Defaults=LD({},o.Defaults,r.Defaults)),r)"function"==typeof(n=r[t])&&o[t]?e[t]=u(t,n):e[t]=n;return a.prototype=e,(a.constructor=a).extend=vD,a};var BD=Math.min,zD=Math.max,FD=Math.round,jD=function(e){var n={},s=0,u=0,l=0,t=function(e,t,n){var r,i,o,a;return i=r=0,(o=BD(e/=255,BD(t/=255,n/=255)))===(a=zD(e,zD(t,n)))?{h:0,s:0,v:100*(i=o)}:(r=(a-o)/a,{h:FD(60*((e===o?3:n===o?1:5)-(e===o?t-n:n===o?e-t:n-e)/((i=a)-o))),s:FD(100*r),v:FD(100*i)})},r=function(e,t,n){var r,i,o,a;if(e=(parseInt(e,10)||0)%360,t=parseInt(t,10)/100,n=parseInt(n,10)/100,t=zD(0,BD(t,1)),n=zD(0,BD(n,1)),0!==t){switch(r=e/60,o=(i=n*t)*(1-Math.abs(r%2-1)),a=n-i,Math.floor(r)){case 0:s=i,u=o,l=0;break;case 1:s=o,u=i,l=0;break;case 2:s=0,u=i,l=o;break;case 3:s=0,u=o,l=i;break;case 4:s=o,u=0,l=i;break;case 5:s=i,u=0,l=o;break;default:s=u=l=0}s=FD(255*(s+a)),u=FD(255*(u+a)),l=FD(255*(l+a))}else s=u=l=FD(255*n)},i=function(){var e=function(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e};return"#"+e(s)+e(u)+e(l)},o=function(){return{r:s,g:u,b:l}},a=function(){return t(s,u,l)},c=function(e){var t;return"object"==typeof e?"r"in e?(s=e.r,u=e.g,l=e.b):"v"in e&&r(e.h,e.s,e.v):(t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(s=parseInt(t[1],10),u=parseInt(t[2],10),l=parseInt(t[3],10)):(t=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(s=parseInt(t[1],16),u=parseInt(t[2],16),l=parseInt(t[3],16)):(t=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(s=parseInt(t[1]+t[1],16),u=parseInt(t[2]+t[2],16),l=parseInt(t[3]+t[3],16)),s=s<0?0:255<s?255:s,u=u<0?0:255<u?255:u,l=l<0?0:255<l?255:l,n};return e&&c(e),n.toRgb=o,n.toHsv=a,n.toHex=i,n.parse=c,n},UD=function(e,n){var r,i,t,o;if(n=n||'"',null===e)return"null";if("string"==(t=typeof e))return i="\bb\tt\nn\ff\rr\"\"''\\\\",n+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return'"'===n&&"'"===e?e:(r=i.indexOf(t))+1?"\\"+i.charAt(r+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)})+n;if("object"===t){if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(r=0,i="[";r<e.length;r++)i+=(0<r?",":"")+UD(e[r],n);return i+"]"}for(o in i="{",e)e.hasOwnProperty(o)&&(i+="function"!=typeof e[o]?(1<i.length?","+n:n)+o+n+":"+UD(e[o],n):"");return i+"}"}return""+e},VD={serialize:UD,parse:function(e){try{return JSON.parse(e)}catch(t){}}},qD={callbacks:{},count:0,send:function(t){var n=this,r=qs.DOM,i=t.count!==undefined?t.count:n.count,o="tinymce_jsonp_"+i;n.callbacks[i]=function(e){r.remove(o),delete n.callbacks[i],t.callback(e)},r.add(r.doc.body,"script",{id:o,src:t.url,type:"text/javascript"}),n.count++}},HD={send:function(e){var t,n=0,r=function(){!e.async||4===t.readyState||1e4<n++?(e.success&&n<1e4&&200===t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,1e4<n?"TIMED_OUT":"GENERAL",t,e),t=null):setTimeout(r,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",HD.fire("beforeInitialize",{settings:e}),t=new P){if(t.overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(t.withCredentials=!0),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&yr.each(e.requestheaders,function(e){t.setRequestHeader(e.key,e.value)}),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),(t=HD.fire("beforeSend",{xhr:t,settings:e}).xhr).send(e.data),!e.async)return r();setTimeout(r,10)}}};yr.extend(HD,Sb);var WD=yr.extend,GD=function(e){this.settings=WD({},e),this.count=0};GD.sendRPC=function(e){return(new GD).send(e)},GD.prototype={send:function(n){var r=n.error,i=n.success;(n=WD(this.settings,n)).success=function(e,t){void 0===(e=VD.parse(e))&&(e={error:"JSON Parse error."}),e.error?r.call(n.error_scope||n.scope,e.error,t):i.call(n.success_scope||n.scope,e.result)},n.error=function(e,t){r&&r.call(n.error_scope||n.scope,e,t)},n.data=VD.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",HD.send(n)}};var ZD,XD=function(){return n={},r=[],e={getItem:function(e){var t=n[e];return t||null},setItem:function(e,t){r.push(e),n[e]=String(t)},key:function(e){return r[e]},removeItem:function(t){r=r.filter(function(e){return e===t}),delete n[t]},clear:function(){r=[],n={}},length:0},Object.defineProperty(e,"length",{get:function(){return r.length},configurable:!1,enumerable:!1}),e;var n,r,e};try{ZD=window.localStorage}catch(eP){ZD=XD()}var KD,$D=yD,YD={geom:{Rect:PD},util:{Promise:Xt,Delay:Qt,Tools:yr,VK:$w,URI:lI,Class:MD,EventDispatcher:bb,Observable:Sb,I18n:nD,XHR:HD,JSON:VD,JSONRequest:GD,JSONP:qD,LocalStorage:ZD,Color:jD},dom:{EventUtils:pn,Sizzle:$n,DomQuery:Br,TreeWalker:xe,DOMUtils:qs,ScriptLoader:Xs,RangeUtils:bD,Serializer:G,ControlSelection:GS,BookmarkManager:VS,Selection:zT,Event:pn.Event},html:{Styles:Ee,Entities:Es,Node:CS,Schema:we,SaxParser:lE,DomParser:H,Writer:E,Serializer:I},ui:{Factory:RD},Env:Gt,AddOnManager:h,Annotator:w,Formatter:q,UndoManager:U,EditorCommands:C,WindowManager:D,NotificationManager:A,EditorObservable:Fb,Shortcuts:S,Editor:MI,FocusManager:jI,EditorManager:yD,DOM:qs.DOM,ScriptLoader:Xs.ScriptLoader,PluginManager:h.PluginManager,ThemeManager:h.ThemeManager,trim:yr.trim,isArray:yr.isArray,is:yr.is,toArray:yr.toArray,makeMap:yr.makeMap,each:yr.each,map:yr.map,grep:yr.grep,inArray:yr.inArray,extend:yr.extend,create:yr.create,walk:yr.walk,createNS:yr.createNS,resolve:yr.resolve,explode:yr.explode,_addCacheSuffix:yr._addCacheSuffix,isOpera:Gt.opera,isWebKit:Gt.webkit,isIE:Gt.ie,isGecko:Gt.gecko,isMac:Gt.mac},JD=$D=yr.extend($D,YD),QD=function(e){if("object"==typeof module)try{module.exports=e}catch(t){}};KD=JD,window.tinymce=KD,window.tinyMCE=KD,QD(JD)}(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).mapboxgl=t()}(this,function(){"use strict";function e(e,t){if(i)if(o){var n="var sharedChunk = {}; ("+i+")(sharedChunk); ("+o+")(sharedChunk);",r={};i(r),(a=t(r)).workerUrl=window.URL.createObjectURL(new Blob([n],{type:"text/javascript"}))}else o=t;else i=t}var i,o,a;return e(["exports"],function(e){function t(e,t){return e(t={exports:{}},t.exports),t.exports}function n(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=r}function r(e,t){this.x=e,this.y=t}function p(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!p(e[n],t[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!p(e[r],t[r]))return!1;return!0}return e===t}function o(e){if(e<=0)return 0;if(1<=e)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function i(e,t,n,r){var i=new zo(e,t,n,r);return function(e){return i.solve(e)}}function l(e,t,n){return Math.min(n,Math.max(t,e))}function a(e,t,n){var r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i}function s(e,t,r){if(!e.length)return r(null,[]);var i=e.length,o=new Array(e.length),a=null;e.forEach(function(e,n){t(e,function(e,t){e&&(a=e),o[n]=t,0==--i&&r(a,o)})})}function u(e){var t=[];for(var n in e)t.push(e[n]);return t}function c(e,t){var n=[];for(var r in e)r in t||n.push(r);return n}function h(e){for(var t=[],n=arguments.length-1;0<n--;)t[n]=arguments[n+1];for(var r=0,i=t;r<i.length;r+=1){var o=i[r];for(var a in o)e[a]=o[a]}return e}function f(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r];i in e&&(n[i]=e[i])}return n}function d(){return qo++}function m(){function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}return t()}function g(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function y(e,t){e.forEach(function(e){t[e]&&(t[e]=t[e].bind(t))})}function v(e,t){return-1!==e.indexOf(t,e.length-t.length)}function _(e,t,n){var r={};for(var i in e)r[i]=t.call(n||this,e[i],i,e);return r}function b(e,t,n){var r={};for(var i in e)t.call(n||this,e[i],i,e)&&(r[i]=e[i]);return r}function x(e){return Array.isArray(e)?e.map(x):"object"==typeof e&&e?_(e,x):e}function w(e,t){for(var n=0;n<e.length;n++)if(0<=t.indexOf(e[n]))return!0;return!1}function E(e){Ho[e]||("undefined"!=typeof console&&console.warn(e),Ho[e]=!0)}function C(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function S(e){for(var t=0,n=0,r=e.length,i=r-1,o=void 0,a=void 0;n<r;i=n++)o=e[n],t+=((a=e[i]).x-o.x)*(o.y+a.y);return t}function T(e){var t=e[0],n=e[1],r=e[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:t*Math.cos(n)*Math.sin(r),y:t*Math.sin(n)*Math.sin(r),z:t*Math.cos(r)}}function A(e){var t=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,o={};if(e.replace(t,function(e,t,n,r){var i=n||r;return o[t]=!i||i.toLowerCase(),""}),o["max-age"]){var n=parseInt(o["max-age"],10);isNaN(n)?delete o["max-age"]:o["max-age"]=n}return o}function k(e){try{var t=self[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(n){return!1}}function I(e){return self.btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode(Number("0x"+t))}))}function D(e){return decodeURIComponent(self.atob(e).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function P(e){!Yo&&Uo&&(Jo?O(e):jo=e)}function O(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,Uo),e.isContextLost())return;$o.supported=!0}catch(n){}e.deleteTexture(t),Yo=!0}function R(e,t){var n=M(Ko.API_URL);if(e.protocol=n.protocol,e.authority=n.authority,"/"!==n.path&&(e.path=""+n.path+e.path),!Ko.REQUIRE_ACCESS_TOKEN)return B(e);if(!(t=t||Ko.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+Qo);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+Qo);return e.params.push("access_token="+t),B(e)}function N(e){return 0===e.indexOf("mapbox:")}function L(e){return ta.test(e)}function M(e){var t=e.match(fa);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function B(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function z(e){if(!e)return null;var t=e.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(D(t[1]))}catch(n){return null}}function F(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function j(e,n){var t=new self.AbortController,r=new self.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:wa(),signal:t.signal});return"json"===e.type&&r.headers.set("Accept","application/json"),self.fetch(r).then(function(t){t.ok?t[e.type||"text"]().then(function(e){n(null,e,t.headers.get("Cache-Control"),t.headers.get("Expires"))})["catch"](function(e){return n(new Error(e.message))}):n(new xa(t.statusText,t.status,e.url))})["catch"](function(e){20!==e.code&&n(new Error(e.message))}),{cancel:function(){return t.abort()}}}function U(n,r){var i=new self.XMLHttpRequest;for(var e in i.open(n.method||"GET",n.url,!0),"arrayBuffer"===n.type&&(i.responseType="arraybuffer"),n.headers)i.setRequestHeader(e,n.headers[e]);return"json"===n.type&&i.setRequestHeader("Accept","application/json"),i.withCredentials="include"===n.credentials,i.onerror=function(){r(new Error(i.statusText))},i.onload=function(){if((200<=i.status&&i.status<300||0===i.status)&&null!==i.response){var e=i.response;if("json"===n.type)try{e=JSON.parse(i.response)}catch(t){return r(t)}r(null,e,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else r(new xa(i.statusText,i.status,n.url))},i.send(n.body),{cancel:function(){return i.abort()}}}function V(e){var t=self.document.createElement("a");return t.href=e,t.protocol===self.document.location.protocol&&t.host===self.document.location.host}function q(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function H(e,t,n){if(n&&n[e]){var r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}function W(e){var t=e.key,n=e.value;return n?[new Na(t,n,"constants have been deprecated as of v8")]:[]}function G(e){for(var t=[],n=arguments.length-1;0<n--;)t[n]=arguments[n+1];for(var r=0,i=t;r<i.length;r+=1){var o=i[r];for(var a in o)e[a]=o[a]}return e}function Z(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function X(e){return Array.isArray(e)?e.map(X):Z(e)}function K(e,t){return{kind:"array",itemType:e,N:t}}function $(e){if("array"===e.kind){var t=$(e.itemType);return"number"==typeof e.N?"array<"+t+", "+e.N+">":"value"===e.itemType.kind?"array":"array<"+t+">"}return e.kind}function Y(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!Y(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var n=0,r=Za;n<r.length;n+=1){if(!Y(r[n],t))return null}}return"Expected "+$(e)+" but found "+$(t)+" instead."}function J(e,t,n,r){return"number"==typeof e&&0<=e&&e<=255&&"number"==typeof t&&0<=t&&t<=255&&"number"==typeof n&&0<=n&&n<=255?void 0===r||"number"==typeof r&&0<=r&&r<=1?null:"Invalid rgba value ["+[e,t,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Q(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Ka)return!0;if(e instanceof $a)return!0;if(e instanceof Ja)return!0;if(Array.isArray(e)){for(var t=0,n=e;t<n.length;t+=1){if(!Q(n[t]))return!1}return!0}if("object"==typeof e){for(var r in e)if(!Q(e[r]))return!1;return!0}return!1}function ee(e){if(null===e)return Ba;if("string"==typeof e)return Fa;if("boolean"==typeof e)return ja;if("number"==typeof e)return za;if(e instanceof Ka)return Ua;if(e instanceof $a)return Wa;if(e instanceof Ja)return Ga;if(Array.isArray(e)){for(var t,n=e.length,r=0,i=e;r<i.length;r+=1){var o=ee(i[r]);if(t){if(t===o)continue;t=qa;break}t=o}return K(t||qa,n)}return Mo("object"==typeof e),Va}function te(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof Ka||e instanceof Ja?e.toString():JSON.stringify(e)}function ne(e){return Array.isArray(e)?"("+e.map($).join(", ")+")":"("+$(e.type)+"...)"}function re(e){if(e instanceof us){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}var t=!0;return e.eachChild(function(e){t&&!re(e)&&(t=!1)}),t}function ie(e){if(e instanceof us&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild(function(e){t&&!ie(e)&&(t=!1)}),t}function oe(e,t){if(e instanceof us&&0<=t.indexOf(e.name))return!1;var n=!0;return e.eachChild(function(e){n&&!oe(e,t)&&(n=!1)}),n}function ae(e){if(e instanceof cs)return ae(e.boundExpression);if(e instanceof us&&"error"===e.name)return!1;if(e instanceof ls)return!1;var t=e instanceof os||e instanceof ns,n=!0;return e.eachChild(function(e){n=t?n&&ae(e):n&&e instanceof Qa}),!!n&&(re(e)&&oe(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]))}function se(e,t){for(var n,r,i=0,o=e.length-1,a=0;i<=o;){if(n=e[a=Math.floor((i+o)/2)],r=e[a+1],t===n||n<t&&t<r)return a;if(n<t)i=a+1;else{if(!(t<n))throw new es("Input is not a number.");o=a-1}}return Math.max(a-1,0)}function ue(e,t,n){return e*(1-n)+t*n}function le(e,t,n){return new Ka(ue(e.r,t.r,n),ue(e.g,t.g,n),ue(e.b,t.b,n),ue(e.a,t.a,n))}function ce(e,n,r){return e.map(function(e,t){return ue(e,n[t],r)})}function fe(e){return bs<e?Math.pow(e,1/3):e/_s+ys}function pe(e){return vs<e?e*e*e:_s*(e-ys)}function de(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function he(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function me(e){var t=he(e.r),n=he(e.g),r=he(e.b),i=fe((.4124564*t+.3575761*n+.1804375*r)/hs),o=fe((.2126729*t+.7151522*n+.072175*r)/ms);return{l:116*o-16,a:500*(i-o),b:200*(o-fe((.0193339*t+.119192*n+.9503041*r)/gs)),alpha:e.a}}function ge(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=ms*pe(t),n=hs*pe(n),r=gs*pe(r),new Ka(de(3.2404542*n-1.5371385*t-.4985314*r),de(-.969266*n+1.8760108*t+.041556*r),de(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}function ye(e,t,n){return{l:ue(e.l,t.l,n),a:ue(e.a,t.a,n),b:ue(e.b,t.b,n),alpha:ue(e.alpha,t.alpha,n)}}function ve(e){var t=me(e),n=t.l,r=t.a,i=t.b,o=Math.atan2(i,r)*ws;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:e.a}}function _e(e){var t=e.h*xs,n=e.c;return ge({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})}function be(e,t,n){var r=t-e;return e+n*(180<r||r<-180?r-360*Math.round(r/360):r)}function xe(e,t,n){return{h:be(e.h,t.h,n),c:ue(e.c,t.c,n),l:ue(e.l,t.l,n),alpha:ue(e.alpha,t.alpha,n)}}function we(e,t,n,r){var i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}function Ee(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function Ce(e,t,n){return t===n}function Se(e,t,n){return t!==n}function Te(e,t,n){return t<n}function Ae(e,t,n){return n<t}function ke(e,t,n){return t<=n}function Ie(e,t,n){return n<=t}function De(e,t,n,r){return 0===r.compare(t,n)}function Pe(e,t,n,r){return!De(e,t,n,r)}function Oe(e,t,n,r){return r.compare(t,n)<0}function Re(e,t,n,r){return 0<r.compare(t,n)}function Ne(e,t,n,r){return r.compare(t,n)<=0}function Le(e,t,n,r){return 0<=r.compare(t,n)}function Me(l,c,f){var p="=="!==l&&"!="!==l;return function(){function a(e,t,n){this.type=ja,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return a.parse=function s(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var n=e[0],r=t.parse(e[1],1,qa);if(!r)return null;if(!Ee(n,r.type))return t.concat(1).error('"'+n+"\" comparisons are not supported for type '"+$(r.type)+"'.");var i=t.parse(e[2],2,qa);if(!i)return null;if(!Ee(n,i.type))return t.concat(2).error('"'+n+"\" comparisons are not supported for type '"+$(i.type)+"'.");if(r.type.kind!==i.type.kind&&"value"!==r.type.kind&&"value"!==i.type.kind)return t.error("Cannot compare types '"+$(r.type)+"' and '"+$(i.type)+"'.");p&&("value"===r.type.kind&&"value"!==i.type.kind?r=new ns(i.type,[r]):"value"!==r.type.kind&&"value"===i.type.kind&&(i=new ns(r.type,[i])));var o=null;if(4===e.length){if("string"!==r.type.kind&&"string"!==i.type.kind&&"value"!==r.type.kind&&"value"!==i.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(o=t.parse(e[3],3,Wa)))return null}return new a(r,i,o)},a.prototype.evaluate=function u(e){var t=this.lhs.evaluate(e),n=this.rhs.evaluate(e);if(p&&this.hasUntypedArgument){var r=ee(t),i=ee(n);if(r.kind!==i.kind||"string"!==r.kind&&"number"!==r.kind)throw new es('Expected arguments for "'+l+'" to be (string, string) or (number, number), but found ('+r.kind+", "+i.kind+") instead.")}if(this.collator&&!p&&this.hasUntypedArgument){var o=ee(t),a=ee(n);if("string"!==o.kind||"string"!==a.kind)return c(e,t,n)}return this.collator?f(e,t,n,this.collator.evaluate(e)):c(e,t,n)},a.prototype.eachChild=function t(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)},a.prototype.possibleOutputs=function e(){return[!0,!1]},
a.prototype.serialize=function n(){var t=[l];return this.eachChild(function(e){t.push(e.serialize())}),t},a}()}function Be(e,t){var n=t[0],r=t[1],i=t[2],o=t[3];n=n.evaluate(e),r=r.evaluate(e),i=i.evaluate(e);var a=o?o.evaluate(e):1,s=J(n,r,i,a);if(s)throw new es(s);return new Ka(n/255*a,r/255*a,i/255*a,a)}function ze(e,t){return e in t}function Fe(e,t){var n=t[e];return void 0===n?null:n}function je(e,t,n,r){for(;n<=r;){var i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}function Ue(e){return{type:e}}function Ve(e){return{result:"success",value:e}}function qe(e){return{result:"error",value:e}}function He(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function We(e){return!!e.expression&&-1<e.expression.parameters.indexOf("zoom")}function Ge(e){return!!e.expression&&e.expression.interpolated}function Ze(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Xe(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Ke(e){return e}function $e(r,i){var o,a,s,e="color"===i.type,t=r.stops&&"object"==typeof r.stops[0][0],n=t||r.property!==undefined,u=t||!n,l=r.type||(Ge(i)?"exponential":"interval");if(e&&((r=G({},r)).stops&&(r.stops=r.stops.map(function(e){return[e[0],Ka.parse(e[1])]})),r["default"]?r["default"]=Ka.parse(r["default"]):r["default"]=Ka.parse(i["default"])),r.colorSpace&&"rgb"!==r.colorSpace&&!Ss[r.colorSpace])throw new Error("Unknown color space: "+r.colorSpace);if("exponential"===l)o=et;else if("interval"===l)o=Qe;else if("categorical"===l){o=Je,a=Object.create(null);for(var c=0,f=r.stops;c<f.length;c+=1){var p=f[c];a[p[0]]=p[1]}s=typeof r.stops[0][0]}else{if("identity"!==l)throw new Error('Unknown function type "'+l+'"');o=tt}if(t){for(var d={},h=[],m=0;m<r.stops.length;m++){var g=r.stops[m],y=g[0].zoom;d[y]===undefined&&(d[y]={zoom:y,type:r.type,property:r.property,"default":r["default"],stops:[]},h.push(y)),d[y].stops.push([g[0].value,g[1]])}for(var v=[],_=0,b=h;_<b.length;_+=1){var x=b[_];v.push([d[x].zoom,$e(d[x],i)])}return{kind:"composite",interpolationFactor:Ts.interpolationFactor.bind(undefined,{name:"linear"}),zoomStops:v.map(function(e){return e[0]}),evaluate:function w(e,t){var n=e.zoom;return et({stops:v,base:r.base},i,n).evaluate(n,t)}}}return u?{kind:"camera",interpolationFactor:"exponential"===l?Ts.interpolationFactor.bind(undefined,{name:"exponential",base:r.base!==undefined?r.base:1}):function(){return 0},zoomStops:r.stops.map(function(e){return e[0]}),evaluate:function(e){var t=e.zoom;return o(r,i,t,a,s)}}:{kind:"source",evaluate:function E(e,t){var n=t&&t.properties?t.properties[r.property]:undefined;return n===undefined?Ye(r["default"],i["default"]):o(r,i,n,a,s)}}}function Ye(e,t,n){return e!==undefined?e:t!==undefined?t:n!==undefined?n:void 0}function Je(e,t,n,r,i){return Ye(typeof n===i?r[n]:undefined,e["default"],t["default"])}function Qe(e,t,n){if("number"!==Ze(n))return Ye(e["default"],t["default"]);var r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];var i=nt(e.stops,n);return e.stops[i][1]}function et(e,t,n){var r=e.base!==undefined?e.base:1;if("number"!==Ze(n))return Ye(e["default"],t["default"]);var i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];var o=nt(e.stops,n),a=rt(n,r,e.stops[o][0],e.stops[o+1][0]),s=e.stops[o][1],u=e.stops[o+1][1],l=ds[t.type]||Ke;if(e.colorSpace&&"rgb"!==e.colorSpace){var c=Ss[e.colorSpace];l=function(e,t){return c.reverse(c.interpolate(c.forward(e),c.forward(t),a))}}return"function"==typeof s.evaluate?{evaluate:function f(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=s.evaluate.apply(undefined,e),r=u.evaluate.apply(undefined,e);return n===undefined||r===undefined?undefined:l(n,r,a)}}:l(s,u,a)}function tt(e,t,n){return"color"===t.type?n=Ka.parse(n):"formatted"===t.type?n=Ja.fromString(n.toString()):Ze(n)===t.type||"enum"===t.type&&t.values[n]||(n=undefined),Ye(n,e["default"],t["default"])}function nt(e,t){for(var n,r,i=0,o=e.length-1,a=0;i<=o;){if(n=e[a=Math.floor((i+o)/2)][0],r=e[a+1][0],t===n||n<t&&t<r)return a;n<t?i=a+1:t<n&&(o=a-1)}return Math.max(a-1,0)}function rt(e,t,n,r){var i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}function it(e){return Array.isArray(e)&&0<e.length&&"string"==typeof e[0]&&e[0]in js}function ot(e,t){var n=new fs(js,[],t?lt(t):undefined),r=n.parse(e,undefined,undefined,undefined,t&&"string"===t.type?{typeAnnotation:"coerce"}:undefined);return r?Ve(new Us(r,t)):(Mo(0<n.errors.length),qe(n.errors))}function at(e,t){if("error"===(e=ot(e,t)).result)return e;var n=e.value.expression,r=re(n);if(!r&&!He(t))return qe([new La("","data expressions not supported")]);var i=oe(n,["zoom"]);if(!i&&!We(t))return qe([new La("","zoom expressions not supported")]);var o=ut(n);return o||i?o instanceof La?qe([o]):o instanceof Ts&&!Ge(t)?qe([new La("",'"interpolate" expressions cannot be used with this property')]):Ve(o?new qs(r?"camera":"composite",e.value,o):new Vs(r?"constant":"source",e.value)):qe([new La("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}function st(e,t){if(Xe(e))return new Hs(e,t);if(it(e)){var n=at(e,t);if("error"===n.result)throw new Error(n.value.map(function(e){return e.key+": "+e.message}).join(", "));return n.value}var r=e;return"string"==typeof e&&"color"===t.type&&(r=Ka.parse(e)),{kind:"constant",evaluate:function(){return r}}}function ut(e){var n=null;if(e instanceof ks)n=ut(e.result);else if(e instanceof As)for(var t=0,r=e.args;t<r.length;t+=1){var i=r[t];if(n=ut(i))break}else(e instanceof ps||e instanceof Ts)&&e.input instanceof us&&"zoom"===e.input.name&&(n=e);return n instanceof La||e.eachChild(function(e){var t=ut(e);t instanceof La?n=t:!n&&t?n=new La("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&t&&n!==t&&(n=new La("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function lt(e){var t={color:Ua,string:Fa,number:za,"enum":Fa,"boolean":ja,formatted:Ga};return"array"===e.type?K(t[e.value]||qa,e.length):t[e.type]}function ct(e){return"color"===e.type&&Xe(e["default"])?new Ka(0,0,0,0):"color"===e.type?Ka.parse(e["default"])||null:e["default"]===undefined?null:e["default"]}function ft(e){var t=e.key,n=e.value,r=e.valueSpec||{},i=e.objectElementValidators||{},o=e.style,a=e.styleSpec,s=[],u=Ze(n);if("object"!==u)return[new Na(t,n,"object expected, "+u+" found")];for(var l in n){var c=l.split(".")[0],f=r[c]||r["*"],p=void 0;if(i[c])p=i[c];else if(r[c])p=zt;else if(i["*"])p=i["*"];else{if(!r["*"]){s.push(new Na(t,n[l],'unknown property "'+l+'"'));continue}p=zt}s=s.concat(p({key:(t?t+".":t)+l,value:n[l],valueSpec:f,style:o,styleSpec:a,object:n,objectKey:l},n))}for(var d in r)i[d]||r[d].required&&r[d]["default"]===undefined&&n[d]===undefined&&s.push(new Na(t,n,'missing required property "'+d+'"'));return s}function pt(e){var t=e.value,n=e.valueSpec,r=e.style,i=e.styleSpec,o=e.key,a=e.arrayElementValidator||zt;if("array"!==Ze(t))return[new Na(o,t,"array expected, "+Ze(t)+" found")];if(n.length&&t.length!==n.length)return[new Na(o,t,"array length "+n.length+" expected, length "+t.length+" found")];if(n["min-length"]&&t.length<n["min-length"])return[new Na(o,t,"array length at least "+n["min-length"]+" expected, length "+t.length+" found")];var s={type:n.value};i.$version<7&&(s["function"]=n["function"]),"object"===Ze(n.value)&&(s=n.value);for(var u=[],l=0;l<t.length;l++)u=u.concat(a({array:t,arrayIndex:l,value:t[l],valueSpec:s,style:r,styleSpec:i,key:o+"["+l+"]"}));return u}function dt(e){var t=e.key,n=e.value,r=e.valueSpec,i=Ze(n);return"number"!==i?[new Na(t,n,"number expected, "+i+" found")]:"minimum"in r&&n<r.minimum?[new Na(t,n,n+" is less than the minimum value "+r.minimum)]:"maximum"in r&&n>r.maximum?[new Na(t,n,n+" is greater than the maximum value "+r.maximum)]:[]}function ht(e){function t(e){if("identity"===l)return[new Na(e.key,e.value,'identity function may not have a "stops" property')];var t=[],n=e.value;return t=t.concat(pt({key:e.key,value:n,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:r})),"array"===Ze(n)&&0===n.length&&t.push(new Na(e.key,n,"array must have at least one stop")),t}function r(e){var t=[],n=e.value,r=e.key;if("array"!==Ze(n))return[new Na(r,n,"array expected, "+Ze(n)+" found")];if(2!==n.length)return[new Na(r,n,"array length 2 expected, length "+n.length+" found")];if(d){if("object"!==Ze(n[0]))return[new Na(r,n,"object expected, "+Ze(n[0])+" found")];if(n[0].zoom===undefined)return[new Na(r,n,"object stop key must have zoom")];if(n[0].value===undefined)return[new Na(r,n,"object stop key must have value")];if(o&&o>Z(n[0].zoom))return[new Na(r,n[0].zoom,"stop zoom values must appear in ascending order")];Z(n[0].zoom)!==o&&(o=Z(n[0].zoom),s=undefined,c={}),t=t.concat(ft({key:r+"[0]",value:n[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:dt,value:i}}))}else t=t.concat(i({key:r+"[0]",value:n[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},n));return it(X(n[1]))?t.concat([new Na(r+"[1]",n[1],"expressions are not allowed in function stops.")]):t.concat(zt({key:r+"[1]",value:n[1],valueSpec:u,style:e.style,styleSpec:e.styleSpec}))}function i(e,t){var n=Ze(e.value),r=Z(e.value),i=null!==e.value?e.value:t;if(a){if(n!==a)return[new Na(e.key,i,n+" stop domain type must match previous stop domain type "+a)]}else a=n;if("number"!==n&&"string"!==n&&"boolean"!==n)return[new Na(e.key,i,"stop domain value must be a number, string, or boolean")];if("number"!==n&&"categorical"!==l){var o="number expected, "+n+" found";return He(u)&&l===undefined&&(o+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Na(e.key,i,o)]}return"categorical"!==l||"number"!==n||isFinite(r)&&Math.floor(r)===r?"categorical"!==l&&"number"===n&&s!==undefined&&r<s?[new Na(e.key,i,"stop domain values must appear in ascending order")]:(s=r,"categorical"===l&&r in c?[new Na(e.key,i,"stop domain values must be unique")]:(c[r]=!0,[])):[new Na(e.key,i,"integer expected, found "+r)]}function n(e){return zt({key:e.key,value:e.value,valueSpec:u,style:e.style,styleSpec:e.styleSpec})}var a,s,o,u=e.valueSpec,l=Z(e.value.type),c={},f="categorical"!==l&&e.value.property===undefined,p=!f,d="array"===Ze(e.value.stops)&&"array"===Ze(e.value.stops[0])&&"object"===Ze(e.value.stops[0][0]),h=ft({key:e.key,value:e.value,valueSpec:e.styleSpec["function"],style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:t,"default":n}});return"identity"===l&&f&&h.push(new Na(e.key,e.value,'missing required property "property"')),"identity"===l||e.value.stops||h.push(new Na(e.key,e.value,'missing required property "stops"')),"exponential"===l&&e.valueSpec.expression&&!Ge(e.valueSpec)&&h.push(new Na(e.key,e.value,"exponential functions not supported")),8<=e.styleSpec.$version&&(p&&!He(e.valueSpec)?h.push(new Na(e.key,e.value,"property functions not supported")):f&&!We(e.valueSpec)&&h.push(new Na(e.key,e.value,"zoom functions not supported"))),"categorical"!==l&&!d||e.value.property!==undefined||h.push(new Na(e.key,e.value,'"property" property is required')),h}function mt(t){var e=("property"===t.expressionContext?at:ot)(X(t.value),t.valueSpec);if("error"===e.result)return e.value.map(function(e){return new Na(""+t.key+e.key,t.value,e.message)});var n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&-1!==n.possibleOutputs().indexOf(undefined))return[new Na(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!ie(n))return[new Na(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!ie(n))return[new Na(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!oe(n,["zoom","feature-state"]))return[new Na(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!re(n))return[new Na(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function gt(e){var t=e.value,n=e.key,r=Ze(t);return"boolean"!==r?[new Na(n,t,"boolean expected, "+r+" found")]:[]}function yt(e){var t=e.key,n=e.value,r=Ze(n);return"string"!==r?[new Na(t,n,"color expected, "+r+" found")]:null===Xa(n)?[new Na(t,n,'color expected, "'+n+'" found')]:[]}function vt(e){var t=e.key,n=e.value,r=e.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(Z(n))&&i.push(new Na(t,n,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(r.values).indexOf(Z(n))&&i.push(new Na(t,n,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(n)+" found")),i}function _t(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return 2<=e.length&&"$id"!==e[1]&&"$type"!==e[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,n=e.slice(1);t<n.length;t+=1){var r=n[t];if(!_t(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}function bt(e){if(null===e||e===undefined)return function(){return!0};_t(e)||(e=wt(e));var n=ot(e,Ws);if("error"===n.result)throw new Error(n.value.map(function(e){return e.key+": "+e.message}).join(", "));return function(e,t){return n.value.evaluate(e,t)}}function xt(e,t){return e<t?-1:t<e?1:0}function wt(e){if(!e)return!0;var t=e[0];return e.length<=1?"any"!==t:"=="===t?Et(e[1],e[2],"=="):"!="===t?At(Et(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?Et(e[1],e[2],t):"any"===t?Ct(e.slice(1)):"all"===t?["all"].concat(e.slice(1).map(wt)):"none"===t?["all"].concat(e.slice(1).map(wt).map(At)):"in"===t?St(e[1],e.slice(2)):"!in"===t?At(St(e[1],e.slice(2))):"has"===t?Tt(e[1]):"!has"!==t||At(Tt(e[1]))}function Et(e,t,n){switch(e){case"$type":return["filter-type-"+n,t];case"$id":return["filter-id-"+n,t];default:return["filter-"+n,e,t]}}function Ct(e){return["any"].concat(e.map(wt))}function St(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return 200<t.length&&!t.some(function(e){return typeof e!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(xt)]]:["filter-in-small",e,["literal",t]]}}function Tt(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function At(e){return["!",e]}function kt(e){return _t(X(e.value))?mt(G({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):It(e)}function It(e){var t=e.value,n=e.key;if("array"!==Ze(t))return[new Na(n,t,"array expected, "+Ze(t)+" found")];var r,i=e.styleSpec,o=[];if(t.length<1)return[new Na(n,t,"filter array must have at least 1 element")];switch(o=o.concat(vt({key:n+"[0]",value:t[0],valueSpec:i.filter_operator,style:e.style,styleSpec:e.styleSpec})),Z(t[0])){case"<":case"<=":case">":case">=":2<=t.length&&"$type"===Z(t[1])&&o.push(new Na(n,t,'"$type" cannot be use with operator "'+t[0]+'"'));case"==":case"!=":3!==t.length&&o.push(new Na(n,t,'filter array for operator "'+t[0]+'" must have 3 elements'));case"in":case"!in":2<=t.length&&"string"!==(r=Ze(t[1]))&&o.push(new Na(n+"[1]",t[1],"string expected, "+r+" found"));for(var a=2;a<t.length;a++)r=Ze(t[a]),"$type"===Z(t[1])?o=o.concat(vt({key:n+"["+a+"]",value:t[a],valueSpec:i.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&o.push(new Na(n+"["+a+"]",t[a],"string, number, or boolean expected, "+r+" found"));break;case"any":case"all":case"none":for(var s=1;s<t.length;s++)o=o.concat(It({key:n+"["+s+"]",value:t[s],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":r=Ze(t[1]),2!==t.length?o.push(new Na(n,t,'filter array for "'+t[0]+'" operator must have 2 elements')):"string"!==r&&o.push(new Na(n+"[1]",t[1],"string expected, "+r+" found"))}return o}function Dt(e,t){var n=e.key,r=e.style,i=e.styleSpec,o=e.value,a=e.objectKey,s=i[t+"_"+e.layerType];if(!s)return[];var u=a.match(/^(.*)-transition$/);if("paint"===t&&u&&s[u[1]]&&s[u[1]].transition)return zt({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});var l,c=e.valueSpec||s[a];if(!c)return[new Na(n,o,'unknown property "'+a+'"')];if("string"===Ze(o)&&He(c)&&!c.tokens&&(l=/^{([^}]+)}$/.exec(o)))return[new Na(n,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];var f=[];return"symbol"===e.layerType&&("text-field"===a&&r&&!r.glyphs&&f.push(new Na(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Xe(X(o))&&"identity"===Z(o.type)&&f.push(new Na(n,o,'"text-font" does not support identity functions'))),f.concat(zt({key:e.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:a}))}function Pt(e){return Dt(e,"paint")}function Ot(e){return Dt(e,"layout")}function Rt(e){var t=[],n=e.value,r=e.key,i=e.style,o=e.styleSpec;n.type||n.ref||t.push(new Na(r,n,'either "type" or "ref" is required'));var a,s=Z(n.type),u=Z(n.ref);if(n.id)for(var l=Z(n.id),c=0;c<e.arrayIndex;c++){var f=i.layers[c];Z(f.id)===l&&t.push(new Na(r,n.id,'duplicate layer id "'+n.id+'", previously used at line '+f.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach(function(e){e in n&&t.push(new Na(r,n[e],'"'+e+'" is prohibited for ref layers'))}),i.layers.forEach(function(e){Z(e.id)===u&&(a=e)}),a?a.ref?t.push(new Na(r,n.ref,"ref cannot reference another ref layer")):s=Z(a.type):t.push(new Na(r,n.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(n.source){var p=i.sources&&i.sources[n.source],d=p&&Z(p.type);p?"vector"===d&&"raster"===s?t.push(new Na(r,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===d&&"raster"!==s?t.push(new Na(r,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==d||n["source-layer"]?"raster-dem"===d&&"hillshade"!==s?t.push(new Na(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===d&&p.lineMetrics||t.push(new Na(r,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new Na(r,n,'layer "'+n.id+'" must specify a "source-layer"')):t.push(new Na(r,n.source,'source "'+n.source+'" not found'))}else t.push(new Na(r,n,'missing required property "source"'));return t=t.concat(ft({key:r,value:n,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function h(){return[]},type:function s(){return zt({key:r+".type",value:n.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"})},filter:kt,layout:function m(e){return ft({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function t(e){return Ot(G({layerType:s},e))}}})},paint:function g(e){return ft({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function t(e){return Pt(G({layerType:s},e))}}})}}}))}function Nt(e){var t=e.value,n=e.key,r=e.styleSpec,i=e.style;if(!t.type)return[new Na(n,t,'"type" is required')];var o,a=Z(t.type);switch(a){case"vector":case"raster":case"raster-dem":if(o=ft({key:n,value:t,valueSpec:r["source_"+a.replace("-","_")],style:e.style,styleSpec:r}),"url"in t)for(var s in t)["type","url","tileSize"].indexOf(s)<0&&o.push(new Na(n+"."+s,t[s],'a source with a "url" property may not include a "'+s+'" property'));return o;case"geojson":if(o=ft({key:n,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r}),t.cluster)for(var u in t.clusterProperties){var l=t.clusterProperties[u],c=l[0],f=l[1],p="string"==typeof c?[c,["accumulated"],["get",u]]:c;o.push.apply(o,mt({key:n+"."+u+".map",value:f,expressionContext:"cluster-map"})),o.push.apply(o,mt({key:n+"."+u+".reduce",value:p,expressionContext:"cluster-reduce"}))}return o;case"video":return ft({key:n,value:t,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return ft({key:n,value:t,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new Na(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return vt({key:n+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function Lt(e){var t=e.value,n=e.styleSpec,r=n.light,i=e.style,o=[],a=Ze(t);if(t===undefined)return o;if("object"!==a)return o=o.concat([new Na("light",t,"object expected, "+a+" found")]);for(var s in t){var u=s.match(/^(.*)-transition$/);o=u&&r[u[1]]&&r[u[1]].transition?o.concat(zt({key:s,value:t[s],valueSpec:n.transition,style:i,styleSpec:n})):r[s]?o.concat(zt({key:s,value:t[s],valueSpec:r[s],style:i,styleSpec:n})):o.concat([new Na(s,t[s],'unknown property "'+s+'"')])}return o}function Mt(e){var t=e.value,n=e.key,r=Ze(t);return"string"!==r?[new Na(n,t,"string expected, "+r+" found")]:[]}function Bt(e){return 0===Mt(e).length?[]:mt(e)}function zt(e){var t=e.value,n=e.valueSpec,r=e.styleSpec;return n.expression&&Xe(Z(t))?ht(e):n.expression&&it(X(t))?mt(e):n.type&&Gs[n.type]?Gs[n.type](e):ft(G({},e,{valueSpec:n.type?r[n.type]:n}))}function Ft(e){var t=e.value,n=e.key,r=Mt(e);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new Na(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new Na(n,t,'"glyphs" url must include a "{range}" token'))),r}function jt(e,t){t=t||Ra;var n=[];return n=n.concat(zt({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Ft,"*":function r(){return[]}}})),e.constants&&(n=n.concat(W({key:"constants",value:e.constants,style:e,styleSpec:t}))),Ut(n)}function Ut(e){return[].concat(e).sort(function(e,t){return e.line-t.line})}function Vt(n){return function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return Ut(n.apply(this,e))}}function qt(e,t){var n=!1;if(t&&t.length)for(var r=0,i=t;r<i.length;r+=1){var o=i[r];e.fire(new Pa(new Error(o.message))),n=!0}return n}function Ht(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],t=i[1],n=i[2],this.d=t+2*n;for(var o=0;o<this.d*this.d;o++){var a=i[Js+o],s=i[Js+o+1];r.push(a===s?null:i.subarray(a,s))}var u=i[Js+r.length],l=i[Js+r.length+1];this.keys=i.subarray(u,l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var f=n/t*e;this.min=-f,this.max=e+f}function Wt(e,t,n){void 0===n&&(n={}),Mo(!eu[e],e+" is already registered."),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),eu[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}function Gt(e,t){if(null===e||e===undefined||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(e instanceof ArrayBuffer)return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var n=e;return t&&t.push(n.buffer),n}if(e instanceof Qs)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var r=[],i=0,o=e;i<o.length;i+=1){var a=o[i];r.push(Gt(a,t))}return r}if("object"==typeof e){var s=e.constructor,u=s._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class");Mo(eu[u]);var l=s.serialize?s.serialize(e,t):{};if(s.serialize)Mo(!t||l!==t[t.length-1]);else{for(var c in e)if(e.hasOwnProperty(c)&&!(0<=eu[u].omit.indexOf(c))){var f=e[c];l[c]=0<=eu[u].shallow.indexOf(c)?f:Gt(f,t)}e instanceof Error&&(l.message=e.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==u&&(l.$name=u),l}throw new Error("can't serialize object of type "+typeof e)}function Zt(e){if(null===e||e===undefined||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof ArrayBuffer||ArrayBuffer.isView(e)||e instanceof Qs)return e;if(Array.isArray(e))return e.map(Zt);if("object"==typeof e){var t=e.$name||"Object",n=eu[t].klass;if(!n)throw new Error("can't deserialize unregistered class "+t);if(n.deserialize)return n.deserialize(e);for(var r=Object.create(n.prototype),i=0,o=Object.keys(e);i<o.length;i+=1){var a=o[i];if("$name"!==a){var s=e[a];r[a]=0<=eu[t].shallow.indexOf(a)?s:Zt(s)}}return r}throw new Error("can't deserialize object of type "+typeof e)}function Xt(e){for(var t=0,n=e;t<n.length;t+=1){if(Jt(n[t].charCodeAt(0)))return!0}return!1}function Kt(e){for(var t=0,n=e;t<n.length;t+=1){if(!$t(n[t].charCodeAt(0)))return!1}return!0}function $t(e){return!iu.Arabic(e)&&(!iu["Arabic Supplement"](e)&&(!iu["Arabic Extended-A"](e)&&(!iu["Arabic Presentation Forms-A"](e)&&!iu["Arabic Presentation Forms-B"](e))))}function Yt(e){return!(e<11904)&&(!!iu["Bopomofo Extended"](e)||(!!iu.Bopomofo(e)||(!!iu["CJK Compatibility Forms"](e)||(!!iu["CJK Compatibility Ideographs"](e)||(!!iu["CJK Compatibility"](e)||(!!iu["CJK Radicals Supplement"](e)||(!!iu["CJK Strokes"](e)||(!!iu["CJK Symbols and Punctuation"](e)||(!!iu["CJK Unified Ideographs Extension A"](e)||(!!iu["CJK Unified Ideographs"](e)||(!!iu["Enclosed CJK Letters and Months"](e)||(!!iu["Halfwidth and Fullwidth Forms"](e)||(!!iu.Hiragana(e)||(!!iu["Ideographic Description Characters"](e)||(!!iu["Kangxi Radicals"](e)||(!!iu["Katakana Phonetic Extensions"](e)||(!!iu.Katakana(e)||(!!iu["Vertical Forms"](e)||(!!iu["Yi Radicals"](e)||!!iu["Yi Syllables"](e))))))))))))))))))))}function Jt(e){return 746===e||747===e||!(e<4352)&&(!!iu["Bopomofo Extended"](e)||(!!iu.Bopomofo(e)||(!(!iu["CJK Compatibility Forms"](e)||65097<=e&&e<=65103)||(!!iu["CJK Compatibility Ideographs"](e)||(!!iu["CJK Compatibility"](e)||(!!iu["CJK Radicals Supplement"](e)||(!!iu["CJK Strokes"](e)||(!(!iu["CJK Symbols and Punctuation"](e)||12296<=e&&e<=12305||12308<=e&&e<=12319||12336===e)||(!!iu["CJK Unified Ideographs Extension A"](e)||(!!iu["CJK Unified Ideographs"](e)||(!!iu["Enclosed CJK Letters and Months"](e)||(!!iu["Hangul Compatibility Jamo"](e)||(!!iu["Hangul Jamo Extended-A"](e)||(!!iu["Hangul Jamo Extended-B"](e)||(!!iu["Hangul Jamo"](e)||(!!iu["Hangul Syllables"](e)||(!!iu.Hiragana(e)||(!!iu["Ideographic Description Characters"](e)||(!!iu.Kanbun(e)||(!!iu["Kangxi Radicals"](e)||(!!iu["Katakana Phonetic Extensions"](e)||(!(!iu.Katakana(e)||12540===e)||(!(!iu["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||65306<=e&&e<=65310||65339===e||65341===e||65343===e||65371<=e&&e<=65503||65507===e||65512<=e&&e<=65519)||(!(!iu["Small Form Variants"](e)||65112<=e&&e<=65118||65123<=e&&e<=65126)||(!!iu["Unified Canadian Aboriginal Syllabics"](e)||(!!iu["Unified Canadian Aboriginal Syllabics Extended"](e)||(!!iu["Vertical Forms"](e)||(!!iu["Yijing Hexagram Symbols"](e)||(!!iu["Yi Syllables"](e)||!!iu["Yi Radicals"](e))))))))))))))))))))))))))))))}function Qt(e){return!(!iu["Latin-1 Supplement"](e)||167!==e&&169!==e&&174!==e&&177!==e&&188!==e&&189!==e&&190!==e&&215!==e&&247!==e)||(!(!iu["General Punctuation"](e)||8214!==e&&8224!==e&&8225!==e&&8240!==e&&8241!==e&&8251!==e&&8252!==e&&8258!==e&&8263!==e&&8264!==e&&8265!==e&&8273!==e)||(!!iu["Letterlike Symbols"](e)||(!!iu["Number Forms"](e)||(!(!iu["Miscellaneous Technical"](e)||!(8960<=e&&e<=8967||8972<=e&&e<=8991||8996<=e&&e<=9e3||9003===e||9085<=e&&e<=9114||9150<=e&&e<=9165||9167===e||9169<=e&&e<=9179||9186<=e&&e<=9215))||(!(!iu["Control Pictures"](e)||9251===e)||(!!iu["Optical Character Recognition"](e)||(!!iu["Enclosed Alphanumerics"](e)||(!!iu["Geometric Shapes"](e)||(!(!iu["Miscellaneous Symbols"](e)||9754<=e&&e<=9759)||(!(!iu["Miscellaneous Symbols and Arrows"](e)||!(11026<=e&&e<=11055||11088<=e&&e<=11097||11192<=e&&e<=11243))||(!!iu["CJK Symbols and Punctuation"](e)||(!!iu.Katakana(e)||(!!iu["Private Use Area"](e)||(!!iu["CJK Compatibility Forms"](e)||(!!iu["Small Form Variants"](e)||(!!iu["Halfwidth and Fullwidth Forms"](e)||(8734===e||8756===e||8757===e||9984<=e&&e<=10087||10102<=e&&e<=10131||65532===e||65533===e)))))))))))))))))}function en(e){return!(Jt(e)||Qt(e))}function tn(e,t){return!(!t&&(1424<=e&&e<=2303||iu["Arabic Presentation Forms-A"](e)||iu["Arabic Presentation Forms-B"](e)))&&!(2304<=e&&e<=3583||3840<=e&&e<=4255||iu.Khmer(e))}function nn(e,t){for(var n=0,r=e;n<r.length;n+=1){if(!tn(r[n].charCodeAt(0),t))return!1}return!0}function rn(e,i){void 0===i&&(i=1);var o=0,a=0;return{members:e.map(function(e){Mo(e.name.length);var t=on(e.type),n=o=an(o,Math.max(i,t)),r=e.components||1;return a=Math.max(a,t),o+=t*r,{name:e.name,type:e.type,components:r,offset:n}}),size:an(o,Math.max(a,i)),alignment:i}}function on(e){return Du[e].BYTES_PER_ELEMENT}function an(e,t){return Math.ceil(e/t)*t}function sn(e,t){return 256*(e=l(Math.floor(e),0,255))+(t=l(Math.floor(t),0,255))}function un(e,t,n,r){if(!(r<=n)){for(var i=e[n+r>>1],o=n-1,a=r+1;;){for(;e[++o]<i;);for(;e[--a]>i;);if(a<=o)break;ln(e,o,a),ln(t,3*o,3*a),ln(t,3*o+1,3*a+1),ln(t,3*o+2,3*a+2)}un(e,t,n,a),un(e,t,a+1,r)}}function ln(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function cn(e){return[sn(255*e.r,255*e.g),sn(255*e.b,255*e.a)]}function fn(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function pn(e){return{"line-pattern":{source:Fu,composite:Fu},"fill-pattern":{source:Fu,composite:Fu},"fill-extrusion-pattern":{source:Fu,composite:Fu}}[e]}function dn(e,t,n){var r={color:{source:el,composite:tl},number:{source:Xu,composite:el}},i=pn(e);return i&&i[n]||r[t][n]}function hn(e){return{min:-1*Math.pow(2,e-1),max:Math.pow(2,e-1)-1}}function mn(e){for(var t=Nl/e.extent,n=e.loadGeometry(),r=0;r<n.length;r++)for(var i=n[r],o=0;o<i.length;o++){var a=i[o];a.x=Math.round(a.x*t),a.y=Math.round(a.y*t),(a.x<Ll.min||a.x>Ll.max||a.y<Ll.min||a.y>Ll.max)&&E("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function gn(e,t,n,r,i){e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)}function yn(e,t){for(var n=0;n<e.length;n++)if(An(t,e[n]))return!0;for(var r=0;r<t.length;r++)if(An(e,t[r]))return!0;return!!wn(e,t)}function vn(e,t,n){return!!An(e,t)||!!Cn(t,e,n)}function _n(e,t){if(1===e.length)return Tn(t,e[0]);for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)if(An(e,r[i]))return!0;for(var o=0;o<e.length;o++)if(Tn(t,e[o]))return!0;for(var a=0;a<t.length;a++)if(wn(e,t[a]))return!0;return!1}function bn(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];if(3<=e.length)for(var o=0;o<i.length;o++)if(An(e,i[o]))return!0;if(xn(e,i,n))return!0}return!1}function xn(e,t,n){if(1<e.length){if(wn(e,t))return!0;for(var r=0;r<t.length;r++)if(Cn(t[r],e,n))return!0}for(var i=0;i<e.length;i++)if(Cn(e[i],t,n))return!0;return!1}function wn(e,t){if(0===e.length||0===t.length)return!1;for(var n=0;n<e.length-1;n++)for(var r=e[n],i=e[n+1],o=0;o<t.length-1;o++){if(En(r,i,t[o],t[o+1]))return!0}return!1}function En(e,t,n,r){return C(e,n,r)!==C(t,n,r)&&C(e,t,n)!==C(e,t,r)}function Cn(e,t,n){var r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(var i=1;i<t.length;i++){if(Sn(e,t[i-1],t[i])<r)return!0}return!1}function Sn(e,t,n){var r=t.distSqr(n);if(0===r)return e.distSqr(t);var i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return i<0?e.distSqr(t):1<i?e.distSqr(n):e.distSqr(n.sub(t)._mult(i)._add(t))}function Tn(e,t){for(var n,r,i,o=!1,a=0;a<e.length;a++)for(var s=0,u=(n=e[a]
).length-1;s<n.length;u=s++)r=n[s],i=n[u],r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(o=!o);return o}function An(e,t){for(var n=!1,r=0,i=e.length-1;r<e.length;i=r++){var o=e[r],a=e[i];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function kn(e,t,n,r,i){for(var o=0,a=e;o<a.length;o+=1){var s=a[o];if(t<=s.x&&n<=s.y&&r>=s.x&&i>=s.y)return!0}var u=[new Fo(t,n),new Fo(t,i),new Fo(r,i),new Fo(r,n)];if(2<e.length)for(var l=0,c=u;l<c.length;l+=1){if(An(e,c[l]))return!0}for(var f=0;f<e.length-1;f++){if(In(e[f],e[f+1],u))return!0}return!1}function In(e,t,n){var r=n[0],i=n[2];if(e.x<r.x&&t.x<r.x||e.x>i.x&&t.x>i.x||e.y<r.y&&t.y<r.y||e.y>i.y&&t.y>i.y)return!1;var o=C(e,t,n[0]);return o!==C(e,t,n[1])||o!==C(e,t,n[2])||o!==C(e,t,n[3])}function Dn(e,t,n){var r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).binders[e].maxValue}function Pn(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function On(e,t,n,r,i){if(!t[0]&&!t[1])return e;var o=Fo.convert(t)._mult(i);"viewport"===n&&o._rotate(-r);for(var a=[],s=0;s<e.length;s++){var u=e[s];a.push(u.sub(o))}return a}function Rn(){var e=new Xl(4);return Xl!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function Nn(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+o*s,e[1]=i*u+a*s,e[2]=r*-s+o*u,e[3]=i*-s+a*u,e}function Ln(){var e=new Xl(9);return Xl!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Mn(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Bn(){var e=new Xl(16);return Xl!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function zn(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Fn(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],p=t[10],d=t[11],h=t[12],m=t[13],g=t[14],y=t[15],v=n*s-r*a,_=n*u-i*a,b=n*l-o*a,x=r*u-i*s,w=r*l-o*s,E=i*l-o*u,C=c*m-f*h,S=c*g-p*h,T=c*y-d*h,A=f*g-p*m,k=f*y-d*m,I=p*y-d*g,D=v*I-_*k+b*A+x*T-w*S+E*C;return D?(D=1/D,e[0]=(s*I-u*k+l*A)*D,e[1]=(i*k-r*I-o*A)*D,e[2]=(m*E-g*w+y*x)*D,e[3]=(p*w-f*E-d*x)*D,e[4]=(u*T-a*I-l*S)*D,e[5]=(n*I-i*T+o*S)*D,e[6]=(g*b-h*E-y*_)*D,e[7]=(c*E-p*b+d*_)*D,e[8]=(a*k-s*T+l*C)*D,e[9]=(r*T-n*k-o*C)*D,e[10]=(h*w-m*b+y*v)*D,e[11]=(f*b-c*w-d*v)*D,e[12]=(s*S-a*A-u*C)*D,e[13]=(n*A-r*S+i*C)*D,e[14]=(m*_-h*x-g*v)*D,e[15]=(c*x-f*_+p*v)*D,e):null}function jn(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],p=t[9],d=t[10],h=t[11],m=t[12],g=t[13],y=t[14],v=t[15],_=n[0],b=n[1],x=n[2],w=n[3];return e[0]=_*r+b*s+x*f+w*m,e[1]=_*i+b*u+x*p+w*g,e[2]=_*o+b*l+x*d+w*y,e[3]=_*a+b*c+x*h+w*v,_=n[4],b=n[5],x=n[6],w=n[7],e[4]=_*r+b*s+x*f+w*m,e[5]=_*i+b*u+x*p+w*g,e[6]=_*o+b*l+x*d+w*y,e[7]=_*a+b*c+x*h+w*v,_=n[8],b=n[9],x=n[10],w=n[11],e[8]=_*r+b*s+x*f+w*m,e[9]=_*i+b*u+x*p+w*g,e[10]=_*o+b*l+x*d+w*y,e[11]=_*a+b*c+x*h+w*v,_=n[12],b=n[13],x=n[14],w=n[15],e[12]=_*r+b*s+x*f+w*m,e[13]=_*i+b*u+x*p+w*g,e[14]=_*o+b*l+x*d+w*y,e[15]=_*a+b*c+x*h+w*v,e}function Un(e,t,n){var r,i,o,a,s,u,l,c,f,p,d,h,m=n[0],g=n[1],y=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*y+t[12],e[13]=t[1]*m+t[5]*g+t[9]*y+t[13],e[14]=t[2]*m+t[6]*g+t[10]*y+t[14],e[15]=t[3]*m+t[7]*g+t[11]*y+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],p=t[9],d=t[10],h=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=f,e[9]=p,e[10]=d,e[11]=h,e[12]=r*m+s*g+f*y+t[12],e[13]=i*m+u*g+p*y+t[13],e[14]=o*m+l*g+d*y+t[14],e[15]=a*m+c*g+h*y+t[15]),e}function Vn(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function qn(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],f=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+l*r,e[5]=a*i+c*r,e[6]=s*i+f*r,e[7]=u*i+p*r,e[8]=l*i-o*r,e[9]=c*i-a*r,e[10]=f*i-s*r,e[11]=p*i-u*r,e}function Hn(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],l=t[4],c=t[5],f=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+l*r,e[1]=a*i+c*r,e[2]=s*i+f*r,e[3]=u*i+p*r,e[4]=l*i-o*r,e[5]=c*i-a*r,e[6]=f*i-s*r,e[7]=p*i-u*r,e}function Wn(e,t,n,r,i){var o,a=1/Math.tan(t/2);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==Infinity?(o=1/(r-i),e[10]=(i+r)*o,e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e}function Gn(e,t,n,r,i,o,a){var s=1/(t-n),u=1/(r-i),l=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(a+o)*l,e[15]=1,e}function Zn(){var e=new Xl(3);return Xl!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Xn(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function Kn(e,t,n){var r=new Xl(3);return r[0]=e,r[1]=t,r[2]=n,r}function $n(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return 0<o&&1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function Yn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Jn(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],u=n[2];return e[0]=i*u-o*s,e[1]=o*a-r*u,e[2]=r*s-i*a,e}function Qn(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e}function er(){var e=new Xl(4);return Xl!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function tr(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return 0<a&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=o*a,e}function nr(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}function rr(){var e=new Xl(4);return Xl!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function ir(e,t,n){.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function or(e,t,n,r){var i,o,a,s,u,l=t[0],c=t[1],f=t[2],p=t[3],d=n[0],h=n[1],m=n[2],g=n[3];return l*d+c*h+f*m+p*g<0&&(-o,-d,-h,-m,-g),Zl<1-o?(Math.acos(o),Math.sin(i),Math.sin((1-r)*i)/a,Math.sin(r*i)/a):(1-r,r),e[0]=s*l+u*d,e[1]=s*c+u*h,e[2]=s*f+u*m,e[3]=s*p+u*g,e}function ar(e,t){var n,r=t[0]+t[4]+t[8];if(0<r)Math.sqrt(r+1),e[3]=.5*n,.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&1,t[8]>t[3*i+i]&&2;var o=(i+1)%3,a=(i+2)%3;Math.sqrt(t[3*i+i]-t[3*o+o]-t[3*a+a]+1),e[i]=.5*n,.5/n,e[3]=(t[3*o+a]-t[3*a+o])*n,e[o]=(t[3*o+i]+t[3*i+o])*n,e[a]=(t[3*a+i]+t[3*i+a])*n}return e}function sr(){var e=new Xl(2);return Xl!=Float32Array&&(e[0]=0,e[1]=0),e}function ur(e,t){var n=nr([],[e.x,e.y,0,1],t);return new Fo(n[0]/n[3],n[1]/n[3])}function lr(e,t){return e.map(function(e){return ur(e,t)})}function cr(e,t,n,r){var i=t.width,o=t.height;if(r){if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return e.width=i,e.height=o,e.data=r,e}function fr(e,t,n){var r=t.width,i=t.height;if(r!==e.width||i!==e.height){var o=cr({},{width:r,height:i},n);pr(e,o,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,r),height:Math.min(e.height,i)},n),e.width=r,e.height=i,e.data=o.data}}function pr(e,t,n,r,i,o){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");var a=e.data,s=t.data;Mo(a!==s);for(var u=0;u<i.height;u++)for(var l=((n.y+u)*e.width+n.x)*o,c=((r.y+u)*t.width+r.x)*o,f=0;f<i.width*o;f++)s[c+f]=a[l+f];return t}function dr(e,t){for(var n=new Uint8Array(1024),r={},i=0,o=0;i<256;i++,o+=4){r[t]=i/255;var a=e.evaluate(r);n[o+0]=Math.floor(255*a.r/a.a),n[o+1]=Math.floor(255*a.g/a.a),n[o+2]=Math.floor(255*a.b/a.a),n[o+3]=Math.floor(255*a.a)}return new ec({width:256,height:1},n)}function hr(e,t,n){n=n||2;var r,i,o,a,s,u,l,c=t&&t.length,f=c?t[0]*n:e.length,p=mr(e,0,f,n,!0),d=[];if(!p||p.next===p.prev)return d;if(c&&(p=wr(e,t,p,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var h=n;h<f;h+=n)(s=e[h])<r&&(r=s),(u=e[h+1])<i&&(i=u),o<s&&(o=s),a<u&&(a=u);l=0!==(l=Math.max(o-r,a-i))?1/l:0}return yr(p,d,n,r,i,l),d}function mr(e,t,n,r,i){var o,a;if(i===0<Vr(e,t,n,r))for(o=t;o<n;o+=r)a=Fr(o,e[o],e[o+1],a);else for(o=n-r;t<=o;o-=r)a=Fr(o,e[o],e[o+1],a);return a&&Rr(a,a.next)&&(jr(a),a=a.next),a}function gr(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Rr(r,r.next)&&0!==Or(r.prev,r,r.next))r=r.next;else{if(jr(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function yr(e,t,n,r,i,o,a){if(e){!a&&o&&Tr(e,r,i,o);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,o?_r(e,r,i,o):vr(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),jr(e),e=u.next,l=u.next;else if((e=u)===l){a?1===a?yr(e=br(e,t,n),t,n,r,i,o,2):2===a&&xr(e,t,n,r,i,o):yr(gr(e),t,n,r,i,o,1);break}}}function vr(e){var t=e.prev,n=e,r=e.next;if(0<=Or(t,n,r))return!1;for(var i=e.next.next;i!==e.prev;){if(Dr(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&0<=Or(i.prev,i,i.next))return!1;i=i.next}return!0}function _r(e,t,n,r){var i=e.prev,o=e,a=e.next;if(0<=Or(i,o,a))return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=kr(s,u,t,n,r),p=kr(l,c,t,n,r),d=e.prevZ,h=e.nextZ;d&&d.z>=f&&h&&h.z<=p;){if(d!==e.prev&&d!==e.next&&Dr(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&0<=Or(d.prev,d,d.next))return!1;if(d=d.prevZ,h!==e.prev&&h!==e.next&&Dr(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&0<=Or(h.prev,h,h.next))return!1;h=h.nextZ}for(;d&&d.z>=f;){if(d!==e.prev&&d!==e.next&&Dr(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&0<=Or(d.prev,d,d.next))return!1;d=d.prevZ}for(;h&&h.z<=p;){if(h!==e.prev&&h!==e.next&&Dr(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&0<=Or(h.prev,h,h.next))return!1;h=h.nextZ}return!0}function br(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!Rr(i,o)&&Nr(i,r,r.next,o)&&Mr(i,o)&&Mr(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),jr(r),jr(r.next),r=e=o),r=r.next}while(r!==e);return r}function xr(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Pr(a,s)){var u=zr(a,s);return a=gr(a,a.next),u=gr(u,u.next),yr(a,t,n,r,i,o),void yr(u,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function wr(e,t,n,r){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=mr(e,t[i]*r,i<o-1?t[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(Ir(a));for(s.sort(Er),i=0;i<s.length;i++)Cr(s[i],n),n=gr(n,n.next);return n}function Er(e,t){return e.x-t.x}function Cr(e,t){if(t=Sr(e,t)){var n=zr(t,e);gr(n,n.next)}}function Sr(e,t){var n,r=t,i=e.x,o=e.y,a=-Infinity;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&a<s){if((a=s)===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,f=n.y,p=Infinity;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&Dr(o<f?i:a,o,c,f,o<f?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<p||u===p&&r.x>n.x)&&Mr(r,e)&&(n=r,p=u),r=r.next;return n}function Tr(e,t,n,r){for(var i=e;null===i.z&&(i.z=kr(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,(i=i.next)!==e;);i.prevZ.nextZ=null,i.prevZ=null,Ar(i)}function Ar(e){var t,n,r,i,o,a,s,u,l=1;do{for(n=e,o=e=null,a=0;n;){for(a++,r=n,t=s=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;0<s||0<u&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(n=(i=n).nextZ,s--):(r=(i=r).nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(1<a);return e}function kr(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Ir(e){for(var t=e,n=e;(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),(t=t.next)!==e;);return n}function Dr(e,t,n,r,i,o,a,s){return 0<=(i-a)*(t-s)-(e-a)*(o-s)&&0<=(e-a)*(r-s)-(n-a)*(t-s)&&0<=(n-a)*(o-s)-(i-a)*(r-s)}function Pr(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Lr(e,t)&&Mr(e,t)&&Mr(t,e)&&Br(e,t)}function Or(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Rr(e,t){return e.x===t.x&&e.y===t.y}function Nr(e,t,n,r){return!!(Rr(e,t)&&Rr(n,r)||Rr(e,r)&&Rr(n,t))||0<Or(e,t,n)!=0<Or(e,t,r)&&0<Or(n,r,e)!=0<Or(n,r,t)}function Lr(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Nr(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function Mr(e,t){return Or(e.prev,e,e.next)<0?0<=Or(e,t,e.next)&&0<=Or(e,e.prev,t):Or(e,t,e.prev)<0||Or(e,e.next,t)<0}function Br(e,t){for(var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),(n=n.next)!==e;);return r}function zr(e,t){var n=new Ur(e.i,e.x,e.y),r=new Ur(t.i,t.x,t.y),i=e.next,o=t.prev;return(e.next=t).prev=e,(n.next=i).prev=n,(r.next=n).prev=r,(o.next=r).prev=o,r}function Fr(e,t,n,r){var i=new Ur(e,t,n);return r?(i.next=r.next,(i.prev=r).next.prev=i,r.next=i):(i.prev=i).next=i,i}function jr(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Ur(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Vr(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}function qr(e,t,n,r,i){Hr(e,t,n||0,r||e.length-1,i||Gr)}function Hr(e,t,n,r,i){for(;n<r;){if(600<r-n){var o=r-n+1,a=t-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);Hr(e,t,Math.max(n,Math.floor(t-a*u/o+l)),Math.min(r,Math.floor(t+(o-a)*u/o+l)),i)}var c=e[t],f=n,p=r;for(Wr(e,n,t),0<i(e[r],c)&&Wr(e,n,r);f<p;){for(Wr(e,f,p),f++,p--;i(e[f],c)<0;)f++;for(;0<i(e[p],c);)p--}0===i(e[n],c)?Wr(e,n,p):Wr(e,++p,r),p<=t&&(n=p+1),t<=p&&(r=p-1)}}function Wr(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Gr(e,t){return e<t?-1:t<e?1:0}function Zr(e,t){var n=e.length;if(n<=1)return[e];for(var r,i,o=[],a=0;a<n;a++){var s=S(e[a]);0!==s&&(e[a].area=Math.abs(s),i===undefined&&(i=s<0),i===s<0?(r&&o.push(r),r=[e[a]]):r.push(e[a]))}if(r&&o.push(r),1<t)for(var u=0;u<o.length;u++)o[u].length<=t||(qr(o[u],t,1,o[u].length-1,Xr),o[u]=o[u].slice(0,t));return o}function Xr(e,t){return t.area-e.area}function Kr(e,t,n){for(var r=n.patternDependencies,i=!1,o=0,a=t;o<a.length;o+=1){var s=a[o].paint.get(e+"-pattern");s.isConstant()||(i=!0);var u=s.constantOr(null);u&&(i=!0,r[u.to]=!0,r[u.from]=!0)}return i}function $r(e,t,n,r,i){for(var o=i.patternDependencies,a=0,s=t;a<s.length;a+=1){var u=s[a],l=u.paint.get(e+"-pattern").value;if("constant"!==l.kind){var c=l.evaluate({zoom:r-1},n,{}),f=l.evaluate({zoom:r},n,{}),p=l.evaluate({zoom:r+1},n,{});o[c]=!0,o[f]=!0,o[p]=!0,n.patterns[u.id]={min:c,mid:f,max:p}}}return n}function Yr(e,t,n,r,i,o,a,s){e.emplaceBack(t,n,2*Math.floor(r*gc)+a,i*gc*2,o*gc*2,Math.round(s))}function Jr(e,t){return e.x===t.x&&(e.x<0||e.x>Nl)||e.y===t.y&&(e.y<0||e.y>Nl)}function Qr(e){return e.every(function(e){return e.x<0})||e.every(function(e){return e.x>Nl})||e.every(function(e){return e.y<0})||e.every(function(e){return e.y>Nl})}function ei(e,t){return e.x*t.x+e.y*t.y}function ti(e,t){if(1===e.length){var n=t[0],r=t[1],i=t[3],o=e[0],a=r.sub(n),s=i.sub(n),u=o.sub(n),l=ei(a,a),c=ei(a,s),f=ei(s,s),p=ei(u,a),d=ei(u,s),h=l*f-c*c,m=(f*p-c*d)/h,g=(l*d-c*p)/h,y=1-m-g;return n.z*y+r.z*m+i.z*g}for(var v=Infinity,_=0,b=t;_<b.length;_+=1){var x=b[_];v=Math.min(v,x.z)}return v}function ni(e,t,n){var r=Infinity;_n(n,t)&&(r=ti(n,t[0]));for(var i=0;i<t.length;i++)for(var o=t[i],a=e[i],s=0;s<o.length-1;s++){var u=o[s],l=o[s+1],c=a[s],f=[u,l,a[s+1],c,u];yn(n,f)&&(r=Math.min(r,ti(n,f)))}return r!==Infinity&&r}function ri(e,t,n,r){for(var i=[],o=[],a=r[8]*t,s=r[9]*t,u=r[10]*t,l=r[11]*t,c=r[8]*n,f=r[9]*n,p=r[10]*n,d=r[11]*n,h=0,m=e;h<m.length;h+=1){for(var g=[],y=[],v=0,_=m[h];v<_.length;v+=1){var b=_[v],x=b.x,w=b.y,E=r[0]*x+r[4]*w+r[12],C=r[1]*x+r[5]*w+r[13],S=r[2]*x+r[6]*w+r[14],T=r[3]*x+r[7]*w+r[15],A=S+u,k=T+l,I=E+c,D=C+f,P=S+p,O=T+d,R=new Fo((E+a)/k,(C+s)/k);R.z=A/k,g.push(R);var N=new Fo(I/O,D/O);N.z=P/O,y.push(N)}i.push(g),o.push(y)}return[i,o]}function ii(e,t,n,r){for(var i=[],o=0,a=e;o<a.length;o+=1){var s=a[o],u=[s.x,s.y,r,1];nr(u,u,t),i.push(new Fo(u[0]/u[3],u[1]/u[3]))}return i}function oi(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(ai,this,t)}function ai(e,t,n){1==e?t.id=n.readVarint():2==e?si(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function si(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}function ui(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],o=0;o<t;o++){var a=li(e[o]);0!==a&&(r===undefined&&(r=a<0),r===a<0?(n&&i.push(n),n=[e[o]]):n.push(e[o]))}return n&&i.push(n),i}function li(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)t=e[i],r+=((n=e[a]).x-t.x)*(t.y+n.y);return r}function ci(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(fi,this,t),this.length=this._features.length}function fi(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(pi(n))}function pi(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}function di(e,t){this.layers=e.readFields(hi,{},t)}function hi(e,t,n){if(3===e){var r=new Ec(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}function mi(e,t,n,r,i,o,a){e.emplaceBack(t.x,t.y,r?1:0,i?1:-1,Math.round(Tc*n.x)+128,Math.round(Tc*n.y)+128,1+(0===o?0:o<0?-1:1)|(a*Dc&63)<<2,a*Dc>>6)}function gi(e,t){return(e/t.tileTotal*(t.end-t.start)+t.start)*(Pc-1)}function yi(e,t,n){for(var r,i,o=0,a=t;a<n-1;a++)r=e[a],i=e[a+1],o+=r.dist(i);return o}function vi(e,t){return 0<t?t+2*e:e}function _i(e,t){for(var n=[],r=new Fo(0,0),i=0;i<e.length;i++){for(var o=e[i],a=[],s=0;s<o.length;s++){var u=o[s-1],l=o[s],c=o[s+1],f=0===s?r:l.sub(u)._unit()._perp(),p=s===o.length-1?r:c.sub(l)._unit()._perp(),d=f._add(p)._unit(),h=d.x*p.x+d.y*p.y;d._mult(1/h),a.push(d._mult(t)._add(l))}n.push(a)}return n}function bi(e,t,n){var r=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),pu.applyArabicShaping&&(e=pu.applyArabicShaping(e)),e}function xi(e,t,n){return e.sections.forEach(function(e){e.text=bi(e.text,t,n)}),e}function wi(t){function e(e){s.push(t[e]),u++}function n(e,t,n){var r=a[e];return delete a[e],a[t]=r,s[r].geometry[0].pop(),s[r].geometry[0]=s[r].geometry[0].concat(n[0]),r}function r(e,t,n){var r=o[t];return delete o[t],o[e]=r,s[r].geometry[0].shift(),s[r].geometry[0]=n[0].concat(s[r].geometry[0]),r}function i(e,t,n){var r=n?t[0][t[0].length-1]:t[0][0];return e+":"+r.x+":"+r.y}for(var o={},a={},s=[],u=0,l=0;l<t.length;l++){var c=t[l],f=c.geometry,p=c.text?c.text.toString():null;if(p){var d=i(p,f),h=i(p,f,!0);if(d in a&&h in o&&a[d]!==o[h]){var m=r(d,h,f),g=n(d,h,s[m].geometry);delete o[d],delete a[h],a[i(p,s[g].geometry,!0)]=g,s[m].geometry=null}else d in a?n(d,h,f):h in o?r(d,h,f):(e(l),o[d]=u-1,a[h]=u-1)}else e(l)}return s.filter(function(e){return e.geometry})}function Ei(e){for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n+1)||null,i=e.charCodeAt(n-1)||null;(!r||!en(r)||Vc[e[n+1]])&&(!i||!en(i)||Vc[e[n-1]])&&Vc[e[n]]?t+=Vc[e[n]]:t+=e[n]}return t}function Ci(e,t){var n=t.expression;if("constant"===n.kind)return{functionType:"constant",layoutSize:n.evaluate(new du(e+1))};if("source"===n.kind)return{functionType:"source"};for(var r=n.zoomStops,i=0;i<r.length&&r[i]<=e;)i++;for(var o=i=Math.max(0,i-1);o<r.length&&r[o]<e+1;)o++;o=Math.min(r.length-1,o);var a={min:r[i],max:r[o]};return"composite"===n.kind?{functionType:"composite",zoomRange:a,propertyValue:t.value}:{functionType:"camera",layoutSize:n.evaluate(new du(e+1)),zoomRange:a,sizeRange:{min:n.evaluate(new du(a.min)),max:n.evaluate(new du(a.max))},propertyValue:t.value}}function Si(e,t,n){var r=t;return"source"===e.functionType?n.lowerSize/Hc:"composite"===e.functionType?ue(n.lowerSize/Hc,n.upperSize/Hc,r.uSizeT):r.uSize}function Ti(e,t,n){if("constant"===e.functionType)return{uSizeT:0,uSize:e.layoutSize};if("source"===e.functionType)return{uSizeT:0,uSize:0};if("camera"===e.functionType){var r=e.propertyValue,i=e.zoomRange,o=e.sizeRange,a=l(st(r,n.specification).interpolationFactor(t,i.min,i.max),0,1);return{uSizeT:0,uSize:o.min+a*(o.max-o.min)}}var s=e.propertyValue,u=e.zoomRange;return{uSizeT:l(st(s,n.specification).interpolationFactor(t,u.min,u.max),0,1),uSize:0}}function Ai(e,t,n,r,i,o,a,s){e.emplaceBack(t,n,Math.round(32*r),Math.round(32*i),o,a,s?s[0]:0,s?s[1]:0)}function ki(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}function Ii(n,e){return e.replace(/{([^{}]+)}/g,function(e,t){return t in n?String(n[t]):""})}function Di(e){var t=[],n=e.id;return n===undefined&&t.push({message:"layers."+n+': missing required property "id"'}),e.render===undefined&&t.push({message:"layers."+n+': missing required method "render"'}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),t}function Pi(e){return"custom"===e.type?new rf(e):new of[e.type](e)}function Oi(e){for(var t=0,n=0,r=0,i=e;r<i.length;r+=1){var o=i[r];t+=o.w*o.h,n=Math.max(n,o.w)}e.sort(function(e,t){return t.h-e.h});for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:Infinity}],s=0,u=0,l=0,c=e;l<c.length;l+=1)for(var f=c[l],p=a.length-1;0<=p;p--){var d=a[p];if(!(f.w>d.w||f.h>d.h)){if(f.x=d.x,f.y=d.y,u=Math.max(u,f.y+f.h),s=Math.max(s,f.x+f.w),f.w===d.w&&f.h===d.h){var h=a.pop();p<a.length&&(a[p]=h)}else f.h===d.h?(d.x+=f.w,d.w-=f.w):(f.w===d.w||a.push({x:d.x+f.w,y:d.y,w:d.w-f.w,h:f.h}),d.y+=f.h,d.h-=f.h);break}}return{w:s,h:u,fill:t/(s*u)||0}}function Ri(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}function Ni(e,t,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return Mi(e,r,t);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return Mi(e,r,t);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return Mi(e,r,t);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return Mi(e,r,t);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return Mi(e,r,t);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return Mi(e,r,t);throw new Error("Expected varint not more than 10 bytes")}function Li(e){return e.type===Ri.Bytes?e.readVarint()+e.pos:e.pos+1}function Mi(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Bi(e,t){var n,r;if(0<=e?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:r=r+1|(n=0)),0x10000000000000000<=e||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),zi(n,r,t),Fi(r,t)}function zi(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos]=127&e}function Fi(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}function ji(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.ceil(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;e<=i;i--)n.buf[i+r]=n.buf[i]}function Ui(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function Vi(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function qi(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function Hi(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function Wi(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function Gi(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function Zi(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function Xi(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function Ki(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function $i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Yi(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function Ji(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function Qi(e,t,n){for(var r="",i=t;i<n;){var o,a,s,u=e[i],l=null,c=239<u?4:223<u?3:191<u?2:1;if(n<i+c)break;1===c?u<128&&(l=u):2===c?128==(192&(o=e[i+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===c?(o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&((l=(15&u)<<12|(63&o)<<6|63&a)<=2047||55296<=l&&l<=57343)&&(l=null)):4===c&&(o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||1114112<=l)&&(l=null)),null===l?(l=65533,c=1):65535<l&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),i+=c}return r}function eo(e,t,n){for(var r,i,o=0;o<t.length;o++){if(55295<(r=t.charCodeAt(o))&&r<57344){if(!i){56319<r||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}function to(e,t,n){1===e&&n.readMessage(no,t)}function no(e,t,n){if(3===e){var r=n.readMessage(ro,{}),i=r.id,o=r.bitmap,a=r.width,s=r.height,u=r.left,l=r.top,c=r.advance;t.push({id:i,bitmap:new Ql({width:a+2*_f,height:s+2*_f},o),metrics:{width:a,height:s,left:u,top:l,advance:c}})}}function ro(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}function io(e){return new gf(e).readFields(to,[])}function oo(e,t,n){var r=ao(256*e,256*(t=Math.pow(2,n)-t-1),n),i=ao(256*(e+1),256*(t+1),n);return r[0]+","+r[1]+","+i[0]+","+i[1]}function ao(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}function so(e){return 2*Math.PI*6378137*Math.cos(e*Math.PI/180)}function uo(e){return(180+e)/360}function lo(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function co(e,t){return e/so(t)}function fo(e){return 360*e-180}function po(e){var t=180-360*e;return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90}function ho(e,t){return e*so(po(t))}function mo(e,t,n,r){(e*=2)<0&&(e=-1*e-1);var i=1<<t;return 32*(i*i*e+i*r+n)+t}function go(e,t,n){for(var r,i="",o=e;0<o;o--)i+=(t&(r=1<<o-1)?1:0)+(n&r?2:0);return i}function yo(e,o){var a={};if(!o)return a;for(var t=function(){var e=u[s],n=e.layerIds.map(function(e){return o.getLayer(e)}).filter(Boolean);if(0!==n.length){e.layers=n,e.stateDependentLayerIds&&(e.stateDependentLayers=e.stateDependentLayerIds.map(function(t){return n.filter(function(e){return e.id===t})[0]}));for(var t=0,r=n;t<r.length;t+=1){var i=r[t];a[i.id]=e}}},s=0,u=e;s<u.length;s+=1)t();return a}function vo(e){for(var t=Infinity,n=Infinity,r=-Infinity,i=-Infinity,o=0,a=e;o<a.length;o+=1){var s=a[o];t=Math.min(t,s.x),n=Math.min(n,s.y),r=Math.max(r,s.x),i=Math.max(i,s.y)}return{minX:t,minY:n,maxX:r,maxY:i}}function _o(e,t){return t-e}function bo(e,t){for(var n=[],r=e.text,i=0,o=0,a=t;o<a.length;o+=1){var s=a[o];n.push(e.substring(i,s)),i=s}return i<r.length&&n.push(e.substring(i,r.length)),n}function xo(e,t,n,r,i,o,a,s,u,l,c){var f=Ff.fromFeature(e,n);c===zf.vertical&&f.verticalizePunctuation();var p,d=[],h={positionedGlyphs:d,text:f,top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:c},m=pu.processBidirectionalText,g=pu.processStyledBidirectionalText;if(m&&1===f.sections.length){p=[];for(var y=0,v=m(f.toString(),Ao(f,s,r,t));y<v.length;y+=1){var _=v[y],b=new Ff;b.text=_,b.sections=f.sections;for(var x=0;x<_.length;x++)b.sectionIndex.push(0);p.push(b)}}else if(g){p=[];for(var w=0,E=g(f.text,f.sectionIndex,Ao(f,s,r,t));w<E.length;w+=1){var C=E[w],S=new Ff;S.text=C[0],S.sectionIndex=C[1],S.sections=f.sections,p.push(S)}}else p=bo(f,Ao(f,s,r,t));return Io(h,t,p,i,o,a,c,s,l),!!d.length&&(h.text=h.text.toString(),h)}function wo(e,t,n,r){for(var i=0,o=0;o<e.length();o++){var a=e.getSection(o),s=r[a.fontStack],u=s&&s[e.getCharCode(o)];u&&(i+=u.metrics.advance*a.scale+t)}return i/Math.max(1,Math.ceil(i/n))}function Eo(e,t,n,r){var i=Math.pow(e-t,2);return r?e<t?i/2:2*i:i+Math.abs(n)*n}function Co(e,t){var n=0;return 10===e&&(n-=1e4),40!==e&&65288!==e||(n+=50),41!==t&&65289!==t||(n+=50),n}function So(e,t,n,r,i,o){for(var a=null,s=Eo(t,n,i,o),u=0,l=r;u<l.length;u+=1){var c=l[u],f=Eo(t-c.x,n,i,o)+c.badness;f<=s&&(a=c,s=f)}return{index:e,x:t,priorBreak:a,badness:s}}function To(e){return e?To(e.priorBreak).concat(e.index):[]}function Ao(e,t,n,r){if(!n)return[];if(!e)return[];for(var i=[],o=wo(e,t,n,r),a=0,s=0;s<e.length();s++){var u=e.getSection(s),l=e.getCharCode(s),c=r[u.fontStack],f=c&&c[l];f&&!jf[l]&&(a+=f.metrics.advance*u.scale+t),s<e.length()-1&&(Uf[l]||Yt(l))&&i.push(So(s+1,a,o,i,Co(l,e.getCharCode(s+1)),!1))}return To(So(e.length(),a,o,i,0,!0))}function ko(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function Io(e,t,n,r,i,o,a,s,u){for(var l=-17,c=0,f=l,p=0,d=e.positionedGlyphs,h="right"===o?1:"left"===o?0:.5,m=0,g=n;m<g.length;m+=1){var y=g[m];y.trim();var v=y.getMaxScale();if(y.length()){for(var _=d.length,b=0;b<y.length();b++){var x=y.getSection(b),w=y.getCharCode(b),E=24*(v-x.scale),C=t[x.fontStack],S=C&&C[w];S&&(Jt(w)&&a!==zf.horizontal?(d.push({glyph:w,x:c,y:E,vertical:!0,scale:x.scale,fontStack:x.fontStack}),c+=u*x.scale+s):(d.push({glyph:w,x:c,y:f+E,vertical:!1,scale:x.scale,fontStack:x.fontStack}),c+=S.metrics.advance*x.scale+s))}if(d.length!==_){var T=c-s;p=Math.max(T,p),Do(d,t,_,d.length-1,h)}c=0,f+=r*v}else f+=r}var A=ko(i),k=A.horizontalAlign,I=A.verticalAlign;Po(d,h,k,I,p,r,n.length);var D=f-l;e.top+=-I*D,e.bottom=e.top+D,e.left+=-k*p,e.right=e.left+p}function Do(e,t,n,r,i){if(i){var o=e[r],a=t[o.fontStack],s=a&&a[o.glyph];if(s)for(var u=s.metrics.advance*o.scale,l=(e[r].x+u)*i,c=n;c<=r;c++)e[c].x-=l}}function Po(e,t,n,r,i,o,a){for(var s=(t-n)*i,u=(-r*a+.5)*o,l=0;l<e.length;l++)e[l].x+=s,e[l].y+=u}function Oo(e,t,n){var r=ko(n),i=r.horizontalAlign,o=r.verticalAlign,a=t[0],s=t[1],u=a-e.displaySize[0]*i,l=u+e.displaySize[0],c=s-e.displaySize[1]*o;return{image:e,top:c,bottom:c+e.displaySize[1],left:u,right:l}}"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var Ro=function Vf(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8},No=t(function(e){"function"==typeof Object.create?e.exports=function r(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function r(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),Lo=t(function(e,p){function u(e,t,n,r){var i={seen:[],stylize:a};return 3<=arguments.length&&(i.depth=n),4<=arguments.length&&(i.colors=r),s(t)?i.showHidden=t:t&&p._extend(i,t),c(i.showHidden)&&(i.showHidden=!1),c(i.depth)&&(i.depth=2),c(i.colors)&&(i.colors=!1),c(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),h(i,e,i.depth)}function o(e,t){var n=u.styles[t];return n?"\x1b["+u.colors[n][0]+"m"+e+"\x1b["+u.colors[n][1]+"m":e}function a(e){return e}function d(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function h(t,n,r){if(t.customInspect&&n&&S(n.inspect)&&n.inspect!==p.inspect&&(!n.constructor||n.constructor.prototype!==n)){var e=n.inspect(r,t);return x(e)||(e=h(t,e,r)),e}var i=m(t,n);if(i)return i;var o=Object.keys(n),a=d(o);if(
t.showHidden&&(o=Object.getOwnPropertyNames(n)),C(n)&&(0<=o.indexOf("message")||0<=o.indexOf("description")))return g(n);if(0===o.length){if(S(n)){var s=n.name?": "+n.name:"";return t.stylize("[Function"+s+"]","special")}if(w(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(E(n))return t.stylize(Date.prototype.toString.call(n),"date");if(C(n))return g(n)}var u,l="",c=!1,f=["{","}"];(b(n)&&(c=!0,f=["[","]"]),S(n))&&(l=" [Function"+(n.name?": "+n.name:"")+"]");return w(n)&&(l=" "+RegExp.prototype.toString.call(n)),E(n)&&(l=" "+Date.prototype.toUTCString.call(n)),C(n)&&(l=" "+g(n)),0!==o.length||c&&0!=n.length?r<0?w(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),u=c?y(t,n,r,a,o):o.map(function(e){return v(t,n,r,a,e,c)}),t.seen.pop(),_(u,l,f)):f[0]+l+f[1]}function m(e,t){if(c(t))return e.stylize("undefined","undefined");if(x(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return r(t)?e.stylize(""+t,"number"):s(t)?e.stylize(""+t,"boolean"):l(t)?e.stylize("null","null"):void 0}function g(e){return"["+Error.prototype.toString.call(e)+"]"}function y(t,n,r,i,e){for(var o=[],a=0,s=n.length;a<s;++a)I(n,String(a))?o.push(v(t,n,r,i,String(a),!0)):o.push("");return e.forEach(function(e){e.match(/^\d+$/)||o.push(v(t,n,r,i,e,!0))}),o}function v(e,t,n,r,i,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),I(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(u.value)<0?-1<(s=l(n)?h(e,u.value,null):h(e,u.value,n-1)).indexOf("\n")&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),c(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function _(e,t,n){return 60<e.reduce(function(e,t){return 0,0<=t.indexOf("\n")&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function b(e){return Array.isArray(e)}function s(e){return"boolean"==typeof e}function l(e){return null===e}function t(e){return null==e}function r(e){return"number"==typeof e}function x(e){return"string"==typeof e}function n(e){return"symbol"==typeof e}function c(e){return void 0===e}function w(e){return f(e)&&"[object RegExp]"===T(e)}function f(e){return"object"==typeof e&&null!==e}function E(e){return f(e)&&"[object Date]"===T(e)}function C(e){return f(e)&&("[object Error]"===T(e)||e instanceof Error)}function S(e){return"function"==typeof e}function i(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function T(e){return Object.prototype.toString.call(e)}function A(e){return e<10?"0"+e.toString(10):e.toString(10)}function k(){var e=new Date,t=[A(e.getHours()),A(e.getMinutes()),A(e.getSeconds())].join(":");return[e.getDate(),R[e.getMonth()],t].join(" ")}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var D=/%[sdj%]/g;p.format=function(e){var t=arguments;if(!x(e)){for(var n=[],r=0;r<arguments.length;r++)n.push(u(t[r]));return n.join(" ")}r=1;for(var i=arguments,o=i.length,a=String(e).replace(D,function(e){if("%%"===e)return"%";if(o<=r)return e;switch(e){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(t){return"[Circular]"}default:return e}}),s=i[r];r<o;s=i[++r])l(s)||!f(s)?a+=" "+s:a+=" "+u(s);return a},p.deprecate=function(e,t){function n(){if(!r){if(process.throwDeprecation)throw new Error(t);process.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}if(c(global.process))return function(){return p.deprecate(e,t).apply(this,arguments)};if(!0===process.noDeprecation)return e;var r=!1;return n};var P,O={};p.debuglog=function(t){if(c(P)&&(P=process.env.NODE_DEBUG||""),t=t.toUpperCase(),!O[t])if(new RegExp("\\b"+t+"\\b","i").test(P)){var n=process.pid;O[t]=function(){var e=p.format.apply(p,arguments);console.error("%s %d: %s",t,n,e)}}else O[t]=function(){};return O[t]},(p.inspect=u).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},p.isArray=b,p.isBoolean=s,p.isNull=l,p.isNullOrUndefined=t,p.isNumber=r,p.isString=x,p.isSymbol=n,p.isUndefined=c,p.isRegExp=w,p.isObject=f,p.isDate=E,p.isError=C,p.isFunction=S,p.isPrimitive=i,p.isBuffer=Ro;var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];p.log=function(){console.log("%s - %s",k(),p.format.apply(p,arguments))},p.inherits=No,p._extend=function(e,t){if(!t||!f(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}),Mo=(Lo.format,Lo.deprecate,Lo.debuglog,Lo.inspect,Lo.isArray,Lo.isBoolean,Lo.isNull,Lo.isNullOrUndefined,Lo.isNumber,Lo.isString,Lo.isSymbol,Lo.isUndefined,Lo.isRegExp,Lo.isObject,Lo.isDate,Lo.isError,Lo.isFunction,Lo.isPrimitive,Lo.isBuffer,Lo.log,Lo.inherits,Lo._extend,t(function(e){function o(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function a(e){return global.Buffer&&"function"==typeof global.Buffer.isBuffer?global.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function s(e){return Object.prototype.toString.call(e)}function u(e){return!a(e)&&("function"==typeof global.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function l(e){if(Lo.isFunction(e)){if(b)return e.name;var t=e.toString().match(w);return t&&t[1]}}function t(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function n(e){if(b||!Lo.isFunction(e))return Lo.inspect(e);var t=l(e);return"[Function"+(t?": "+t:"")+"]"}function c(e){return t(n(e.actual),128)+" "+e.operator+" "+t(n(e.expected),128)}function f(e,t,n,r,i){throw new x.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function r(e,t){e||f(e,!0,t,"==",x.ok)}function p(e,t,n,r){if(e===t)return!0;if(a(e)&&a(t))return 0===o(e,t);if(Lo.isDate(e)&&Lo.isDate(t))return e.getTime()===t.getTime();if(Lo.isRegExp(e)&&Lo.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(u(e)&&u(t)&&s(e)===s(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===o(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(a(e)!==a(t))return!1;var i=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==i&&i===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),h(e,t,n,r))}return n?e===t:e==t}function d(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function h(e,t,n,r){if(null===e||e===undefined||null===t||t===undefined)return!1;if(Lo.isPrimitive(e)||Lo.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=d(e),o=d(t);if(i&&!o||!i&&o)return!1;if(i)return p(e=_.call(e),t=_.call(t),n);var a,s,u=E(e),l=E(t);if(u.length!==l.length)return!1;for(u.sort(),l.sort(),s=u.length-1;0<=s;s--)if(u[s]!==l[s])return!1;for(s=u.length-1;0<=s;s--)if(!p(e[a=u[s]],t[a],n,r))return!1;return!0}function i(e,t,n){p(e,t,!0)&&f(e,t,n,"notDeepStrictEqual",i)}function m(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(n){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function g(e){var t;try{e()}catch(n){t=n}return t}function y(e,t,n,r){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=g(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&f(i,n,"Missing expected exception"+r);var o="string"==typeof r,a=!e&&i&&!n;if((!e&&Lo.isError(i)&&o&&m(i,n)||a)&&f(i,n,"Got unwanted exception"+r),e&&i&&n&&!m(i,n)||!e&&i)throw i}var v=Object.prototype.hasOwnProperty,_=Array.prototype.slice,b="foo"===function C(){}.name,x=e.exports=r,w=/\s*function\s+([^\(\s]*)\s*/;x.AssertionError=function S(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=c(this),this.generatedMessage=!0);var t=e.stackStartFunction||f;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=l(t),o=r.indexOf("\n"+i);if(0<=o){var a=r.indexOf("\n",o+1);r=r.substring(a+1)}this.stack=r}}},Lo.inherits(x.AssertionError,Error),x.fail=f,x.ok=r,x.equal=function T(e,t,n){e!=t&&f(e,t,n,"==",x.equal)},x.notEqual=function A(e,t,n){e==t&&f(e,t,n,"!=",x.notEqual)},x.deepEqual=function k(e,t,n){p(e,t,!1)||f(e,t,n,"deepEqual",x.deepEqual)},x.deepStrictEqual=function I(e,t,n){p(e,t,!0)||f(e,t,n,"deepStrictEqual",x.deepStrictEqual)},x.notDeepEqual=function D(e,t,n){p(e,t,!1)&&f(e,t,n,"notDeepEqual",x.notDeepEqual)},x.notDeepStrictEqual=i,x.strictEqual=function P(e,t,n){e!==t&&f(e,t,n,"===",x.strictEqual)},x.notStrictEqual=function O(e,t,n){e===t&&f(e,t,n,"!==",x.notStrictEqual)},x["throws"]=function(e,t,n){y(!0,e,t,n)},x.doesNotThrow=function(e,t,n){y(!1,e,t,n)},x.ifError=function(e){if(e)throw e};var E=Object.keys||function(e){var t=[];for(var n in e)v.call(e,n)&&t.push(n);return t}})),Bo="0.53.1",zo=n;n.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},n.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},n.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},n.prototype.solveCurveX=function(e,t){var n,r,i,o,a;for(void 0===t&&(t=1e-6),i=e,a=0;a<8;a++){if(o=this.sampleCurveX(i)-e,Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=e)<(n=0))return n;if((r=1)<i)return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-e)<t)return i;o<e?n=i:r=i,i=.5*(r-n)+n}return i},n.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var Fo=r;r.prototype={clone:function(){return new r(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,i=n*this.x+t*this.y;return this.x=r,this.y=i,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.x+n*(this.x-t.x)-r*(this.y-t.y),o=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(e){return e instanceof r?e:Array.isArray(e)?new r(e[0],e[1]):e};var jo,Uo,Vo=i(.25,.1,.25,1),qo=1,Ho={},Wo=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),Go=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,Zo=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,Xo={now:Wo,frame:function e(t){var e=Go(t);return{cancel:function(){return Zo(e)}}},getImageData:function qf(e){var t=self.document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height),n.getImageData(0,0,e.width,e.height)},resolveURL:function Hf(e){var t=self.document.createElement("a");return t.href=e,t.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio}},Ko={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},$o={supported:!1,testSupport:P},Yo=!1,Jo=!1;self.document&&((Uo=self.document.createElement("img")).onload=function(){jo&&O(jo),Jo=!(jo=null)},Uo.onerror=function(){Yo=!0,jo=null},Uo.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Qo="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ea="mapbox.eventData",ta=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i,na=function(e,t){if(!N(e))return e;var n=M(e);return n.path="/styles/v1"+n.path,R(n,t)},ra=function(e,t){if(!N(e))return e;var n=M(e);return n.path="/fonts/v1"+n.path,R(n,t)},ia=function(e,t){if(!N(e))return e;var n=M(e);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),R(n,t)},oa=function(e,t,n,r){var i=M(e);return N(e)?(i.path="/styles/v1"+i.path+"/sprite"+t+n,R(i,r)):(i.path+=""+t+n,B(i))},aa=/(\.(png|jpg)\d*)(?=$)/,sa=/\.[\w]+$/,ua=function(e,t,n){if(!t||!N(t))return e;var r=M(e),i=2<=Xo.devicePixelRatio||512===n?"@2x":"",o=$o.supported?".webp":"$1";return r.path=r.path.replace(aa,""+i+o),r.path="/v4"+r.path,R(r)},la=function(e){var t="/v4/",n=M(e);if(!n.path.match(/(^\/v4\/)/)||!n.path.match(sa))return e;var r="mapbox://tiles/";r+=n.path.replace(t,"");var i=n.params.filter(function(e){return!e.match(/^access_token=/)});return i.length&&(r+="?"+i.join("&")),r},ca=function(e,t){if(!N(t))return e.tiles||[];for(var n=[],r=0,i=e.tiles;r<i.length;r+=1){var o=i[r],a=la(o);n.push(a)}return n},fa=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/,pa=function pa(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};pa.prototype.getStorageKey=function Wf(e){var t=z(Ko.ACCESS_TOKEN),n="";return n=t&&t.u?I(t.u):Ko.ACCESS_TOKEN||"",e?ea+"."+e+":"+n:ea+":"+n},pa.prototype.fetchEventData=function Gf(){var e=k("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{var r=self.localStorage.getItem(t);r&&(this.eventData=JSON.parse(r));var i=self.localStorage.getItem(n);i&&(this.anonId=i)}catch(o){E("Unable to read from LocalStorage")}},pa.prototype.saveEventData=function Zf(){var e=k("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{self.localStorage.setItem(n,this.anonId),1<=Object.keys(this.eventData).length&&self.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(r){E("Unable to write to LocalStorage")}},pa.prototype.processRequests=function Xf(){},pa.prototype.postEvent=function Kf(e,t,n){var r=this;if(Ko.EVENTS_URL){var i=M(Ko.EVENTS_URL);i.params.push("access_token="+(Ko.ACCESS_TOKEN||""));var o={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:Bo,userId:this.anonId},a=t?h(o,t):o,s={url:B(i),headers:{"Content-Type":"text/plain"},body:JSON.stringify([a])};this.pendingRequest=Ta(s,function(e){r.pendingRequest=null,n(e),r.saveEventData(),r.processRequests()})}},pa.prototype.queueRequest=function $f(e){this.queue.push(e),this.processRequests()};var da=function(e){function t(){e.call(this,"map.load"),this.success={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.postMapLoadEvent=function n(e,t){Ko.EVENTS_URL&&Ko.ACCESS_TOKEN&&Array.isArray(e)&&e.some(function(e){return N(e)||L(e)})&&this.queueRequest({id:t,timestamp:Date.now()})},t.prototype.processRequests=function i(){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var e=this.queue.shift(),n=e.id,r=e.timestamp;n&&this.success[n]||(this.anonId||this.fetchEventData(),g(this.anonId)||(this.anonId=m()),this.postEvent(r,{},function(e){e||n&&(t.success[n]=!0)}))}},t}(pa),ha=new(function(e){function t(){e.call(this,"appUserTurnstile")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.postTurnstileEvent=function n(e){Ko.EVENTS_URL&&Ko.ACCESS_TOKEN&&Array.isArray(e)&&e.some(function(e){return N(e)||L(e)})&&this.queueRequest(Date.now())},t.prototype.processRequests=function u(){var t=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var e=z(Ko.ACCESS_TOKEN),n=e?e.u:Ko.ACCESS_TOKEN,r=n!==this.eventData.tokenU;g(this.anonId)||(this.anonId=m(),r=!0);var i=this.queue.shift();if(this.eventData.lastSuccess){var o=new Date(this.eventData.lastSuccess),a=new Date(i),s=(i-this.eventData.lastSuccess)/864e5;r=r||1<=s||s<-1||o.getDate()!==a.getDate()}else r=!0;if(!r)return this.processRequests();this.postEvent(i,{"enabled.telemetry":!1},function(e){e||(t.eventData.lastSuccess=i,t.eventData.tokenU=n)})}},t}(pa)),ma=ha.postTurnstileEvent.bind(ha),ga=new da,ya=ga.postMapLoadEvent.bind(ga),va={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(va);var _a,ba,xa=function(r){function e(e,t,n){401===t&&L(n)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),r.call(this,e),this.status=t,this.url=n,this.name=this.constructor.name,this.message=e}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),(e.prototype.constructor=e).prototype.toString=function t(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),wa=F()?function(){return self.worker&&self.worker.referrer}:function(){var e=self.location.origin;if(e&&"null"!==e&&"file://"!==e)return e+self.location.pathname},Ea=function(e,t){if(!/^file:/.test(e.url)){if(self.fetch&&self.Request&&self.AbortController)return j(e,t);if(F()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t)}return U(e,t)},Ca=function(e,t){return Ea(h(e,{type:"json"}),t)},Sa=function(e,t){return Ea(h(e,{type:"arrayBuffer"}),t)},Ta=function(e,t){return Ea(h(e,{method:"POST"}),t)},Aa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";(function(){_a=[],ba=0})();var ka=function(e,s){if(ba>=Ko.MAX_PARALLEL_IMAGE_REQUESTS){var t={requestParameters:e,callback:s,cancelled:!1,cancel:function i(){this.cancelled=!0}};return _a.push(t),t}ba++;var r=!1,u=function(){if(!r)for(r=!0,Mo(0<=--ba);_a.length&&ba<Ko.MAX_PARALLEL_IMAGE_REQUESTS;){var e=_a.shift(),t=e.requestParameters,n=e.callback;e.cancelled||(e.cancel=ka(t,n).cancel)}},n=Sa(e,function(e,t,n,r){if(u(),e)s(e);else if(t){var i=new self.Image,o=self.URL||self.webkitURL;i.onload=function(){s(null,i),o.revokeObjectURL(i.src)},i.onerror=function(){return s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var a=new self.Blob([new Uint8Array(t)],{type:"image/png"});i.cacheControl=n,i.expires=r,i.src=t.byteLength?o.createObjectURL(a):Aa}});return{cancel:function(){n.cancel(),u()}}},Ia=function(e,t){var n=self.document.createElement("video");n.muted=!0,n.onloadstart=function(){t(null,n)};for(var r=0;r<e.length;r++){var i=self.document.createElement("source");V(e[r])||(n.crossOrigin="Anonymous"),i.src=e[r],n.appendChild(i)}return{cancel:function(){}}},Da=function Da(e,t){void 0===t&&(t={}),h(this,t),this.type=e},Pa=function(n){function e(e,t){void 0===t&&(t={}),n.call(this,"error",h({error:e},t))}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e}(Da),Oa=function Oa(){};Oa.prototype.on=function Yf(e,t){return this._listeners=this._listeners||{},q(e,t,this._listeners),this},Oa.prototype.off=function Jf(e,t){return H(e,t,this._listeners),H(e,t,this._oneTimeListeners),this},Oa.prototype.once=function Qf(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},q(e,t,this._oneTimeListeners),this},Oa.prototype.fire=function ep(e,t){"string"==typeof e&&(e=new Da(e,t||{}));var n=e.type;if(this.listens(n)){for(var r=0,i=(e.target=this)._listeners&&this._listeners[n]?this._listeners[n].slice():[];r<i.length;r+=1){i[r].call(this,e)}for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];o<a.length;o+=1){var s=a[o];H(n,s,this._oneTimeListeners),s.call(this,e)}var u=this._eventedParent;u&&(h(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),u.fire(e))}else e instanceof Pa&&console.error(e.error);return this},Oa.prototype.listens=function tp(e){return this._listeners&&this._listeners[e]&&0<this._listeners[e].length||this._oneTimeListeners&&this._oneTimeListeners[e]&&0<this._oneTimeListeners[e].length||this._eventedParent&&this._eventedParent.listens(e)};var Ra={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number","default":0,period:360,units:"degrees"},pitch:{type:"number","default":0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,"default":[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},"default":"xyz"},minzoom:{type:"number","default":0},maxzoom:{type:"number","default":22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,"default":[-180,-85.051129,180,85.051129]},minzoom:{type:"number","default":0},maxzoom:{type:"number","default":22},tileSize:{type:"number","default":512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},"default":"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,"default":[-180,-85.051129,180,85.051129]},minzoom:{type:"number","default":0},maxzoom:{type:"number","default":22},tileSize:{type:"number","default":512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},"default":"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number","default":18},attribution:{type:"string"},buffer:{type:"number","default":128,maximum:512,minimum:0},tolerance:{type:"number","default":.375},cluster:{type:"boolean","default":!(Oa.prototype.setEventedParent=function np(e,t){return this._eventedParent=e,this._eventedParentData=t,this})},clusterRadius:{type:"number","default":50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean","default":!1},generateId:{type:"boolean","default":!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},"default":"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},"default":"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number","default":2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number","default":1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},"default":"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number","default":250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean","default":!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},"default":"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean","default":!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean","default":!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean","default":!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},"default":"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number","default":1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},"default":"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,"default":[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"string",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number","default":0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number","default":2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean","default":!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},"default":"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},"default":"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},"default":"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted","default":"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number","default":16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number","default":10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number","default":1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number","default":0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{left:{},center:{},right:{}},"default":"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},
"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number","default":45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number","default":0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number","default":2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean","default":!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},"default":"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,"default":[0,0],requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean","default":!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean","default":!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean","default":!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},"function":{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number","default":1,minimum:0},property:{type:"string","default":"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},"default":"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},"default":"rgb"},"default":{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{"let":{group:"Variable binding"},"var":{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},"case":{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},"typeof":{group:"Types"},string:{group:"Types"},number:{group:"Types"},"boolean":{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum","default":"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array","default":[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant","default":"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant","default":.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean","default":!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color","default":"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color","default":"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,"default":[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number","default":0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number","default":0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean","default":!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color","default":"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,"default":[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number","default":1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number","default":0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number","default":0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number","default":0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number","default":5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color","default":"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number","default":0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,"default":[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},"default":"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},"default":"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number","default":0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color","default":"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number","default":30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number","default":1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number","default":1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color","default":"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color","default":"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number","default":0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number","default":0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color","default":"#000000",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color","default":"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number","default":0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number","default":0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,"default":[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number","default":0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number","default":0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number","default":0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number","default":0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},"default":"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number","default":300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number","default":335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number","default":.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color","default":"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color","default":"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color","default":"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color","default":"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number","default":300,minimum:0,units:"milliseconds"},delay:{type:"number","default":0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},Na=function Na(e,t,n,r){this.message=(e?e+": ":"")+n,r&&(this.identifier=r),null!==t&&t!==undefined&&t.__line__&&(this.line=t.__line__)},La=function(n){function e(e,t){n.call(this,t),this.message=t,this.key=e}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e}(Error),Ma=function Ma(e,t){void 0===t&&(t=[]),this.parent=e,this.bindings={};for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i[0],a=i[1];this.bindings[o]=a}};Ma.prototype.concat=function rp(e){return new Ma(this,e)},Ma.prototype.get=function Fe(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},Ma.prototype.has=function ze(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var Ba={kind:"null"},za={kind:"number"},Fa={kind:"string"},ja={kind:"boolean"},Ua={kind:"color"},Va={kind:"object"},qa={kind:"value"},Ha={kind:"error"},Wa={kind:"collator"},Ga={kind:"formatted"},Za=[Ba,za,Fa,ja,Ua,Ga,Va,K(qa)],Xa=t(function(e,t){function d(e){return(e=Math.round(e))<0?0:255<e?255:e}function n(e){return e<0?0:1<e?1:e}function h(e){return"%"===e[e.length-1]?d(parseFloat(e)/100*255):d(parseInt(e))}function m(e){return"%"===e[e.length-1]?n(parseFloat(e)/100):n(parseFloat(e))}function g(e,t,n){return n<0?n+=1:1<n&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function r(e){var t,n=e.replace(/ /g,"").toLowerCase();if(n in y)return y[n].slice();if("#"===n[0])return 4===n.length?0<=(t=parseInt(n.substr(1),16))&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===n.length&&0<=(t=parseInt(n.substr(1),16))&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var r=n.indexOf("("),i=n.indexOf(")");if(-1!==r&&i+1===n.length){var o=n.substr(0,r),a=n.substr(r+1,i-(r+1)).split(","),s=1;switch(o){case"rgba":if(4!==a.length)return null;s=m(a.pop());case"rgb":return 3!==a.length?null:[h(a[0]),h(a[1]),h(a[2]),s];case"hsla":if(4!==a.length)return null;s=m(a.pop());case"hsl":if(3!==a.length)return null;var u=(parseFloat(a[0])%360+360)%360/360,l=m(a[1]),c=m(a[2]),f=c<=.5?c*(l+1):c+l-c*l,p=2*c-f;return[d(255*g(p,f,u+1/3)),d(255*g(p,f,u)),d(255*g(p,f,u-1/3)),s];default:return null}}return null}var y={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{t.parseCSSColor=r}catch(i){}}).parseCSSColor,Ka=function Ka(e,t,n,r){void 0===r&&(r=1),this.r=e,this.g=t,this.b=n,this.a=r};Ka.parse=function ip(e){if(!e)return undefined;if(e instanceof Ka)return e;if("string"!=typeof e)return undefined;var t=Xa(e);return t?new Ka(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3]):undefined},Ka.prototype.toString=function $(){var e=this.toArray(),t=e[0],n=e[1],r=e[2],i=e[3];return"rgba("+Math.round(t)+","+Math.round(n)+","+Math.round(r)+","+i+")"},Ka.prototype.toArray=function op(){var e=this,t=e.r,n=e.g,r=e.b,i=e.a;return 0===i?[0,0,0,0]:[255*t/i,255*n/i,255*r/i,i]},Ka.black=new Ka(0,0,0,1),Ka.white=new Ka(1,1,1,1),Ka.transparent=new Ka(0,0,0,0),Ka.red=new Ka(1,0,0,1);var $a=function $a(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};$a.prototype.compare=function xt(e,t){return this.collator.compare(e,t)},$a.prototype.resolvedLocale=function ap(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Ya=function Ya(e,t,n){this.text=e,this.scale=t,this.fontStack=n},Ja=function Ja(e){this.sections=e};Ja.fromString=function sp(e){return new Ja([new Ya(e,null,null)])},Ja.prototype.toString=function $(){return this.sections.map(function(e){return e.text}).join("")},Ja.prototype.serialize=function Gt(){for(var e=["format"],t=0,n=this.sections;t<n.length;t+=1){var r=n[t];e.push(r.text);var i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),e.push(i)}return e};var Qa=function Qa(e,t){this.type=e,this.value=t};Qa.parse=function ip(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!Q(e[1]))return t.error("invalid value");var n=e[1],r=ee(n),i=t.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new Qa(r,n)},Qa.prototype.evaluate=function up(){return this.value},Qa.prototype.eachChild=function lp(){},Qa.prototype.possibleOutputs=function cp(){return[this.value]},Qa.prototype.serialize=function Gt(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Ka?["rgba"].concat(this.value.toArray()):this.value instanceof Ja?this.value.serialize():(Mo(null===this.value||"string"==typeof this.value||"number"==typeof this.value||"boolean"==typeof this.value),this.value)};var es=function es(e){this.name="ExpressionEvaluationError",this.message=e};es.prototype.toJSON=function fp(){return this.message};var ts={string:Fa,number:za,"boolean":ja,object:Va},ns=function ns(e,t){this.type=e,this.args=t};ns.parse=function ip(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n,r=1,i=e[0];if("array"===i){var o,a;if(2<e.length){var s=e[1];if("string"!=typeof s||!(s in ts)||"object"===s)return t.error('The item type argument of "array" must be one of string, number, boolean',1);o=ts[s],r++}else o=qa;if(3<e.length){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);a=e[2],r++}n=K(o,a)}else Mo(ts[i],i),n=ts[i];for(var u=[];r<e.length;r++){var l=t.parse(e[r],r,qa);if(!l)return null;u.push(l)}return new ns(n,u)},ns.prototype.evaluate=function up(e){for(var t=0;t<this.args.length;t++){var n=this.args[t].evaluate(e);if(!Y(this.type,ee(n)))return n;if(t===this.args.length-1)throw new es("Expected value to be of type "+$(this.type)+", but found "+$(ee(n))+" instead.")}return Mo(!1),null},ns.prototype.eachChild=function lp(e){this.args.forEach(e)},ns.prototype.possibleOutputs=function cp(){var e;return(e=[]).concat.apply(e,this.args.map(function(e){return e.possibleOutputs()}))},ns.prototype.serialize=function Gt(){var e=this.type,t=[e.kind];if("array"===e.kind){var n=e.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){t.push(n.kind);var r=e.N;("number"==typeof r||1<this.args.length)&&t.push(r)}}return t.concat(this.args.map(function(e){return e.serialize()}))};var rs=function rs(e){this.type=Ga,this.sections=e};rs.parse=function ip(e,t){if(e.length<3)return t.error("Expected at least two arguments.");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");for(var n=[],r=1;r<e.length-1;r+=2){var i=t.parse(e[r],1,qa);if(!i)return null;var o=i.type.kind;if("string"!==o&&"value"!==o&&"null"!==o)return t.error("Formatted text type must be 'string', 'value', or 'null'.");var a=e[r+1];if("object"!=typeof a||Array.isArray(a))return t.error("Format options argument must be an object.");var s=null;if(a["font-scale"]&&!(s=t.parse(a["font-scale"],1,za)))return null;var u=null;if(a["text-font"]&&!(u=t.parse(a["text-font"],1,K(Fa))))return null;n.push({text:i,scale:s,font:u})}return new rs(n)},rs.prototype.evaluate=function up(t){return new Ja(this.sections.map(function(e){return new Ya(te(e.text.evaluate(t)),e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null)}))},rs.prototype.eachChild=function lp(e){for(var t=0,n=this.sections;t<n.length;t+=1){var r=n[t];e(r.text),r.scale&&e(r.scale),r.font&&e(r.font)}},rs.prototype.possibleOutputs=function cp(){return[undefined]},rs.prototype.serialize=function Gt(){for(var e=["format"],t=0,n=this.sections;t<n.length;t+=1){var r=n[t];e.push(r.text.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),e.push(i)}return e};var is={"to-boolean":ja,"to-color":Ua,"to-number":za,"to-string":Fa},os=function os(e,t){this.type=e,this.args=t};os.parse=function ip(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n=e[0];if(Mo(is[n],n),("to-boolean"===n||"to-string"===n)&&2!==e.length)return t.error("Expected one argument.");for(var r=is[n],i=[],o=1;o<e.length;o++){var a=t.parse(e[o],o,qa);if(!a)return null;i.push(a)}return new os(r,i)},os.prototype.evaluate=function up(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){for(var t,n,r=0,i=this.args;r<i.length;r+=1){if(n=null,(t=i[r].evaluate(e))instanceof Ka)return t;if("string"==typeof t){var o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&!(n=t.length<3||4<t.length?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":J(t[0],t[1],t[2],t[3])))return new Ka(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new es(n||"Could not parse color from value '"+("string"==typeof t?t:JSON.stringify(t))+"'")}if("number"===this.type.kind){for(var a=null,s=0,u=this.args;s<u.length;s+=1){if(null===(a=u[s].evaluate(e)))return 0;var l=Number(a);if(!isNaN(l))return l}throw new es("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?Ja.fromString(te(this.args[0].evaluate(e))):te(this.args[0].evaluate(e))},
os.prototype.eachChild=function lp(e){this.args.forEach(e)},os.prototype.possibleOutputs=function cp(){var e;return(e=[]).concat.apply(e,this.args.map(function(e){return e.possibleOutputs()}))},os.prototype.serialize=function Gt(){if("formatted"===this.type.kind)return new rs([{text:this.args[0],scale:null,font:null}]).serialize();var t=["to-"+this.type.kind];return this.eachChild(function(e){t.push(e.serialize())}),t};var as=["Unknown","Point","LineString","Polygon"],ss=function ss(){this.globals=null,this.feature=null,this.featureState=null,this._parseColorCache={}};ss.prototype.id=function qo(){return this.feature&&"id"in this.feature?this.feature.id:null},ss.prototype.geometryType=function pp(){return this.feature?"number"==typeof this.feature.type?as[this.feature.type]:this.feature.type:null},ss.prototype.properties=function Gl(){return this.feature&&this.feature.properties||{}},ss.prototype.parseColor=function dp(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Ka.parse(e)),t};var us=function us(e,t,n,r){this.name=e,this.type=t,this._evaluate=n,this.args=r};us.prototype.evaluate=function up(e){return this._evaluate(e,this.args)},us.prototype.eachChild=function lp(e){this.args.forEach(e)},us.prototype.possibleOutputs=function cp(){return[undefined]},us.prototype.serialize=function Gt(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},us.parse=function ip(n,e){var t,r=n[0],i=us.definitions[r];if(!i)return e.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=a.filter(function(e){var t=e[0];return!Array.isArray(t)||t.length===n.length-1}),u=null,l=0,c=s;l<c.length;l+=1){var f=c[l],p=f[0],d=f[1];u=new fs(e.registry,e.path,null,e.scope);for(var h=[],m=!1,g=1;g<n.length;g++){var y=n[g],v=Array.isArray(p)?p[g-1]:p.type,_=u.parse(y,1+h.length,v);if(!_){m=!0;break}h.push(_)}if(!m)if(Array.isArray(p)&&p.length!==h.length)u.error("Expected "+p.length+" arguments, but found "+h.length+" instead.");else{for(var b=0;b<h.length;b++){var x=Array.isArray(p)?p[b]:p.type,w=h[b];u.concat(b+1).checkSubtype(x,w.type)}if(0===u.errors.length)return new us(r,o,d,h)}}if(Mo(!u||0<u.errors.length),1===s.length)(t=e.errors).push.apply(t,u.errors);else{for(var E=(s.length?s:a).map(function(e){return ne(e[0])}).join(" | "),C=[],S=1;S<n.length;S++){var T=e.parse(n[S],1+C.length);if(!T)return null;C.push($(T.type))}e.error("Expected arguments of type "+E+", but found ("+C.join(", ")+") instead.")}return null},us.register=function Wt(e,t){for(var n in Mo(!us.definitions),us.definitions=t)e[n]=us};var ls=function ls(e,t,n){this.type=Wa,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t};ls.parse=function ip(e,t){if(2!==e.length)return t.error("Expected one argument.");var n=e[1];if("object"!=typeof n||Array.isArray(n))return t.error("Collator options argument must be an object.");var r=t.parse(n["case-sensitive"]!==undefined&&n["case-sensitive"],1,ja);if(!r)return null;var i=t.parse(n["diacritic-sensitive"]!==undefined&&n["diacritic-sensitive"],1,ja);if(!i)return null;var o=null;return n.locale&&!(o=t.parse(n.locale,1,Fa))?null:new ls(r,i,o)},ls.prototype.evaluate=function up(e){return new $a(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},ls.prototype.eachChild=function lp(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},ls.prototype.possibleOutputs=function cp(){return[undefined]},ls.prototype.serialize=function Gt(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var cs=function cs(e,t){this.type=t.type,this.name=e,this.boundExpression=t};cs.parse=function ip(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");var n=e[1];return t.scope.has(n)?new cs(n,t.scope.get(n)):t.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},cs.prototype.evaluate=function up(e){return this.boundExpression.evaluate(e)},cs.prototype.eachChild=function lp(){},cs.prototype.possibleOutputs=function cp(){return[undefined]},cs.prototype.serialize=function Gt(){return["var",this.name]};var fs=function fs(e,t,n,r,i){void 0===t&&(t=[]),void 0===r&&(r=new Ma),void 0===i&&(i=[]),this.registry=e,this.path=t,this.key=t.map(function(e){return"["+e+"]"}).join(""),this.scope=r,this.errors=i,this.expectedType=n};fs.prototype.parse=function ip(e,t,n,r,i){return void 0===i&&(i={}),t?this.concat(t,n,r)._parse(e,i):this._parse(e,i)},fs.prototype._parse=function hp(e,t){function n(e,t,n){return"assert"===n?new ns(t,[e]):"coerce"===n?new os(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=e[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[r];if(i){var o=i.parse(e,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=n(o,a,t.typeAnnotation||"coerce");else o=n(o,a,t.typeAnnotation||"assert")}if(!(o instanceof Qa)&&ae(o)){var u=new ss;try{o=new Qa(o.type,o.evaluate(u))}catch(l){return this.error(l.message),null}}return o}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===e?this.error("'undefined' value invalid. Use null instead."):"object"==typeof e?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof e+" instead.")},fs.prototype.concat=function rp(e,t,n){var r="number"==typeof e?this.path.concat(e):this.path,i=n?this.scope.concat(n):this.scope;return new fs(this.registry,r,t||null,i,this.errors)},fs.prototype.error=function qe(e){for(var t=[],n=arguments.length-1;0<n--;)t[n]=arguments[n+1];var r=""+this.key+t.map(function(e){return"["+e+"]"}).join("");this.errors.push(new La(r,e))},fs.prototype.checkSubtype=function mp(e,t){var n=Y(e,t);return n&&this.error(n),n};var ps=function ps(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var r=0,i=n;r<i.length;r+=1){var o=i[r],a=o[0],s=o[1];this.labels.push(a),this.outputs.push(s)}};ps.parse=function ip(e,t){var n=e[1],r=e.slice(2);if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(n=t.parse(n,1,za)))return null;var i=[],o=null;t.expectedType&&"value"!==t.expectedType.kind&&(o=t.expectedType),r.unshift(-Infinity);for(var a=0;a<r.length;a+=2){var s=r[a],u=r[a+1],l=a+1,c=a+2;if("number"!=typeof s)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(i.length&&i[i.length-1][0]>=s)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var f=t.parse(u,c,o);if(!f)return null;o=o||f.type,i.push([s,f])}return new ps(o,n,i)},ps.prototype.evaluate=function up(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;return r>=t[i-1]?n[i-1].evaluate(e):n[se(t,r)].evaluate(e)},ps.prototype.eachChild=function lp(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1){e(n[t])}},ps.prototype.possibleOutputs=function cp(){var e;return(e=[]).concat.apply(e,this.outputs.map(function(e){return e.possibleOutputs()}))},ps.prototype.serialize=function Gt(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)0<t&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var ds=Object.freeze({number:ue,color:le,array:ce}),hs=.95047,ms=1,gs=1.08883,ys=4/29,vs=6/29,_s=3*vs*vs,bs=vs*vs*vs,xs=Math.PI/180,ws=180/Math.PI,Es={forward:me,reverse:ge,interpolate:ye},Cs={forward:ve,reverse:_e,interpolate:xe},Ss=Object.freeze({lab:Es,hcl:Cs}),Ts=function Ts(e,t,n,r,i){this.type=e,this.operator=t,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(var o=0,a=i;o<a.length;o+=1){var s=a[o],u=s[0],l=s[1];this.labels.push(u),this.outputs.push(l)}};Ts.interpolationFactor=function rt(e,t,n,r){var i=0;if("exponential"===e.name)i=we(t,e.base,n,r);else if("linear"===e.name)i=we(t,1,n,r);else if("cubic-bezier"===e.name){var o=e.controlPoints;i=new zo(o[0],o[1],o[2],o[3]).solve(we(t,1,n,r))}return i},Ts.parse=function ip(e,t){var n=e[0],r=e[1],i=e[2],o=e.slice(3);if(!Array.isArray(r)||0===r.length)return t.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var a=r[1];if("number"!=typeof a)return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:a}}else{if("cubic-bezier"!==r[0])return t.error("Unknown interpolation type "+String(r[0]),1,0);var s=r.slice(1);if(4!==s.length||s.some(function(e){return"number"!=typeof e||e<0||1<e}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:s}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(i=t.parse(i,2,za)))return null;var u=[],l=null;"interpolate-hcl"===n||"interpolate-lab"===n?l=Ua:t.expectedType&&"value"!==t.expectedType.kind&&(l=t.expectedType);for(var c=0;c<o.length;c+=2){var f=o[c],p=o[c+1],d=c+3,h=c+4;if("number"!=typeof f)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(u.length&&u[u.length-1][0]>=f)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);var m=t.parse(p,h,l);if(!m)return null;l=l||m.type,u.push([f,m])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new Ts(l,n,r,i,u):t.error("Type "+$(l)+" is not interpolatable.")},Ts.prototype.evaluate=function up(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;if(r>=t[i-1])return n[i-1].evaluate(e);var o=se(t,r),a=t[o],s=t[o+1],u=Ts.interpolationFactor(this.interpolation,r,a,s),l=n[o].evaluate(e),c=n[o+1].evaluate(e);return"interpolate"===this.operator?ds[this.type.kind.toLowerCase()](l,c,u):"interpolate-hcl"===this.operator?Cs.reverse(Cs.interpolate(Cs.forward(l),Cs.forward(c),u)):Es.reverse(Es.interpolate(Es.forward(l),Es.forward(c),u))},Ts.prototype.eachChild=function lp(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1){e(n[t])}},Ts.prototype.possibleOutputs=function cp(){var e;return(e=[]).concat.apply(e,this.outputs.map(function(e){return e.possibleOutputs()}))},Ts.prototype.serialize=function Gt(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t};var As=function As(e,t){this.type=e,this.args=t};As.parse=function ip(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var n=null,r=t.expectedType;r&&"value"!==r.kind&&(n=r);for(var i=[],o=0,a=e.slice(1);o<a.length;o+=1){var s=a[o],u=t.parse(s,1+i.length,n,undefined,{typeAnnotation:"omit"});if(!u)return null;n=n||u.type,i.push(u)}Mo(n);var l=r&&i.some(function(e){return Y(r,e.type)});return new As(l?qa:n,i)},As.prototype.evaluate=function up(e){for(var t=null,n=0,r=this.args;n<r.length;n+=1){if(null!==(t=r[n].evaluate(e)))break}return t},As.prototype.eachChild=function lp(e){this.args.forEach(e)},As.prototype.possibleOutputs=function cp(){var e;return(e=[]).concat.apply(e,this.args.map(function(e){return e.possibleOutputs()}))},As.prototype.serialize=function Gt(){var t=["coalesce"];return this.eachChild(function(e){t.push(e.serialize())}),t};var ks=function ks(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};ks.prototype.evaluate=function up(e){return this.result.evaluate(e)},ks.prototype.eachChild=function lp(e){for(var t=0,n=this.bindings;t<n.length;t+=1){e(n[t][1])}e(this.result)},ks.parse=function ip(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var n=[],r=1;r<e.length-1;r+=2){var i=e[r];if("string"!=typeof i)return t.error("Expected string, but found "+typeof i+" instead.",r);if(/[^a-zA-Z0-9_]/.test(i))return t.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=t.parse(e[r+1],r+1);if(!o)return null;n.push([i,o])}var a=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return a?new ks(n,a):null},ks.prototype.possibleOutputs=function cp(){return this.result.possibleOutputs()},ks.prototype.serialize=function Gt(){for(var e=["let"],t=0,n=this.bindings;t<n.length;t+=1){var r=n[t],i=r[0],o=r[1];e.push(i,o.serialize())}return e.push(this.result.serialize()),e};var Is=function Is(e,t,n){this.type=e,this.index=t,this.input=n};Is.parse=function ip(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,za),r=t.parse(e[2],2,K(t.expectedType||qa));if(!n||!r)return null;var i=r.type;return new Is(i.itemType,n,r)},Is.prototype.evaluate=function up(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new es("Array index out of bounds: "+t+" < 0.");if(t>=n.length)throw new es("Array index out of bounds: "+t+" > "+(n.length-1)+".");if(t!==Math.floor(t))throw new es("Array index must be an integer, but found "+t+" instead.");return n[t]},Is.prototype.eachChild=function lp(e){e(this.index),e(this.input)},Is.prototype.possibleOutputs=function cp(){return[undefined]},Is.prototype.serialize=function Gt(){return["at",this.index.serialize(),this.input.serialize()]};var Ds=function Ds(e,t,n,r,i,o){this.inputType=e,this.type=t,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o};Ds.parse=function ip(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var n,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(var i={},o=[],a=2;a<e.length-1;a+=2){var s=e[a],u=e[a+1];Array.isArray(s)||(s=[s]);var l=t.concat(a);if(0===s.length)return l.error("Expected at least one branch label.");for(var c=0,f=s;c<f.length;c+=1){var p=f[c];if("number"!=typeof p&&"string"!=typeof p)return l.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof p&&Math.floor(p)!==p)return l.error("Numeric branch labels must be integer values.");if(n){if(l.checkSubtype(n,ee(p)))return null}else n=ee(p);if("undefined"!=typeof i[String(p)])return l.error("Branch labels must be unique.");i[String(p)]=o.length}var d=t.parse(u,a,r);if(!d)return null;r=r||d.type,o.push(d)}var h=t.parse(e[1],1,qa);if(!h)return null;var m=t.parse(e[e.length-1],e.length-1,r);return m?(Mo(n&&r),"value"!==h.type.kind&&t.concat(1).checkSubtype(n,h.type)?null:new Ds(n,r,h,i,o,m)):null},Ds.prototype.evaluate=function up(e){var t=this.input.evaluate(e);return(ee(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},Ds.prototype.eachChild=function lp(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},Ds.prototype.possibleOutputs=function cp(){var e;return(e=[]).concat.apply(e,this.outputs.map(function(e){return e.possibleOutputs()})).concat(this.otherwise.possibleOutputs())},Ds.prototype.serialize=function Gt(){for(var t=this,e=["match",this.input.serialize()],n=[],r={},i=0,o=Object.keys(this.cases).sort();i<o.length;i+=1){var a=o[i];(f=r[this.cases[a]])===undefined?(r[this.cases[a]]=n.length,n.push([this.cases[a],[a]])):n[f][1].push(a)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},u=0,l=n;u<l.length;u+=1){var c=l[u],f=c[0],p=c[1];1===p.length?e.push(s(p[0])):e.push(p.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var Ps=function Ps(e,t,n){this.type=e,this.branches=t,this.otherwise=n};Ps.parse=function ip(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(var r=[],i=1;i<e.length-1;i+=2){var o=t.parse(e[i],i,ja);if(!o)return null;var a=t.parse(e[i+1],i+1,n);if(!a)return null;r.push([o,a]),n=n||a.type}var s=t.parse(e[e.length-1],e.length-1,n);return s?(Mo(n),new Ps(n,r,s)):null},Ps.prototype.evaluate=function up(e){for(var t=0,n=this.branches;t<n.length;t+=1){var r=n[t],i=r[0],o=r[1];if(i.evaluate(e))return o.evaluate(e)}return this.otherwise.evaluate(e)},Ps.prototype.eachChild=function lp(e){for(var t=0,n=this.branches;t<n.length;t+=1){var r=n[t],i=r[0],o=r[1];e(i),e(o)}e(this.otherwise)},Ps.prototype.possibleOutputs=function cp(){var e;return(e=[]).concat.apply(e,this.branches.map(function(e){e[0];return e[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs())},Ps.prototype.serialize=function Gt(){var t=["case"];return this.eachChild(function(e){t.push(e.serialize())}),t};var Os=Me("==",Ce,De),Rs=Me("!=",Se,Pe),Ns=Me("<",Te,Oe),Ls=Me(">",Ae,Re),Ms=Me("<=",ke,Ne),Bs=Me(">=",Ie,Le),zs=function zs(e,t,n,r,i){this.type=Fa,this.number=e,this.locale=t,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i};zs.parse=function ip(e,t){if(3!==e.length)return t.error("Expected two arguments.");var n=t.parse(e[1],1,za);if(!n)return null;var r=e[2];if("object"!=typeof r||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");var i=null;if(r.locale&&!(i=t.parse(r.locale,1,Fa)))return null;var o=null;if(r.currency&&!(o=t.parse(r.currency,1,Fa)))return null;var a=null;if(r["min-fraction-digits"]&&!(a=t.parse(r["min-fraction-digits"],1,za)))return null;var s=null;return r["max-fraction-digits"]&&!(s=t.parse(r["max-fraction-digits"],1,za))?null:new zs(n,i,o,a,s)},zs.prototype.evaluate=function up(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):undefined,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):undefined,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):undefined}).format(this.number.evaluate(e))},zs.prototype.eachChild=function lp(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},zs.prototype.possibleOutputs=function cp(){return[undefined]},zs.prototype.serialize=function Gt(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var Fs=function Fs(e){this.type=za,this.input=e};Fs.parse=function ip(e,t){if(2!==e.length)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?t.error("Expected argument of type string or array, but found "+$(n.type)+" instead."):new Fs(n):null},Fs.prototype.evaluate=function up(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new es("Expected value to be of type string or array, but found "+$(ee(t))+" instead.")},Fs.prototype.eachChild=function lp(e){e(this.input)},Fs.prototype.possibleOutputs=function cp(){return[undefined]},Fs.prototype.serialize=function Gt(){var t=["length"];return this.eachChild(function(e){t.push(e.serialize())}),t};var js={"==":Os,"!=":Rs,">":Ls,"<":Ns,">=":Bs,"<=":Ms,array:ns,at:Is,"boolean":ns,"case":Ps,coalesce:As,collator:ls,format:rs,interpolate:Ts,"interpolate-hcl":Ts,"interpolate-lab":Ts,length:Fs,"let":ks,literal:Qa,match:Ds,number:ns,"number-format":zs,object:ns,step:ps,string:ns,"to-boolean":os,"to-color":os,"to-number":os,"to-string":os,"var":cs};us.register(js,{error:[Ha,[Fa],function(e,t){var n=t[0];throw new es(n.evaluate(e))}],"typeof":[Fa,[qa],function(e,t){return $(ee(t[0].evaluate(e)))}],"to-rgba":[K(za,4),[Ua],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[Ua,[za,za,za],Be],rgba:[Ua,[za,za,za,za],Be],has:{type:ja,overloads:[[[Fa],function(e,t){return ze(t[0].evaluate(e),e.properties())}],[[Fa,Va],function(e,t){var n=t[0],r=t[1];return ze(n.evaluate(e),r.evaluate(e))}]]},get:{type:qa,overloads:[[[Fa],function(e,t){return Fe(t[0].evaluate(e),e.properties())}],[[Fa,Va],function(e,t){var n=t[0],r=t[1];return Fe(n.evaluate(e),r.evaluate(e))}]]},"feature-state":[qa,[Fa],function(e,t){return Fe(t[0].evaluate(e),e.featureState||{})}],properties:[Va,[],function(e){return e.properties()}],"geometry-type":[Fa,[],function(e){return e.geometryType()}],id:[qa,[],function(e){return e.id()}],zoom:[za,[],function(e){return e.globals.zoom}],"heatmap-density":[za,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[za,[],function(e){return e.globals.lineProgress||0}],accumulated:[qa,[],function(e){return e.globals.accumulated===undefined?null:e.globals.accumulated}],"+":[za,Ue(za),function(e,t){for(var n=0,r=0,i=t;r<i.length;r+=1){n+=i[r].evaluate(e)}return n}],"*":[za,Ue(za),function(e,t){for(var n=1,r=0,i=t;r<i.length;r+=1){n*=i[r].evaluate(e)}return n}],"-":{type:za,overloads:[[[za,za],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)-r.evaluate(e)}],[[za],function(e,t){return-t[0].evaluate(e)}]]},"/":[za,[za,za],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)/r.evaluate(e)}],"%":[za,[za,za],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)%r.evaluate(e)}],ln2:[za,[],function(){return Math.LN2}],pi:[za,[],function(){return Math.PI}],e:[za,[],function(){return Math.E}],"^":[za,[za,za],function(e,t){var n=t[0],r=t[1];return Math.pow(n.evaluate(e),r.evaluate(e))}],sqrt:[za,[za],function(e,t){var n=t[0];return Math.sqrt(n.evaluate(e))}],log10:[za,[za],function(e,t){var n=t[0];return Math.log(n.evaluate(e))/Math.LN10}],ln:[za,[za],function(e,t){var n=t[0];return Math.log(n.evaluate(e))}],log2:[za,[za],function(e,t){var n=t[0];return Math.log(n.evaluate(e))/Math.LN2}],sin:[za,[za],function(e,t){var n=t[0];return Math.sin(n.evaluate(e))}],cos:[za,[za],function(e,t){var n=t[0];return Math.cos(n.evaluate(e))}],tan:[za,[za],function(e,t){var n=t[0];return Math.tan(n.evaluate(e))}],asin:[za,[za],function(e,t){var n=t[0];return Math.asin(n.evaluate(e))}],acos:[za,[za],function(e,t){var n=t[0];return Math.acos(n.evaluate(e))}],atan:[za,[za],function(e,t){var n=t[0];return Math.atan(n.evaluate(e))}],min:[za,Ue(za),function(t,e){return Math.min.apply(Math,e.map(function(e){return e.evaluate(t)}))}],max:[za,Ue(za),function(t,e){return Math.max.apply(Math,e.map(function(e){return e.evaluate(t)}))}],abs:[za,[za],function(e,t){var n=t[0];return Math.abs(n.evaluate(e))}],round:[za,[za],function(e,t){var n=t[0].evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[za,[za],function(e,t){var n=t[0];return Math.floor(n.evaluate(e))}],ceil:[za,[za],function(e,t){var n=t[0];return Math.ceil(n.evaluate(e))}],"filter-==":[ja,[Fa,qa],function(e,t){var n=t[0],r=t[1];return e.properties()[n.value]===r.value}],"filter-id-==":[ja,[qa],function(e,t){var n=t[0];return e.id()===n.value}],"filter-type-==":[ja,[Fa],function(e,t){var n=t[0];return e.geometryType()===n.value}],"filter-<":[ja,[Fa,qa],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[ja,[qa],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[ja,[Fa,qa],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&o<i}],"filter-id->":[ja,[qa],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&i<r}],"filter-<=":[ja,[Fa,qa],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[ja,[qa],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[ja,[Fa,qa],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&o<=i}],"filter-id->=":[ja,[qa],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&i<=r}],"filter-has":[ja,[qa],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[ja,[],function(e){return null!==e.id()}],"filter-type-in":[ja,[K(Fa)],function(e,t){return 0<=t[0].value.indexOf(e.geometryType())}],"filter-id-in":[ja,[K(qa)],function(e,t){return 0<=t[0].value.indexOf(e.id())}],"filter-in-small":[ja,[Fa,K(qa)],function(e,t){var n=t[0];return 0<=t[1].value.indexOf(e.properties()[n.value])}],"filter-in-large":[ja,[Fa,K(qa)],function(e,t){var n=t[0],r=t[1];return je(e.properties()[n.value],r.value,0,r.value.length-1)}],all:{type:ja,overloads:[[[ja,ja],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)&&r.evaluate(e)}],[Ue(ja),function(e,t){for(var n=0,r=t;n<r.length;n+=1){if(!r[n].evaluate(e))return!1}return!0}]]},any:{type:ja,overloads:[[[ja,ja],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)||r.evaluate(e)}],[Ue(ja),function(e,t){for(var n=0,r=t;n<r.length;n+=1){if(r[n].evaluate(e))return!0}return!1}]]},"!":[ja,[ja],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[ja,[Fa],function(e,t){var n=t[0],r=e.globals&&e.globals.isSupportedScript;return!r||r(n.evaluate(e))}],upcase:[Fa,[Fa],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[Fa,[Fa],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[Fa,Ue(qa),function(t,e){return e.map(function(e){return te(e.evaluate(t))}).join("")}],"resolved-locale":[Fa,[Wa],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var Us=function Us(e,t){this.expression=e,this._warningHistory={},this._evaluator=new ss,this._defaultValue=t?ct(t):null,this._enumValues=t&&"enum"===t.type?t.values:null};Us.prototype.evaluateWithoutErrorHandling=function gp(e,t,n){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this.expression.evaluate(this._evaluator)},Us.prototype.evaluate=function up(e,t,n){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null;try{var r=this.expression.evaluate(this._evaluator);if(null===r||r===undefined)return this._defaultValue;if(this._enumValues&&!(r in this._enumValues))throw new es("Expected value to be one of "+Object.keys(this._enumValues).map(function(e){return JSON.stringify(e)}).join(", ")+", but found "+JSON.stringify(r)+" instead.");return r}catch(i){return this._warningHistory[i.message]||(this._warningHistory[i.message]=!0,"undefined"!=typeof console&&console.warn(i.message)),this._defaultValue}};var Vs=function Vs(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!ie(t.expression)};Vs.prototype.evaluateWithoutErrorHandling=function gp(e,t,n){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n)},Vs.prototype.evaluate=function up(e,t,n){return this._styleExpression.evaluate(e,t,n)};var qs=function qs(e,t,n){this.kind=e,this.zoomStops=n.labels,this._styleExpression=t,this.isStateDependent="camera"!==e&&!ie(t.expression),n instanceof Ts&&(this._interpolationType=n.interpolation)};qs.prototype.evaluateWithoutErrorHandling=function gp(e,t,n){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n)},qs.prototype.evaluate=function up(e,t,n){return this._styleExpression.evaluate(e,t,n)},qs.prototype.interpolationFactor=function rt(e,t,n){return this._interpolationType?Ts.interpolationFactor(this._interpolationType,e,t,n):0};var Hs=function Hs(e,t){this._parameters=e,this._specification=t,G(this,$e(this._parameters,this._specification))};Hs.deserialize=function Zt(e){return new Hs(e._parameters,e._specification)};var Ws={type:"boolean","default":!(Hs.serialize=function Gt(e){return{_parameters:e._parameters,_specification:e._specification}}),transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},Gs={"*":function yp(){return[]},array:pt,"boolean":gt,number:dt,color:yt,constants:W,"enum":vt,filter:kt,"function":ht,layer:Rt,object:ft,source:Nt,light:Lt,string:Mt,formatted:Bt};jt.source=Vt(Nt),jt.light=Vt(Lt),jt.layer=Vt(Rt),jt.filter=Vt(kt),jt.paintProperty=Vt(Pt),jt.layoutProperty=Vt(Ot);var Zs=jt,Xs=(jt.source,jt.light),Ks=(jt.filter,jt.paintProperty),$s=jt.layoutProperty,Ys=Ht,Js=3;Ht.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Ht.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ht.prototype._insertCell=function(e,t,n,r,i,o){this.cells[i].push(o)},Ht.prototype.query=function(e,t,n,r,i){var o=this.min,a=this.max;if(e<=o&&t<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[],u={};return this._forEachCell(e,t,n,r,this._queryCell,s,u,i),s},Ht.prototype._queryCell=function(e,t,n,r,i,o,a,s){var u=this.cells[i];if(null!==u)for(var l=this.keys,c=this.bboxes,f=0;f<u.length;f++){var p=u[f];if(a[p]===undefined){var d=4*p;(s?s(c[d+0],c[d+1],c[d+2],c[d+3]):e<=c[d+2]&&t<=c[d+3]&&n>=c[d+0]&&r>=c[d+1])?(a[p]=!0,o.push(l[p])):a[p]=!1}}},Ht.prototype._forEachCell=function(e,t,n,r,i,o,a,s){for(var u=this._convertToCellCoord(e),l=this._convertToCellCoord(t),c=this._convertToCellCoord(n),f=this._convertToCellCoord(r),p=u;p<=c;p++)for(var d=l;d<=f;d++){var h=this.d*d+p;if((!s||s(this._convertFromCellCoord(p),this._convertFromCellCoord(d),this._convertFromCellCoord(p+1),this._convertFromCellCoord(d+1)))&&i.call(this,e,t,n,r,h,o,a,s))return}},Ht.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Ht.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Ht.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=Js+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(t+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=t,a=0;a<e.length;a++){var s=e[a];i[Js+a]=o,i.set(s,o),o+=s.length}return i[Js+e.length]=o,i.set(this.keys,o),o+=this.keys.length,i[Js+e.length+1]=o,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var Qs=self.ImageData,eu={};for(var tu in Wt("Object",Object),Ys.serialize=function Gt(e,t){var n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},Ys.deserialize=function Zt(e){return new Ys(e.buffer)},Wt("Grid",Ys),Wt("Color",Ka),Wt("Error",Error),Wt("StylePropertyFunction",Hs),Wt("StyleExpression",Us,{omit:["_evaluator"]}),Wt("ZoomDependentExpression",qs),Wt("ZoomConstantExpression",Vs),Wt("CompoundExpression",us,{omit:["_evaluate"]}),js)js[tu]._classRegistryKey||Wt("Expression_"+tu,js[tu]);var nu=function nu(){this.first=!0};nu.prototype.update=function vp(e,t){var n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,
this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))};var ru,iu={"Latin-1 Supplement":function(e){return 128<=e&&e<=255},Arabic:function(e){return 1536<=e&&e<=1791},"Arabic Supplement":function(e){return 1872<=e&&e<=1919},"Arabic Extended-A":function(e){return 2208<=e&&e<=2303},"Hangul Jamo":function(e){return 4352<=e&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return 5120<=e&&e<=5759},Khmer:function(e){return 6016<=e&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return 6320<=e&&e<=6399},"General Punctuation":function(e){return 8192<=e&&e<=8303},"Letterlike Symbols":function(e){return 8448<=e&&e<=8527},"Number Forms":function(e){return 8528<=e&&e<=8591},"Miscellaneous Technical":function(e){return 8960<=e&&e<=9215},"Control Pictures":function(e){return 9216<=e&&e<=9279},"Optical Character Recognition":function(e){return 9280<=e&&e<=9311},"Enclosed Alphanumerics":function(e){return 9312<=e&&e<=9471},"Geometric Shapes":function(e){return 9632<=e&&e<=9727},"Miscellaneous Symbols":function(e){return 9728<=e&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return 11008<=e&&e<=11263},"CJK Radicals Supplement":function(e){return 11904<=e&&e<=12031},"Kangxi Radicals":function(e){return 12032<=e&&e<=12255},"Ideographic Description Characters":function(e){return 12272<=e&&e<=12287},"CJK Symbols and Punctuation":function(e){return 12288<=e&&e<=12351},Hiragana:function(e){return 12352<=e&&e<=12447},Katakana:function(e){return 12448<=e&&e<=12543},Bopomofo:function(e){return 12544<=e&&e<=12591},"Hangul Compatibility Jamo":function(e){return 12592<=e&&e<=12687},Kanbun:function(e){return 12688<=e&&e<=12703},"Bopomofo Extended":function(e){return 12704<=e&&e<=12735},"CJK Strokes":function(e){return 12736<=e&&e<=12783},"Katakana Phonetic Extensions":function(e){return 12784<=e&&e<=12799},"Enclosed CJK Letters and Months":function(e){return 12800<=e&&e<=13055},"CJK Compatibility":function(e){return 13056<=e&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return 13312<=e&&e<=19903},"Yijing Hexagram Symbols":function(e){return 19904<=e&&e<=19967},"CJK Unified Ideographs":function(e){return 19968<=e&&e<=40959},"Yi Syllables":function(e){return 40960<=e&&e<=42127},"Yi Radicals":function(e){return 42128<=e&&e<=42191},"Hangul Jamo Extended-A":function(e){return 43360<=e&&e<=43391},"Hangul Syllables":function(e){return 44032<=e&&e<=55215},"Hangul Jamo Extended-B":function(e){return 55216<=e&&e<=55295},"Private Use Area":function(e){return 57344<=e&&e<=63743},"CJK Compatibility Ideographs":function(e){return 63744<=e&&e<=64255},"Arabic Presentation Forms-A":function(e){return 64336<=e&&e<=65023},"Vertical Forms":function(e){return 65040<=e&&e<=65055},"CJK Compatibility Forms":function(e){return 65072<=e&&e<=65103},"Small Form Variants":function(e){return 65104<=e&&e<=65135},"Arabic Presentation Forms-B":function(e){return 65136<=e&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return 65280<=e&&e<=65519}},ou=!1,au=null,su=!1,uu=new Oa,lu=function(e){return au?e({pluginURL:au,completionCallback:ru}):uu.once("pluginAvailable",e),e},cu=function(){ou=!1,au=null},fu=function(e,t){if(ou)throw new Error("setRTLTextPlugin cannot be called multiple times.");ou=!0,au=Xo.resolveURL(e),ru=function(e){e?(cu(),t&&t(e)):su=!0},uu.fire(new Da("pluginAvailable",{pluginURL:au,completionCallback:ru}))},pu={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function _p(){return su||null!=pu.applyArabicShaping}},du=function du(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new nu,this.transition={})};du.prototype.isSupportedScript=function bp(e){return nn(e,pu.isLoaded())},du.prototype.crossFadingFactor=function xp(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},du.prototype.getCrossfadeParameters=function wp(){var e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}};var hu=function hu(e,t){this.property=e,this.value=t,this.expression=st(t===undefined?e.specification["default"]:t,e.specification)};hu.prototype.isDataDriven=function Ep(){return"source"===this.expression.kind||"composite"===this.expression.kind},hu.prototype.possiblyEvaluate=function Cp(e){return this.property.possiblyEvaluate(this,e)};var mu=function mu(e){this.property=e,this.value=new hu(e,undefined)};mu.prototype.transitioned=function Sp(e,t){return new yu(this.property,this.value,t,h({},e.transition,this.transition),e.now)},mu.prototype.untransitioned=function Tp(){return new yu(this.property,this.value,null,{},0)};var gu=function gu(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};gu.prototype.getValue=function Ap(e){return x(this._values[e].value.value)},gu.prototype.setValue=function kp(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new mu(this._values[e].property)),this._values[e].value=new hu(this._values[e].property,null===t?undefined:x(t))},gu.prototype.getTransition=function Ip(e){return x(this._values[e].transition)},gu.prototype.setTransition=function Dp(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new mu(this._values[e].property)),this._values[e].transition=x(t)||undefined},gu.prototype.serialize=function Pp(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var r=n[t],i=this.getValue(r);i!==undefined&&(e[r]=i);var o=this.getTransition(r);o!==undefined&&(e[r+"-transition"]=o)}return e},gu.prototype.transitioned=function Sp(e,t){for(var n=new vu(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var o=i[r];n._values[o]=this._values[o].transitioned(e,t._values[o])}return n},gu.prototype.untransitioned=function Tp(){for(var e=new vu(this._properties),t=0,n=Object.keys(this._values);t<n.length;t+=1){var r=n[t];e._values[r]=this._values[r].untransitioned()}return e};var yu=function yu(e,t,n,r,i){this.property=e,this.value=t,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,e.specification.transition&&(r.delay||r.duration)&&(this.prior=n)};yu.prototype.possiblyEvaluate=function Cp(e){var t=e.now||0,n=this.value.possiblyEvaluate(e),r=this.prior;if(r){if(t>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(t<this.begin)return r.possiblyEvaluate(e);var i=(t-this.begin)/(this.end-this.begin);return this.property.interpolate(r.possiblyEvaluate(e),n,o(i))}return n};var vu=function vu(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};vu.prototype.possiblyEvaluate=function Cp(e){for(var t=new xu(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var i=r[n];t._values[i]=this._values[i].possiblyEvaluate(e)}return t},vu.prototype.hasTransition=function Op(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1){var n=t[e];if(this._values[n].prior)return!0}return!1};var _u=function _u(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};_u.prototype.getValue=function Ap(e){return x(this._values[e].value)},_u.prototype.setValue=function kp(e,t){this._values[e]=new hu(this._values[e].property,null===t?undefined:x(t))},_u.prototype.serialize=function Pp(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var r=n[t],i=this.getValue(r);i!==undefined&&(e[r]=i)}return e},_u.prototype.possiblyEvaluate=function Cp(e){for(var t=new xu(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var i=r[n];t._values[i]=this._values[i].possiblyEvaluate(e)}return t};var bu=function bu(e,t,n){this.property=e,this.value=t,this.parameters=n};bu.prototype.isConstant=function ae(){return"constant"===this.value.kind},bu.prototype.constantOr=function Rp(e){return"constant"===this.value.kind?this.value.value:e},bu.prototype.evaluate=function up(e,t){return this.property.evaluate(this.value,this.parameters,e,t)};var xu=function xu(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};xu.prototype.get=function Fe(e){return this._values[e]};var wu=function wu(e){this.specification=e};wu.prototype.possiblyEvaluate=function Cp(e,t){return Mo(!e.isDataDriven()),e.expression.evaluate(t)},wu.prototype.interpolate=function Np(e,t,n){var r=ds[this.specification.type];return r?r(e,t,n):e};var Eu=function Eu(e){this.specification=e};Eu.prototype.possiblyEvaluate=function Cp(e,t){return"constant"===e.expression.kind||"camera"===e.expression.kind?new bu(this,{kind:"constant",value:e.expression.evaluate(t)},t):new bu(this,e.expression,t)},Eu.prototype.interpolate=function Lp(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(e.value.value===undefined||t.value.value===undefined)return new bu(this,{kind:"constant",value:undefined},e.parameters);var r=ds[this.specification.type];return r?new bu(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.parameters):e},Eu.prototype.evaluate=function up(e,t,n,r){return"constant"===e.kind?e.value:e.evaluate(t,n,r)};var Cu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.possiblyEvaluate=function o(e,t){if(e.value===undefined)return new bu(this,{kind:"constant",value:undefined},t);if("constant"===e.expression.kind){var n=e.expression.evaluate(t),r=this._calculate(n,n,n,t);return new bu(this,{kind:"constant",value:r},t)}if("camera"===e.expression.kind){var i=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new bu(this,{kind:"constant",value:i},t)}return new bu(this,e.expression,t)},t.prototype.evaluate=function a(e,t,n,r){if("source"===e.kind){var i=e.evaluate(t,n,r);return this._calculate(i,i,i,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},n,r),e.evaluate({zoom:Math.floor(t.zoom)},n,r),e.evaluate({zoom:Math.floor(t.zoom)+1},n,r),t):e.value},t.prototype._calculate=function i(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}},t.prototype.interpolate=function n(e){return e},t}(Eu),Su=function Su(e){this.specification=e};Su.prototype.possiblyEvaluate=function Cp(e,t){if(e.value===undefined)return undefined;if("constant"===e.expression.kind){var n=e.expression.evaluate(t);return this._calculate(n,n,n,t)}return Mo(!e.isDataDriven()),this._calculate(e.expression.evaluate(new du(Math.floor(t.zoom-1),t)),e.expression.evaluate(new du(Math.floor(t.zoom),t)),e.expression.evaluate(new du(Math.floor(t.zoom+1),t)),t)},Su.prototype._calculate=function Mp(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}},Su.prototype.interpolate=function ds(e){return e};var Tu=function Tu(e){this.specification=e};Tu.prototype.possiblyEvaluate=function Cp(e,t){return!!e.expression.evaluate(t)},Tu.prototype.interpolate=function ds(){return!1};var Au=function Au(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},e){var n=e[t],r=this.defaultPropertyValues[t]=new hu(n,undefined),i=this.defaultTransitionablePropertyValues[t]=new mu(n);this.defaultTransitioningPropertyValues[t]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=r.possiblyEvaluate({})}};Wt("DataDrivenProperty",Eu),Wt("DataConstantProperty",wu),Wt("CrossFadedDataDrivenProperty",Cu),Wt("CrossFadedProperty",Su),Wt("ColorRampProperty",Tu);var ku="-transition",Iu=function(i){function e(e,t){if(i.call(this),this.id=e.id,this.type=e.type,this.visibility="visible",this._featureFilter=function(){return!0},"custom"!==e.type&&(e=e,this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new _u(t.layout)),t.paint)){for(var n in this._transitionablePaint=new gu(t.paint),e.paint)this.setPaintProperty(n,e.paint[n],{validate:!1});for(var r in e.layout)this.setLayoutProperty(r,e.layout[r],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),(e.prototype.constructor=e).prototype.getCrossfadeParameters=function t(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function n(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)},e.prototype.setLayoutProperty=function o(e,t,n){if(void 0===n&&(n={}),null!==t&&t!==undefined){var r="layers."+this.id+".layout."+e;if(this._validate($s,r,e,t,n))return}"visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility="none"===t?t:"visible"},e.prototype.getPaintProperty=function r(e){return v(e,ku)?this._transitionablePaint.getTransition(e.slice(0,-ku.length)):this._transitionablePaint.getValue(e)},e.prototype.setPaintProperty=function u(e,t,n){if(void 0===n&&(n={}),null!==t&&t!==undefined){var r="layers."+this.id+".paint."+e;if(this._validate(Ks,r,e,t,n))return!1}if(v(e,ku))return this._transitionablePaint.setTransition(e.slice(0,-ku.length),t||undefined),!1;var i=this._transitionablePaint._values[e],o="cross-faded-data-driven"===i.property.specification["property-type"]&&!i.value.value&&t,a=this._transitionablePaint._values[e].value.isDataDriven();this._transitionablePaint.setValue(e,t);var s=this._transitionablePaint._values[e].value.isDataDriven();return this._handleSpecialPaintPropertyUpdate(e),s||a||o},e.prototype._handleSpecialPaintPropertyUpdate=function a(){},e.prototype.isHidden=function s(e){return!!(this.minzoom&&e<this.minzoom)||(!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility)},e.prototype.updateTransitions=function l(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)},e.prototype.hasTransition=function c(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function f(e){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e)),this.paint=this._transitioningPaint.possiblyEvaluate(e)},e.prototype.serialize=function p(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(e.layout=e.layout||{},e.layout.visibility="none"),b(e,function(e,t){return!(e===undefined||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)})},e.prototype._validate=function d(e,t,n,r,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&qt(this,e.call(Zs,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:Ra,style:{glyphs:!0,sprite:!0}}))},e.prototype.hasOffscreenPass=function h(){return!1},e.prototype.resize=function m(){},e.prototype.isStateDependent=function g(){for(var e in this.paint._values){var t=this.paint.get(e);if(t instanceof bu&&He(t.property.specification)&&(("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent))return!0}return!1},e}(Oa),Du={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Pu=function Pu(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ou=128,Ru=5,Nu=function Nu(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};Nu.serialize=function Gt(e,t){return Mo(!e.isTransferred),e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Nu.deserialize=function Zt(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},Nu.prototype._trim=function Bp(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Nu.prototype.clear=function zp(){this.length=0},Nu.prototype.resize=function Fp(e){Mo(!this.isTransferred),this.reserve(e),this.length=e},Nu.prototype.reserve=function jp(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(this.capacity*Ru),Ou),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},Nu.prototype._refreshViews=function Up(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Lu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype._refreshViews=function n(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function r(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},t.prototype.emplace=function i(e,t,n){var r=2*e;return this.int16[r+0]=t,this.int16[r+1]=n,e},t}(Nu);Lu.prototype.bytesPerElement=4,Wt("StructArrayLayout2i4",Lu);var Mu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype._refreshViews=function n(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function o(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)},t.prototype.emplace=function a(e,t,n,r,i){var o=4*e;return this.int16[o+0]=t,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,e},t}(Nu);Mu.prototype.bytesPerElement=8,Wt("StructArrayLayout4i8",Mu);var Bu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype._refreshViews=function n(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function s(e,t,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)},t.prototype.emplace=function u(e,t,n,r,i,o,a){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,e},t}(Nu);Bu.prototype.bytesPerElement=12,Wt("StructArrayLayout2i4i12",Bu);var zu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype._refreshViews=function n(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function l(e,t,n,r,i,o,a,s){var u=this.length;return this.resize(u+1),this.emplace(u,e,t,n,r,i,o,a,s)},t.prototype.emplace=function f(e,t,n,r,i,o,a,s,u){var l=6*e,c=12*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+3]=i,this.uint8[c+8]=o,this.uint8[c+9]=a,this.uint8[c+10]=s,this.uint8[c+11]=u,e},t}(Nu);zu.prototype.bytesPerElement=12,Wt("StructArrayLayout4i4ub12",zu);var Fu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype._refreshViews=function n(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function l(e,t,n,r,i,o,a,s){var u=this.length;return this.resize(u+1),this.emplace(u,e,t,n,r,i,o,a,s)},t.prototype.emplace=function c(e,t,n,r,i,o,a,s,u){var l=8*e;return this.uint16[l+0]=t,this.uint16[l+1]=n,this.uint16[l+2]=r,this.uint16[l+3]=i,this.uint16[l+4]=o,this.uint16[l+5]=a,this.uint16[l+6]=s,this.uint16[l+7]=u,e},t}(Nu);Fu.prototype.bytesPerElement=16,Wt("StructArrayLayout8ui16",Fu);var ju=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype._refreshViews=function n(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function l(e,t,n,r,i,o,a,s){var u=this.length;return this.resize(u+1),this.emplace(u,e,t,n,r,i,o,a,s)},t.prototype.emplace=function c(e,t,n,r,i,o,a,s,u){var l=8*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+3]=i,this.uint16[l+4]=o,this.uint16[l+5]=a,this.uint16[l+6]=s,this.uint16[l+7]=u,e},t}(Nu);ju.prototype.bytesPerElement=16,Wt("StructArrayLayout4i4ui16",ju);var Uu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype._refreshViews=function n(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function i(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},t.prototype.emplace=function o(e,t,n,r){var i=3*e;return this.float32[i+0]=t,this.float32[i+1]=n,this.float32[i+2]=r,e},t}(Nu);Uu.prototype.bytesPerElement=12,Wt("StructArrayLayout3f12",Uu);var Vu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype._refreshViews=function n(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function r(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},t.prototype.emplace=function i(e,t){var n=1*e;return this.uint32[n+0]=t,e},t}(Nu);Vu.prototype.bytesPerElement=4,Wt("StructArrayLayout1ul4",Vu);var qu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype._refreshViews=function n(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function p(e,t,n,r,i,o,a,s,u,l,c){var f=this.length;return this.resize(f+1),this.emplace(f,e,t,n,r,i,o,a,s,u,l,c)},t.prototype.emplace=function h(e,t,n,r,i,o,a,s,u,l,c,f){var p=12*e,d=6*e;return this.int16[p+0]=t,this.int16[p+1]=n,this.int16[p+2]=r,this.int16[p+3]=i,this.int16[p+4]=o,this.int16[p+5]=a,this.uint32[d+3]=s,this.uint16[p+8]=u,this.uint16[p+9]=l,this.int16[p+10]=c,this.int16[p+11]=f,e},t}(Nu);qu.prototype.bytesPerElement=24,Wt("StructArrayLayout6i1ul2ui2i24",qu);var Hu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype._refreshViews=function n(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function s(e,t,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)},t.prototype.emplace=function u(e,t,n,r,i,o,a){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,e},t}(Nu);Hu.prototype.bytesPerElement=12,Wt("StructArrayLayout2i2i2i12",Hu);var Wu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype._refreshViews=function n(){this.uint8=new Uint8Array(this.arrayBuffer)},t.prototype.emplaceBack=function r(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},t.prototype.emplace=function i(e,t,n){var r=4*e;return this.uint8[r+0]=t,this.uint8[r+1]=n,e},t}(Nu);Wu.prototype.bytesPerElement=4,Wt("StructArrayLayout2ub4",Wu);var Gu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype._refreshViews=function n(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function m(e,t,n,r,i,o,a,s,u,l,c,f,p,d){var h=this.length;return this.resize(h+1),this.emplace(h,e,t,n,r,i,o,a,s,u,l,c,f,p,d)},t.prototype.emplace=function v(e,t,n,r,i,o,a,s,u,l,c,f,p,d,h){var m=20*e,g=10*e,y=40*e;return this.int16[m+0]=t,this.int16[m+1]=n,this.uint16[m+2]=r,this.uint16[m+3]=i,this.uint32[g+2]=o,this.uint32[g+3]=a,this.uint32[g+4]=s,this.uint16[m+10]=u,this.uint16[m+11]=l,this.uint16[m+12]=c,this.float32[g+7]=f,this.float32[g+8]=p,this.uint8[y+36]=d,this.uint8[y+37]=h,e},t}(Nu);Gu.prototype.bytesPerElement=40,Wt("StructArrayLayout2i2ui3ul3ui2f2ub40",Gu);var Zu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype._refreshViews=function n(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function m(e,t,n,r,i,o,a,s,u,l,c,f,p,d){var h=this.length;return this.resize(h+1),this.emplace(h,e,t,n,r,i,o,a,s,u,l,c,f,p,d)},t.prototype.emplace=function y(e,t,n,r,i,o,a,s,u,l,c,f,p,d,h){var m=16*e,g=8*e;return this.int16[m+0]=t,this.int16[m+1]=n,this.int16[m+2]=r,this.int16[m+3]=i,this.uint16[m+4]=o,this.uint16[m+5]=a,this.uint16[m+6]=s,this.uint16[m+7]=u,this.uint16[m+8]=l,this.uint16[m+9]=c,this.uint16[m+10]=f,this.uint16[m+11]=p,this.uint16[m+12]=d,this.uint32[g+7]=h,e},t}(Nu);Zu.prototype.bytesPerElement=32,Wt("StructArrayLayout4i9ui1ul32",Zu);var Xu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype._refreshViews=function n(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function r(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},t.prototype.emplace=function i(e,t){var n=1*e;return this.float32[n+0]=t,e},t}(Nu);Xu.prototype.bytesPerElement=4,Wt("StructArrayLayout1f4",Xu);var Ku=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype._refreshViews=function n(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function i(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},t.prototype.emplace=function o(e,t,n,r){var i=3*e;return this.int16[i+0]=t,this.int16[i+1]=n,this.int16[i+2]=r,e},t}(Nu);Ku.prototype.bytesPerElement=6,Wt("StructArrayLayout3i6",Ku);var $u=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype._refreshViews=function n(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function i(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},t.prototype.emplace=function a(e,t,n,r){var i=2*e,o=4*e;return this.uint32[i+0]=t,this.uint16[o+2]=n,this.uint16[o+3]=r,e},t}(Nu);$u.prototype.bytesPerElement=8,Wt("StructArrayLayout1ul2ui8",$u);var Yu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype._refreshViews=function n(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function i(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},t.prototype.emplace=function o(e,t,n,r){var i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,this.uint16[i+2]=r,e},t}(Nu);Yu.prototype.bytesPerElement=6,Wt("StructArrayLayout3ui6",Yu);var Ju=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype._refreshViews=function n(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function r(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},t.prototype.emplace=function i(e,t,n){var r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,e},t}(Nu);Ju.prototype.bytesPerElement=4,Wt("StructArrayLayout2ui4",Ju);var Qu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype._refreshViews=function n(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function r(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},t.prototype.emplace=function i(e,t){var n=1*e;return this.uint16[n+0]=t,e},t}(Nu);Qu.prototype.bytesPerElement=2,Wt("StructArrayLayout1ui2",Qu);var el=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype._refreshViews=function n(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function r(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},t.prototype.emplace=function i(e,t,n){var r=2*e;return this.float32[r+0]=t,this.float32[r+1]=n,e},t}(Nu);el.prototype.bytesPerElement=8,Wt("StructArrayLayout2f8",el);var tl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype._refreshViews=function n(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function o(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)},t.prototype.emplace=function a(e,t,n,r,i){var o=4*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,e},t}(Nu);tl.prototype.bytesPerElement=16,Wt("StructArrayLayout4f16",tl);var nl=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointX.set=function(e){this._structArray.int16[this._pos2+0]=e},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorPointY.set=function(e){this._structArray.int16[this._pos2+1]=e},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.x1.set=function(e){this._structArray.int16[this._pos2+2]=e},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.y1.set=function(e){this._structArray.int16[this._pos2+3]=e},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.x2.set=function(e){this._structArray.int16[this._pos2+4]=e},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.y2.set=function(e){this._structArray.int16[this._pos2+5]=e},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.featureIndex.set=function(e){this._structArray.uint32[this._pos4+3]=e},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.sourceLayerIndex.set=function(e){this._structArray.uint16[this._pos2+8]=e},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.bucketIndex.set=function(e){this._structArray.uint16[this._pos2+9]=e},n.radius.get=function(){return this._structArray.int16[this._pos2+10]},n.radius.set=function(e){this._structArray.int16[this._pos2+10]=e},n.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},n.signedDistanceFromAnchor.set=function(e){this._structArray.int16[this._pos2+11]=e},n.anchorPoint.get=function(){return new Fo(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,n),t}(Pu);nl.prototype.size=24;var rl=function(e){
function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.get=function n(e){return Mo(!this.isTransferred),new nl(this,e)},t}(qu);Wt("CollisionBoxArray",rl);var il=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(e){this._structArray.int16[this._pos2+0]=e},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(e){this._structArray.int16[this._pos2+1]=e},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.glyphStartIndex.set=function(e){this._structArray.uint16[this._pos2+2]=e},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.numGlyphs.set=function(e){this._structArray.uint16[this._pos2+3]=e},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.vertexStartIndex.set=function(e){this._structArray.uint32[this._pos4+2]=e},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineStartIndex.set=function(e){this._structArray.uint32[this._pos4+3]=e},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.lineLength.set=function(e){this._structArray.uint32[this._pos4+4]=e},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.segment.set=function(e){this._structArray.uint16[this._pos2+10]=e},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.lowerSize.set=function(e){this._structArray.uint16[this._pos2+11]=e},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.upperSize.set=function(e){this._structArray.uint16[this._pos2+12]=e},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetX.set=function(e){this._structArray.float32[this._pos4+7]=e},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.lineOffsetY.set=function(e){this._structArray.float32[this._pos4+8]=e},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.writingMode.set=function(e){this._structArray.uint8[this._pos1+36]=e},n.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},n.hidden.set=function(e){this._structArray.uint8[this._pos1+37]=e},Object.defineProperties(t.prototype,n),t}(Pu);il.prototype.size=40;var ol=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.get=function n(e){return Mo(!this.isTransferred),new il(this,e)},t}(Gu);Wt("PlacedSymbolArray",ol);var al=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},horizontalPlacedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},crossTileID:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(e){this._structArray.int16[this._pos2+0]=e},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(e){this._structArray.int16[this._pos2+1]=e},n.horizontalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.horizontalPlacedTextSymbolIndex.set=function(e){this._structArray.int16[this._pos2+2]=e},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.verticalPlacedTextSymbolIndex.set=function(e){this._structArray.int16[this._pos2+3]=e},n.key.get=function(){return this._structArray.uint16[this._pos2+4]},n.key.set=function(e){this._structArray.uint16[this._pos2+4]=e},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+5]},n.textBoxStartIndex.set=function(e){this._structArray.uint16[this._pos2+5]=e},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+6]},n.textBoxEndIndex.set=function(e){this._structArray.uint16[this._pos2+6]=e},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+7]},n.iconBoxStartIndex.set=function(e){this._structArray.uint16[this._pos2+7]=e},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.iconBoxEndIndex.set=function(e){this._structArray.uint16[this._pos2+8]=e},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.featureIndex.set=function(e){this._structArray.uint16[this._pos2+9]=e},n.numGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+10]},n.numGlyphVertices.set=function(e){this._structArray.uint16[this._pos2+10]=e},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+11]},n.numVerticalGlyphVertices.set=function(e){this._structArray.uint16[this._pos2+11]=e},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+12]},n.numIconVertices.set=function(e){this._structArray.uint16[this._pos2+12]=e},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+7]},n.crossTileID.set=function(e){this._structArray.uint32[this._pos4+7]=e},Object.defineProperties(t.prototype,n),t}(Pu);al.prototype.size=32;var sl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.get=function n(e){return Mo(!this.isTransferred),new al(this,e)},t}(Zu);Wt("SymbolInstanceArray",sl);var ul=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={offsetX:{configurable:!0}};return n.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},n.offsetX.set=function(e){this._structArray.float32[this._pos4+0]=e},Object.defineProperties(t.prototype,n),t}(Pu);ul.prototype.size=4;var ll=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getoffsetX=function n(e){return this.float32[1*e+0]},t.prototype.get=function r(e){return Mo(!this.isTransferred),new ul(this,e)},t}(Xu);Wt("GlyphOffsetArray",ll);var cl=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return n.x.get=function(){return this._structArray.int16[this._pos2+0]},n.x.set=function(e){this._structArray.int16[this._pos2+0]=e},n.y.get=function(){return this._structArray.int16[this._pos2+1]},n.y.set=function(e){this._structArray.int16[this._pos2+1]=e},n.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},n.tileUnitDistanceFromAnchor.set=function(e){this._structArray.int16[this._pos2+2]=e},Object.defineProperties(t.prototype,n),t}(Pu);cl.prototype.size=6;var fl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getx=function n(e){return this.int16[3*e+0]},t.prototype.gety=function r(e){return this.int16[3*e+1]},t.prototype.gettileUnitDistanceFromAnchor=function i(e){return this.int16[3*e+2]},t.prototype.get=function o(e){return Mo(!this.isTransferred),new cl(this,e)},t}(Ku);Wt("SymbolLineVertexArray",fl);var pl=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.featureIndex.set=function(e){this._structArray.uint32[this._pos4+0]=e},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.sourceLayerIndex.set=function(e){this._structArray.uint16[this._pos2+2]=e},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},n.bucketIndex.set=function(e){this._structArray.uint16[this._pos2+3]=e},Object.defineProperties(t.prototype,n),t}(Pu);pl.prototype.size=8;var dl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.get=function n(e){return Mo(!this.isTransferred),new pl(this,e)},t}($u);Wt("FeatureIndexArray",dl);var hl=rn([{name:"a_pos",components:2,type:"Int16"}],4),ml=hl.members,gl=(hl.size,hl.alignment,function gl(e){void 0===e&&(e=[]),this.segments=e});gl.prototype.prepareSegment=function Vp(e,t,n,r){var i=this.segments[this.segments.length-1];return e>gl.MAX_VERTEX_ARRAY_LENGTH&&E("Max vertices per segment is "+gl.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!i||i.vertexLength+e>gl.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},r!==undefined&&(i.sortKey=r),this.segments.push(i)),i},gl.prototype.get=function Fe(){return this.segments},gl.prototype.destroy=function qp(){for(var e=0,t=this.segments;e<t.length;e+=1){var n=t[e];for(var r in n.vaos)n.vaos[r].destroy()}},gl.simpleSegment=function Hp(e,t,n,r){return new gl([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])},gl.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Wt("SegmentVector",gl);var yl=function yl(){this.ids=[],this.positions=[],this.indexed=!1};yl.prototype.add=function Wp(e,t,n,r){this.ids.push(e),this.positions.push(t,n,r)},yl.prototype.getPositions=function Gp(e){Mo(this.indexed);for(var t=0,n=this.ids.length-1;t<n;){var r=t+n>>1;this.ids[r]>=e?n=r:t=r+1}for(var i=[];this.ids[t]===e;){var o=this.positions[3*t],a=this.positions[3*t+1],s=this.positions[3*t+2];i.push({index:o,start:a,end:s}),t++}return i},yl.serialize=function Pp(e,t){var n=new Float64Array(e.ids),r=new Uint32Array(e.positions);return un(n,r,0,n.length-1),t.push(n.buffer,r.buffer),{ids:n,positions:r}},yl.deserialize=function Zp(e){var t=new yl;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t},Wt("FeaturePositionMap",yl);var vl=function vl(e,t){this.gl=e.gl,this.location=t},_l=function(n){function e(e,t){n.call(this,e,t),this.current=0}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),(e.prototype.constructor=e).prototype.set=function t(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))},e}(vl),bl=function(n){function e(e,t){n.call(this,e,t),this.current=0}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),(e.prototype.constructor=e).prototype.set=function t(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))},e}(vl),xl=function(n){function e(e,t){n.call(this,e,t),this.current=[0,0]}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),(e.prototype.constructor=e).prototype.set=function t(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))},e}(vl),wl=function(n){function e(e,t){n.call(this,e,t),this.current=[0,0,0]}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),(e.prototype.constructor=e).prototype.set=function t(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))},e}(vl),El=function(n){function e(e,t){n.call(this,e,t),this.current=[0,0,0,0]}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),(e.prototype.constructor=e).prototype.set=function t(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))},e}(vl),Cl=function(n){function e(e,t){n.call(this,e,t),this.current=Ka.transparent}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),(e.prototype.constructor=e).prototype.set=function t(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))},e}(vl),Sl=new Float32Array(16),Tl=function(n){function e(e,t){n.call(this,e,t),this.current=Sl}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),(e.prototype.constructor=e).prototype.set=function r(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(var t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}},e}(vl),Al=function Al(e,t,n){this.value=e,this.names=t,this.uniformNames=this.names.map(function(e){return"u_"+e}),this.type=n,this.maxValue=-Infinity};Al.prototype.defines=function Xp(){return this.names.map(function(e){return"#define HAS_UNIFORM_u_"+e})},Al.prototype.setConstantPatternPositions=function Kp(){},Al.prototype.populatePaintArray=function $p(){},Al.prototype.updatePaintArray=function Yp(){},Al.prototype.upload=function Jp(){},Al.prototype.destroy=function qp(){},Al.prototype.setUniforms=function Qp(e,t,n,r){t.set(r.constantOr(this.value))},Al.prototype.getBinding=function ed(e,t){return"color"===this.type?new Cl(e,t):new bl(e,t)},Al.serialize=function td(e){var t=e.value,n=e.names,r=e.type;return{value:Gt(t),names:n,type:r}},Al.deserialize=function yo(e){var t=e.value,n=e.names,r=e.type;return new Al(Zt(t),n,r)};var kl=function kl(e,t,n){this.value=e,this.names=t,this.uniformNames=this.names.map(function(e){return"u_"+e}),this.type=n,this.maxValue=-Infinity,this.patternPositions={patternTo:null,patternFrom:null}};kl.prototype.defines=function Xp(){return this.names.map(function(e){return"#define HAS_UNIFORM_u_"+e})},kl.prototype.populatePaintArray=function $p(){},kl.prototype.updatePaintArray=function Yp(){},kl.prototype.upload=function Jp(){},kl.prototype.destroy=function qp(){},kl.prototype.setConstantPatternPositions=function Kp(e,t){this.patternPositions.patternTo=e.tlbr,this.patternPositions.patternFrom=t.tlbr},kl.prototype.setUniforms=function Qp(e,t,n,r,i){var o=this.patternPositions;"u_pattern_to"===i&&o.patternTo&&t.set(o.patternTo),"u_pattern_from"===i&&o.patternFrom&&t.set(o.patternFrom)},kl.prototype.getBinding=function ed(e,t){return new El(e,t)};var Il=function Il(e,t,n,r){this.expression=e,this.names=t,this.type=n,this.uniformNames=this.names.map(function(e){return"a_"+e}),this.maxValue=-Infinity,this.paintVertexAttributes=t.map(function(e){return{name:"a_"+e,type:"Float32",components:"color"===n?2:1,offset:0}}),this.paintVertexArray=new r};Il.prototype.defines=function Xp(){return[]},Il.prototype.setConstantPatternPositions=function Kp(){},Il.prototype.populatePaintArray=function $p(e,t){var n=this.paintVertexArray,r=n.length;n.reserve(e);var i=this.expression.evaluate(new du(0),t,{});if("color"===this.type)for(var o=cn(i),a=r;a<e;a++)n.emplaceBack(o[0],o[1]);else{for(var s=r;s<e;s++)n.emplaceBack(i);this.maxValue=Math.max(this.maxValue,i)}},Il.prototype.updatePaintArray=function Yp(e,t,n,r){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:0},n,r);if("color"===this.type)for(var a=cn(o),s=e;s<t;s++)i.emplace(s,a[0],a[1]);else{for(var u=e;u<t;u++)i.emplace(u,o);this.maxValue=Math.max(this.maxValue,o)}},Il.prototype.upload=function Jp(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Il.prototype.destroy=function qp(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Il.prototype.setUniforms=function Qp(e,t){t.set(0)},Il.prototype.getBinding=function ed(e,t){return new bl(e,t)};var Dl=function Dl(e,t,n,r,i,o){this.expression=e,this.names=t,this.uniformNames=this.names.map(function(e){return"a_"+e+"_t"}),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=-Infinity;var a=o;this.paintVertexAttributes=t.map(function(e){return{name:"a_"+e,type:"Float32",components:"color"===n?4:2,offset:0}}),this.paintVertexArray=new a};Dl.prototype.defines=function Xp(){return[]},Dl.prototype.setConstantPatternPositions=function Kp(){},Dl.prototype.populatePaintArray=function $p(e,t){var n=this.paintVertexArray,r=n.length;n.reserve(e);var i=this.expression.evaluate(new du(this.zoom),t,{}),o=this.expression.evaluate(new du(this.zoom+1),t,{});if("color"===this.type)for(var a=cn(i),s=cn(o),u=r;u<e;u++)n.emplaceBack(a[0],a[1],s[0],s[1]);else{for(var l=r;l<e;l++)n.emplaceBack(i,o);this.maxValue=Math.max(this.maxValue,i,o)}},Dl.prototype.updatePaintArray=function Yp(e,t,n,r){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:this.zoom},n,r),a=this.expression.evaluate({zoom:this.zoom+1},n,r);if("color"===this.type)for(var s=cn(o),u=cn(a),l=e;l<t;l++)i.emplace(l,s[0],s[1],u[0],u[1]);else{for(var c=e;c<t;c++)i.emplace(c,o,a);this.maxValue=Math.max(this.maxValue,o,a)}},Dl.prototype.upload=function Jp(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Dl.prototype.destroy=function qp(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Dl.prototype.interpolationFactor=function rt(e){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(e),this.zoom,this.zoom+1):this.expression.interpolationFactor(e,this.zoom,this.zoom+1)},Dl.prototype.setUniforms=function Qp(e,t,n){t.set(this.interpolationFactor(n.zoom))},Dl.prototype.getBinding=function ed(e,t){return new bl(e,t)};var Pl=function Pl(e,t,n,r,i,o,a){this.expression=e,this.names=t,this.type=n,this.uniformNames=this.names.map(function(e){return"a_"+e+"_t"}),this.useIntegerZoom=r,this.zoom=i,this.maxValue=-Infinity,this.layerId=a,this.paintVertexAttributes=t.map(function(e){return{name:"a_"+e,type:"Uint16",components:4,offset:0}}),this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o};Pl.prototype.defines=function Xp(){return[]},Pl.prototype.setConstantPatternPositions=function Kp(){},Pl.prototype.populatePaintArray=function $p(e,t,n){var r=this.zoomInPaintVertexArray,i=this.zoomOutPaintVertexArray,o=this.layerId,a=r.length;if(r.reserve(e),i.reserve(e),n&&t.patterns&&t.patterns[o]){var s=t.patterns[o],u=s.min,l=s.mid,c=s.max,f=n[u],p=n[l],d=n[c];if(!f||!p||!d)return;for(var h=a;h<e;h++)r.emplaceBack(p.tl[0],p.tl[1],p.br[0],p.br[1],f.tl[0],f.tl[1],f.br[0],f.br[1]),i.emplaceBack(p.tl[0],p.tl[1],p.br[0],p.br[1],d.tl[0],d.tl[1],d.br[0],d.br[1])}},Pl.prototype.updatePaintArray=function Yp(e,t,n,r,i){var o=this.zoomInPaintVertexArray,a=this.zoomOutPaintVertexArray,s=this.layerId;if(i&&n.patterns&&n.patterns[s]){var u=n.patterns[s],l=u.min,c=u.mid,f=u.max,p=i[l],d=i[c],h=i[f];if(!p||!d||!h)return;for(var m=e;m<t;m++)o.emplace(m,d.tl[0],d.tl[1],d.br[0],d.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1]),a.emplace(m,d.tl[0],d.tl[1],d.br[0],d.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1])}},Pl.prototype.upload=function Jp(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Pl.prototype.destroy=function qp(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},Pl.prototype.setUniforms=function Qp(e,t){t.set(0)},Pl.prototype.getBinding=function ed(e,t){return new bl(e,t)};var Ol=function Ol(){this.binders={},this.cacheKey="",this._buffers=[],this._featureMap=new yl,this._bufferOffset=0};Ol.createDynamic=function nd(e,t,n){var r=new Ol,i=[];for(var o in e.paint._values)if(n(o)){var a=e.paint.get(o);if(a instanceof bu&&He(a.property.specification)){var s=fn(o,e.type),u=a.property.specification.type,l=a.property.useIntegerZoom;if("cross-faded"===a.property.specification["property-type"]||"cross-faded-data-driven"===a.property.specification["property-type"])if("constant"===a.value.kind)r.binders[o]=new kl(a.value.value,s,u),i.push("/u_"+o);else{var c=dn(o,u,"source");r.binders[o]=new Pl(a.value,s,u,l,t,c,e.id),i.push("/a_"+o)}else if("constant"===a.value.kind)r.binders[o]=new Al(a.value.value,s,u),i.push("/u_"+o);else if("source"===a.value.kind){var f=dn(o,u,"source");r.binders[o]=new Il(a.value,s,u,f),i.push("/a_"+o)}else{var p=dn(o,u,"composite");r.binders[o]=new Dl(a.value,s,u,l,t,p),i.push("/z_"+o)}}}return r.cacheKey=i.sort().join(""),r},Ol.prototype.populatePaintArrays=function rd(e,t,n,r){for(var i in this.binders){this.binders[i].populatePaintArray(e,t,r)}t.id!==undefined&&this._featureMap.add(+t.id,n,this._bufferOffset,e),this._bufferOffset=e},Ol.prototype.setConstantPatternPositions=function Kp(e,t){for(var n in this.binders){this.binders[n].setConstantPatternPositions(e,t)}},Ol.prototype.updatePaintArrays=function id(e,t,n,r){var i=!1;for(var o in e)for(var a=0,s=this._featureMap.getPositions(+o);a<s.length;a+=1){var u=s[a],l=t.feature(u.index);for(var c in this.binders){var f=this.binders[c];if(!(f instanceof Al||f instanceof kl)&&!0===f.expression.isStateDependent){var p=n.paint.get(c);f.expression=p.value,f.updatePaintArray(u.start,u.end,l,e[o],r),i=!0}}}return i},Ol.prototype.defines=function Xp(){var e=[];for(var t in this.binders)e.push.apply(e,this.binders[t].defines());return e},Ol.prototype.getPaintVertexBuffers=function od(){return this._buffers},Ol.prototype.getUniforms=function ad(e,t){var n={};for(var r in this.binders)for(var i=this.binders[r],o=0,a=i.uniformNames;o<a.length;o+=1){var s=a[o];n[s]=i.getBinding(e,t[s])}return n},Ol.prototype.setUniforms=function Qp(e,t,n,r){for(var i in this.binders)for(var o=this.binders[i],a=0,s=o.uniformNames;a<s.length;a+=1){var u=s[a];o.setUniforms(e,t[u],r,n.get(i),u)}},Ol.prototype.updatePatternPaintBuffers=function sd(e){var t=[];for(var n in this.binders){var r=this.binders[n];if(r instanceof Pl){var i=2===e.fromScale?r.zoomInPaintVertexBuffer:r.zoomOutPaintVertexBuffer;i&&t.push(i)}else(r instanceof Il||r instanceof Dl)&&r.paintVertexBuffer&&t.push(r.paintVertexBuffer)}this._buffers=t},Ol.prototype.upload=function Jp(e){for(var t in this.binders)this.binders[t].upload(e);var n=[];for(var r in this.binders){var i=this.binders[r];(i instanceof Il||i instanceof Dl)&&i.paintVertexBuffer&&n.push(i.paintVertexBuffer)}this._buffers=n},Ol.prototype.destroy=function qp(){for(var e in this.binders)this.binders[e].destroy()};var Rl=function Rl(e,t,n,r){void 0===r&&(r=function(){return!0}),this.programConfigurations={};for(var i=0,o=t;i<o.length;i+=1){var a=o[i];this.programConfigurations[a.id]=Ol.createDynamic(a,n,r),this.programConfigurations[a.id].layoutAttributes=e}this.needsUpload=!1};Rl.prototype.populatePaintArrays=function rd(e,t,n,r){for(var i in this.programConfigurations)this.programConfigurations[i].populatePaintArrays(e,t,n,r);this.needsUpload=!0},Rl.prototype.updatePaintArrays=function id(e,t,n,r){for(var i=0,o=n;i<o.length;i+=1){var a=o[i];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(e,t,a,r)||this.needsUpload}},Rl.prototype.get=function Fe(e){return this.programConfigurations[e]},Rl.prototype.upload=function Jp(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},Rl.prototype.destroy=function qp(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},Wt("ConstantBinder",Al),Wt("CrossFadedConstantBinder",kl),Wt("SourceExpressionBinder",Il),Wt("CrossFadedCompositeBinder",Pl),Wt("CompositeExpressionBinder",Dl),Wt("ProgramConfiguration",Ol,{omit:["_buffers"]}),Wt("ProgramConfigurationSet",Rl);var Nl=8192,Ll=hn(16),Ml=function Ml(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Lu,this.indexArray=new Yu,this.segments=new gl,this.programConfigurations=new Rl(ml,e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};Ml.prototype.populate=function ud(e,t){for(var n=0,r=e;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new du(this.zoom),o)){var u=mn(o);this.addFeature(o,u,a),t.featureIndex.insert(o,u,a,s,this.index)}}},Ml.prototype.update=function vp(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Ml.prototype.isEmpty=function ld(){return 0===this.layoutVertexArray.length},Ml.prototype.uploadPending=function cd(){return!this.uploaded||this.programConfigurations.needsUpload},Ml.prototype.upload=function Jp(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ml),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Ml.prototype.destroy=function qp(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ml.prototype.addFeature=function fd(e,t,n){for(var r=0,i=t;r<i.length;r+=1)for(var o=0,a=i[r];o<a.length;o+=1){var s=a[o],u=s.x,l=s.y;if(!(u<0||Nl<=u||l<0||Nl<=l)){var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),f=c.vertexLength;gn(this.layoutVertexArray,u,l,-1,-1),gn(this.layoutVertexArray,u,l,1,-1),gn(this.layoutVertexArray,u,l,1,1),gn(this.layoutVertexArray,u,l,-1,1),this.indexArray.emplaceBack(f,f+1,f+2),this.indexArray.emplaceBack(f,f+3,f+2),c.vertexLength+=4,c.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{})},Wt("CircleBucket",Ml,{omit:["layers"]});var Bl,zl,Fl,jl,Ul,Vl,ql,Hl,Wl,Gl={paint:new Au({"circle-radius":new Eu(Ra.paint_circle["circle-radius"]),"circle-color":new Eu(Ra.paint_circle["circle-color"]),"circle-blur":new Eu(Ra.paint_circle["circle-blur"]),"circle-opacity":new Eu(Ra.paint_circle["circle-opacity"]),"circle-translate":new wu(Ra.paint_circle["circle-translate"]),"circle-translate-anchor":new wu(Ra.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new wu(Ra.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new wu(Ra.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Eu(Ra.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Eu(Ra.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Eu(Ra.paint_circle["circle-stroke-opacity"])})},Zl=1e-6,Xl="undefined"!=typeof Float32Array?Float32Array:Array,Kl=(Math.random,Math.PI,Xn),$l=(Bl=Zn(),zl=er(),tr),Yl=(Fl=Zn(),jl=Kn(1,0,0),Ul=Kn(0,1,0),Vl=rr(),ql=rr(),Hl=Ln(),Wl=sr(),function(t){function e(e){t.call(this,e,Gl)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype.createBucket=function n(e){return new Ml(e)},e.prototype.queryRadius=function r(e){var t=e;return Dn("circle-radius",this,t)+Dn("circle-stroke-width",this,t)+Pn(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function x(e,t,n,r,i,o,a,s){for(var u=On(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),l=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n),c="map"===this.paint.get("circle-pitch-alignment"),f=c?u:lr(u,s),p=c?l*a:l,d=0,h=r;d<h.length;d+=1)for(var m=0,g=h[d];m<g.length;m+=1){var y=g[m],v=c?y:ur(y,s),_=p,b=nr([],[y.x,y.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?_*=b[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(_*=o.cameraToCenterDistance/b[3]),vn(f,v,_))return!0}return!1},e}(Iu)),Jl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t}(Ml);Wt("HeatmapBucket",Jl,{omit:["layers"]});var Ql=function Ql(e,t){cr(this,e,1,t)};Ql.prototype.resize=function Fp(e){fr(this,e,1)},Ql.prototype.clone=function x(){return new Ql({width:this.width,height:this.height},new Uint8Array(this.data))},Ql.copy=function pd(e,t,n,r,i){pr(e,t,n,r,i,1)};var ec=function ec(e,t){cr(this,e,4,t)};ec.prototype.resize=function Fp(e){fr(this,e,4)},ec.prototype.clone=function x(){return new ec({width:this.width,height:this.height},new Uint8Array(this.data))},ec.copy=function pd(e,t,n,r,i){pr(e,t,n,r,i,4)},Wt("AlphaImage",Ql),Wt("RGBAImage",ec);var tc={paint:new Au({"heatmap-radius":new Eu(Ra.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Eu(Ra.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new wu(Ra.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Tu(Ra.paint_heatmap["heatmap-color"]),"heatmap-opacity":new wu(Ra.paint_heatmap["heatmap-opacity"])})},nc=function(t){function e(e){t.call(this,e,tc),this._updateColorRamp()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype.createBucket=function n(e){return new Jl(e)},e.prototype._handleSpecialPaintPropertyUpdate=function r(e){"heatmap-color"===e&&this._updateColorRamp()},e.prototype._updateColorRamp=function i(){var e=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=dr(e,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function o(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function a(){return 0},e.prototype.queryIntersectsFeature=function s(){return!1},e.prototype.hasOffscreenPass=function u(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(Iu),rc={paint:new Au({"hillshade-illumination-direction":new wu(Ra.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new wu(Ra.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new wu(Ra.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new wu(Ra.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new wu(Ra.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new wu(Ra.paint_hillshade["hillshade-accent-color"])})},ic=function(t){function e(e){t.call(this,e,rc)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype.hasOffscreenPass=function n(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(Iu),oc=rn([{name:"a_pos",components:2,type:"Int16"}],4),ac=oc.members,sc=(oc.size,oc.alignment,hr),uc=hr;hr.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,a=Math.abs(Vr(e,0,o,n));if(i)for(var s=0,u=t.length;s<u;s++){var l=t[s]*n,c=s<u-1?t[s+1]*n:e.length;a-=Math.abs(Vr(e,l,c,n))}var f=0;for(s=0;s<r.length;s+=3){var p=r[s]*n,d=r[s+1]*n,h=r[s+2]*n;f+=Math.abs((e[p]-e[h])*(e[d+1]-e[p+1])-(e[p]-e[d])*(e[h+1]-e[p+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},hr.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);0<i&&(r+=e[i-1].length,n.holes.push(r))}return n},sc["default"]=uc;var lc=500,cc=function cc(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.hasPattern=!1,
this.layoutVertexArray=new Lu,this.indexArray=new Yu,this.indexArray2=new Ju,this.programConfigurations=new Rl(ac,e.layers,e.zoom),this.segments=new gl,this.segments2=new gl,this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};cc.prototype.populate=function ud(e,t){this.features=[],this.hasPattern=Kr("fill",this.layers,t);for(var n=0,r=e;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new du(this.zoom),o)){var u=mn(o),l={sourceLayerIndex:s,index:a,geometry:u,properties:o.properties,type:o.type,patterns:{}};"undefined"!=typeof o.id&&(l.id=o.id),this.hasPattern?this.features.push($r("fill",this.layers,l,this.zoom,t)):this.addFeature(l,u,a,{}),t.featureIndex.insert(o,u,a,s,this.index)}}},cc.prototype.update=function vp(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},cc.prototype.addFeatures=function dd(e,t){for(var n=0,r=this.features;n<r.length;n+=1){var i=r[n],o=i.geometry;this.addFeature(i,o,i.index,t)}},cc.prototype.isEmpty=function ld(){return 0===this.layoutVertexArray.length},cc.prototype.uploadPending=function cd(){return!this.uploaded||this.programConfigurations.needsUpload},cc.prototype.upload=function Jp(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ac),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},cc.prototype.destroy=function qp(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},cc.prototype.addFeature=function fd(e,t,n,r){for(var i=0,o=Zr(t,lc);i<o.length;i+=1){for(var a=o[i],s=0,u=0,l=a;u<l.length;u+=1){s+=l[u].length}for(var c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray),f=c.vertexLength,p=[],d=[],h=0,m=a;h<m.length;h+=1){var g=m[h];if(0!==g.length){g!==a[0]&&d.push(p.length/2);var y=this.segments2.prepareSegment(g.length,this.layoutVertexArray,this.indexArray2),v=y.vertexLength;this.layoutVertexArray.emplaceBack(g[0].x,g[0].y),this.indexArray2.emplaceBack(v+g.length-1,v),p.push(g[0].x),p.push(g[0].y);for(var _=1;_<g.length;_++)this.layoutVertexArray.emplaceBack(g[_].x,g[_].y),this.indexArray2.emplaceBack(v+_-1,v+_),p.push(g[_].x),p.push(g[_].y);y.vertexLength+=g.length,y.primitiveLength+=g.length}}var b=sc(p,d);Mo(b.length%3==0);for(var x=0;x<b.length;x+=3)this.indexArray.emplaceBack(f+b[x],f+b[x+1],f+b[x+2]);c.vertexLength+=s,c.primitiveLength+=b.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,r)},Wt("FillBucket",cc,{omit:["layers","features"]});var fc={paint:new Au({"fill-antialias":new wu(Ra.paint_fill["fill-antialias"]),"fill-opacity":new Eu(Ra.paint_fill["fill-opacity"]),"fill-color":new Eu(Ra.paint_fill["fill-color"]),"fill-outline-color":new Eu(Ra.paint_fill["fill-outline-color"]),"fill-translate":new wu(Ra.paint_fill["fill-translate"]),"fill-translate-anchor":new wu(Ra.paint_fill["fill-translate-anchor"]),"fill-pattern":new Cu(Ra.paint_fill["fill-pattern"])})},pc=function(n){function e(e){n.call(this,e,fc)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),(e.prototype.constructor=e).prototype.recalculate=function r(e){n.prototype.recalculate.call(this,e);var t=this.paint._values["fill-outline-color"];"constant"===t.value.kind&&t.value.value===undefined&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function t(e){return new cc(e)},e.prototype.queryRadius=function i(){return Pn(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function s(e,t,n,r,i,o,a){return _n(On(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)},e}(Iu),dc=rn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),hc=dc.members,mc=(dc.size,dc.alignment,500),gc=Math.pow(2,13),yc=function yc(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Bu,this.indexArray=new Yu,this.programConfigurations=new Rl(hc,e.layers,e.zoom),this.segments=new gl,this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};yc.prototype.populate=function ud(e,t){this.features=[],this.hasPattern=Kr("fill-extrusion",this.layers,t);for(var n=0,r=e;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new du(this.zoom),o)){var u=mn(o),l={sourceLayerIndex:s,index:a,geometry:u,properties:o.properties,type:o.type,patterns:{}};"undefined"!=typeof o.id&&(l.id=o.id),this.hasPattern?this.features.push($r("fill-extrusion",this.layers,l,this.zoom,t)):this.addFeature(l,u,a,{}),t.featureIndex.insert(o,u,a,s,this.index,!0)}}},yc.prototype.addFeatures=function dd(e,t){for(var n=0,r=this.features;n<r.length;n+=1){var i=r[n],o=i.geometry;this.addFeature(i,o,i.index,t)}},yc.prototype.update=function vp(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},yc.prototype.isEmpty=function ld(){return 0===this.layoutVertexArray.length},yc.prototype.uploadPending=function cd(){return!this.uploaded||this.programConfigurations.needsUpload},yc.prototype.upload=function Jp(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,hc),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},yc.prototype.destroy=function qp(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},yc.prototype.addFeature=function fd(e,t,n,r){for(var i=0,o=Zr(t,mc);i<o.length;i+=1){for(var a=o[i],s=0,u=0,l=a;u<l.length;u+=1){s+=l[u].length}for(var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),f=0,p=a;f<p.length;f+=1){var d=p[f];if(0!==d.length&&!Qr(d))for(var h=0,m=0;m<d.length;m++){var g=d[m];if(1<=m){var y=d[m-1];if(!Jr(g,y)){c.vertexLength+4>gl.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var v=g.sub(y)._perp()._unit(),_=y.dist(g);32768<h+_&&(h=0),Yr(this.layoutVertexArray,g.x,g.y,v.x,v.y,0,0,h),Yr(this.layoutVertexArray,g.x,g.y,v.x,v.y,0,1,h),h+=_,Yr(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,0,h),Yr(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,1,h);var b=c.vertexLength;this.indexArray.emplaceBack(b,b+2,b+1),this.indexArray.emplaceBack(b+1,b+2,b+3),c.vertexLength+=4,c.primitiveLength+=2}}}}c.vertexLength+s>gl.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray));for(var x=[],w=[],E=c.vertexLength,C=0,S=a;C<S.length;C+=1){var T=S[C];if(0!==T.length){T!==a[0]&&w.push(x.length/2);for(var A=0;A<T.length;A++){var k=T[A];Yr(this.layoutVertexArray,k.x,k.y,0,0,1,1,0),x.push(k.x),x.push(k.y)}}}var I=sc(x,w);Mo(I.length%3==0);for(var D=0;D<I.length;D+=3)this.indexArray.emplaceBack(E+I[D],E+I[D+2],E+I[D+1]);c.primitiveLength+=I.length/3,c.vertexLength+=s}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,r)},Wt("FillExtrusionBucket",yc,{omit:["layers","features"]});var vc={paint:new Au({"fill-extrusion-opacity":new wu(Ra["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Eu(Ra["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new wu(Ra["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new wu(Ra["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Cu(Ra["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Eu(Ra["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Eu(Ra["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new wu(Ra["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},_c=function(t){function e(e){t.call(this,e,vc)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype.createBucket=function n(e){return new yc(e)},e.prototype.queryRadius=function r(){return Pn(this.paint.get("fill-extrusion-translate"))},e.prototype.queryIntersectsFeature=function d(e,t,n,r,i,o,a,s){var u=On(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,a),l=this.paint.get("fill-extrusion-height").evaluate(t,n),c=this.paint.get("fill-extrusion-base").evaluate(t,n),f=ii(u,s,o,0),p=ri(r,c,l,s);return ni(p[0],p[1],f)},e.prototype.hasOffscreenPass=function i(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},e.prototype.resize=function o(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e}(Iu),bc=rn([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),xc=bc.members,wc=(bc.size,bc.alignment,oi);oi.types=["Unknown","Point","LineString","Polygon"],oi.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,i=0,o=0,a=0,s=[];e.pos<n;){if(i<=0){var u=e.readVarint();r=7&u,i=u>>3}if(i--,1===r||2===r)o+=e.readSVarint(),a+=e.readSVarint(),1===r&&(t&&s.push(t),t=[]),t.push(new Fo(o,a));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&s.push(t),s},oi.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,o=0,a=Infinity,s=-Infinity,u=Infinity,l=-Infinity;e.pos<t;){if(r<=0){var c=e.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=e.readSVarint())<a&&(a=i),s<i&&(s=i),(o+=e.readSVarint())<u&&(u=o),l<o&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,l]},oi.prototype.toGeoJSON=function(e,t,n){function r(e){for(var t=0;t<e.length;t++){var n=e[t],r=180-360*(n.y+u)/a;e[t]=[360*(n.x+s)/a-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}var i,o,a=this.extent*Math.pow(2,n),s=this.extent*e,u=this.extent*t,l=this.loadGeometry(),c=oi.types[this.type];switch(this.type){case 1:var f=[];for(i=0;i<l.length;i++)f[i]=l[i][0];r(l=f);break;case 2:for(i=0;i<l.length;i++)r(l[i]);break;case 3:for(l=ui(l),i=0;i<l.length;i++)for(o=0;o<l[i].length;o++)r(l[i][o])}1===l.length?l=l[0]:c="Multi"+c;var p={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(p.id=this.id),p};var Ec=ci;ci.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new wc(this._pbf,t,this.extent,this._keys,this._values)};var Cc={VectorTile:di,VectorTileFeature:wc,VectorTileLayer:Ec},Sc=Cc.VectorTileFeature.types,Tc=63,Ac=Math.cos(Math.PI/180*37.5),kc=15,Ic=15,Dc=.5,Pc=Math.pow(2,Ic-1)/Dc,Oc=function Oc(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.features=[],this.hasPattern=!1,this.layoutVertexArray=new zu,this.indexArray=new Yu,this.programConfigurations=new Rl(xc,e.layers,e.zoom),this.segments=new gl,this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};Oc.prototype.populate=function ud(e,t){this.features=[],this.hasPattern=Kr("line",this.layers,t);for(var n=0,r=e;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new du(this.zoom),o)){var u=mn(o),l={sourceLayerIndex:s,index:a,geometry:u,properties:o.properties,type:o.type,patterns:{}};"undefined"!=typeof o.id&&(l.id=o.id),this.hasPattern?this.features.push($r("line",this.layers,l,this.zoom,t)):this.addFeature(l,u,a,{}),t.featureIndex.insert(o,u,a,s,this.index)}}},Oc.prototype.update=function vp(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Oc.prototype.addFeatures=function dd(e,t){for(var n=0,r=this.features;n<r.length;n+=1){var i=r[n],o=i.geometry;this.addFeature(i,o,i.index,t)}},Oc.prototype.isEmpty=function ld(){return 0===this.layoutVertexArray.length},Oc.prototype.uploadPending=function cd(){return!this.uploaded||this.programConfigurations.needsUpload},Oc.prototype.upload=function Jp(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,xc),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Oc.prototype.destroy=function qp(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Oc.prototype.addFeature=function fd(e,t,n,r){for(var i=this.layers[0].layout,o=i.get("line-join").evaluate(e,{}),a=i.get("line-cap"),s=i.get("line-miter-limit"),u=i.get("line-round-limit"),l=0,c=t;l<c.length;l+=1){var f=c[l];this.addLine(f,e,o,a,s,u,n,r)}},Oc.prototype.addLine=function hd(e,t,n,r,i,o,a,s){var u=null;t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end")&&(u={start:t.properties.mapbox_clip_start,end:t.properties.mapbox_clip_end,tileTotal:undefined});for(var l="Polygon"===Sc[t.type],c=e.length;2<=c&&e[c-1].equals(e[c-2]);)c--;for(var f=0;f<c-1&&e[f].equals(e[f+1]);)f++;if(!(c<(l?3:2))){u&&(u.tileTotal=yi(e,f,c)),"bevel"===n&&(i=1.05);var p,d,h,m=kc*(Nl/(512*this.overscaling)),g=e[f],y=this.segments.prepareSegment(10*c,this.layoutVertexArray,this.indexArray),v=r,_=l?"butt":r,b=!(this.distance=0),x=undefined,w=undefined,E=undefined,C=undefined;this.e1=this.e2=this.e3=-1,l&&(p=e[c-2],C=g.sub(p)._unit()._perp());for(var S=f;S<c;S++)if(!(w=l&&S===c-1?e[f+1]:e[S+1])||!e[S].equals(w)){C&&(E=C),p&&(x=p),p=e[S],C=w?w.sub(p)._unit()._perp():E;var T=(E=E||C).add(C);0===T.x&&0===T.y||T._unit();var A=T.x*C.x+T.y*C.y,k=0!==A?1/A:Infinity,I=A<Ac&&x&&w;if(I&&f<S){var D=p.dist(x);if(2*m<D){var P=p.sub(p.sub(x)._mult(m/D)._round());this.distance+=P.dist(x),this.addCurrentVertex(P,this.distance,E.mult(1),0,0,!1,y,u),x=P}}var O=x&&w,R=O?n:w?v:_;if(O&&"round"===R&&(k<o?R="miter":k<=2&&(R="fakeround")),"miter"===R&&i<k&&(R="bevel"),"bevel"===R&&(2<k&&(R="flipbevel"),k<i&&(R="miter")),x&&(this.distance+=p.dist(x)),"miter"===R)T._mult(k),this.addCurrentVertex(p,this.distance,T,0,0,!1,y,u);else if("flipbevel"===R){if(100<k)T=C.clone().mult(-1);else{var N=0<E.x*C.y-E.y*C.x?-1:1,L=k*E.add(C).mag()/E.sub(C).mag();T._perp()._mult(L*N)}this.addCurrentVertex(p,this.distance,T,0,0,!1,y,u),this.addCurrentVertex(p,this.distance,T.mult(-1),0,0,!1,y,u)}else if("bevel"===R||"fakeround"===R){var M=0<E.x*C.y-E.y*C.x,B=-Math.sqrt(k*k-1);if(M?(h=0,d=B):(d=0,h=B),b||this.addCurrentVertex(p,this.distance,E,d,h,!1,y,u),"fakeround"===R){for(var z=Math.floor(8*(.5-(A-.5))),F=void 0,j=0;j<z;j++)F=C.mult((j+1)/(z+1))._add(E)._unit(),this.addPieSliceVertex(p,this.distance,F,M,y,u);this.addPieSliceVertex(p,this.distance,T,M,y,u);for(var U=z-1;0<=U;U--)F=E.mult((U+1)/(z+1))._add(C)._unit(),this.addPieSliceVertex(p,this.distance,F,M,y,u)}w&&this.addCurrentVertex(p,this.distance,C,-d,-h,!1,y,u)}else"butt"===R?(b||this.addCurrentVertex(p,this.distance,E,0,0,!1,y,u),w&&this.addCurrentVertex(p,this.distance,C,0,0,!1,y,u)):"square"===R?(b||(this.addCurrentVertex(p,this.distance,E,1,1,!1,y,u),this.e1=this.e2=-1),w&&this.addCurrentVertex(p,this.distance,C,-1,-1,!1,y,u)):"round"===R&&(b||(this.addCurrentVertex(p,this.distance,E,0,0,!1,y,u),this.addCurrentVertex(p,this.distance,E,1,1,!0,y,u),this.e1=this.e2=-1),w&&(this.addCurrentVertex(p,this.distance,C,-1,-1,!0,y,u),this.addCurrentVertex(p,this.distance,C,0,0,!1,y,u)));if(I&&S<c-1){var V=p.dist(w);if(2*m<V){var q=p.add(w.sub(p)._mult(m/V)._round());this.distance+=q.dist(p),this.addCurrentVertex(q,this.distance,C.mult(1),0,0,!1,y,u),p=q}}b=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,a,s)}},Oc.prototype.addCurrentVertex=function md(e,t,n,r,i,o,a,s){var u,l=this.layoutVertexArray,c=this.indexArray;s&&(t=gi(t,s)),u=n.clone(),r&&u._sub(n.perp()._mult(r)),mi(l,e,u,o,!1,r,t),this.e3=a.vertexLength++,0<=this.e1&&0<=this.e2&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,u=n.mult(-1),i&&u._sub(n.perp()._mult(i)),mi(l,e,u,o,!0,-i,t),this.e3=a.vertexLength++,0<=this.e1&&0<=this.e2&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,Pc/2<t&&!s&&(this.distance=0,this.addCurrentVertex(e,this.distance,n,r,i,o,a))},Oc.prototype.addPieSliceVertex=function gd(e,t,n,r,i,o){n=n.mult(r?-1:1);var a=this.layoutVertexArray,s=this.indexArray;o&&(t=gi(t,o)),mi(a,e,n,!1,r,0,t),this.e3=i.vertexLength++,0<=this.e1&&0<=this.e2&&(s.emplaceBack(this.e1,this.e2,this.e3),i.primitiveLength++),r?this.e2=this.e3:this.e1=this.e3},Wt("LineBucket",Oc,{omit:["layers","features"]});var Rc=new Au({"line-cap":new wu(Ra.layout_line["line-cap"]),"line-join":new Eu(Ra.layout_line["line-join"]),"line-miter-limit":new wu(Ra.layout_line["line-miter-limit"]),"line-round-limit":new wu(Ra.layout_line["line-round-limit"])}),Nc={paint:new Au({"line-opacity":new Eu(Ra.paint_line["line-opacity"]),"line-color":new Eu(Ra.paint_line["line-color"]),"line-translate":new wu(Ra.paint_line["line-translate"]),"line-translate-anchor":new wu(Ra.paint_line["line-translate-anchor"]),"line-width":new Eu(Ra.paint_line["line-width"]),"line-gap-width":new Eu(Ra.paint_line["line-gap-width"]),"line-offset":new Eu(Ra.paint_line["line-offset"]),"line-blur":new Eu(Ra.paint_line["line-blur"]),"line-dasharray":new Su(Ra.paint_line["line-dasharray"]),"line-pattern":new Cu(Ra.paint_line["line-pattern"]),"line-gradient":new Tu(Ra.paint_line["line-gradient"])}),layout:Rc},Lc=new(function(i){function e(){i.apply(this,arguments)}return i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),(e.prototype.constructor=e).prototype.possiblyEvaluate=function n(e,t){return t=new du(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),i.prototype.possiblyEvaluate.call(this,e,t)},e.prototype.evaluate=function o(e,t,n,r){return t=h({},t,{zoom:Math.floor(t.zoom)}),i.prototype.evaluate.call(this,e,t,n,r)},e}(Eu))(Nc.paint.properties["line-width"].specification);Lc.useIntegerZoom=!0;var Mc=function(t){function e(e){t.call(this,e,Nc)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype._handleSpecialPaintPropertyUpdate=function n(e){"line-gradient"===e&&this._updateGradient()},e.prototype._updateGradient=function r(){var e=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=dr(e,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function i(e){t.prototype.recalculate.call(this,e),this.paint._values["line-floorwidth"]=Lc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function o(e){return new Oc(e)},e.prototype.queryRadius=function a(e){var t=e,n=vi(Dn("line-width",this,t),Dn("line-gap-width",this,t)),r=Dn("line-offset",this,t);return n/2+Math.abs(r)+Pn(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function c(e,t,n,r,i,o,a){var s=On(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,a),u=a/2*vi(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),l=this.paint.get("line-offset").evaluate(t,n);return l&&(r=_i(r,l*a)),bn(s,r,u)},e}(Iu),Bc=rn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),zc=rn([{name:"a_projected_pos",components:3,type:"Float32"}],4),Fc=(rn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),rn([{name:"a_placed",components:2,type:"Uint8"}],4)),jc=(rn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),rn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Uc=rn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Vc=(rn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),rn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"horizontalPlacedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint32",name:"crossTileID"}]),rn([{type:"Float32",name:"offsetX"}]),rn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),{"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"}),qc=function(i){function e(e,t,n,r){i.call(this,e,t),this.angle=n,r!==undefined&&(this.segment=r)}return i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),(e.prototype.constructor=e).prototype.clone=function t(){return new e(this.x,this.y,this.angle,this.segment)},e}(Fo);Wt("Anchor",qc);var Hc=256,Wc=Cc.VectorTileFeature.types,Gc=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],Zc=function Zc(e){this.layoutVertexArray=new ju,this.indexArray=new Yu,this.programConfigurations=e,this.segments=new gl,this.dynamicLayoutVertexArray=new Uu,this.opacityVertexArray=new Vu,this.placedSymbolArray=new ol};Zc.prototype.upload=function Jp(e,t,n,r){n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Bc.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,zc.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Gc,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(e)},Zc.prototype.destroy=function qp(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Wt("SymbolBuffers",Zc);var Xc=function Xc(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new gl,this.collisionVertexArray=new Wu};Xc.prototype.upload=function Jp(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Fc.members,!0)},Xc.prototype.destroy=function qp(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Wt("CollisionBuffers",Xc);var Kc=function Kc(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1;var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ci(this.zoom,t["text-size"]),this.iconSizeData=Ci(this.zoom,t["icon-size"]);var n=this.layers[0].layout,r=n.get("symbol-sort-key"),i=n.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==i&&r.constantOr(1)!==undefined;var o="viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey;this.sortFeaturesByY=o&&(n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement")),this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id}),this.sourceID=e.sourceID};Kc.prototype.createArrays=function yd(){this.text=new Zc(new Rl(Bc.members,this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new Zc(new Rl(Bc.members,this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.collisionBox=new Xc(Hu,jc.members,Ju),this.collisionCircle=new Xc(Hu,Uc.members,Yu),this.glyphOffsetArray=new ll,this.lineVertexArray=new fl,this.symbolInstances=new sl},Kc.prototype.calculateGlyphDependencies=function vd(e,t,n,r){for(var i=0;i<e.length;i++)if(t[e.charCodeAt(i)]=!0,n&&r){var o=Vc[e.charAt(i)];o&&(t[o.charCodeAt(0)]=!0)}},Kc.prototype.populate=function ud(e,t){var n=this.layers[0],r=n.layout,i=r.get("text-font"),o=r.get("text-field"),a=r.get("icon-image"),s=("constant"!==o.value.kind||0<o.value.value.toString().length)&&("constant"!==i.value.kind||0<i.value.value.length),u="constant"!==a.value.kind||a.value.value&&0<a.value.value.length,l=r.get("symbol-sort-key");if(this.features=[],s||u){for(var c=t.iconDependencies,f=t.glyphDependencies,p=new du(this.zoom),d=0,h=e;d<h.length;d+=1){var m=h[d],g=m.feature,y=m.index,v=m.sourceLayerIndex;if(n._featureFilter(p,g)){var _=void 0;if(s){var b=n.getValueAndResolveTokens("text-field",g);_=xi(b instanceof Ja?b:Ja.fromString(b),n,g)}var x=void 0;if(u&&(x=n.getValueAndResolveTokens("icon-image",g)),_||x){var w=this.sortFeaturesByKey?l.evaluate(g,{}):undefined,E={text:_,icon:x,index:y,sourceLayerIndex:v,geometry:mn(g),properties:g.properties,type:Wc[g.type],sortKey:w};if("undefined"!=typeof g.id&&(E.id=g.id),this.features.push(E),x&&(c[x]=!0),_)for(var C=i.evaluate(g,{}).join(","),S="map"===r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement"),T=0,A=_.sections;T<A.length;T+=1){var k=A[T],I=Xt(_.toString()),D=k.fontStack||C,P=f[D]=f[D]||{};this.calculateGlyphDependencies(k.text,P,S,I)}}}}"line"===r.get("symbol-placement")&&(this.features=wi(this.features)),this.sortFeaturesByKey&&this.features.sort(function(e,t){return e.sortKey-t.sortKey})}},Kc.prototype.update=function vp(e,t,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n))},Kc.prototype.isEmpty=function ld(){return 0===this.symbolInstances.length},Kc.prototype.uploadPending=function cd(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Kc.prototype.upload=function Jp(e){this.uploaded||(this.collisionBox.upload(e),this.collisionCircle.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Kc.prototype.destroy=function qp(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},Kc.prototype.addToLineVertexArray=function _d(e,t){var n=this.lineVertexArray.length;if(e.segment!==undefined){for(var r=e.dist(t[e.segment+1]),i=e.dist(t[e.segment]),o={},a=e.segment+1;a<t.length;a++)o[a]={x:t[a].x,y:t[a].y,tileUnitDistanceFromAnchor:r},a<t.length-1&&(r+=t[a+1].dist(t[a]));for(var s=e.segment||0;0<=s;s--)o[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:i},0<s&&(i+=t[s-1].dist(t[s]));for(var u=0;u<t.length;u++){var l=o[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},Kc.prototype.addSymbols=function bd(e,t,n,r,i,o,a,s,u,l){for(var c=e.indexArray,f=e.layoutVertexArray,p=e.dynamicLayoutVertexArray,d=e.segments.prepareSegment(4*t.length,e.layoutVertexArray,e.indexArray,o.sortKey),h=this.glyphOffsetArray.length,m=d.vertexLength,g=0,y=t;g<y.length;g+=1){var v=y[g],_=v.tl,b=v.tr,x=v.bl,w=v.br,E=v.tex,C=d.vertexLength,S=v.glyphOffset[1];Ai(f,s.x,s.y,_.x,S+_.y,E.x,E.y,n),Ai(f,s.x,s.y,b.x,S+b.y,E.x+E.w,E.y,n),Ai(f,s.x,s.y,x.x,S+x.y,E.x,E.y+E.h,n),Ai(f,s.x,s.y,w.x,S+w.y,E.x+E.w,E.y+E.h,n),ki(p,s,0),c.emplaceBack(C,C+1,C+2),c.emplaceBack(C+1,C+2,C+3),d.vertexLength+=4,d.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(v.glyphOffset[0])}e.placedSymbolArray.emplaceBack(s.x,s.y,h,this.glyphOffsetArray.length-h,m,u,l,s.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,!1),e.programConfigurations.populatePaintArrays(e.layoutVertexArray.length,o,o.index,{})},Kc.prototype._addCollisionDebugVertex=function xd(e,t,n,r,i,o){return t.emplaceBack(0,0),e.emplaceBack(n.x,n.y,r,i,Math.round(o.x),Math.round(o.y))},Kc.prototype.addCollisionDebugVertices=function wd(e,t,n,r,i,o,a,s){var u=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),l=u.vertexLength,c=i.layoutVertexArray,f=i.collisionVertexArray,p=a.anchorX,d=a.anchorY;if(this._addCollisionDebugVertex(c,f,o,p,d,new Fo(e,t)),this._addCollisionDebugVertex(c,f,o,p,d,new Fo(n,t)),this._addCollisionDebugVertex(c,f,o,p,d,new Fo(n,r)),this._addCollisionDebugVertex(c,f,o,p,d,new Fo(e,r)),u.vertexLength+=4,s){var h=i.indexArray;h.emplaceBack(l,l+1,l+2),h.emplaceBack(l,l+2,l+3),u.primitiveLength+=2}else{var m=i.indexArray;m.emplaceBack(l,l+1),m.emplaceBack(l+1,l+2),m.emplaceBack(l+2,l+3),m.emplaceBack(l+3,l),u.primitiveLength+=4}},Kc.prototype.addDebugCollisionBoxes=function Ed(e,t,n){for(var r=e;r<t;r++){var i=this.collisionBoxArray.get(r),o=i.x1,a=i.y1,s=i.x2,u=i.y2,l=0<i.radius;this.addCollisionDebugVertices(o,a,s,u,l?this.collisionCircle:this.collisionBox,i.anchorPoint,n,l)}},Kc.prototype.generateCollisionDebugBuffers=function Cd(){for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t)}},Kc.prototype._deserializeCollisionBoxesForSymbol=function Sd(e,t,n,r,i){for(var o={},a=t;a<n;a++){var s=e.get(a);if(0===s.radius){o.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY},o.textFeatureIndex=s.featureIndex;break}o.textCircles||(o.textCircles=[],o.textFeatureIndex=s.featureIndex);var u=1;o.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,u)}for(var l=r;l<i;l++){var c=e.get(l);if(0===c.radius){o.iconBox={x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2,anchorPointX:c.anchorPointX,anchorPointY:c.anchorPointY},o.iconFeatureIndex=c.featureIndex;break}}return o},Kc.prototype.deserializeCollisionBoxes=function Td(e){this.collisionArrays=[];for(
var t=0;t<this.symbolInstances.length;t++){var n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex))}},Kc.prototype.hasTextData=function Ad(){return 0<this.text.segments.get().length},Kc.prototype.hasIconData=function kd(){return 0<this.icon.segments.get().length},Kc.prototype.hasCollisionBoxData=function Id(){return 0<this.collisionBox.segments.get().length},Kc.prototype.hasCollisionCircleData=function Dd(){return 0<this.collisionCircle.segments.get().length},Kc.prototype.addIndicesForPlacedTextSymbol=function Pd(e){for(var t=this.text.placedSymbolArray.get(e),n=t.vertexStartIndex+4*t.numGlyphs,r=t.vertexStartIndex;r<n;r+=4)this.text.indexArray.emplaceBack(r,r+1,r+2),this.text.indexArray.emplaceBack(r+1,r+2,r+3)},Kc.prototype.sortFeatures=function Od(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&(this.sortedAngle=e,!(1<this.text.segments.get().length||1<this.icon.segments.get().length))){for(var t=[],n=0;n<this.symbolInstances.length;n++)t.push(n);for(var r=Math.sin(e),i=Math.cos(e),o=[],a=[],s=0;s<this.symbolInstances.length;s++){var u=this.symbolInstances.get(s);o.push(0|Math.round(r*u.anchorX+i*u.anchorY)),a.push(u.featureIndex)}t.sort(function(e,t){return o[e]-o[t]||a[t]-a[e]}),this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var l=0,c=t;l<c.length;l+=1){var f=c[l],p=this.symbolInstances.get(f);this.featureSortOrder.push(p.featureIndex),0<=p.horizontalPlacedTextSymbolIndex&&this.addIndicesForPlacedTextSymbol(p.horizontalPlacedTextSymbolIndex),0<=p.verticalPlacedTextSymbolIndex&&this.addIndicesForPlacedTextSymbol(p.verticalPlacedTextSymbolIndex);var d=this.icon.placedSymbolArray.get(f);if(d.numGlyphs){var h=d.vertexStartIndex;this.icon.indexArray.emplaceBack(h,h+1,h+2),this.icon.indexArray.emplaceBack(h+1,h+2,h+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Wt("SymbolBucket",Kc,{omit:["layers","collisionBoxArray","features","compareText"]}),Kc.MAX_GLYPHS=65535,Kc.addDynamicAttributes=ki;var $c=new Au({"symbol-placement":new wu(Ra.layout_symbol["symbol-placement"]),"symbol-spacing":new wu(Ra.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new wu(Ra.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Eu(Ra.layout_symbol["symbol-sort-key"]),"symbol-z-order":new wu(Ra.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new wu(Ra.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new wu(Ra.layout_symbol["icon-ignore-placement"]),"icon-optional":new wu(Ra.layout_symbol["icon-optional"]),"icon-rotation-alignment":new wu(Ra.layout_symbol["icon-rotation-alignment"]),"icon-size":new Eu(Ra.layout_symbol["icon-size"]),"icon-text-fit":new wu(Ra.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new wu(Ra.layout_symbol["icon-text-fit-padding"]),"icon-image":new Eu(Ra.layout_symbol["icon-image"]),"icon-rotate":new Eu(Ra.layout_symbol["icon-rotate"]),"icon-padding":new wu(Ra.layout_symbol["icon-padding"]),"icon-keep-upright":new wu(Ra.layout_symbol["icon-keep-upright"]),"icon-offset":new Eu(Ra.layout_symbol["icon-offset"]),"icon-anchor":new Eu(Ra.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new wu(Ra.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new wu(Ra.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new wu(Ra.layout_symbol["text-rotation-alignment"]),"text-field":new Eu(Ra.layout_symbol["text-field"]),"text-font":new Eu(Ra.layout_symbol["text-font"]),"text-size":new Eu(Ra.layout_symbol["text-size"]),"text-max-width":new Eu(Ra.layout_symbol["text-max-width"]),"text-line-height":new wu(Ra.layout_symbol["text-line-height"]),"text-letter-spacing":new Eu(Ra.layout_symbol["text-letter-spacing"]),"text-justify":new Eu(Ra.layout_symbol["text-justify"]),"text-anchor":new Eu(Ra.layout_symbol["text-anchor"]),"text-max-angle":new wu(Ra.layout_symbol["text-max-angle"]),"text-rotate":new Eu(Ra.layout_symbol["text-rotate"]),"text-padding":new wu(Ra.layout_symbol["text-padding"]),"text-keep-upright":new wu(Ra.layout_symbol["text-keep-upright"]),"text-transform":new Eu(Ra.layout_symbol["text-transform"]),"text-offset":new Eu(Ra.layout_symbol["text-offset"]),"text-allow-overlap":new wu(Ra.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new wu(Ra.layout_symbol["text-ignore-placement"]),"text-optional":new wu(Ra.layout_symbol["text-optional"])}),Yc={paint:new Au({"icon-opacity":new Eu(Ra.paint_symbol["icon-opacity"]),"icon-color":new Eu(Ra.paint_symbol["icon-color"]),"icon-halo-color":new Eu(Ra.paint_symbol["icon-halo-color"]),"icon-halo-width":new Eu(Ra.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Eu(Ra.paint_symbol["icon-halo-blur"]),"icon-translate":new wu(Ra.paint_symbol["icon-translate"]),"icon-translate-anchor":new wu(Ra.paint_symbol["icon-translate-anchor"]),"text-opacity":new Eu(Ra.paint_symbol["text-opacity"]),"text-color":new Eu(Ra.paint_symbol["text-color"]),"text-halo-color":new Eu(Ra.paint_symbol["text-halo-color"]),"text-halo-width":new Eu(Ra.paint_symbol["text-halo-width"]),"text-halo-blur":new Eu(Ra.paint_symbol["text-halo-blur"]),"text-translate":new wu(Ra.paint_symbol["text-translate"]),"text-translate-anchor":new wu(Ra.paint_symbol["text-translate-anchor"])}),layout:$c},Jc=function(t){function e(e){t.call(this,e,Yc)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype.recalculate=function n(e){t.prototype.recalculate.call(this,e),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},e.prototype.getValueAndResolveTokens=function i(e,t){var n=this.layout.get(e).evaluate(t,{}),r=this._unevaluatedLayout._values[e];return r.isDataDriven()||it(r.value)?n:Ii(t.properties,n)},e.prototype.createBucket=function r(e){return new Kc(e)},e.prototype.queryRadius=function o(){return 0},e.prototype.queryIntersectsFeature=function a(){return Mo(!1),!1},e}(Iu),Qc={paint:new Au({"background-color":new wu(Ra.paint_background["background-color"]),"background-pattern":new Su(Ra.paint_background["background-pattern"]),"background-opacity":new wu(Ra.paint_background["background-opacity"])})},ef=function(t){function e(e){t.call(this,e,Qc)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e}(Iu),tf={paint:new Au({"raster-opacity":new wu(Ra.paint_raster["raster-opacity"]),"raster-hue-rotate":new wu(Ra.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new wu(Ra.paint_raster["raster-brightness-min"]),"raster-brightness-max":new wu(Ra.paint_raster["raster-brightness-max"]),"raster-saturation":new wu(Ra.paint_raster["raster-saturation"]),"raster-contrast":new wu(Ra.paint_raster["raster-contrast"]),"raster-resampling":new wu(Ra.paint_raster["raster-resampling"]),"raster-fade-duration":new wu(Ra.paint_raster["raster-fade-duration"])})},nf=function(t){function e(e){t.call(this,e,tf)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e}(Iu),rf=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype.hasOffscreenPass=function n(){return this.implementation.prerender!==undefined||"3d"===this.implementation.renderingMode},e.prototype.recalculate=function r(){},e.prototype.updateTransitions=function i(){},e.prototype.hasTransition=function o(){},e.prototype.serialize=function a(){Mo(!1,"Custom layers cannot be serialized")},e.prototype.resize=function s(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e.prototype.onAdd=function u(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},e.prototype.onRemove=function l(e){this.implementation.onRemove&&this.implementation.onRemove(e)},e}(Iu),of={circle:Yl,heatmap:nc,hillshade:ic,fill:pc,"fill-extrusion":_c,line:Mc,symbol:Jc,background:ef,raster:nf},af=1,sf=function sf(e,t){var n=t.pixelRatio;this.paddedRect=e,this.pixelRatio=n},uf={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};uf.tl.get=function(){return[this.paddedRect.x+af,this.paddedRect.y+af]},uf.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-af,this.paddedRect.y+this.paddedRect.h-af]},uf.tlbr.get=function(){return this.tl.concat(this.br)},uf.displaySize.get=function(){return[(this.paddedRect.w-2*af)/this.pixelRatio,(this.paddedRect.h-2*af)/this.pixelRatio]},Object.defineProperties(sf.prototype,uf);var lf=function lf(e,t){var n={},r={},i=[];for(var o in e){var a=e[o],s={x:0,y:0,w:a.data.width+2*af,h:a.data.height+2*af};i.push(s),n[o]=new sf(s,a)}for(var u in t){var l=t[u],c={x:0,y:0,w:l.data.width+2*af,h:l.data.height+2*af};i.push(c),r[u]=new sf(c,l)}var f=Oi(i),p=f.w,d=f.h,h=new ec({width:p||1,height:d||1});for(var m in e){var g=e[m],y=n[m].paddedRect;ec.copy(g.data,h,{x:0,y:0},{x:y.x+af,y:y.y+af},g.data)}for(var v in t){var _=t[v],b=r[v].paddedRect,x=b.x+af,w=b.y+af,E=_.data.width,C=_.data.height;ec.copy(_.data,h,{x:0,y:0},{x:x,y:w},_.data),ec.copy(_.data,h,{x:0,y:C-1},{x:x,y:w-1},{width:E,height:1}),ec.copy(_.data,h,{x:0,y:0},{x:x,y:w+C},{width:E,height:1}),ec.copy(_.data,h,{x:E-1,y:0},{x:x-1,y:w},{width:1,height:C}),ec.copy(_.data,h,{x:0,y:0},{x:x+E,y:w},{width:1,height:C})}this.image=h,this.iconPositions=n,this.patternPositions=r};Wt("ImagePosition",sf),Wt("ImageAtlas",lf);var cf=self.HTMLImageElement,ff=self.HTMLCanvasElement,pf=self.HTMLVideoElement,df=self.ImageData,hf=function hf(e,t,n,r){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,r)};hf.prototype.update=function vp(e,t){var n=e.width,r=e.height,i=!this.size||this.size[0]!==n||this.size[1]!==r,o=this.context,a=o.gl;this.useMipmap=Boolean(t&&t.useMipmap),a.bindTexture(a.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===a.RGBA&&(!t||!1!==t.premultiply)),i?(this.size=[n,r],e instanceof cf||e instanceof ff||e instanceof pf||e instanceof df?a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,a.UNSIGNED_BYTE,e):a.texImage2D(a.TEXTURE_2D,0,this.format,n,r,0,this.format,a.UNSIGNED_BYTE,e.data)):e instanceof cf||e instanceof ff||e instanceof pf||e instanceof df?a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,e):a.texSubImage2D(a.TEXTURE_2D,0,0,0,n,r,a.RGBA,a.UNSIGNED_BYTE,e.data),this.useMipmap&&this.isSizePowerOfTwo()&&a.generateMipmap(a.TEXTURE_2D)},hf.prototype.bind=function Rd(e,t,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),e!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),this.wrap=t)},hf.prototype.isSizePowerOfTwo=function Nd(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},hf.prototype.destroy=function qp(){this.context.gl.deleteTexture(this.texture),this.texture=null};var mf={read:function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?i-1:0,p=n?-1:1,d=e[t+f];for(f+=p,o=d&(1<<-c)-1,d>>=-c,c+=s;0<c;o=256*o+e[t+f],f+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;0<c;a=256*a+e[t+f],f+=p,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:(d?-1:1)*Infinity;a+=Math.pow(2,r),o-=l}return(d?-1:1)*a*Math.pow(2,o-r)},write:function(e,t,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,f=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===Infinity?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),2<=(t+=1<=a+f?p/u:p*Math.pow(2,1-f))*u&&(a++,u/=2),c<=a+f?(s=0,a=c):1<=a+f?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));8<=i;e[n+d]=255&s,d+=h,s/=256,i-=8);for(a=a<<i|s,l+=i;0<l;e[n+d]=255&a,d+=h,a/=256,l-=8);e[n+d-h]|=128*m}},gf=Ri;Ri.Varint=0,Ri.Fixed64=1,Ri.Bytes=2,Ri.Fixed32=5;var yf=4294967296,vf=1/yf;Ri.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,e(i,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=$i(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Ji(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=$i(this.buf,this.pos)+$i(this.buf,this.pos+4)*yf;return this.pos+=8,e},readSFixed64:function(){var e=$i(this.buf,this.pos)+Ji(this.buf,this.pos+4)*yf;return this.pos+=8,e},readFloat:function(){var e=mf.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=mf.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:Ni(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=Qi(this.buf,this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){var n=Li(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){var t=Li(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){var t=Li(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){var t=Li(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){var t=Li(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){var t=Li(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){var t=Li(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){var t=Li(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){var t=Li(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Ri.Varint)for(;127<this.buf[this.pos++];);else if(t===Ri.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Ri.Fixed32)this.pos+=4;else{if(t!==Ri.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Yi(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Yi(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Yi(this.buf,-1&e,this.pos),Yi(this.buf,Math.floor(e*vf),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Yi(this.buf,-1&e,this.pos),Yi(this.buf,Math.floor(e*vf),this.pos+4),this.pos+=8},writeVarint:function(e){268435455<(e=+e||0)||e<0?Bi(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(127<e?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=eo(this.buf,e,this.pos);var n=this.pos-t;128<=n&&ji(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),mf.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),mf.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;128<=r&&ji(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,Ri.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){this.writeMessage(e,Ui,t)},writePackedSVarint:function(e,t){this.writeMessage(e,Vi,t)},writePackedBoolean:function(e,t){this.writeMessage(e,Wi,t)},writePackedFloat:function(e,t){this.writeMessage(e,qi,t)},writePackedDouble:function(e,t){this.writeMessage(e,Hi,t)},writePackedFixed32:function(e,t){this.writeMessage(e,Gi,t)},writePackedSFixed32:function(e,t){this.writeMessage(e,Zi,t)},writePackedFixed64:function(e,t){this.writeMessage(e,Xi,t)},writePackedSFixed64:function(e,t){this.writeMessage(e,Ki,t)},writeBytesField:function(e,t){this.writeTag(e,Ri.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Ri.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Ri.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Ri.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Ri.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Ri.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Ri.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Ri.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Ri.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Ri.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var _f=3,bf=_f,xf=function xf(e,t,n){this.target=e,this.parent=t,this.mapId=n,this.callbacks={},this.callbackID=0,y(["receive"],this),this.target.addEventListener("message",this.receive,!1)};xf.prototype.send=function Ld(e,t,n,r){var i=this,o=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[o]=n);var a=[];if(this.target.postMessage({targetMapId:r,sourceMapId:this.mapId,type:e,id:String(o),data:Gt(t,a)},a),n)return{cancel:function(){return i.target.postMessage({targetMapId:r,sourceMapId:i.mapId,type:"<cancel>",id:String(o)})}}},xf.prototype.receive=function Md(e){var t,r=this,n=e.data,i=n.id;if(!n.targetMapId||this.mapId===n.targetMapId){var o=function(e,t){delete r.callbacks[i];var n=[];r.target.postMessage({sourceMapId:r.mapId,type:"<response>",id:String(i),error:e?Gt(e):null,data:Gt(t,n)},n)};if("<response>"===n.type||"<cancel>"===n.type)t=this.callbacks[n.id],delete this.callbacks[n.id],t&&n.error?t(Zt(n.error)):t&&t(null,Zt(n.data));else if("undefined"!=typeof n.id&&this.parent[n.type]){this.callbacks[n.id]=null;var a=this.parent[n.type](n.sourceMapId,Zt(n.data),o);a&&null===this.callbacks[n.id]&&(this.callbacks[n.id]=a)}else if("undefined"!=typeof n.id&&this.parent.getWorkerSource){var s=n.type.split("."),u=Zt(n.data);this.parent.getWorkerSource(n.sourceMapId,s[0],u.source)[s[1]](u,o)}else this.parent[n.type](Zt(n.data))}},xf.prototype.remove=function Bd(){this.target.removeEventListener("message",this.receive,!1)};var wf=function wf(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};wf.prototype.setNorthEast=function zd(e){return this._ne=e instanceof Ef?new Ef(e.lng,e.lat):Ef.convert(e),this},wf.prototype.setSouthWest=function Fd(e){return this._sw=e instanceof Ef?new Ef(e.lng,e.lat):Ef.convert(e),this},wf.prototype.extend=function h(e){var t,n,r=this._sw,i=this._ne;if(e instanceof Ef)n=t=e;else{if(!(e instanceof wf))return Array.isArray(e)?e.every(Array.isArray)?this.extend(wf.convert(e)):this.extend(Ef.convert(e)):this;if(t=e._sw,n=e._ne,!t||!n)return this}return r||i?(r.lng=Math.min(t.lng,r.lng),r.lat=Math.min(t.lat,r.lat),i.lng=Math.max(n.lng,i.lng),i.lat=Math.max(n.lat,i.lat)):(this._sw=new Ef(t.lng,t.lat),this._ne=new Ef(n.lng,n.lat)),this},wf.prototype.getCenter=function jd(){return new Ef((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},wf.prototype.getSouthWest=function Ud(){return this._sw},wf.prototype.getNorthEast=function Vd(){return this._ne},wf.prototype.getNorthWest=function qd(){return new Ef(this.getWest(),this.getNorth())},wf.prototype.getSouthEast=function Hd(){return new Ef(this.getEast(),this.getSouth())},wf.prototype.getWest=function Wd(){return this._sw.lng},wf.prototype.getSouth=function Gd(){return this._sw.lat},wf.prototype.getEast=function Zd(){return this._ne.lng},wf.prototype.getNorth=function Xd(){return this._ne.lat},wf.prototype.toArray=function op(){return[this._sw.toArray(),this._ne.toArray()]},wf.prototype.toString=function $(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},wf.prototype.isEmpty=function ld(){return!(this._sw&&this._ne)},wf.convert=function Kd(e){return!e||e instanceof wf?e:new wf(e)};var Ef=function Ef(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,90<this.lat||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ef.prototype.wrap=function $d(){return new Ef(a(this.lng,-180,180),this.lat)},Ef.prototype.toArray=function op(){return[this.lng,this.lat]},Ef.prototype.toString=function $(){return"LngLat("+this.lng+", "+this.lat+")"},Ef.prototype.toBounds=function Yd(e){void 0===e&&(e=0);var t=360*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new wf(new Ef(this.lng-n,this.lat-t),new Ef(this.lng+n,this.lat+t))},Ef.convert=function Kd(e){if(e instanceof Ef)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Ef(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Ef(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Cf=function Cf(e,t,n){void 0===n&&(n=0),this.x=+e,this.y=+t,this.z=+n};Cf.fromLngLat=function Jd(e,t){void 0===t&&(t=0);var n=Ef.convert(e);return new Cf(uo(n.lng),lo(n.lat),co(t,n.lat))},Cf.prototype.toLngLat=function Qd(){return new Ef(fo(this.x),po(this.y))},Cf.prototype.toAltitude=function eh(){return ho(this.z,this.y)};var Sf=function Sf(e,t,n){Mo(0<=e&&e<=25),Mo(0<=t&&t<Math.pow(2,e)),Mo(0<=n&&n<Math.pow(2,e)),this.z=e,this.x=t,this.y=n,this.key=mo(0,e,t,n)};Sf.prototype.equals=function th(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},Sf.prototype.url=function nh(e,t){var n=oo(this.x,this.y,this.z),r=go(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",n)},Sf.prototype.getTilePoint=function rh(e){var t=Math.pow(2,this.z);return new Fo((e.x*t-this.x)*Nl,(e.y*t-this.y)*Nl)};var Tf=function Tf(e,t){this.wrap=e,this.canonical=t,this.key=mo(e,t.z,t.x,t.y)},Af=function Af(e,t,n,r,i){Mo(n<=e),this.overscaledZ=e,this.wrap=t,this.canonical=new Sf(n,+r,+i),this.key=mo(t,e,r,i)};Af.prototype.equals=function th(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},Af.prototype.scaledTo=function ih(e){Mo(e<=this.overscaledZ);var t=this.canonical.z-e;return e>this.canonical.z?new Af(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Af(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},Af.prototype.isChildOf=function oh(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},Af.prototype.children=function ah(e){if(this.overscaledZ>=e)return[new Af(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new Af(t,this.wrap,t,n,r),new Af(t,this.wrap,t,n+1,r),new Af(t,this.wrap,t,n,r+1),new Af(t,this.wrap,t,n+1,r+1)]},Af.prototype.isLessThan=function sh(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},Af.prototype.wrapped=function uh(){return new Af(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Af.prototype.unwrapTo=function lh(e){return new Af(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},Af.prototype.overscaleFactor=function ch(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Af.prototype.toUnwrapped=function fh(){return new Tf(this.wrap,this.canonical)},Af.prototype.toString=function $(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Af.prototype.getTilePoint=function rh(e){return this.canonical.getTilePoint(new Cf(e.x-this.wrap,e.y))},Wt("CanonicalTileID",Sf),Wt("OverscaledTileID",Af,{omit:["posMatrix"]});var kf=function kf(e,t,n){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return E('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var r=this.dim=t.height;this.stride=this.dim+2,this.data=new Int32Array(this.stride*this.stride);for(var i=t.data,o="terrarium"===n?this._unpackTerrarium:this._unpackMapbox,a=0;a<r;a++)for(var s=0;s<r;s++){var u=4*(a*r+s);this.set(s,a,o(i[u],i[u+1],i[u+2]))}for(var l=0;l<r;l++)this.set(-1,l,this.get(0,l)),this.set(r,l,this.get(r-1,l)),this.set(l,-1,this.get(l,0)),this.set(l,r,this.get(l,r-1));this.set(-1,-1,this.get(0,0)),this.set(r,-1,this.get(r-1,0)),this.set(-1,r,this.get(0,r-1)),this.set(r,r,this.get(r-1,r-1))};kf.prototype.set=function ph(e,t,n){this.data[this._idx(e,t)]=n+65536},kf.prototype.get=function Fe(e,t){return this.data[this._idx(e,t)]-65536},kf.prototype._idx=function dh(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},kf.prototype._unpackMapbox=function hh(e,t,n){return(256*e*256+256*t+n)/10-1e4},kf.prototype._unpackTerrarium=function mh(e,t,n){return 256*e+t+n/256-32768},kf.prototype.getPixels=function gh(){return new ec({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},kf.prototype.backfillBorder=function yh(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var r=t*this.dim,i=t*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(t){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}for(var s=-t*this.dim,u=-n*this.dim,l=o;l<a;l++)for(var c=r;c<i;c++)this.set(c,l,e.get(c+s,l+u))},Wt("DEMData",kf);var If=rn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Df=function Df(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}};Df.prototype.encode=function vh(e){return Mo(e in this._stringToNumber),this._stringToNumber[e]},Df.prototype.decode=function _h(e){return Mo(e<this._numberToString.length),this._numberToString[e]};var Pf=function Pf(e,t,n,r){this.type="Feature",(this._vectorTileFeature=e)._z=t,e._x=n,e._y=r,this.properties=e.properties,null!=e.id&&(this.id=e.id)},Of={geometry:{configurable:!0}};Of.geometry.get=function(){return this._geometry===undefined&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Of.geometry.set=function(e){this._geometry=e},Pf.prototype.toJSON=function fp(){var e={geometry:this.geometry};for(var t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e},Object.defineProperties(Pf.prototype,Of);var Rf=function Rf(){this.state={},this.stateChanges={},this.deletedStates={}};Rf.prototype.updateState=function bh(e,t,n){var r=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},h(this.stateChanges[e][r],n),null===this.deletedStates[e])for(var i in this.deletedStates[e]={},this.state[e])i!==r&&(this.deletedStates[e][i]=null);else if(this.deletedStates[e]&&null===this.deletedStates[e][r])for(var o in this.deletedStates[e][r]={},this.state[e][r])n[o]||(this.deletedStates[e][r][o]=null);else for(var a in n){this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][a]&&delete this.deletedStates[e][r][a]}},Rf.prototype.removeFeatureState=function xh(e,t,n){if(!(null===this.deletedStates[e])){var r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][n]=null);else if(t){if(this.stateChanges[e]&&this.stateChanges[e][r])for(n in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][n]=null;else this.deletedStates[e][r]=null}else this.deletedStates[e]=null}},Rf.prototype.getState=function wh(e,t){var n=String(t),r=this.state[e]||{},i=this.stateChanges[e]||{},o=h({},r[n],i[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){var a=this.deletedStates[e][t];if(null===a)return{};for(var s in a)delete o[s]}return o},Rf.prototype.initializeTileState=function Eh(e,t){e.setFeatureState(this.state,t)},Rf.prototype.coalesceChanges=function Ch(e,t){var n={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var i={};for(var o in this.stateChanges[r])this.state[r][o]||(this.state[r][o]={}),h(this.state[r][o],this.stateChanges[r][o]),i[o]=this.state[r][o];n[r]=i}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a]){for(var u in this.state[a])s[u]={};this.state[a]={}}else for(var l in this.deletedStates[a]){if(null===this.deletedStates[a][l])this.state[a][l]={};else for(var c=0,f=Object.keys(this.deletedStates[a][l]);c<f.length;c+=1){var p=f[c];delete this.state[a][l][p]}s[l]=this.state[a][l]}n[a]=n[a]||{},h(n[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var d in e){e[d].setFeatureState(n,t)}};var Nf=function Nf(e,t,n){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=t||new Ys(Nl,16,0),this.grid3D=new Ys(Nl,16,0),this.featureIndexArray=n||new dl};Nf.prototype.insert=function Sh(e,t,n,r,i,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var s=o?this.grid3D:this.grid,u=0;u<t.length;u++){for(var l=t[u],c=[Infinity,Infinity,-Infinity,-Infinity],f=0;f<l.length;f++){var p=l[f];c[0]=Math.min(c[0],p.x),c[1]=Math.min(c[1],p.y),c[2]=Math.max(c[2],p.x),c[3]=Math.max(c[3],p.y)}c[0]<Nl&&c[1]<Nl&&0<=c[2]&&0<=c[3]&&s.insert(a,c[0],c[1],c[2],c[3])}},Nf.prototype.loadVTLayers=function Th(){return this.vtLayers||(this.vtLayers=new Cc.VectorTile(new gf(this.rawTileData)).layers,this.sourceLayerCoder=new Df(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Nf.prototype.query=function Ah(i,o,a){var s=this;this.loadVTLayers();for(var u=i.params||{},l=Nl/i.tileSize/i.scale,c=bt(u.filter),f=i.queryGeometry,p=i.queryPadding*l,e=vo(f),d=this.grid.query(e.minX-p,e.minY-p,e.maxX+p,e.maxY+p),t=vo(i.cameraQueryGeometry),n=0,r=this.grid3D.query(t.minX-p,t.minY-p,t.maxX+p,t.maxY+p,function(e,t,n,r){return kn(i.cameraQueryGeometry,e-p,t-p,n+p,r+p)});n<r.length;n+=1){
var h=r[n];d.push(h)}d.sort(_o);for(var m,g={},y=function(e){var t=d[e];if(t!==m){m=t;var n=s.featureIndexArray.get(t),r=null;s.loadMatchingFeature(g,n.bucketIndex,n.sourceLayerIndex,n.featureIndex,c,u.layers,o,function(e,t){r||(r=mn(e));var n={};return e.id&&(n=a.getState(t.sourceLayer||"_geojsonTileLayer",e.id)),t.queryIntersectsFeature(f,e,n,r,s.z,i.transform,l,i.pixelPosMatrix)})}},v=0;v<d.length;v++)y(v);return g},Nf.prototype.loadMatchingFeature=function kh(e,t,n,r,i,o,a,s){var u=this.bucketLayerIDs[t];if(!o||w(o,u)){var l=this.sourceLayerCoder.decode(n),c=this.vtLayers[l].feature(r);if(i(new du(this.tileID.overscaledZ),c))for(var f=0;f<u.length;f++){var p=u[f];if(!(o&&o.indexOf(p)<0)){var d=a[p];if(d){var h=!s||s(c,d);if(h){var m=new Pf(c,this.z,this.x,this.y);m.layer=d.serialize();var g=e[p];g===undefined&&(g=e[p]=[]),g.push({featureIndex:r,feature:m,intersectionZ:h})}}}}}},Nf.prototype.lookupSymbolFeatures=function Ih(e,t,n,r,i,o){var a={};this.loadVTLayers();for(var s=bt(r),u=0,l=e;u<l.length;u+=1){var c=l[u];this.loadMatchingFeature(a,t,n,c,s,i,o)}return a},Nf.prototype.hasLayer=function Dh(e){for(var t=0,n=this.bucketLayerIDs;t<n.length;t+=1)for(var r=0,i=n[t];r<i.length;r+=1){if(e===i[r])return!0}return!1},Wt("FeatureIndex",Nf,{omit:["rawTileData","sourceLayerCoder"]});var Lf=3e4,Mf=function Mf(e,t){this.tileID=e,this.uid=d(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.expiredRequestCount=0,this.state="loading"};Mf.prototype.registerFadeDuration=function Ph(e){var t=e+this.timeAdded;t<Xo.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},Mf.prototype.wasRequested=function Oh(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Mf.prototype.loadVectorData=function Rh(e,t,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var r in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=yo(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[r];if(i instanceof Kc){if(this.hasSymbolBuckets=!0,!n)break;i.justReloaded=!0}}for(var o in this.queryPadding=0,this.buckets){var a=this.buckets[o];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(o).queryRadius(a))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new rl},Mf.prototype.unloadVectorData=function Nh(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Mf.prototype.unloadDEMData=function Lh(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},Mf.prototype.getBucket=function Mh(e){return this.buckets[e.id]},Mf.prototype.upload=function Jp(e){for(var t in this.buckets){var n=this.buckets[t];n.uploadPending()&&n.upload(e)}var r=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new hf(e,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new hf(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},Mf.prototype.queryRenderedFeatures=function Bh(e,t,n,r,i,o,a,s,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,cameraQueryGeometry:r,scale:i,tileSize:this.tileSize,pixelPosMatrix:u,transform:a,params:o,queryPadding:this.queryPadding*s},e,t):{}},Mf.prototype.querySourceFeatures=function zh(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var n=this.latestFeatureIndex.loadVTLayers(),r=t?t.sourceLayer:"",i=n._geojsonTileLayer||n[r];if(i)for(var o=bt(t&&t.filter),a=this.tileID.canonical,s=a.z,u=a.x,l=a.y,c={z:s,x:u,y:l},f=0;f<i.length;f++){var p=i.feature(f);if(o(new du(this.tileID.overscaledZ),p)){var d=new Pf(p,s,u,l);d.tile=c,e.push(d)}}}},Mf.prototype.clearMask=function Fh(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},Mf.prototype.setMask=function jh(e,t){if(!p(this.mask,e)&&(this.mask=e,this.clearMask(),!p(e,{0:!0}))){var n=new Mu,r=new Yu;this.segments=new gl,this.segments.prepareSegment(0,n,r);for(var i=Object.keys(e),o=0;o<i.length;o++){var a=e[i[o]],s=Nl>>a.z,u=new Fo(a.x*s,a.y*s),l=new Fo(u.x+s,u.y+s),c=this.segments.prepareSegment(4,n,r);n.emplaceBack(u.x,u.y,u.x,u.y),n.emplaceBack(l.x,u.y,l.x,u.y),n.emplaceBack(u.x,l.y,u.x,l.y),n.emplaceBack(l.x,l.y,l.x,l.y);var f=c.vertexLength;r.emplaceBack(f,f+1,f+2),r.emplaceBack(f+1,f+2,f+3),c.vertexLength+=4,c.primitiveLength+=2}this.maskedBoundsBuffer=t.createVertexBuffer(n,If.members),this.maskedIndexBuffer=t.createIndexBuffer(r)}},Mf.prototype.hasData=function Uh(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Mf.prototype.patternsLoaded=function Vh(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Mf.prototype.setExpiryData=function qh(e){var t=this.expirationTime;if(e.cacheControl){var n=A(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(t)if(this.expirationTime<t)i=!0;else{var o=this.expirationTime-t;o?this.expirationTime=r+Math.max(o,Lf):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Mf.prototype.getExpiryTimeout=function Hh(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Mf.prototype.setFeatureState=function Wh(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length){var n=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets){var i=this.buckets[r],o=i.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=e[o];a&&s&&0!==Object.keys(s).length&&(i.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{}),t&&t.style&&(this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(r).queryRadius(i))))}}},Mf.prototype.holdingForFade=function Gh(){return this.symbolFadeHoldUntil!==undefined},Mf.prototype.symbolFadeFinished=function Zh(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Xo.now()},Mf.prototype.clearFadeHold=function Xh(){this.symbolFadeHoldUntil=undefined},Mf.prototype.setHoldDuration=function Kh(e){this.symbolFadeHoldUntil=Xo.now()+e};var Bf=["type","source","source-layer","minzoom","maxzoom","filter","layout"],zf={horizontal:1,vertical:2,horizontalOnly:3},Ff=function Ff(){this.text="",this.sectionIndex=[],this.sections=[]};Ff.fromFeature=function $h(e,t){for(var n=new Ff,r=0;r<e.sections.length;r++){var i=e.sections[r];n.sections.push({scale:i.scale||1,fontStack:i.fontStack||t}),n.text+=i.text;for(var o=0;o<i.text.length;o++)n.sectionIndex.push(r)}return n},Ff.prototype.length=function Xn(){return this.text.length},Ff.prototype.getSection=function Yh(e){return this.sections[this.sectionIndex[e]]},Ff.prototype.getCharCode=function Jh(e){return this.text.charCodeAt(e)},Ff.prototype.verticalizePunctuation=function Qh(){this.text=Ei(this.text)},Ff.prototype.trim=function em(){for(var e=0,t=0;t<this.text.length&&jf[this.text.charCodeAt(t)];t++)e++;for(var n=this.text.length,r=this.text.length-1;0<=r&&e<=r&&jf[this.text.charCodeAt(r)];r--)n--;this.text=this.text.substring(e,n),this.sectionIndex=this.sectionIndex.slice(e,n)},Ff.prototype.substring=function e(t,n){var e=new Ff;return e.text=this.text.substring(t,n),e.sectionIndex=this.sectionIndex.slice(t,n),e.sections=this.sections,e},Ff.prototype.toString=function $(){return this.text},Ff.prototype.getMaxScale=function tm(){var n=this;return this.sectionIndex.reduce(function(e,t){return Math.max(e,n.sections[t].scale)},0)};var jf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Uf={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};e.createCommonjsModule=t,e.window=self,e.Point=Fo,e.assert=Mo,e.browser=Xo,e.getJSON=Ca,e.normalizeSpriteURL=oa,e.ResourceType=va,e.getImage=ka,e.RGBAImage=ec,e.ImagePosition=sf,e.Texture=hf,e.potpack=Oi,e.normalizeGlyphsURL=ra,e.getArrayBuffer=Sa,e.parseGlyphPBF=io,e.asyncAll=s,e.isChar=iu,e.AlphaImage=Ql,e.styleSpec=Ra,e.sphericalToCartesian=T,e.number=ue,e.Properties=Au,e.DataConstantProperty=wu,e.Transitionable=gu,e.validateLight=Xs,e.endsWith=v,e.emitValidationErrors=qt,e.validateStyle=Zs,e.extend=h,e.Evented=Oa,e.warnOnce=E,e.uniqueId=d,e.Actor=xf,e.pick=f,e.canonicalizeTileset=ca,e.normalizeSourceURL=ia,e.LngLatBounds=wf,e.mercatorXfromLng=uo,e.mercatorYfromLat=lo,e.Event=Da,e.ErrorEvent=Pa,e.postTurnstileEvent=ma,e.postMapLoadEvent=ya,e.normalizeTileURL=ua,e.OverscaledTileID=Af,e.EXTENT=Nl,e.MercatorCoordinate=Cf,e.CanonicalTileID=Sf,e.StructArrayLayout4i8=Mu,e.rasterBoundsAttributes=If,e.SegmentVector=gl,e.getVideo=Ia,e.ValidationError=Na,e.bindAll=y,e.identity=zn,e.translate=Un,e.scale=Vn,e.multiply=jn,e.Color=Ka,e.isEqual=p,e.SourceFeatureState=Rf,e.keysDifference=c,e.Tile=Mf,e.refProperties=Bf,e.properties=Yc,e.rotateZ=Hn,e.evaluateSizeForZoom=Ti,e.WritingMode=zf,e.transformMat4=nr,e.evaluateSizeForFeature=Si,e.addDynamicAttributes=ki,e.polygonIntersectsPolygon=yn,e.ZoomHistory=nu,e.getReferrer=wa,e.isMapboxURL=N,e.normalizeStyleURL=na,e.createStyleLayer=Pi,e.clone=x,e.validateCustomStyleLayer=Di,e.filterObject=b,e.mapObject=_,e.evented=uu,e.makeRequest=Ea,e.registerForPluginAvailability=lu,e.createLayout=rn,e.UniformMatrix4f=Tl,e.Uniform3f=wl,e.Uniform1f=bl,e.Uniform1i=_l,e.Uniform2f=xl,e.Uniform4f=El,e.create=Ln,e.fromRotation=Mn,e.transformMat3=Qn,e.create$1=Bn,e.ortho=Gn,e.UniformColor=Cl,e.clamp=l,e.StructArrayLayout2i4=Lu,e.StructArrayLayout2ui4=Ju,e.ProgramConfiguration=Ol,e.StructArrayLayout1ui2=Qu,e.StructArrayLayout3ui6=Yu,e.LngLat=Ef,e.wrap=a,e.create$2=Rn,e.rotate=Nn,e.UnwrappedTileID=Tf,e.perspective=Wn,e.rotateX=qn,e.mercatorZfromAltitude=co,e.invert=Fn,e.ease=Vo,e.bezier=i,e.config=Ko,e.webpSupported=$o,e.EvaluationParameters=du,e.version=Bo,e.setRTLTextPlugin=fu,e.featureFilter=bt,e.values=u,e.Anchor=qc,e.GLYPH_PBF_BORDER=bf,e.distToSegmentSquared=Sn,e.allowsLetterSpacing=Kt,e.shapeText=xo,e.allowsVerticalWritingMode=Xt,e.shapeIcon=Oo,e.classifyRings=Zr,e.SIZE_PACK_FACTOR=Hc,e.SymbolBucket=Kc,e.register=Wt,e.CollisionBoxArray=rl,e.DictionaryCoder=Df,e.FeatureIndex=Nf,e.ImageAtlas=lf,e.LineBucket=Oc,e.FillBucket=cc,e.FillExtrusionBucket=yc,e.mvt=Cc,e.Protobuf=gf,e.DEMData=kf,e.vectorTile=Cc,e.Point$1=Fo,e.pbf=gf,e.createExpression=ot,e.plugin=pu}),e(["./shared.js"],function(K){function u(e){var t=typeof e;if("number"===t||"boolean"===t||"string"===t||e===undefined||null===e)return JSON.stringify(e);if(Array.isArray(e)){for(var n="[",r=0,i=e;r<i.length;r+=1){n+=u(i[r])+","}return n+"]"}for(var o=Object.keys(e).sort(),a="{",s=0;s<o.length;s++)a+=JSON.stringify(o[s])+":"+u(e[o[s]])+",";return a+"}"}function s(e){for(var t="",n=0,r=K.refProperties;n<r.length;n+=1){t+="/"+u(e[r[n]])}return t}function v(e){for(var t={},n=0;n<e.length;n++){var r=s(e[n]),i=t[r];i||(i=t[r]=[]),i.push(e[n])}var o=[];for(var a in t)o.push(t[a]);return o}function E(e,t,n,r,i){if(t.segment===undefined)return!0;for(var o=t,a=t.segment+1,s=0;-n/2<s;){if(--a<0)return!1;s-=e[a].dist(o),o=e[a]}s+=e[a].dist(e[a+1]),a++;for(var u=[],l=0;s<n/2;){var c=e[a-1],f=e[a],p=e[a+1];if(!p)return!1;var d=c.angleTo(f)-f.angleTo(p);for(d=Math.abs((d+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:d}),l+=d;s-u[0].distance>r;)l-=u.shift().angleDelta;if(i<l)return!1;a++,s+=f.dist(p)}return!0}function C(e){for(var t=0,n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function _(e,t,n){return e?.6*t*n:0}function b(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function $(e,t,n,r,i,o){for(var a=_(n,i,o),s=b(n,r)*o,u=0,l=C(e)/2,c=0;c<e.length-1;c++){var f=e[c],p=e[c+1],d=f.dist(p);if(l<u+d){var h=(l-u)/d,m=K.number(f.x,p.x,h),g=K.number(f.y,p.y,h),y=new K.Anchor(m,g,p.angleTo(f),c);return y._round(),!a||E(e,y,s,a,t)?y:void 0}u+=d}}function Y(e,t,n,r,i,o,a,s,u){var l=_(r,o,a),c=b(r,i),f=c*a,p=0===e[0].x||e[0].x===u||0===e[0].y||e[0].y===u;return t-f<t/4&&(t=f+t/4),S(e,p?t/2*s%t:(c/2+2*o)*a*s%t,t,l,n,f,p,!1,u)}function S(e,t,n,r,i,o,a,s,u){for(var l=o/2,c=C(e),f=0,p=t-n,d=[],h=0;h<e.length-1;h++){for(var m=e[h],g=e[h+1],y=m.dist(g),v=g.angleTo(m);p+n<f+y;){var _=((p+=n)-f)/y,b=K.number(m.x,g.x,_),x=K.number(m.y,g.y,_);if(0<=b&&b<u&&0<=x&&x<u&&0<=p-l&&p+l<=c){var w=new K.Anchor(b,x,v,h);w._round(),r&&!E(e,w,o,r,i)||d.push(w)}}f+=y}return s||d.length||a||(d=S(e,f/2,n,r,i,o,a,!0,u)),d}function J(e,t,n,r,i){for(var o=[],a=0;a<e.length;a++)for(var s=e[a],u=void 0,l=0;l<s.length-1;l++){var c=s[l],f=s[l+1];c.x<t&&f.x<t||(c.x<t?c=new K.Point(t,c.y+(f.y-c.y)*((t-c.x)/(f.x-c.x)))._round():f.x<t&&(f=new K.Point(t,c.y+(f.y-c.y)*((t-c.x)/(f.x-c.x)))._round()),c.y<n&&f.y<n||(c.y<n?c=new K.Point(c.x+(f.x-c.x)*((n-c.y)/(f.y-c.y)),n)._round():f.y<n&&(f=new K.Point(c.x+(f.x-c.x)*((n-c.y)/(f.y-c.y)),n)._round()),c.x>=r&&f.x>=r||(c.x>=r?c=new K.Point(r,c.y+(f.y-c.y)*((r-c.x)/(f.x-c.x)))._round():f.x>=r&&(f=new K.Point(r,c.y+(f.y-c.y)*((r-c.x)/(f.x-c.x)))._round()),c.y>=i&&f.y>=i||(c.y>=i?c=new K.Point(c.x+(f.x-c.x)*((i-c.y)/(f.y-c.y)),i)._round():f.y>=i&&(f=new K.Point(c.x+(f.x-c.x)*((i-c.y)/(f.y-c.y)),i)._round()),u&&c.equals(u[u.length-1])||(u=[c],o.push(u)),u.push(f)))))}return o}function z(e,t,n,r,i,o){var a,s,u,l,c=t.image,f=n.layout,p=1,d=t.top-p/c.pixelRatio,h=t.left-p/c.pixelRatio,m=t.bottom+p/c.pixelRatio,g=t.right+p/c.pixelRatio;if("none"!==f.get("icon-text-fit")&&i){var y=g-h,v=m-d,_=f.get("text-size").evaluate(o,{})/24,b=i.left*_,x=i.right*_,w=i.top*_,E=x-b,C=i.bottom*_-w,S=f.get("icon-text-fit-padding")[0],T=f.get("icon-text-fit-padding")[1],A=f.get("icon-text-fit-padding")[2],k=f.get("icon-text-fit-padding")[3],I="width"===f.get("icon-text-fit")?.5*(C-v):0,D="height"===f.get("icon-text-fit")?.5*(E-y):0,P="width"===f.get("icon-text-fit")||"both"===f.get("icon-text-fit")?E:y,O="height"===f.get("icon-text-fit")||"both"===f.get("icon-text-fit")?C:v;a=new K.Point(b+D-k,w+I-S),s=new K.Point(b+D+T+P,w+I-S),u=new K.Point(b+D+T+P,w+I+A+O),l=new K.Point(b+D-k,w+I+A+O)}else a=new K.Point(h,d),s=new K.Point(g,d),u=new K.Point(g,m),l=new K.Point(h,m);var R=n.layout.get("icon-rotate").evaluate(o,{})*Math.PI/180;if(R){var N=Math.sin(R),L=Math.cos(R),M=[L,-N,N,L];a._matMult(M),s._matMult(M),l._matMult(M),u._matMult(M)}return[{tl:a,tr:s,bl:l,br:u,tex:c.paddedRect,writingMode:undefined,glyphOffset:[0,0]}]}function m(e,t,n,r,i,o){for(var a=24,s=n.layout.get("text-rotate").evaluate(i,{})*Math.PI/180,u=n.layout.get("text-offset").evaluate(i,{}).map(function(e){return e*a}),l=t.positionedGlyphs,c=[],f=0;f<l.length;f++){var p=l[f],d=o[p.fontStack],h=d&&d[p.glyph];if(h){var m=h.rect;if(m){var g=1,y=K.GLYPH_PBF_BORDER+g,v=h.metrics.advance*p.scale/2,_=r?[p.x+v,p.y]:[0,0],b=r?[0,0]:[p.x+v+u[0],p.y+u[1]],x=(h.metrics.left-y)*p.scale-v+b[0],w=(-h.metrics.top-y)*p.scale+b[1],E=x+m.w*p.scale,C=w+m.h*p.scale,S=new K.Point(x,w),T=new K.Point(E,w),A=new K.Point(x,C),k=new K.Point(E,C);if(r&&p.vertical){var I=new K.Point(-v,v),D=-Math.PI/2,P=new K.Point(5,0);S._rotateAround(D,I)._add(P),T._rotateAround(D,I)._add(P),A._rotateAround(D,I)._add(P),k._rotateAround(D,I)._add(P)}if(s){var O=Math.sin(s),R=Math.cos(s),N=[R,-O,O,R];S._matMult(N),T._matMult(N),A._matMult(N),k._matMult(N)}c.push({tl:S,tr:T,bl:A,br:k,tex:m,writingMode:t.writingMode,glyphOffset:_})}}}return c}function r(e,t){return e<t?-1:t<e?1:0}function Q(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!1);for(var r=Infinity,i=Infinity,o=-Infinity,a=-Infinity,s=e[0],u=0;u<s.length;u++){var l=s[u];(!u||l.x<r)&&(r=l.x),(!u||l.y<i)&&(i=l.y),(!u||l.x>o)&&(o=l.x),(!u||l.y>a)&&(a=l.y)}var c=o-r,f=a-i,p=Math.min(c,f),d=p/2,h=new $e([],x);if(0===p)return new K.Point(r,i);for(var m=r;m<o;m+=p)for(var g=i;g<a;g+=p)h.push(new w(m+d,g+d,d,e));for(var y=T(e),v=h.length;h.length;){var _=h.pop();(_.d>y.d||!y.d)&&(y=_,n&&console.log("found best %d after %d probes",Math.round(1e4*_.d)/1e4,v)),_.max-y.d<=t||(d=_.h/2,h.push(new w(_.p.x-d,_.p.y-d,d,e)),h.push(new w(_.p.x+d,_.p.y-d,d,e)),h.push(new w(_.p.x-d,_.p.y+d,d,e)),h.push(new w(_.p.x+d,_.p.y+d,d,e)),v+=4)}return n&&(console.log("num probes: "+v),console.log("best distance: "+y.d)),y.p}function x(e,t){return t.max-e.max}function w(e,t,n,r){this.p=new K.Point(e,t),this.h=n,this.d=i(this.p,r),this.max=this.d+this.h*Math.SQRT2}function i(e,t){for(var n=!1,r=Infinity,i=0;i<t.length;i++)for(var o=t[i],a=0,s=o.length,u=s-1;a<s;u=a++){var l=o[a],c=o[u];l.y>e.y!=c.y>e.y&&e.x<(c.x-l.x)*(e.y-l.y)/(c.y-l.y)+l.x&&(n=!n),r=Math.min(r,K.distToSegmentSquared(e,l,c))}return(n?1:-1)*Math.sqrt(r)}function T(e){for(var t=0,n=0,r=0,i=e[0],o=0,a=i.length,s=a-1;o<a;s=o++){var u=i[o],l=i[s],c=u.x*l.y-l.x*u.y;n+=(u.x+l.x)*c,r+=(u.y+l.y)*c,t+=3*c}return new w(n/t,r/t,0,e)}function k(e,t,n,r,i,o){e.createArrays();var a=512*e.overscaling;e.tilePixelRatio=K.EXTENT/a,e.compareText={},e.iconsNeedLinear=!1;var s=e.layers[0].layout,u=e.layers[0]._unevaluatedLayout._values,l={};if("composite"===e.textSizeData.functionType){var c=e.textSizeData.zoomRange,f=c.min,p=c.max;l.compositeTextSizes=[u["text-size"].possiblyEvaluate(new K.EvaluationParameters(f)),u["text-size"].possiblyEvaluate(new K.EvaluationParameters(p))]}if("composite"===e.iconSizeData.functionType){var d=e.iconSizeData.zoomRange,h=d.min,m=d.max;l.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new K.EvaluationParameters(h)),u["icon-size"].possiblyEvaluate(new K.EvaluationParameters(m))]}l.layoutTextSize=u["text-size"].possiblyEvaluate(new K.EvaluationParameters(e.zoom+1)),l.layoutIconSize=u["icon-size"].possiblyEvaluate(new K.EvaluationParameters(e.zoom+1)),l.textMaxSize=u["text-size"].possiblyEvaluate(new K.EvaluationParameters(18));for(var g=24,y=s.get("text-line-height")*g,v="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),_=s.get("text-keep-upright"),b=0,x=e.features;b<x.length;b+=1){var w=x[b],E=s.get("text-font").evaluate(w,{}).join(","),C=n,S={},T=w.text;if(T){var A=T.toString(),k=s.get("text-offset").evaluate(w,{}).map(function(e){return e*g}),I=s.get("text-letter-spacing").evaluate(w,{})*g,D=K.allowsLetterSpacing(A)?I:0,P=s.get("text-anchor").evaluate(w,{}),O=s.get("text-justify").evaluate(w,{}),R="point"===s.get("symbol-placement")?s.get("text-max-width").evaluate(w,{})*g:0;S.horizontal=K.shapeText(T,t,E,R,y,P,O,D,k,g,K.WritingMode.horizontal),K.allowsVerticalWritingMode(A)&&v&&_&&(S.vertical=K.shapeText(T,t,E,R,y,P,O,D,k,g,K.WritingMode.vertical))}var N=void 0;if(w.icon){var L=r[w.icon];L&&(N=K.shapeIcon(i[w.icon],s.get("icon-offset").evaluate(w,{}),s.get("icon-anchor").evaluate(w,{})),e.sdfIcons===undefined?e.sdfIcons=L.sdf:e.sdfIcons!==L.sdf&&K.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),L.pixelRatio!==e.pixelRatio?e.iconsNeedLinear=!0:0!==s.get("icon-rotate").constantOr(1)&&(e.iconsNeedLinear=!0))}(S.horizontal||N)&&M(e,w,S,N,C,l)}o&&e.generateCollisionDebugBuffers()}function M(n,r,i,o,a,s){var e=s.layoutTextSize.evaluate(r,{}),t=s.layoutIconSize.evaluate(r,{}),u=s.textMaxSize.evaluate(r,{});u===undefined&&(u=e);var l=n.layers[0].layout,c=l.get("text-offset").evaluate(r,{}),f=l.get("icon-offset").evaluate(r,{}),p=24,d=e/p,h=n.tilePixelRatio*d,m=n.tilePixelRatio*u/p,g=n.tilePixelRatio*t,y=n.tilePixelRatio*l.get("symbol-spacing"),v=l.get("text-padding")*n.tilePixelRatio,_=l.get("icon-padding")*n.tilePixelRatio,b=l.get("text-max-angle")/180*Math.PI,x="map"===l.get("text-rotation-alignment")&&"point"!==l.get("symbol-placement"),w="map"===l.get("icon-rotation-alignment")&&"point"!==l.get("symbol-placement"),E=l.get("symbol-placement"),C=y/2,S=function(e,t){t.x<0||t.x>=K.EXTENT||t.y<0||t.y>=K.EXTENT||ee(n,t,e,i,o,n.layers[0],n.collisionBoxArray,r.index,r.sourceLayerIndex,n.index,h,v,x,c,g,_,w,f,r,a,s)};if("line"===E)for(var T=0,A=J(r.geometry,0,0,K.EXTENT,K.EXTENT);T<A.length;T+=1)for(var k=A[T],I=0,D=Y(k,y,b,i.vertical||i.horizontal,o,p,m,n.overscaling,K.EXTENT);I<D.length;I+=1){var P=D[I],O=i.horizontal;O&&te(n,O.text,C,P)||S(k,P)}else if("line-center"===E)for(var R=0,N=r.geometry;R<N.length;R+=1){var L=N[R];if(1<L.length){var M=$(L,b,i.vertical||i.horizontal,o,p,m);M&&S(L,M)}}else if("Polygon"===r.type)for(var B=0,z=K.classifyRings(r.geometry,0);B<z.length;B+=1){var F=z[B],j=Q(F,16);S(F[0],new K.Anchor(j.x,j.y,0))}else if("LineString"===r.type)for(var U=0,V=r.geometry;U<V.length;U+=1){var q=V[U];S(q,new K.Anchor(q[0].x,q[0].y,0))}else if("Point"===r.type)for(var H=0,W=r.geometry;H<W.length;H+=1)for(var G=0,Z=W[H];G<Z.length;G+=1){var X=Z[G];S([X],new K.Anchor(X.x,X.y,0))}}function F(e,t,n,r,i,o,a,s,u,l,c,f){var p=m(t,n,r,i,o,c),d=e.textSizeData,h=null;return"source"===d.functionType?(h=[K.SIZE_PACK_FACTOR*r.layout.get("text-size").evaluate(o,{})])[0]>nt&&K.warnOnce(e.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'):"composite"===d.functionType&&((h=[K.SIZE_PACK_FACTOR*f.compositeTextSizes[0].evaluate(o,{}),K.SIZE_PACK_FACTOR*f.compositeTextSizes[1].evaluate(o,{})])[0]>nt||h[1]>nt)&&K.warnOnce(e.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'),e.addSymbols(e.text,p,h,a,i,o,u,t,s.lineStartIndex,s.lineLength),l.push(e.text.placedSymbolArray.length-1),4*p.length}function ee(e,t,n,r,i,o,a,s,u,l,c,f,p,d,h,m,g,y,v,_,b){var x,w,E=e.addToLineVertexArray(t,n),C=0,S=0,T=0,A=Qe(r.horizontal?r.horizontal.text:""),k=[];if(r.horizontal){var I=o.layout.get("text-rotate").evaluate(v,{});x=new Ke(a,n,t,s,u,l,r.horizontal,c,f,p,e.overscaling,I),S+=F(e,t,r.horizontal,o,p,v,d,E,r.vertical?K.WritingMode.horizontal:K.WritingMode.horizontalOnly,k,_,b),r.vertical&&(T+=F(e,t,r.vertical,o,p,v,d,E,K.WritingMode.vertical,k,_,b))}var D=x?x.boxStartIndex:e.collisionBoxArray.length,P=x?x.boxEndIndex:e.collisionBoxArray.length;if(i){var O=z(t,i,o,g,r.horizontal,v),R=o.layout.get("icon-rotate").evaluate(v,{});w=new Ke(a,n,t,s,u,l,i,h,m,!1,e.overscaling,R),C=4*O.length;var N=e.iconSizeData,L=null;"source"===N.functionType?(L=[K.SIZE_PACK_FACTOR*o.layout.get("icon-size").evaluate(v,{})])[0]>nt&&K.warnOnce(e.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'):"composite"===N.functionType&&((L=[K.SIZE_PACK_FACTOR*b.compositeIconSizes[0].evaluate(v,{}),K.SIZE_PACK_FACTOR*b.compositeIconSizes[1].evaluate(v,{})])[0]>nt||L[1]>nt)&&K.warnOnce(e.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'),e.addSymbols(e.icon,O,L,y,g,v,!1,t,E.lineStartIndex,E.lineLength)}var M=w?w.boxStartIndex:e.collisionBoxArray.length,B=w?w.boxEndIndex:e.collisionBoxArray.length;e.glyphOffsetArray.length>=K.SymbolBucket.MAX_GLYPHS&&K.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),e.symbolInstances.emplaceBack(t.x,t.y,0<k.length?k[0]:-1,1<k.length?k[1]:-1,A,D,P,M,B,s,S,T,C,0)}function te(e,t,n,r){var i=e.compareText;if(t in i){for(var o=i[t],a=o.length-1;0<=a;a--)if(r.dist(o[a])<n)return!0}else i[t]=[];return i[t].push(r),!1}function I(e,t){for(var n=new K.EvaluationParameters(t),r=0,i=e;r<i.length;r+=1){i[r].recalculate(n)}}function o(e,i){var t=K.getArrayBuffer(e.request,function(e,t,n,r){e?i(e):t&&i(null,{vectorTile:new K.mvt.VectorTile(new K.Protobuf(t)),rawData:t,cacheControl:n,expires:r})});return function(){t.cancel(),i()}}function a(e){var t,n=0;switch(e.type){case"Polygon":return l(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)n+=l(e.coordinates[t]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(t=0;t<e.geometries.length;t++)n+=a(e.geometries[t]);return n}}function l(e){var t=0;if(e&&0<e.length){t+=Math.abs(c(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(c(e[n]))}return t}function c(e){var t,n,r,i,o,a,s=0,u=e.length;if(2<u){for(a=0;a<u;a++)a===u-2?(r=u-2,i=u-1,o=0):a===u-1?(r=u-1,i=0,o=1):(i=(r=a)+1,o=a+2),t=e[r],n=e[i],s+=(f(e[o][0])-f(t[0]))*Math.sin(f(n[1]));s=s*ft.RADIUS*ft.RADIUS/2}return s}function f(e){return e*Math.PI/180}function n(e,t){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(p(n,t)),e;case"GeometryCollection":return e.geometries=e.geometries.map(p(n,t)),e;case"Feature":return e.geometry=n(e.geometry,t),e;case"Polygon":case"MultiPolygon":return d(e,t);default:return e}}function p(t,n){return function(e){return t(e,n)}}function d(e,t){return"Polygon"===e.type?e.coordinates=h(e.coordinates,t):"MultiPolygon"===e.type&&(e.coordinates=e.coordinates.map(p(h,t))),e}function h(e,t){t=!!t,e[0]=g(e[0],t);for(var n=1;n<e.length;n++)e[n]=g(e[n],!t);return e}function g(e,t){return y(e)===t?e:e.reverse()}function y(e){return 0<=pt.ring(e)}function e(e,t){this.options=t||{},this.features=e,this.length=e.length}function t(e,t){this.id="number"==typeof e.id?e.id:undefined,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}function A(e){var t=new K.pbf;return P(e,t),t.finish()}function D(e,t){t=t||{};var n={};for(var r in e)n[r]=new vt(e[r].features,t),n[r].name=r,n[r].version=t.version,n[r].extent=t.extent;return A({layers:n})}function P(e,t){for(var n in e.layers)t.writeMessage(3,O,e.layers[n])}function O(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,R,r);var i=r.keys;for(n=0;n<i.length;n++)t.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)t.writeMessage(4,U,o[n])}function R(e,t){var n=e.feature;n.id!==undefined&&t.writeVarintField(1,n.id),t.writeMessage(2,N,e),t.writeVarintField(3,n.type),t.writeMessage(4,j,n)}function N(e,t){var n=e.feature,r=e.keys,i=e.values,o=e.keycache,a=e.valuecache;for(var s in n.properties){var u=o[s];void 0===u&&(r.push(s),u=r.length-1,o[s]=u),t.writeVarint(u);var l=n.properties[s],c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var f=c+":"+l,p=a[f];void 0===p&&(i.push(l),p=i.length-1,a[f]=p),t.writeVarint(p)}}function L(e,t){return(t<<3)+(7&e)}function B(e){return e<<1^e>>31}function j(e,t){for(var n=e.loadGeometry(),r=e.type,i=0,o=0,a=n.length,s=0;s<a;s++){var u=n[s],l=1;1===r&&(l=u.length),t.writeVarint(L(1,l));for(var c=3===r?u.length-1:u.length,f=0;f<c;f++){1===f&&1!==r&&t.writeVarint(L(2,c-1));var p=u[f].x-i,d=u[f].y-o;t.writeVarint(B(p)),t.writeVarint(B(d)),i+=p,o+=d}3===r&&t.writeVarint(L(7,1))}}function U(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function V(e,t,n,r,i,o){if(!(i-r<=n)){var a=r+i>>1;q(e,t,a,r,i,o%2),V(e,t,n,r,a-1,o+1),V(e,t,n,a+1,i,o+1)}}function q(e,t,n,r,i,o){for(;r<i;){if(600<i-r){var a=i-r+1,s=n-r+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1);q(e,t,n,Math.max(r,Math.floor(n-s*l/a+c)),Math.min(i,Math.floor(n+(a-s)*l/a+c)),o)}var f=t[2*n+o],p=r,d=i;for(H(e,t,r,n),t[2*i+o]>f&&H(e,t,r,i);p<d;){for(H(e,t,p,d),p++,d--;t[2*p+o]<f;)p++;for(;t[2*d+o]>f;)d--}t[2*r+o]===f?H(e,t,r,d):H(e,t,++d,i),d<=n&&(r=d+1),n<=d&&(i=d-1)}}function H(e,t,n,r){W(e,n,r),W(t,2*n,2*r),W(t,2*n+1,2*r+1)}function W(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function G(e,t,n,r,i,o,a){for(var s,u,l=[0,e.length-1,0],c=[];l.length;){var f=l.pop(),p=l.pop(),d=l.pop();if(p-d<=a)for(var h=d;h<=p;h++)s=t[2*h],u=t[2*h+1],n<=s&&s<=i&&r<=u&&u<=o&&c.push(e[h]);else{var m=Math.floor((d+p)/2);s=t[2*m],u=t[2*m+1],n<=s&&s<=i&&r<=u&&u<=o&&c.push(e[m]);var g=(f+1)%2;(0===f?n<=s:r<=u)&&(l.push(d),l.push(m-1),l.push(g)),(0===f?s<=i:u<=o)&&(l.push(m+1),l.push(p),l.push(g))}}return c}function Z(e,t,n,r,i,o){for(var a=[0,e.length-1,0],s=[],u=i*i;a.length;){var l=a.pop(),c=a.pop(),f=a.pop();if(c-f<=o)for(var p=f;p<=c;p++)X(t[2*p],t[2*p+1],n,r)<=u&&s.push(e[p]);else{var d=Math.floor((f+c)/2),h=t[2*d],m=t[2*d+1];X(h,m,n,r)<=u&&s.push(e[d]);var g=(l+1)%2;(0===l?n-i<=h:r-i<=m)&&(a.push(f),a.push(d-1),a.push(g)),(0===l?h<=n+i:m<=r+i)&&(a.push(d+1),a.push(c),a.push(g))}}return s}function X(e,t,n,r){var i=e-n,o=t-r;return i*i+o*o}function ne(e,t,n,r,i){return{x:e,y:t,zoom:Infinity,id:n,parentId:-1,numPoints:r,properties:i}}function re(e,t){var n=e.geometry.coordinates,r=n[0],i=n[1];return{x:ae(r),y:se(i),zoom:Infinity,index:t,parentId:-1}}function ie(e){return{type:"Feature",id:e.id,properties:oe(e),geometry:{type:"Point",coordinates:[ue(e.x),le(e.y)]}}}function oe(e){var t=e.numPoints,n=1e4<=t?Math.round(t/1e3)+"k":1e3<=t?Math.round(t/100)/10+"k":t;return ce(ce({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function ae(e){return e/360+.5}function se(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:1<n?1:n}function ue(e){return 360*(e-.5)}function le(e){var t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function ce(e,t){for(var n in t)e[n]=t[n];return e}function fe(e){return e.x}function pe(e){return e.y}function de(e,t,n,r){for(var i,o=r,a=n-t>>1,s=n-t,u=e[t],l=e[t+1],c=e[n],f=e[n+1],p=t+3;p<n;p+=3){var d=he(e[p],e[p+1],u,l,c,f);if(o<d)i=p,o=d;else if(d===o){var h=Math.abs(p-a);h<s&&(i=p,s=h)}}r<o&&(3<i-t&&de(e,t,i,r),e[i+2]=o,3<n-i&&de(e,i,n,r))}function he(e,t,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var u=((e-n)*a+(t-r)*s)/(a*a+s*s);1<u?(n=i,r=o):0<u&&(n+=a*u,r+=s*u)}return(a=e-n)*a+(s=t-r)*s}function me(e,t,n,r){var i={id:void 0===e?null:e,type:t,geometry:n,tags:r,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity};return ge(i),i}function ge(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)ye(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)ye(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)ye(e,t[r][i])}function ye(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function ve(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)_e(n,e.features[r],t,r);else"Feature"===e.type?_e(n,e,t):_e(n,{geometry:e},t);return n}function _e(e,t,n,r){if(t.geometry){var i=t.geometry.coordinates,o=t.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],u=t.id;if(n.promoteId?u=t.properties[n.promoteId]:n.generateId&&(u=r||0),"Point"===o)be(i,s);else if("MultiPoint"===o)for(var l=0;l<i.length;l++)be(i[l],s);else if("LineString"===o)xe(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(l=0;l<i.length;l++)s=[],xe(i[l],s,a,!1),e.push(me(u,"LineString",s,t.properties));return}we(i,s,a,!1)}else if("Polygon"===o)we(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(l=0;l<t.geometry.geometries.length;l++)_e(e,{id:u,geometry:t.geometry.geometries[l],properties:t.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(l=0;l<i.length;l++){var c=[];we(i[l],c,a,!0),s.push(c)}}e.push(me(u,o,s,t.properties))}}function be(e,t){t.push(Ee(e[0])),t.push(Ce(e[1])),t.push(0)}function xe(e,t,n,r){for(var i,o,a=0,s=0;s<e.length;s++){var u=Ee(e[s][0]),l=Ce(e[s][1]);t.push(u),t.push(l),t.push(0),0<s&&(a+=r?(i*l-u*o)/2:Math.sqrt(Math.pow(u-i,2)+Math.pow(l-o,2))),i=u,o=l}var c=t.length-3;t[2]=1,de(t,0,c,n),t[c+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function we(e,t,n,r){for(var i=0;i<e.length;i++){var o=[];xe(e[i],o,n,r),t.push(o)}}function Ee(e){return e/360+.5}function Ce(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:1<n?1:n}function Se(e,t,n,r,i,o,a,s){if(r/=t,(n/=t)<=o&&a<r)return e;if(a<n||r<=o)return null;for(var u=[],l=0;l<e.length;l++){var c=e[l],f=c.geometry,p=c.type,d=0===i?c.minX:c.minY,h=0===i?c.maxX:c.maxY;if(n<=d&&h<r)u.push(c);else if(!(h<n||r<=d)){var m=[];if("Point"===p||"MultiPoint"===p)Te(f,m,n,r,i);else if("LineString"===p)Ae(f,m,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===p
)Ie(f,m,n,r,i,!1);else if("Polygon"===p)Ie(f,m,n,r,i,!0);else if("MultiPolygon"===p)for(var g=0;g<f.length;g++){var y=[];Ie(f[g],y,n,r,i,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===p){for(g=0;g<m.length;g++)u.push(me(c.id,p,m[g],c.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===m.length?(p="LineString",m=m[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===m.length?"Point":"MultiPoint"),u.push(me(c.id,p,m,c.tags))}}}return u.length?u:null}function Te(e,t,n,r,i){for(var o=0;o<e.length;o+=3){var a=e[o+i];n<=a&&a<=r&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]))}}function Ae(e,t,n,r,i,o,a){for(var s,u,l=ke(e),c=0===i?Pe:Oe,f=e.start,p=0;p<e.length-3;p+=3){var d=e[p],h=e[p+1],m=e[p+2],g=e[p+3],y=e[p+4],v=0===i?d:h,_=0===i?g:y,b=!1;a&&(s=Math.sqrt(Math.pow(d-g,2)+Math.pow(h-y,2))),v<n?n<_&&(u=c(l,d,h,g,y,n),a&&(l.start=f+s*u)):r<v?_<r&&(u=c(l,d,h,g,y,r),a&&(l.start=f+s*u)):De(l,d,h,m),_<n&&n<=v&&(u=c(l,d,h,g,y,n),b=!0),r<_&&v<=r&&(u=c(l,d,h,g,y,r),b=!0),!o&&b&&(a&&(l.end=f+s*u),t.push(l),l=ke(e)),a&&(f+=s)}var x=e.length-3;d=e[x],h=e[x+1],m=e[x+2],n<=(v=0===i?d:h)&&v<=r&&De(l,d,h,m),x=l.length-3,o&&3<=x&&(l[x]!==l[0]||l[x+1]!==l[1])&&De(l,l[0],l[1],l[2]),l.length&&t.push(l)}function ke(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function Ie(e,t,n,r,i,o){for(var a=0;a<e.length;a++)Ae(e[a],t,n,r,i,o,!1)}function De(e,t,n,r){e.push(t),e.push(n),e.push(r)}function Pe(e,t,n,r,i,o){var a=(o-t)/(r-t);return e.push(o),e.push(n+(i-n)*a),e.push(1),a}function Oe(e,t,n,r,i,o){var a=(o-n)/(i-n);return e.push(t+(r-t)*a),e.push(o),e.push(1),a}function Re(e,t){var n=t.buffer/t.extent,r=e,i=Se(e,1,-1-n,n,0,-1,2,t),o=Se(e,1,1-n,2+n,0,-1,2,t);return(i||o)&&(r=Se(e,1,-n,1+n,0,-1,2,t)||[],i&&(r=Ne(i,1).concat(r)),o&&(r=r.concat(Ne(o,-1)))),r}function Ne(e,t){for(var n=[],r=0;r<e.length;r++){var i,o=e[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=Le(o.geometry,t);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(Le(o.geometry[s],t))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var u=[],l=0;l<o.geometry[s].length;l++)u.push(Le(o.geometry[s][l],t));i.push(u)}n.push(me(o.id,a,i,o.tags))}return n}function Le(e,t){var n=[];n.size=e.size,e.start!==undefined&&(n.start=e.start,n.end=e.end);for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}function Me(e,t){if(e.transformed)return e;var n,r,i,o=1<<e.z,a=e.x,s=e.y;for(n=0;n<e.features.length;n++){var u=e.features[n],l=u.geometry,c=u.type;if(u.geometry=[],1===c)for(r=0;r<l.length;r+=2)u.geometry.push(Be(l[r],l[r+1],t,o,a,s));else for(r=0;r<l.length;r++){var f=[];for(i=0;i<l[r].length;i+=2)f.push(Be(l[r][i],l[r][i+1],t,o,a,s));u.geometry.push(f)}}return e.transformed=!0,e}function Be(e,t,n,r,i,o){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-o))]}function ze(e,t,n,r,i){for(var o=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,Fe(a,e[s],o,i);var u=e[s].minX,l=e[s].minY,c=e[s].maxX,f=e[s].maxY;u<a.minX&&(a.minX=u),l<a.minY&&(a.minY=l),c>a.maxX&&(a.maxX=c),f>a.maxY&&(a.maxY=f)}return a}function Fe(e,t,n,r){var i=t.geometry,o=t.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)je(a,i,e,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)je(a,i[s],e,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var u=0;u<i.length;u++){var l=i[u];for(s=0;s<l.length;s++)je(a,l[s],e,n,!0,0===s)}if(a.length){var c=t.tags||null;if("LineString"===o&&r.lineMetrics){for(var f in c={},t.tags)c[f]=t.tags[f];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var p={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==t.id&&(p.id=t.id),e.features.push(p)}}function je(e,t,n,r,i,o){var a=r*r;if(0<r&&t.size<(i?a:r))n.numPoints+=t.length/3;else{for(var s=[],u=0;u<t.length;u+=3)(0===r||t[u+2]>a)&&(n.numSimplified++,s.push(t[u]),s.push(t[u+1])),n.numPoints++;i&&Ue(s,o),e.push(s)}}function Ue(e,t){for(var n=0,r=0,i=e.length,o=i-2;r<i;o=r,r+=2)n+=(e[r]-e[o])*(e[r+1]+e[o+1]);if(0<n===t)for(r=0,i=e.length;r<i/2;r+=2){var a=e[r],s=e[r+1];e[r]=e[i-2-r],e[r+1]=e[i-1-r],e[i-2-r]=a,e[i-1-r]=s}}function Ve(e,t){return new qe(e,t)}function qe(e,t){var n=(t=this.options=We(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||24<t.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=ve(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=Re(r,t)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function He(e,t,n){return 32*((1<<e)*n+t)+e}function We(e,t){for(var n in t)e[n]=t[n];return e}function Ge(e,t){var n=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return t(null,null);var i=new gt(r.features),o=_t(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),t(null,{vectorTile:i,rawData:o.buffer})}function Ze(e){var t=e.superclusterOptions,n=e.clusterProperties;if(!n||!t)return t;for(var o={},a={},s={accumulated:null,zoom:0},u={properties:null},l=Object.keys(n),r=0,i=l;r<i.length;r+=1){var c=i[r],f=n[c],p=f[0],d=f[1],h=K.createExpression(d),m=K.createExpression("string"==typeof p?[p,["accumulated"],["get",c]]:p);K.assert("success"===h.result),K.assert("success"===m.result),o[c]=h.value,a[c]=m.value}return t.map=function(e){u.properties=e;for(var t={},n=0,r=l;n<r.length;n+=1){var i=r[n];t[i]=o[i].evaluate(s,u)}return t},t.reduce=function(e,t){u.properties=t;for(var n=0,r=l;n<r.length;n+=1){var i=r[n];s.accumulated=e[i],e[i]=a[i].evaluate(s,u)}},t}var Xe=function Xe(e){e&&this.replace(e)};Xe.prototype.replace=function Dt(e){this._layerConfigs={},this._layers={},this.update(e,[])},Xe.prototype.update=function Pt(e,t){for(var n=this,r=0,i=e;r<i.length;r+=1){var o=i[r];this._layerConfigs[o.id]=o;var a=this._layers[o.id]=K.createStyleLayer(o);a._featureFilter=K.featureFilter(a.filter)}for(var s=0,u=t;s<u.length;s+=1){var l=u[s];delete this._layerConfigs[l],delete this._layers[l]}this.familiesBySource={};for(var c=0,f=v(K.values(this._layerConfigs));c<f.length;c+=1){var p=f[c].map(function(e){return n._layers[e.id]}),d=p[0];if("none"!==d.visibility){var h=d.source||"",m=this.familiesBySource[h];m||(m=this.familiesBySource[h]={});var g=d.sourceLayer||"_geojsonTileLayer",y=m[g];y||(y=m[g]=[]),y.push(p)}}};var Ke=function Ke(e,t,n,r,i,o,a,s,u,l,c,f){var p=a.top*s-u,d=a.bottom*s+u,h=a.left*s-u,m=a.right*s+u;if(this.boxStartIndex=e.length,l){var g=d-p,y=m-h;0<g&&(g=Math.max(10*s,g),this._addLineCollisionCircles(e,t,n,n.segment,y,g,r,i,o,c))}else{if(f){var v=new K.Point(h,p),_=new K.Point(m,p),b=new K.Point(h,d),x=new K.Point(m,d),w=f*Math.PI/180;v._rotate(w),_._rotate(w),b._rotate(w),x._rotate(w),h=Math.min(v.x,_.x,b.x,x.x),m=Math.max(v.x,_.x,b.x,x.x),p=Math.min(v.y,_.y,b.y,x.y),d=Math.max(v.y,_.y,b.y,x.y)}e.emplaceBack(n.x,n.y,h,p,m,d,r,i,o,0,0)}this.boxEndIndex=e.length};Ke.prototype._addLineCollisionCircles=function Ot(e,t,n,r,i,o,a,s,u,l){var c=o/2,f=Math.floor(i/c)||1,p=1+.4*Math.log(l)/Math.LN2,d=Math.floor(f*p/2),h=-o/2,m=n,g=r+1,y=h,v=-i/2,_=v-i/4;do{if(--g<0){if(v<y)return;g=0;break}y-=t[g].dist(m),m=t[g]}while(_<y);for(var b=t[g].dist(t[g+1]),x=-d;x<f+d;x++){var w=x*c,E=v+w;if(w<0&&(E+=w),i<w&&(E+=w-i),!(E<y)){for(;y+b<E;){if(y+=b,++g+1>=t.length)return;b=t[g].dist(t[g+1])}var C=E-y,S=t[g],T=t[g+1].sub(S)._unit()._mult(C)._add(S)._round(),A=Math.abs(E-h)<c?0:.8*(E-h);e.emplaceBack(T.x,T.y,-o/2,-o/2,o/2,o/2,a,s,u,o/2,A)}}};var $e=function $e(e,t){if(void 0===e&&(e=[]),void 0===t&&(t=r),this.data=e,this.length=this.data.length,this.compare=t,0<this.length)for(var n=(this.length>>1)-1;0<=n;n--)this._down(n)};$e.prototype.push=function Rt(e){this.data.push(e),this.length++,this._up(this.length-1)},$e.prototype.pop=function Nt(){if(0===this.length)return undefined;var e=this.data[0];return this.length--,0<this.length&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e},$e.prototype.peek=function Lt(){return this.data[0]},$e.prototype._up=function Mt(e){for(var t=this,n=t.data,r=t.compare,i=n[e];0<e;){var o=e-1>>1,a=n[o];if(0<=r(i,a))break;n[e]=a,e=o}n[e]=i},$e.prototype._down=function Bt(e){for(var t=this,n=t.data,r=t.compare,i=this.length>>1,o=n[e];e<i;){var a=1+(e<<1),s=n[a],u=a+1;if(u<this.length&&r(n[u],s)<0&&(s=n[a=u]),0<=r(s,o))break;n[e]=s,e=a}n[e]=o};var Ye=K.createCommonjsModule(function(e){function t(e,t){var n,r,i,o,a,s,u,l;for(n=3&e.length,r=e.length-n,i=t,a=3432918353,s=461845907,l=0;l<r;)u=255&e.charCodeAt(l)|(255&e.charCodeAt(++l))<<8|(255&e.charCodeAt(++l))<<16|(255&e.charCodeAt(++l))<<24,++l,i=27492+(65535&(o=5*(65535&(i=(i^=u=(65535&(u=(u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(u=0,n){case 3:u^=(255&e.charCodeAt(l+2))<<16;case 2:u^=(255&e.charCodeAt(l+1))<<8;case 1:i^=u=(65535&(u=(u=(65535&(u^=255&e.charCodeAt(l)))*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}e.exports=t}),Je=K.createCommonjsModule(function(e){function t(e,t){for(var n,r=e.length,i=t^r,o=0;4<=r;)n=1540483477*(65535&(n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&e.charCodeAt(o+2))<<16;case 2:i^=(255&e.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}"object"!==undefined&&(e.exports=t)}),Qe=Ye,et=Ye,tt=Je;Qe.murmur3=et,Qe.murmur2=tt;var nt=65535,rt=1,it=function it(e){var t={},n=[];for(var r in e){var i=e[r],o=t[r]={};for(var a in i){var s=i[+a];if(s&&0!==s.bitmap.width&&0!==s.bitmap.height){var u={x:0,y:0,w:s.bitmap.width+2*rt,h:s.bitmap.height+2*rt};n.push(u),o[a]={rect:u,metrics:s.metrics}}}}var l=K.potpack(n),c=l.w,f=l.h,p=new K.AlphaImage({width:c||1,height:f||1});for(var d in e){var h=e[d];for(var m in h){var g=h[+m];if(g&&0!==g.bitmap.width&&0!==g.bitmap.height){var y=t[d][m].rect;K.AlphaImage.copy(g.bitmap,p,{x:0,y:0},{x:y.x+rt,y:y.y+rt},g.bitmap)}}}this.image=p,this.positions=t};K.register("GlyphAtlas",it);var ot=function ot(e){this.tileID=new K.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies};ot.prototype.parse=function zt(e,t,n,i){function r(){if(u)return i(u);if(l&&c&&f){var e=new it(l),t=new K.ImageAtlas(c,f);for(var n in p){var r=p[n];r instanceof K.SymbolBucket?(I(r.layers,this.zoom),k(r,l,e.positions,c,t.iconPositions,this.showCollisionBoxes)):r.hasPattern&&(r instanceof K.LineBucket||r instanceof K.FillBucket||r instanceof K.FillExtrusionBucket)&&(I(r.layers,this.zoom),r.addFeatures(d,t.patternPositions))}this.status="done",i(null,{buckets:K.values(p).filter(function(e){return!e.isEmpty()}),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:t,glyphMap:this.returnDependencies?l:null,iconMap:this.returnDependencies?c:null,glyphPositions:this.returnDependencies?e.positions:null})}}var o=this;this.status="parsing",this.data=e,this.collisionBoxArray=new K.CollisionBoxArray;var a=new K.DictionaryCoder(Object.keys(e.layers).sort()),s=new K.FeatureIndex(this.tileID);s.bucketLayerIDs=[];var u,l,c,f,p={},d={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{}},h=t.familiesBySource[this.source];for(var m in h){var g=e.layers[m];if(g){1===g.version&&K.warnOnce('Vector tile source "'+this.source+'" layer "'+m+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var y=a.encode(m),v=[],_=0;_<g.length;_++){var b=g.feature(_);v.push({feature:b,index:_,sourceLayerIndex:y})}for(var x=0,w=h[m];x<w.length;x+=1){var E=w[x],C=E[0];if(K.assert(C.source===this.source),!(C.minzoom&&this.zoom<Math.floor(C.minzoom)))if(!(C.maxzoom&&this.zoom>=C.maxzoom))if("none"!==C.visibility)I(E,this.zoom),(p[C.id]=C.createBucket({index:s.bucketLayerIDs.length,layers:E,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:y,sourceID:this.source})).populate(v,d),s.bucketLayerIDs.push(E.map(function(e){return e.id}))}}}var S=K.mapObject(d.glyphDependencies,function(e){return Object.keys(e).map(Number)});Object.keys(S).length?n.send("getGlyphs",{uid:this.uid,stacks:S},function(e,t){u||(u=e,l=t,r.call(o))}):l={};var T=Object.keys(d.iconDependencies);T.length?n.send("getImages",{icons:T},function(e,t){u||(u=e,c=t,r.call(o))}):c={};var A=Object.keys(d.patternDependencies);A.length?n.send("getImages",{icons:A},function(e,t){u||(u=e,f=t,r.call(o))}):f={},r.call(this)};var at="undefined"!=typeof performance,st={getEntriesByName:function(e){return!!(at&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(e)},mark:function(e){return!!(at&&performance&&performance.mark)&&performance.mark(e)},measure:function(e,t,n){return!!(at&&performance&&performance.measure)&&performance.measure(e,t,n)},clearMarks:function(e){return!!(at&&performance&&performance.clearMarks)&&performance.clearMarks(e)},clearMeasures:function(e){return!!(at&&performance&&performance.clearMeasures)&&performance.clearMeasures(e)}},ut=function ut(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},st.mark(this._marks.start)};ut.prototype.finish=function Ft(){st.mark(this._marks.end);var e=st.getEntriesByName(this._marks.measure);return 0===e.length&&(st.measure(this._marks.measure,this._marks.start,this._marks.end),e=st.getEntriesByName(this._marks.measure),st.clearMarks(this._marks.start),st.clearMarks(this._marks.end),st.clearMeasures(this._marks.measure)),e},st.Performance=ut;var lt=function lt(e,t,n){this.actor=e,this.layerIndex=t,this.loadVectorData=n||o,this.loading={},this.loaded={}};lt.prototype.loadTile=function jt(e,a){var s=this,u=e.uid;this.loading||(this.loading={});var l=!!(e&&e.request&&e.request.collectResourceTiming)&&new st.Performance(e.request),c=this.loading[u]=new ot(e);c.abort=this.loadVectorData(e,function(e,t){if(delete s.loading[u],e||!t)return c.status="done",s.loaded[u]=c,a(e);var n=t.rawData,r={};t.expires&&(r.expires=t.expires),t.cacheControl&&(r.cacheControl=t.cacheControl);var i={};if(l){var o=l.finish();o&&(i.resourceTiming=JSON.parse(JSON.stringify(o)))}c.vectorTile=t.vectorTile,c.parse(t.vectorTile,s.layerIndex,s.actor,function(e,t){if(e||!t)return a(e);a(null,K.extend({rawTileData:n.slice(0)},t,r,i))}),s.loaded=s.loaded||{},s.loaded[u]=c})},lt.prototype.reloadTile=function Ut(e,r){var t=this.loaded,n=e.uid,i=this;if(t&&t[n]){var o=t[n];o.showCollisionBoxes=e.showCollisionBoxes;var a=function(e,t){var n=o.reloadCallback;n&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,i.actor,n)),r(e,t)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.actor,a):a())}},lt.prototype.abortTile=function Vt(e,t){var n=this.loading,r=e.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),t()},lt.prototype.removeTile=function qt(e,t){var n=this.loaded,r=e.uid;n&&n[r]&&delete n[r],t()};var ct=function ct(){this.loaded={}};ct.prototype.loadTile=function jt(e,t){var n=e.uid,r=e.encoding,i=e.rawImageData,o=new K.DEMData(n,i,r);this.loaded=this.loaded||{},t(null,this.loaded[n]=o)},ct.prototype.removeTile=function qt(e){var t=this.loaded,n=e.uid;t&&t[n]&&delete t[n]};var ft={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142},pt={geometry:a,ring:c},dt=n,ht=K.mvt.VectorTileFeature.prototype.toGeoJSON,mt=function mt(e){this._feature=e,this.extent=K.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};mt.prototype.loadGeometry=function Ht(){if(1===this._feature.type){for(var e=[],t=0,n=this._feature.geometry;t<n.length;t+=1){var r=n[t];e.push([new K.Point(r[0],r[1])])}return e}for(var i=[],o=0,a=this._feature.geometry;o<a.length;o+=1){for(var s=[],u=0,l=a[o];u<l.length;u+=1){var c=l[u];s.push(new K.Point(c[0],c[1]))}i.push(s)}return i},mt.prototype.toGeoJSON=function Wt(e,t,n){return ht.call(this,e,t,n)};var gt=function gt(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=K.EXTENT,this.length=e.length,this._features=e};gt.prototype.feature=function Gt(e){return new mt(this._features[e])};var yt=K.vectorTile.VectorTileFeature,vt=e;e.prototype.feature=function(e){return new t(this.features[e],this.options.extent)},t.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var n=e[t],r=[],i=0;i<n.length;i++)r.push(new K.Point$1(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},t.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=Infinity,n=-Infinity,r=Infinity,i=-Infinity,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var u=a[s];t=Math.min(t,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[t,r,n,i]},t.prototype.toGeoJSON=yt.prototype.toGeoJSON;var _t=A,bt=A,xt=D,wt=vt;_t.fromVectorTileJs=bt,_t.fromGeojsonVt=xt,_t.GeoJSONWrapper=wt;var Et=function(e){return e[0]},Ct=function(e){return e[1]},St=function St(e,t,n,r,i){void 0===t&&(t=Et),void 0===n&&(n=Ct),void 0===r&&(r=64),void 0===i&&(i=Float64Array),this.nodeSize=r;for(var o=(this.points=e).length<65536?Uint16Array:Uint32Array,a=this.ids=new o(e.length),s=this.coords=new i(2*e.length),u=0;u<e.length;u++)s[2*(a[u]=u)]=t(e[u]),s[2*u+1]=n(e[u]);V(a,s,r,0,a.length-1,0)};St.prototype.range=function Zt(e,t,n,r){return G(this.ids,this.coords,e,t,n,r,this.nodeSize)};var Tt={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!(St.prototype.within=function Xt(e,t,n){return Z(this.ids,this.coords,e,t,n,this.nodeSize)}),reduce:null,map:function(e){return e}},At=function At(e){this.options=ce(Object.create(Tt),e),this.trees=new Array(this.options.maxZoom+1)};At.prototype.load=function Kt(e){var t=this.options,n=t.log,r=t.minZoom,i=t.maxZoom,o=t.nodeSize;n&&console.time("total time");var a="prepare "+e.length+" points";n&&console.time(a),this.points=e;for(var s=[],u=0;u<e.length;u++)e[u].geometry&&s.push(re(e[u],u));this.trees[i+1]=new St(s,fe,pe,o,Float32Array),n&&console.timeEnd(a);for(var l=i;r<=l;l--){var c=+Date.now();s=this._cluster(s,l),this.trees[l]=new St(s,fe,pe,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",l,s.length,+Date.now()-c)}return n&&console.timeEnd("total time"),this},At.prototype.getClusters=function $t(e,t){var n=((e[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,e[1])),i=180===e[2]?180:((e[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,e[3]));if(360<=e[2]-e[0])n=-180,i=180;else if(i<n){var a=this.getClusters([n,r,180,o],t),s=this.getClusters([-180,r,i,o],t);return a.concat(s)}for(var u=this.trees[this._limitZoom(t)],l=[],c=0,f=u.range(ae(n),se(o),ae(i),se(r));c<f.length;c+=1){var p=f[c],d=u.points[p];l.push(d.numPoints?ie(d):this.points[d.index])}return l},At.prototype.getChildren=function Yt(e){var t=e>>5,n=e%32,r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[t];if(!o)throw new Error(r);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=[],u=0,l=i.within(o.x,o.y,a);u<l.length;u+=1){var c=l[u],f=i.points[c];f.parentId===e&&s.push(f.numPoints?ie(f):this.points[f.index])}if(0===s.length)throw new Error(r);return s},At.prototype.getLeaves=function Jt(e,t,n){t=t||10,n=n||0;var r=[];return this._appendLeaves(r,e,t,n,0),r},At.prototype.getTile=function Qt(e,t,n){var r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),o=this.options,a=o.extent,s=o.radius/a,u=(n-s)/i,l=(n+1+s)/i,c={features:[]};return this._addTileFeatures(r.range((t-s)/i,u,(t+1+s)/i,l),r.points,t,n,i,c),0===t&&this._addTileFeatures(r.range(1-s/i,u,1,l),r.points,i,n,i,c),t===i-1&&this._addTileFeatures(r.range(0,u,s/i,l),r.points,-1,n,i,c),c.features.length?c:null},At.prototype.getClusterExpansionZoom=function en(e){for(var t=e%32-1;t<=this.options.maxZoom;){var n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t},At.prototype._appendLeaves=function tn(e,t,n,r,i){for(var o=0,a=this.getChildren(t);o<a.length;o+=1){var s=a[o],u=s.properties;if(u&&u.cluster?i+u.point_count<=r?i+=u.point_count:i=this._appendLeaves(e,u.cluster_id,n,r,i):i<r?i++:e.push(s),e.length===n)break}return i},At.prototype._addTileFeatures=function nn(e,t,n,r,i,o){for(var a=0,s=e;a<s.length;a+=1){var u=t[s[a]],l={type:1,geometry:[[Math.round(this.options.extent*(u.x*i-n)),Math.round(this.options.extent*(u.y*i-r))]],tags:u.numPoints?oe(u):this.points[u.index].properties},c=u.numPoints?u.id:this.points[u.index].id;c!==undefined&&(l.id=c),o.features.push(l)}},At.prototype._limitZoom=function rn(e){return Math.max(this.options.minZoom,Math.min(e,this.options.maxZoom+1))},At.prototype._cluster=function on(e,t){for(var n=[],r=this.options,i=r.radius,o=r.extent,a=r.reduce,s=i/(o*Math.pow(2,t)),u=0;u<e.length;u++){var l=e[u];if(!(l.zoom<=t)){l.zoom=t;for(var c=this.trees[t+1],f=c.within(l.x,l.y,s),p=l.numPoints||1,d=l.x*p,h=l.y*p,m=a?this._map(l,!0):null,g=(u<<5)+(t+1),y=0,v=f;y<v.length;y+=1){var _=v[y],b=c.points[_];if(!(b.zoom<=t)){b.zoom=t;var x=b.numPoints||1;d+=b.x*x,h+=b.y*x,p+=x,b.parentId=g,a&&a(m,this._map(b))}}1===p?n.push(l):(l.parentId=g,n.push(ne(d/p,h/p,g,p,m)))}}return n},At.prototype._map=function an(e,t){if(e.numPoints)return t?ce({},e.properties):e.properties;var n=this.points[e.index].properties,r=this.options.map(n);return t&&r===n?ce({},r):r},qe.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},qe.prototype.splitTile=function(e,t,n,r,i,o,a){for(var s=[e,t,n,r],u=this.options,l=u.debug;s.length;){r=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var c=1<<t,f=He(t,n,r),p=this.tiles[f];if(!p&&(1<l&&console.time("creation"),p=this.tiles[f]=ze(e,t,n,r,u),this.tileCoords.push({z:t,x:n,y:r}),l)){1<l&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var d="z"+t;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(p.source=e,i){if(t===u.maxZoom||t===i)continue;var h=1<<i-t;if(n!==Math.floor(o/h)||r!==Math.floor(a/h))continue}else if(t===u.indexMaxZoom||p.numPoints<=u.indexMaxPoints)continue;if(p.source=null,0!==e.length){1<l&&console.time("clipping");var m,g,y,v,_,b,x=.5*u.buffer/u.extent,w=.5-x,E=.5+x,C=1+x;m=g=y=v=null,_=Se(e,c,n-x,n+E,0,p.minX,p.maxX,u),b=Se(e,c,n+w,n+C,0,p.minX,p.maxX,u),e=null,_&&(m=Se(_,c,r-x,r+E,1,p.minY,p.maxY,u),g=Se(_,c,r+w,r+C,1,p.minY,p.maxY,u),_=null),b&&(y=Se(b,c,r-x,r+E,1,p.minY,p.maxY,u),v=Se(b,c,r+w,r+C,1,p.minY,p.maxY,u),b=null),1<l&&console.timeEnd("clipping"),s.push(m||[],t+1,2*n,2*r),s.push(g||[],t+1,2*n,2*r+1),s.push(y||[],t+1,2*n+1,2*r),s.push(v||[],t+1,2*n+1,2*r+1)}}},qe.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,o=r.debug;if(e<0||24<e)return null;var a=1<<e,s=He(e,t=(t%a+a)%a,n);if(this.tiles[s])return Me(this.tiles[s],i);1<o&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var u,l=e,c=t,f=n;!u&&0<l;)l--,c=Math.floor(c/2),f=Math.floor(f/2),u=this.tiles[He(l,c,f)];return u&&u.source?(1<o&&console.log("found parent tile z%d-%d-%d",l,c,f),1<o&&console.time("drilling down"),this.splitTile(u.source,l,c,f,e,t,n),1<o&&console.timeEnd("drilling down"),this.tiles[s]?Me(this.tiles[s],i):null):null};var kt=function(i){function e(e,t,n){i.call(this,e,t,Ge),n&&(this.loadGeoJSON=n)}return i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),(e.prototype.constructor=e).prototype.loadData=function n(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=t,this._pendingLoadDataParams=e,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},e.prototype._loadData=function t(){var i=this;if(this._pendingCallback&&this._pendingLoadDataParams){var o=this._pendingCallback,a=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var s=!!(a&&a.request&&a.request.collectResourceTiming)&&new st.Performance(a.request);this.loadGeoJSON(a,function(e,t){if(e||!t)return o(e);if("object"!=typeof t)return o(new Error("Input data is not a valid GeoJSON object."));dt(t,!0);try{i._geoJSONIndex=a.cluster?new At(Ze(a)).load(t.features):Ve(t,a.geojsonVtOptions)}catch(e){return o(e)}i.loaded={};var n={};if(s){var r=s.finish();r&&(n.resourceTiming={},n.resourceTiming[a.source]=JSON.parse(JSON.stringify(r)))}o(null,n)})}else K.assert(!1)},e.prototype.coalesce=function r(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},e.prototype.reloadTile=function o(e,t){var n=this.loaded,r=e.uid;return n&&n[r]?i.prototype.reloadTile.call(this,e,t):this.loadTile(e,t)},e.prototype.loadGeoJSON=function a(e,t){if(e.request)K.getJSON(e.request,t);else{if("string"!=typeof e.data)return t(new Error("Input data is not a valid GeoJSON object."));try{return t(null,JSON.parse(e.data))}catch(n){return t(new Error("Input data is not a valid GeoJSON object."))}}},e.prototype.removeSource=function s(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t()},e.prototype.getClusterExpansionZoom=function u(e,t){t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))},e.prototype.getClusterChildren=function l(e,t){t(null,this._geoJSONIndex.getChildren(e.clusterId))},e.prototype.getClusterLeaves=function c(e,t){t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))},e}(lt),It=function sn(e){var n=this;this.self=e,this.actor=new K.Actor(e,this),this.layerIndexes={},this.workerSourceTypes={vector:lt,geojson:kt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,t){if(n.workerSourceTypes[e])throw new Error('Worker source with name "'+e+'" already registered.');n.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=function(e){if(K.plugin.isLoaded())throw new Error("RTL text plugin already registered.");K.plugin.applyArabicShaping=e.applyArabicShaping,K.plugin.processBidirectionalText=e.processBidirectionalText,K.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return It.prototype.setReferrer=function un(e,t){this.referrer=t},It.prototype.setLayers=function ln(e,t,n){this.getLayerIndex(e).replace(t),n()},It.prototype.updateLayers=function cn(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()},It.prototype.loadTile=function jt(e,t,n){K.assert(t.type),this.getWorkerSource(e,t.type,t.source).loadTile(t,n)},It.prototype.loadDEMTile=function fn(e,t,n){this.getDEMWorkerSource(e,t.source).loadTile(t,n)},It.prototype.reloadTile=function Ut(e,t,n){K.assert(t.type),this.getWorkerSource(e,t.type,t.source).reloadTile(t,n)},It.prototype.abortTile=function Vt(e,t,n){K.assert(t.type),this.getWorkerSource(e,t.type,t.source).abortTile(t,n)},It.prototype.removeTile=function qt(e,t,n){K.assert(t.type),this.getWorkerSource(e,t.type,t.source).removeTile(t,n)},It.prototype.removeDEMTile=function pn(e,t){this.getDEMWorkerSource(e,t.source).removeTile(t)},It.prototype.removeSource=function dn(e,t,n){if(K.assert(t.type),K.assert(t.source),this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var r=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],r.removeSource!==undefined?r.removeSource(t,n):n()}},It.prototype.loadWorkerSource=function hn(e,t,n){try{this.self.importScripts(t.url),n()}catch(r){n(r.toString())}},It.prototype.loadRTLTextPlugin=function mn(e,t,n){try{K.plugin.isLoaded()||(this.self.importScripts(t),n(K.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+t)))}catch(r){n(r.toString())}},It.prototype.getLayerIndex=function gn(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new Xe),t},It.prototype.getWorkerSource=function yn(r,e,t){var i=this;if(this.workerSources[r]||(this.workerSources[r]={}),this.workerSources[r][e]||(this.workerSources[r][e]={}),!this.workerSources[r][e][t]){var n={send:function(e,t,n){i.actor.send(e,t,n,r)}};this.workerSources[r][e][t]=new this.workerSourceTypes[e](n,this.getLayerIndex(r))}return this.workerSources[r][e][t]},It.prototype.getDEMWorkerSource=function vn(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new ct),this.demWorkerSources[e][t]},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new It(self)),It}),e(["./shared.js"],function(Ee){function e(e){if(!Je)return null;for(var t=0;t<e.length;t++)if(e[t]in Je)return e[t];return e[0]}function ne(e,t,f){function n(){if(h)f(h);else if(p&&d){var e=Ee.browser.getImageData(d),t={};for(var n in p){var r=p[n],i=r.width,o=r.height,a=r.x,s=r.y,u=r.sdf,l=r.pixelRatio,c=new Ee.RGBAImage({width:i,height:o});Ee.RGBAImage.copy(e,c,{x:a,y:s},{x:0,y:0},{width:i,height:o}),t[n]={data:c,pixelRatio:l,sdf:u}}f(null,t)}}var p,d,h,r=1<Ee.browser.devicePixelRatio?"@2x":"",i=Ee.getJSON(t(Ee.normalizeSpriteURL(e,r,".json"),Ee.ResourceType.SpriteJSON),function(e,t){i=null,h||(h=e,p=t,n())}),o=Ee.getImage(t(Ee.normalizeSpriteURL(e,r,".png"),Ee.ResourceType.SpriteImage),function(e,t){o=null,h||(h=e,d=t,n())});return{cancel:function a(){i&&(i.cancel(),i=null),o&&(o.cancel(),o=null)}}}function t(e,t,n,r,a){var i=256*t,o=i+255,s=r(Ee.normalizeGlyphsURL(n).replace("{fontstack}",e).replace("{range}",i+"-"+o),Ee.ResourceType.Glyphs);Ee.getArrayBuffer(s,function(e,t){if(e)a(e);else if(t){for(var n={},r=0,i=Ee.parseGlyphPBF(t);r<i.length;r+=1){var o=i[r];n[o.id]=o}a(null,n)}})}function n(e,t,n,r,i,o){this.fontSize=e||24,this.buffer=t===undefined?3:t,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(0<=navigator.userAgent.indexOf("Gecko/")?1.2:1))}function a(e,t,n,r,i,o,a){for(var s=0;s<t;s++){for(var u=0;u<n;u++)r[u]=e[u*t+s];for(l(r,i,o,a,n),u=0;u<n;u++)e[u*t+s]=i[u]}for(u=0;u<n;u++){for(s=0;s<t;s++)r[s]=e[u*t+s];for(l(r,i,o,a,t),s=0;s<t;s++)e[u*t+s]=Math.sqrt(i[s])}}function l(e,t,n,r,i){r[n[0]=0]=-st,r[1]=+st;for(var o=1,a=0;o<i;o++){for(var s=(e[o]+o*o-(e[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);s<=r[a];)a--,s=(e[o]+o*o-(e[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,r[a]=s,r[a+1]=+st}for(a=o=0;o<i;o++){for(;r[a+1]<o;)a++;t[o]=(o-n[a])*(o-n[a])+e[n[a]]}}function f(r,e,i){var t=function(e,t){if(e)return i(e);if(t){var n=Ee.pick(t,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);t.vector_layers&&(
n.vectorLayers=t.vector_layers,n.vectorLayerIds=n.vectorLayers.map(function(e){return e.id})),r.url&&(n.tiles=Ee.canonicalizeTileset(n,r.url)),i(null,n)}};return r.url?Ee.getJSON(e(Ee.normalizeSourceURL(r.url),Ee.ResourceType.Source),t):Ee.browser.frame(function(){return t(null,r)})}function p(e){for(var t=Infinity,n=Infinity,r=-Infinity,i=-Infinity,o=0,a=e;o<a.length;o+=1){var s=a[o];t=Math.min(t,s.x),n=Math.min(n,s.y),r=Math.max(r,s.x),i=Math.max(i,s.y)}var u=r-t,l=i-n,c=Math.max(u,l),f=Math.max(0,Math.floor(-Math.log(c)/Math.LN2)),p=Math.pow(2,f);return new Ee.CanonicalTileID(f,Math.floor((t+r)/2*p),Math.floor((n+i)/2*p))}function h(e,t){var n=Ee.identity([]);return Ee.translate(n,n,[1,1,0]),Ee.scale(n,n,[.5*e.width,.5*e.height,1]),Ee.multiply(n,n,e.calculatePosMatrix(t.toUnwrapped()))}function m(e,t,n){if(e)for(var r=0,i=e;r<i.length;r+=1){var o=t[i[r]];if(o&&o.source===n&&"fill-extrusion"===o.type)return!0}else for(var a in t){var s=t[a];if(s.source===n&&"fill-extrusion"===s.type)return!0}return!1}function re(r,e,t,n,i){var o=m(n&&n.layers,e,r.id),a=i.maxPitchScaleFactor(),s=r.tilesIn(t,a,o);s.sort(y);for(var u=[],l=0,c=s;l<c.length;l+=1){var f=c[l];u.push({wrappedTileID:f.tileID.wrapped().key,queryResults:f.tile.queryRenderedFeatures(e,r._state,f.queryGeometry,f.cameraQueryGeometry,f.scale,n,i,a,h(r.transform,f.tileID))})}var p=g(u);for(var d in p)p[d].forEach(function(e){var t=e.feature,n=r.getFeatureState(t.layer["source-layer"],t.id);t.source=t.layer.source,t.layer["source-layer"]&&(t.sourceLayer=t.layer["source-layer"]),t.state=n});return p}function ie(u,o,e,l,t,n){for(var c={},f=t.queryRenderedSymbols(e),r=[],i=0,a=Object.keys(f).map(Number);i<a.length;i+=1){var s=a[i];r.push(n[s])}r.sort(y);for(var p=function(){var o=h[d],e=o.featureIndex.lookupSymbolFeatures(f[o.bucketInstanceId],o.bucketIndex,o.sourceLayerIndex,l.filter,l.layers,u);for(var t in e){var n=c[t]=c[t]||[],r=e[t];r.sort(function(e,t){var n=o.featureSortOrder;if(n){var r=n.indexOf(e.featureIndex),i=n.indexOf(t.featureIndex);return Ee.assert(0<=r),Ee.assert(0<=i),i-r}return t.featureIndex-e.featureIndex});for(var i=0,a=r;i<a.length;i+=1){var s=a[i];n.push(s)}}},d=0,h=r;d<h.length;d+=1)p();var m=function(i){c[i].forEach(function(e){var t=e.feature,n=u[i],r=o[n.source].getFeatureState(t.layer["source-layer"],t.id);t.source=t.layer.source,t.layer["source-layer"]&&(t.sourceLayer=t.layer["source-layer"]),t.state=r})};for(var g in c)m(g);return c}function oe(t,e){for(var n=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),r=[],i={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(r,e))}return r}function y(e,t){var n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function g(e){for(var t={},n={},r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.queryResults,s=o.wrappedTileID,u=n[s]=n[s]||{};for(var l in a)for(var c=a[l],f=u[l]=u[l]||{},p=t[l]=t[l]||[],d=0,h=c;d<h.length;d+=1){var m=h[d];f[m.featureIndex]||(f[m.featureIndex]=!0,p.push(m))}}return t}function U(e,t){return e%32-t%32||t-e}function V(e){return"raster"===e||"image"===e||"video"===e}function r(){return new Ee.window.Worker(da.workerUrl)}function ae(){return An||(An=new Tn),An}function i(e,t){var n={};for(var r in e)"ref"!==r&&(n[r]=e[r]);return Ee.refProperties.forEach(function(e){e in t&&(n[e]=t[e])}),n}function se(e){e=e.slice();for(var t=Object.create(null),n=0;n<e.length;n++)t[e[n].id]=e[n];for(var r=0;r<e.length;r++)"ref"in e[r]&&(e[r]=i(e[r],t[e[r].ref]));return e}function o(e,t,n){n.push({command:In.addSource,args:[e,t[e]]})}function s(e,t,n){t.push({command:In.removeSource,args:[e]}),n[e]=!0}function u(e,t,n,r){s(e,n,r),o(e,t,n)}function c(e,t,n){var r;for(r in e[n])if(e[n].hasOwnProperty(r)&&"data"!==r&&!Ee.isEqual(e[n][r],t[n][r]))return!1;for(r in t[n])if(t[n].hasOwnProperty(r)&&"data"!==r&&!Ee.isEqual(e[n][r],t[n][r]))return!1;return!0}function d(e,t,n,r){var i;for(i in t=t||{},e=e||{})e.hasOwnProperty(i)&&(t.hasOwnProperty(i)||s(i,n,r));for(i in t)t.hasOwnProperty(i)&&(e.hasOwnProperty(i)?Ee.isEqual(e[i],t[i])||("geojson"===e[i].type&&"geojson"===t[i].type&&c(e,t,i)?n.push({command:In.setGeoJSONSourceData,args:[i,t[i].data]}):u(i,t,n,r)):o(i,t,n))}function v(e,t,n,r,i,o){var a;for(a in t=t||{},e=e||{})e.hasOwnProperty(a)&&(Ee.isEqual(e[a],t[a])||n.push({command:o,args:[r,a,t[a],i]}));for(a in t)t.hasOwnProperty(a)&&!e.hasOwnProperty(a)&&(Ee.isEqual(e[a],t[a])||n.push({command:o,args:[r,a,t[a],i]}))}function _(e){return e.id}function b(e,t){return e[t.id]=t,e}function x(e,t,n){t=t||[];var r,i,o,a,s,u,l,c=(e=e||[]).map(_),f=t.map(_),p=e.reduce(b,{}),d=t.reduce(b,{}),h=c.slice(),m=Object.create(null);for(i=r=0;r<c.length;r++)o=c[r],d.hasOwnProperty(o)?i++:(n.push({command:In.removeLayer,args:[o]}),h.splice(h.indexOf(o,i),1));for(i=r=0;r<f.length;r++)o=f[f.length-1-r],h[h.length-1-r]!==o&&(p.hasOwnProperty(o)?(n.push({command:In.removeLayer,args:[o]}),h.splice(h.lastIndexOf(o,h.length-i),1)):i++,u=h[h.length-r],n.push({command:In.addLayer,args:[d[o],u]}),h.splice(h.length-r,0,o),m[o]=!0);for(r=0;r<f.length;r++)if(a=p[o=f[r]],s=d[o],!m[o]&&!Ee.isEqual(a,s))if(Ee.isEqual(a.source,s.source)&&Ee.isEqual(a["source-layer"],s["source-layer"])&&Ee.isEqual(a.type,s.type)){for(l in v(a.layout,s.layout,n,o,null,In.setLayoutProperty),v(a.paint,s.paint,n,o,null,In.setPaintProperty),Ee.isEqual(a.filter,s.filter)||n.push({command:In.setFilter,args:[o,s.filter]}),Ee.isEqual(a.minzoom,s.minzoom)&&Ee.isEqual(a.maxzoom,s.maxzoom)||n.push({command:In.setLayerZoomRange,args:[o,s.minzoom,s.maxzoom]}),a)a.hasOwnProperty(l)&&"layout"!==l&&"paint"!==l&&"filter"!==l&&"metadata"!==l&&"minzoom"!==l&&"maxzoom"!==l&&(0===l.indexOf("paint.")?v(a[l],s[l],n,o,l.slice(6),In.setPaintProperty):Ee.isEqual(a[l],s[l])||n.push({command:In.setLayerProperty,args:[o,l,s[l]]}));for(l in s)s.hasOwnProperty(l)&&!a.hasOwnProperty(l)&&"layout"!==l&&"paint"!==l&&"filter"!==l&&"metadata"!==l&&"minzoom"!==l&&"maxzoom"!==l&&(0===l.indexOf("paint.")?v(a[l],s[l],n,o,l.slice(6),In.setPaintProperty):Ee.isEqual(a[l],s[l])||n.push({command:In.setLayerProperty,args:[o,l,s[l]]}))}else n.push({command:In.removeLayer,args:[o]}),u=h[h.lastIndexOf(o)+1],n.push({command:In.addLayer,args:[s,u]})}function ue(e,t){if(!e)return[{command:In.setStyle,args:[t]}];var n=[];try{if(!Ee.isEqual(e.version,t.version))return[{command:In.setStyle,args:[t]}];Ee.isEqual(e.center,t.center)||n.push({command:In.setCenter,args:[t.center]}),Ee.isEqual(e.zoom,t.zoom)||n.push({command:In.setZoom,args:[t.zoom]}),Ee.isEqual(e.bearing,t.bearing)||n.push({command:In.setBearing,args:[t.bearing]}),Ee.isEqual(e.pitch,t.pitch)||n.push({command:In.setPitch,args:[t.pitch]}),Ee.isEqual(e.sprite,t.sprite)||n.push({command:In.setSprite,args:[t.sprite]}),Ee.isEqual(e.glyphs,t.glyphs)||n.push({command:In.setGlyphs,args:[t.glyphs]}),Ee.isEqual(e.transition,t.transition)||n.push({command:In.setTransition,args:[t.transition]}),Ee.isEqual(e.light,t.light)||n.push({command:In.setLight,args:[t.light]});var r={},i=[];d(e.sources,t.sources,i,r);var o=[];e.layers&&e.layers.forEach(function(e){r[e.source]?n.push({command:In.removeLayer,args:[e.id]}):o.push(e)}),n=n.concat(i),x(o,t.layers,n)}catch(a){console.warn("Unable to compute style diff:",a),n=[{command:In.setStyle,args:[t]}]}return n}function ee(e,t,n,r,i){var o=Ee.identity(new Float32Array(16));return t?(Ee.identity(o),Ee.scale(o,o,[1/i,1/i,1]),n||Ee.rotateZ(o,o,r.angle)):(Ee.scale(o,o,[r.width/2,-r.height/2,1]),Ee.translate(o,o,[1,-1,0]),Ee.multiply(o,o,e)),o}function te(e,t,n,r,i){var o=Ee.identity(new Float32Array(16));return t?(Ee.multiply(o,o,e),Ee.scale(o,o,[i,i,1]),n||Ee.rotateZ(o,o,-r.angle)):(Ee.scale(o,o,[1,-1,1]),Ee.translate(o,o,[-1,-1,0]),Ee.scale(o,o,[2/r.width,2/r.height,1])),o}function q(e,t){var n=[e.x,e.y,0,1];w(n,n,t);var r=n[3];return{point:new Ee.Point(n[0]/r,n[1]/r),signedDistanceFromCamera:r}}function T(e,t){var n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function le(e,t,n,r,i,o,a,s){var u=r?e.textSizeData:e.iconSizeData,l=Ee.evaluateSizeForZoom(u,n.transform.zoom,Pn.properties[r?"text-size":"icon-size"]),c=[256/n.width*2+1,256/n.height*2+1],f=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;f.clear();for(var p=e.lineVertexArray,d=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,h=n.transform.width/n.transform.height,m=!1,g=0;g<d.length;g++){var y=d.get(g);if(y.hidden||y.writingMode===Ee.WritingMode.vertical&&!m)k(y.numGlyphs,f);else{m=!1;var v=[y.anchorX,y.anchorY,0,1];if(Ee.transformMat4(v,v,t),T(v,c)){var _=.5+v[3]/n.transform.cameraToCenterDistance*.5,b=Ee.evaluateSizeForFeature(u,l,y),x=a?b*_:b/_,w=new Ee.Point(y.anchorX,y.anchorY),E=q(w,i).point,C={},S=A(y,x,!1,s,t,i,o,e.glyphOffsetArray,p,f,E,w,C,h);m=S.useVertical,(S.notEnoughRoom||m||S.needsFlipping&&A(y,x,!0,s,t,i,o,e.glyphOffsetArray,p,f,E,w,C,h).notEnoughRoom)&&k(y.numGlyphs,f)}else k(y.numGlyphs,f)}}r?e.text.dynamicLayoutVertexBuffer.updateData(f):e.icon.dynamicLayoutVertexBuffer.updateData(f)}function H(e,t,n,r,i,o,a,s,u,l,c,f){var p=s.glyphStartIndex+s.numGlyphs,d=s.lineStartIndex,h=s.lineStartIndex+s.lineLength,m=t.getoffsetX(s.glyphStartIndex),g=t.getoffsetX(p-1),y=z(e*m,n,r,i,o,a,s.segment,d,h,u,l,c,f);if(!y)return null;var v=z(e*g,n,r,i,o,a,s.segment,d,h,u,l,c,f);return v?{first:y,last:v}:null}function M(e,t,n,r){if(e===Ee.WritingMode.horizontal){var i=Math.abs(n.y-t.y);if(Math.abs(n.x-t.x)*r<i)return{useVertical:!0}}return(e===Ee.WritingMode.vertical?t.y<n.y:t.x>n.x)?{needsFlipping:!0}:null}function A(e,t,n,r,i,o,a,s,u,l,c,f,p,d){var h,m=t/24,g=e.lineOffsetX*t,y=e.lineOffsetY*t;if(1<e.numGlyphs){var v=e.glyphStartIndex+e.numGlyphs,_=e.lineStartIndex,b=e.lineStartIndex+e.lineLength,x=H(m,s,g,y,n,c,f,e,u,o,p,!1);if(!x)return{notEnoughRoom:!0};var w=q(x.first.point,a).point,E=q(x.last.point,a).point;if(r&&!n){var C=M(e.writingMode,w,E,d);if(C)return C}h=[x.first];for(var S=e.glyphStartIndex+1;S<v-1;S++)h.push(z(m*s.getoffsetX(S),g,y,n,c,f,e.segment,_,b,u,o,p,!1));h.push(x.last)}else{if(r&&!n){var T=q(f,i).point,A=e.lineStartIndex+e.segment+1,k=new Ee.Point(u.getx(A),u.gety(A)),I=q(k,i),D=0<I.signedDistanceFromCamera?I.point:B(f,k,T,1,i),P=M(e.writingMode,T,D,d);if(P)return P}var O=z(m*s.getoffsetX(e.glyphStartIndex),g,y,n,c,f,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,u,o,p,!1);if(!O)return{notEnoughRoom:!0};h=[O]}for(var R=0,N=h;R<N.length;R+=1){var L=N[R];Ee.addDynamicAttributes(l,L.point,L.angle)}return{}}function B(e,t,n,r,i){var o=q(e.add(e.sub(t)._unit()),i).point,a=n.sub(o);return n.add(a._mult(r/a.mag()))}function z(e,t,n,r,i,o,a,s,u,l,c,f,p){var d=r?e-t:e+t,h=0<d?1:-1,m=0;r&&(h*=-1,m=Math.PI),h<0&&(m+=Math.PI);for(var g=0<h?s+a:s+a+1,y=g,v=i,_=i,b=0,x=0,w=Math.abs(d);b+x<=w;){if((g+=h)<s||u<=g)return null;if(_=v,(v=f[g])===undefined){var E=new Ee.Point(l.getx(g),l.gety(g)),C=q(E,c);if(0<C.signedDistanceFromCamera)v=f[g]=C.point;else{var S=g-h;v=B(0===b?o:new Ee.Point(l.getx(S),l.gety(S)),E,_,w-b+1,c)}}b+=x,x=_.dist(v)}var T=(w-b)/x,A=v.sub(_),k=A.mult(T)._add(_);return k._add(A._unit()._perp()._mult(n*h)),{point:k,angle:m+Math.atan2(v.y-_.y,v.x-_.x),tileDistance:p?{prevTileDistance:g-h===y?0:l.gettileUnitDistanceFromAnchor(g-h),lastSegmentViewportDistance:w-b}:null}}function k(e,t){for(var n=0;n<e;n++){var r=t.length;t.resize(r+4),t.float32.set(On,3*r)}}function w(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e[3]=n[3]*r+n[7]*i+n[15],e}function W(e,t,n){e[t+4]=n?1:0}function ce(e,t,n){return t*(Ee.EXTENT/(e.tileSize*Math.pow(2,n-e.tileID.overscaledZ)))}function E(e,t,n){e.emplaceBack(t?1:0,n?1:0),e.emplaceBack(t?1:0,n?1:0),e.emplaceBack(t?1:0,n?1:0),e.emplaceBack(t?1:0,n?1:0)}function C(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*Un+t*Vn+n*qn+t*Hn+n*Wn+t*Gn+n*Zn+t}function S(e,t){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,s={};return{fragmentSource:e=e.replace(n,function(e,t,n,r,i){return s[i]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_"+i+"\nvarying "+n+" "+r+" "+i+";\n#else\nuniform "+n+" "+r+" u_"+i+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+i+"\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n"}),vertexSource:t=t.replace(n,function(e,t,n,r,i){var o="float"===r?"vec2":"vec4",a=i.match(/color/)?"color":o;return s[i]?"define"===t?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float a_"+i+"_t;\nattribute "+n+" "+o+" a_"+i+";\nvarying "+n+" "+r+" "+i+";\n#else\nuniform "+n+" "+r+" u_"+i+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = a_"+i+";\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = unpack_mix_"+a+"(a_"+i+", a_"+i+"_t);\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n":"define"===t?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float a_"+i+"_t;\nattribute "+n+" "+o+" a_"+i+";\n#else\nuniform "+n+" "+r+" u_"+i+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+n+" "+r+" "+i+" = a_"+i+";\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+n+" "+r+" "+i+" = unpack_mix_"+a+"(a_"+i+", a_"+i+"_t);\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n"})}}function I(e,t,n){var r=1/ce(n,1,t.transform.tileZoom),i=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,t.transform.tileZoom)/i,a=o*(n.tileID.canonical.x+n.tileID.wrap*i),s=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[Ee.browser.devicePixelRatio,r,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}function D(e,t,n,r){var i=n.imageManager.getPattern(e.from),o=n.imageManager.getPattern(e.to);Ee.assert(i&&o);var a=n.imageManager.getPixelSize(),s=a.width,u=a.height,l=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,n.transform.tileZoom)/l,f=c*(r.tileID.canonical.x+r.tileID.wrap*l),p=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,u],u_mix:t.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/ce(r,1,n.transform.tileZoom),u_pixel_coord_upper:[f>>16,p>>16],u_pixel_coord_lower:[65535&f,65535&p]}}function P(e,t){var n=Math.pow(2,t.canonical.z),r=t.canonical.y;return[new Ee.MercatorCoordinate(0,r/n).toLngLat().lat,new Ee.MercatorCoordinate(0,(r+1)/n).toLngLat().lat]}function O(e,t){return 1/ce(e,1,t.tileZoom)}function R(e,t,n){return e.translatePosMatrix(t.tileID.posMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}function N(e){e*=Math.PI/180;var t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}function L(e){return 0<e?1/(1-e):1+e}function F(e){return 0<e?1-1/(1.001-e):-e}function j(e,t){for(var n=e.sort(function(e,t){return e.tileID.isLessThan(t.tileID)?-1:t.tileID.isLessThan(e.tileID)?1:0}),r=0;r<n.length;r++){var i={},o=n[r],a=n.slice(r+1);G(o.tileID.wrapped(),o.tileID,a,new Ee.OverscaledTileID(0,o.tileID.wrap+1,0,0,0),i),o.setMask(i,t)}}function G(e,t,n,r,i){for(var o=0;o<n.length;o++){var a=n[o];if(r.isLessThan(a.tileID))break;if(t.key===a.tileID.key)return;if(a.tileID.isChildOf(t)){for(var s=t.children(Infinity),u=0;u<s.length;u++){G(e,s[u],n.slice(o),r,i)}return}}var l=t.overscaledZ-e.overscaledZ,c=new Ee.CanonicalTileID(l,t.canonical.x-(e.canonical.x<<l),t.canonical.y-(e.canonical.y<<l));i[c.key]=i[c.key]||c}function Z(e,t,n,r,i){for(var o=e.context,a=o.gl,s=i?e.useProgram("collisionCircle"):e.useProgram("collisionBox"),u=0;u<r.length;u++){var l=r[u],c=t.getTile(l),f=c.getBucket(n);if(f){var p=i?f.collisionCircle:f.collisionBox;p&&s.draw(o,i?a.TRIANGLES:a.LINES,dn.disabled,gn.disabled,e.colorModeForRenderPass(),En.disabled,ji(l.posMatrix,e.transform,c),n.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,null,e.transform.zoom,null,null,p.collisionVertexBuffer)}}}function X(e,t,n,r){Z(e,t,n,r,!1),Z(e,t,n,r,!0)}function K(e,t,n,r){if("translucent"===e.renderPass){var i=gn.disabled,o=e.colorModeForRenderPass();0!==n.paint.get("icon-opacity").constantOr(1)&&$(e,t,n,r,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),i,o),0!==n.paint.get("text-opacity").constantOr(1)&&$(e,t,n,r,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),i,o),t.map.showCollisionBoxes&&X(e,t,n,r)}}function $(e,t,n,r,i,o,a,s,u,l,c,f){for(var p,d,h=e.context,m=h.gl,g=e.transform,y="map"===s,v="map"===u,_=y&&"point"!==n.layout.get("symbol-placement"),b=y&&!v&&!_,x=n.layout.get("symbol-sort-key").constantOr(1)!==undefined,w=e.depthModeForSublayer(0,dn.ReadOnly),E=[],C=0,S=r;C<S.length;C+=1){var T=S[C],A=t.getTile(T),k=A.getBucket(n);if(k){var I=i?k.text:k.icon;if(I&&I.segments.get().length){var D=I.programConfigurations.get(n.id),P=i||k.sdfIcons,O=i?k.textSizeData:k.iconSizeData;p||(p=e.useProgram(P?"symbolSDF":"symbolIcon",D),d=Ee.evaluateSizeForZoom(O,g.zoom,io.properties[i?"text-size":"icon-size"])),h.activeTexture.set(m.TEXTURE0);var R=void 0,N=void 0,L=void 0;if(i)N=A.glyphAtlasTexture,L=m.LINEAR,R=A.glyphAtlasTexture.size;else{var M=1!==n.layout.get("icon-size").constantOr(0)||k.iconsNeedLinear,B=v||0!==g.pitch;N=A.imageAtlasTexture,L=P||e.options.rotating||e.options.zooming||M||B?m.LINEAR:m.NEAREST,R=A.imageAtlasTexture.size}var z=ce(A,1,e.transform.zoom),F=ee(T.posMatrix,v,y,e.transform,z),j=te(T.posMatrix,v,y,e.transform,z);_&&le(k,T.posMatrix,e,i,F,j,v,l);var U=e.translatePosMatrix(T.posMatrix,A,o,a),V=_?ro:F,q=e.translatePosMatrix(j,A,o,a,!0),H=P&&0!==n.paint.get(i?"text-halo-width":"icon-halo-width").constantOr(1),W={program:p,buffers:I,uniformValues:P?Qi(O.functionType,d,b,v,e,U,V,q,i,R,!0):Ji(O.functionType,d,b,v,e,U,V,q,i,R),atlasTexture:N,atlasInterpolation:L,isSDF:P,hasHalo:H};if(x)for(var G=0,Z=I.segments.get();G<Z.length;G+=1){var X=Z[G];E.push({segments:new Ee.SegmentVector([X]),sortKey:X.sortKey,state:W})}else E.push({segments:I.segments,sortKey:0,state:W})}}}x&&E.sort(function(e,t){return e.sortKey-t.sortKey});for(var K=0,$=E;K<$.length;K+=1){var Y=$[K],J=Y.state;if(J.atlasTexture.bind(J.atlasInterpolation,m.CLAMP_TO_EDGE),J.isSDF){var Q=J.uniformValues;J.hasHalo&&(Q.u_is_halo=1,fe(J.buffers,Y.segments,n,e,J.program,w,c,f,Q)),Q.u_is_halo=0}fe(J.buffers,Y.segments,n,e,J.program,w,c,f,J.uniformValues)}}function fe(e,t,n,r,i,o,a,s,u){var l=r.context,c=l.gl;i.draw(l,c.TRIANGLES,o,a,s,En.disabled,u,n.id,e.layoutVertexBuffer,e.indexBuffer,t,n.paint,r.transform.zoom,e.programConfigurations.get(n.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function Y(e,t,n,r){if("translucent"===e.renderPass){var i=n.paint.get("circle-opacity"),o=n.paint.get("circle-stroke-width"),a=n.paint.get("circle-stroke-opacity");if(0!==i.constantOr(1)||0!==o.constantOr(1)&&0!==a.constantOr(1))for(var s=e.context,u=s.gl,l=e.depthModeForSublayer(0,dn.ReadOnly),c=gn.disabled,f=e.colorModeForRenderPass(),p=0;p<r.length;p++){var d=r[p],h=t.getTile(d),m=h.getBucket(n);if(m){var g=m.programConfigurations.get(n.id);e.useProgram("circle",g).draw(s,u.TRIANGLES,l,c,f,En.disabled,zi(e,d,h,n),n.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,n.paint,e.transform.zoom,g)}}}}function J(e,t,n,r){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var i=e.context,o=i.gl,a=e.depthModeForSublayer(0,dn.ReadOnly),s=gn.disabled,u=new bn([o.ONE,o.ONE],Ee.Color.transparent,[!0,!0,!0,!0]);Q(i,e,n),i.clear({color:Ee.Color.transparent});for(var l=0;l<r.length;l++){var c=r[l];if(!t.hasRenderableParent(c)){var f=t.getTile(c),p=f.getBucket(n);if(p){var d=p.programConfigurations.get(n.id),h=e.useProgram("heatmap",d),m=e.transform.zoom;h.draw(i,o.TRIANGLES,a,s,u,En.disabled,qi(c.posMatrix,f,m,n.paint.get("heatmap-intensity")),n.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,n.paint,e.transform.zoom,d)}}}i.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),de(e,n))}function Q(e,t,n){var r=e.gl;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),e.bindFramebuffer.set(i.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),pe(e,t,o,i=n.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4))}}function pe(e,t,n,r){var i=e.gl;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t.width/4,t.height/4,0,i.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,null),r.colorAttachment.set(n),e.extTextureHalfFloat&&i.checkFramebufferStatus(i.FRAMEBUFFER)!==i.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,r.colorAttachment.setDirty(),pe(e,t,n,r))}function de(e,t){var n=e.context,r=n.gl,i=t.heatmapFbo;if(i){n.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),n.activeTexture.set(r.TEXTURE1);var o=t.colorRampTexture;o||(o=t.colorRampTexture=new Ee.Texture(n,t.colorRamp,r.RGBA)),o.bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(n,r.TRIANGLES,dn.disabled,gn.disabled,e.colorModeForRenderPass(),En.disabled,Hi(e,t,0,1),t.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,t.paint,e.transform.zoom)}}function he(e,t,n,r){if("translucent"===e.renderPass){var i=n.paint.get("line-opacity"),o=n.paint.get("line-width");if(0!==i.constantOr(1)&&0!==o.constantOr(1)){var a=e.depthModeForSublayer(0,dn.ReadOnly),s=e.colorModeForRenderPass(),u=n.paint.get("line-dasharray"),l=n.paint.get("line-pattern"),c=l.constantOr(1),f=n.paint.get("line-gradient"),p=n.getCrossfadeParameters(),d=u?"lineSDF":c?"linePattern":f?"lineGradient":"line",h=e.context,m=h.gl,g=!0;if(f){h.activeTexture.set(m.TEXTURE0);var y=n.gradientTexture;if(!n.gradient)return;y||(y=n.gradientTexture=new Ee.Texture(h,n.gradient,m.RGBA)),y.bind(m.LINEAR,m.CLAMP_TO_EDGE)}for(var v=0,_=r;v<_.length;v+=1){var b=_[v],x=t.getTile(b);if(!c||x.patternsLoaded()){var w=x.getBucket(n);if(w){var E=w.programConfigurations.get(n.id),C=e.context.program.get(),S=e.useProgram(d,E),T=g||S.program!==C,A=l.constantOr(null);if(A&&x.imageAtlas){var k=x.imageAtlas.patternPositions[A.to],I=x.imageAtlas.patternPositions[A.from];k&&I&&E.setConstantPatternPositions(k,I)}var D=u?$i(e,x,n,u,p):c?Ki(e,x,n,p):f?Xi(e,x,n):Zi(e,x,n);u&&(T||e.lineAtlas.dirty)?(h.activeTexture.set(m.TEXTURE0),e.lineAtlas.bind(h)):c&&(h.activeTexture.set(m.TEXTURE0),x.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),E.updatePatternPaintBuffers(p)),S.draw(h,m.TRIANGLES,a,e.stencilModeForClipping(b),s,En.disabled,D,n.id,w.layoutVertexBuffer,w.indexBuffer,w.segments,n.paint,e.transform.zoom,E),g=!1}}}}}}function me(e,t,n,r){var i=n.paint.get("fill-color"),o=n.paint.get("fill-opacity");if(0!==o.constantOr(1)){var a=e.colorModeForRenderPass(),s=n.paint.get("fill-pattern").constantOr(1)||1!==i.constantOr(Ee.Color.transparent).a||1!==o.constantOr(0)?"translucent":"opaque";if(e.renderPass===s)ge(e,t,n,r,e.depthModeForSublayer(1,"opaque"===e.renderPass?dn.ReadWrite:dn.ReadOnly),a,!1);if("translucent"===e.renderPass&&n.paint.get("fill-antialias"))ge(e,t,n,r,e.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,dn.ReadOnly),a,!0)}}function ge(e,t,n,r,i,o,a){var s,u,l,c,f,p=e.context.gl,d=n.paint.get("fill-pattern"),h=d&&d.constantOr(1),m=n.getCrossfadeParameters();a?(u=h&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=p.LINES):(u=h?"fillPattern":"fill",s=p.TRIANGLES);for(var g=0,y=r;g<y.length;g+=1){var v=y[g],_=t.getTile(v);if(!h||_.patternsLoaded()){var b=_.getBucket(n);if(b){var x=b.programConfigurations.get(n.id),w=e.useProgram(u,x);h&&(e.context.activeTexture.set(p.TEXTURE0),_.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),x.updatePatternPaintBuffers(m));var E=d.constantOr(null);if(E&&_.imageAtlas){var C=_.imageAtlas.patternPositions[E.to],S=_.imageAtlas.patternPositions[E.from];C&&S&&x.setConstantPatternPositions(C,S)}var T=e.translatePosMatrix(v.posMatrix,_,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(a){c=b.indexBuffer2,f=b.segments2;var A=[p.drawingBufferWidth,p.drawingBufferHeight];l="fillOutlinePattern"===u&&h?Bi(T,e,m,_,A):Mi(T,A)}else c=b.indexBuffer,f=b.segments,l=h?Li(T,e,m,_):Ni(T);w.draw(e.context,s,i,e.stencilModeForClipping(v),o,En.disabled,l,n.id,b.layoutVertexBuffer,c,f,n.paint,e.transform.zoom,x)}}}}function ye(e,t){var n=e.context,r=n.gl,i=t.viewportFrame;if(e.depthRboNeedsClear&&e.setupOffscreenDepthRenderbuffer(),!i){var o=new Ee.Texture(n,{width:e.width,height:e.height,data:null},r.RGBA);o.bind(r.LINEAR,r.CLAMP_TO_EDGE),(i=t.viewportFrame=n.createFramebuffer(e.width,e.height)).colorAttachment.set(o.texture)}n.bindFramebuffer.set(i.framebuffer),i.depthAttachment.set(e.depthRbo),e.depthRboNeedsClear&&(n.clear({depth:1}),e.depthRboNeedsClear=!1),n.clear({color:Ee.Color.transparent}),n.setStencilMode(gn.disabled),n.setDepthMode(new dn(r.LEQUAL,dn.ReadWrite,[0,1])),n.setColorMode(e.colorModeForRenderPass())}function ve(e,t,n){var r=t.viewportFrame;if(r){var i=e.context,o=i.gl;i.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,r.colorAttachment.get()),e.useProgram("extrusionTexture").draw(i,o.TRIANGLES,dn.disabled,gn.disabled,e.colorModeForRenderPass(),En.disabled,Ri(e,n,0),t.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,t.paint,e.transform.zoom)}}function _e(e,t,n,r){0!==n.paint.get("fill-extrusion-opacity")&&("offscreen"===e.renderPass?(ye(e,n),be(e,t,n,r,new dn(e.context.gl.LEQUAL,dn.ReadWrite,[0,1]),gn.disabled,e.colorModeForRenderPass())):"translucent"===e.renderPass&&ve(e,n,n.paint.get("fill-extrusion-opacity")))}function be(e,t,n,r,i,o,a){for(var s=e.context,u=s.gl,l=n.paint.get("fill-extrusion-pattern"),c=l.constantOr(1),f=n.getCrossfadeParameters(),p=0,d=r;p<d.length;p+=1){var h=d[p],m=t.getTile(h),g=m.getBucket(n);if(g){var y=g.programConfigurations.get(n.id),v=e.useProgram(c?"fillExtrusionPattern":"fillExtrusion",y);c&&(e.context.activeTexture.set(u.TEXTURE0),m.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),y.updatePatternPaintBuffers(f));var _=l.constantOr(null);if(_&&m.imageAtlas){var b=m.imageAtlas.patternPositions[_.to],x=m.imageAtlas.patternPositions[_.from];b&&x&&y.setConstantPatternPositions(b,x)}var w=e.translatePosMatrix(h.posMatrix,m,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),E=n.paint.get("fill-extrusion-vertical-gradient"),C=c?Oi(w,e,E,h,f,m):Pi(w,e,E);v.draw(s,s.gl.TRIANGLES,i,o,a,En.backCCW,C,n.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,n.paint,e.transform.zoom,y)}}}function xe(e,t,n,r){if("offscreen"===e.renderPass||"translucent"===e.renderPass){for(var i=e.context,o=t.getSource().maxzoom,a=e.depthModeForSublayer(0,dn.ReadOnly),s=gn.disabled,u=e.colorModeForRenderPass(),l=0,c=r;l<c.length;l+=1){var f=c[l],p=t.getTile(f);p.needsHillshadePrepare&&"offscreen"===e.renderPass?Ce(e,p,n,o,a,s,u):"translucent"===e.renderPass&&we(e,p,n,a,s,u)}i.viewport.set([0,0,e.width,e.height])}}function we(e,t,n,r,i,o){var a=e.context,s=a.gl,u=t.fbo;if(u){var l=e.useProgram("hillshade");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,u.colorAttachment.get());var c=Wi(e,t,n);t.maskedBoundsBuffer&&t.maskedIndexBuffer&&t.segments?l.draw(a,s.TRIANGLES,r,i,o,En.disabled,c,n.id,t.maskedBoundsBuffer,t.maskedIndexBuffer,t.segments):l.draw(a,s.TRIANGLES,r,i,o,En.disabled,c,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}function Ce(e,t,n,r,i,o,a){var s=e.context,u=s.gl;if(t.dem&&t.dem.data){var l=t.dem.dim,c=t.dem.stride,f=t.dem.getPixels();if(s.activeTexture.set(u.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),t.demTexture=t.demTexture||e.getTileTexture(c),t.demTexture){var p=t.demTexture;p.update(f,{premultiply:!1}),p.bind(u.NEAREST,u.CLAMP_TO_EDGE)}else t.demTexture=new Ee.Texture(s,f,u.RGBA,{premultiply:!1}),t.demTexture.bind(u.NEAREST,u.CLAMP_TO_EDGE);s.activeTexture.set(u.TEXTURE0);var d=t.fbo;if(!d){var h=new Ee.Texture(s,{width:l,height:l,data:null},u.RGBA);h.bind(u.LINEAR,u.CLAMP_TO_EDGE),(d=t.fbo=s.createFramebuffer(l,l)).colorAttachment.set(h.texture)}s.bindFramebuffer.set(d.framebuffer),s.viewport.set([0,0,l,l]),e.useProgram("hillshadePrepare").draw(s,u.TRIANGLES,i,o,a,En.disabled,Gi(t,r),n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),t.needsHillshadePrepare=!1}}function Se(e,t,n,r){if("translucent"===e.renderPass&&0!==n.paint.get("raster-opacity"))for(var i=e.context,o=i.gl,a=t.getSource(),s=e.useProgram("raster"),u=gn.disabled,l=e.colorModeForRenderPass(),c=r.length&&r[0].overscaledZ,f=!e.options.moving,p=0,d=r;p<d.length;p+=1){var h=d[p],m=e.depthModeForSublayer(h.overscaledZ-c,1===n.paint.get("raster-opacity")?dn.ReadWrite:dn.ReadOnly,o.LESS),g=t.getTile(h),y=e.transform.calculatePosMatrix(h.toUnwrapped(),f);g.registerFadeDuration(n.paint.get("raster-fade-duration"));var v=t.findLoadedParent(h,0),_=Te(g,v,t,n,e.transform),b=void 0,x=void 0,w="nearest"===n.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;i.activeTexture.set(o.TEXTURE0),g.texture.bind(w,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(o.TEXTURE1),v?(v.texture.bind(w,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),b=Math.pow(2,v.tileID.overscaledZ-g.tileID.overscaledZ),x=[g.tileID.canonical.x*b%1,g.tileID.canonical.y*b%1]):g.texture.bind(w,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var E=Yi(y,x||[0,0],b||1,_,n);a instanceof bt?s.draw(i,o.TRIANGLES,m,u,l,En.disabled,E,n.id,a.boundsBuffer,e.quadTriangleIndexBuffer,a.boundsSegments):g.maskedBoundsBuffer&&g.maskedIndexBuffer&&g.segments?s.draw(i,o.TRIANGLES,m,u,l,En.disabled,E,n.id,g.maskedBoundsBuffer,g.maskedIndexBuffer,g.segments,n.paint,e.transform.zoom):s.draw(i,o.TRIANGLES,m,u,l,En.disabled,E,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}function Te(e,t,n,r,i){var o=r.paint.get("raster-fade-duration");if(0<o){var a=Ee.browser.now(),s=(a-e.timeAdded)/o,u=t?(a-t.timeAdded)/o:-1,l=n.getSource(),c=i.coveringZoomLevel({tileSize:l.tileSize,roundZoom:l.roundZoom}),f=!t||Math.abs(t.tileID.overscaledZ-c)>Math.abs(e.tileID.overscaledZ-c),p=f&&e.refreshedUponExpiration?1:Ee.clamp(f?s:1-u,0,1);return e.refreshedUponExpiration&&1<=s&&(e.refreshedUponExpiration=!1),t?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}function Ae(e,t,n){var r=n.paint.get("background-color"),i=n.paint.get("background-opacity");if(0!==i){var o=e.context,a=o.gl,s=e.transform,u=s.tileSize,l=n.paint.get("background-pattern");if(!e.isPatternMissing(l)){var c=l||1!==r.a||1!==i?"translucent":"opaque";if(e.renderPass===c){var f=gn.disabled,p=e.depthModeForSublayer(0,"opaque"===c?dn.ReadWrite:dn.ReadOnly),d=e.colorModeForRenderPass(),h=e.useProgram(l?"backgroundPattern":"background"),m=s.coveringTiles({tileSize:u});l&&(o.activeTexture.set(a.TEXTURE0),e.imageManager.bind(e.context));for(var g=n.getCrossfadeParameters(),y=0,v=m;y<v.length;y+=1){var _=v[y],b=e.transform.calculatePosMatrix(_.toUnwrapped()),x=l?to(b,i,e,l,{tileID:_,tileSize:u},g):eo(b,i,r);h.draw(o,a.TRIANGLES,p,f,d,En.disabled,x,n.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}}}}}function ke(e,t,n){for(var r=0;r<n.length;r++)Ie(e,t,n[r])}function Ie(e,t,n){var r=e.context,i=r.gl,o=n.posMatrix,a=e.useProgram("debug"),s=dn.disabled,u=gn.disabled,l=e.colorModeForRenderPass(),c="$debug";a.draw(r,i.LINE_STRIP,s,u,l,En.disabled,Ui(o,Ee.Color.red),c,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);for(var f=De(n.toString(),50,200,5),p=new Ee.StructArrayLayout2i4,d=new Ee.StructArrayLayout2ui4,h=0;h<f.length;h+=2)p.emplaceBack(f[h],f[h+1]),d.emplaceBack(h,h+1);for(var m=r.createVertexBuffer(p,or.members),g=r.createIndexBuffer(d),y=Ee.SegmentVector.simpleSegment(0,0,p.length/2,p.length/2),v=t.getTile(n).tileSize,_=Ee.EXTENT/(Math.pow(2,e.transform.zoom-n.overscaledZ)*v),b=[[-1,-1],[-1,1],[1,-1],[1,1]],x=0;x<b.length;x++){var w=b[x];a.draw(r,i.LINES,s,u,l,En.disabled,Ui(Ee.translate([],o,[_*w[0],_*w[1],0]),Ee.Color.white),c,m,g,y)}a.draw(r,i.LINES,s,u,l,En.disabled,Ui(o,Ee.Color.black),c,m,g,y)}function De(e,t,n,r){r=r||1;var i,o,a,s,u,l,c,f,p=[];for(i=0,o=e.length;i<o;i++)if(u=oo[e[i]]){for(f=null,a=0,
s=u[1].length;a<s;a+=2)-1===u[1][a]&&-1===u[1][a+1]?f=null:(l=t+u[1][a]*r,c=n-u[1][a+1]*r,f&&p.push(f.x,f.y,l,c),f={x:l,y:c});t+=u[0]*r}return p}function Pe(e,t,n){var r=e.context,i=n.implementation;if("offscreen"===e.renderPass){var o=i.prerender;o&&(e.setCustomLayerDefaults(),o.call(i,r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState()),"3d"===i.renderingMode&&(e.setCustomLayerDefaults(),ye(e,n),i.render(r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass)if("3d"===i.renderingMode)ve(e,n,1);else{e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),r.setStencilMode(gn.disabled);var a=e.depthModeForSublayer(0,dn.ReadOnly);r.setDepthMode(a),i.render(r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState(),r.bindFramebuffer.set(null)}}function Oe(s,e,u,l){function t(e,t,n){var r,i,o,a;if(0<=n&&n<=c)for(r=e;r<t;r++)i=Math.floor(r/c),o=(r%c+c)%c,0!==i&&!0!==l||(a=new Ee.OverscaledTileID(u,i,s,o,n),f[a.key]=a)}l===undefined&&(l=!0);var c=1<<s,f={},n=e.map(function(e){return new Ee.Point(e.x,e.y)._mult(c)});return Le(n[0],n[1],n[2],0,c,t),Le(n[2],n[3],n[0],0,c,t),Object.keys(f).map(function(e){return f[e]})}function Re(e,t){if(e.y>t.y){var n=e;e=t,t=n}return{x0:e.x,y0:e.y,x1:t.x,y1:t.y,dx:t.x-e.x,dy:t.y-e.y}}function Ne(e,t,n,r,i){var o=Math.max(n,Math.floor(t.y0)),a=Math.min(r,Math.ceil(t.y1));if(e.x0===t.x0&&e.y0===t.y0?e.x0+t.dy/e.dy*e.dx<t.x1:e.x1-t.dy/e.dy*e.dx<t.x0){var s=e;e=t,t=s}for(var u=e.dx/e.dy,l=t.dx/t.dy,c=0<e.dx,f=t.dx<0,p=o;p<a;p++){var d=u*Math.max(0,Math.min(e.dy,p+c-e.y0))+e.x0,h=l*Math.max(0,Math.min(t.dy,p+f-t.y0))+t.x0;i(Math.floor(h),Math.ceil(d),p)}}function Le(e,t,n,r,i,o){var a,s=Re(e,t),u=Re(t,n),l=Re(n,e);s.dy>u.dy&&(a=s,s=u,u=a),s.dy>l.dy&&(a=s,s=l,l=a),u.dy>l.dy&&(a=u,u=l,l=a),s.dy&&Ne(l,s,r,i,o),u.dy&&Ne(l,u,r,i,o)}function Me(e,t){var n=!1,r=0,i=function(){r=0,n&&(e(),r=setTimeout(i,t),n=!1)};return function(){return n=!0,r||i(),r}}function Be(e){return e*(2-e)}function ze(n,r){function e(e){y=!0,v=Ye.mousePos(m,e);var t=new fo("mousedown",n,e);n.fire(t),t.defaultPrevented||(r.interactive&&!n.doubleClickZoom.isActive()&&n.stop(),n.boxZoom.onMouseDown(e),n.boxZoom.isActive()||n.dragPan.isActive()||n.dragRotate.onMouseDown(e),n.boxZoom.isActive()||n.dragRotate.isActive()||n.dragPan.onMouseDown(e))}function t(e){var t=n.dragRotate.isActive();g&&!t&&n.fire(new fo("contextmenu",n,g)),g=null,y=!1,n.fire(new fo("mouseup",n,e))}function i(e){if(!n.dragPan.isActive()&&!n.dragRotate.isActive()){for(var t=e.target;t&&t!==m;)t=t.parentNode;t===m&&n.fire(new fo("mousemove",n,e))}}function o(e){for(var t=e.target;t&&t!==m;)t=t.parentNode;t===m&&n.fire(new fo("mouseover",n,e))}function a(e){n.fire(new fo("mouseout",n,e))}function s(e){var t=new po("touchstart",n,e);n.fire(t),t.defaultPrevented||(r.interactive&&n.stop(),n.boxZoom.isActive()||n.dragRotate.isActive()||n.dragPan.onTouchStart(e),n.touchZoomRotate.onStart(e),n.doubleClickZoom.onTouchStart(t))}function u(e){n.fire(new po("touchmove",n,e))}function l(e){n.fire(new po("touchend",n,e))}function c(e){n.fire(new po("touchcancel",n,e))}function f(e){var t=Ye.mousePos(m,e);(t.equals(v)||t.dist(v)<r.clickTolerance)&&n.fire(new fo("click",n,e))}function p(e){var t=new fo("dblclick",n,e);n.fire(t),t.defaultPrevented||n.doubleClickZoom.onDblClick(t)}function d(e){var t=n.dragRotate.isActive();y||t?y&&(g=e):n.fire(new fo("contextmenu",n,e)),(n.dragRotate.isEnabled()||n.listens("contextmenu"))&&e.preventDefault()}function h(e){r.interactive&&n.stop();var t=new ho("wheel",n,e);n.fire(t),t.defaultPrevented||n.scrollZoom.onWheel(e)}var m=n.getCanvasContainer(),g=null,y=!1,v=null;for(var _ in qo)n[_]=new qo[_](n,r),r.interactive&&r[_]&&n[_].enable(r[_]);Ye.addEventListener(m,"mouseout",a),Ye.addEventListener(m,"mousedown",e),Ye.addEventListener(m,"mouseup",t),Ye.addEventListener(m,"mousemove",i),Ye.addEventListener(m,"mouseover",o),Ye.addEventListener(m,"touchstart",s,{passive:!1}),Ye.addEventListener(m,"touchmove",u,{passive:!1}),Ye.addEventListener(m,"touchend",l),Ye.addEventListener(m,"touchcancel",c),Ye.addEventListener(m,"click",f),Ye.addEventListener(m,"dblclick",p),Ye.addEventListener(m,"contextmenu",d),Ye.addEventListener(m,"wheel",h,{passive:!1})}function Fe(e){e.parentNode&&e.parentNode.removeChild(e)}function je(e,t,n){if(e=new Ee.LngLat(e.lng,e.lat),t){var r=new Ee.LngLat(e.lng-360,e.lat),i=new Ee.LngLat(e.lng+360,e.lat),o=n.locationPoint(e).distSqr(t);n.locationPoint(r).distSqr(t)<o?e=r:n.locationPoint(i).distSqr(t)<o&&(e=i)}for(;180<Math.abs(e.lng-n.center.lng);){var a=n.locationPoint(e);if(0<=a.x&&0<=a.y&&a.x<=n.width&&a.y<=n.height)break;e.lng>n.center.lng?e.lng-=360:e.lng+=360}return e}function Ue(e,t,n){var r=e.classList;for(var i in ra)r.remove("mapboxgl-"+n+"-anchor-"+i);r.add("mapboxgl-"+n+"-anchor-"+t)}function Ve(t){na!==undefined?t(na):Ee.window.navigator.permissions!==undefined?Ee.window.navigator.permissions.query({name:"geolocation"}).then(function(e){na="denied"!==e.state,t(na)}):(na=!!Ee.window.navigator.geolocation,t(na))}function qe(e,t,n){var r=n&&n.maxWidth||100,i=e._container.clientHeight/2,o=We(e.unproject([0,i]),e.unproject([r,i]));if(n&&"imperial"===n.unit){var a=3.2808*o;if(5280<a)He(t,r,a/5280,"mi");else He(t,r,a,"ft")}else if(n&&"nautical"===n.unit){He(t,r,o/1852,"nm")}else He(t,r,o,"m")}function He(e,t,n,r){var i=Ze(n),o=i/n;"m"===r&&1e3<=i&&(i/=1e3,r="km"),e.style.width=t*o+"px",e.innerHTML=i+r}function We(e,t){var n=6371e3,r=Math.PI/180,i=e.lat*r,o=t.lat*r,a=Math.sin(i)*Math.sin(o)+Math.cos(i)*Math.cos(o)*Math.cos((t.lng-e.lng)*r);return n*Math.acos(Math.min(a,1))}function Ge(e){var t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}function Ze(e){var t=Math.pow(10,(""+Math.floor(e)).length-1),n=e/t;return t*(n=10<=n?10:5<=n?5:3<=n?3:2<=n?2:1<=n?1:Ge(n))}function Xe(e){if(e){if("number"==typeof e){var t=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{center:new Ee.Point(0,0),top:new Ee.Point(0,e),"top-left":new Ee.Point(t,t),"top-right":new Ee.Point(-t,t),bottom:new Ee.Point(0,-e),"bottom-left":new Ee.Point(t,-t),"bottom-right":new Ee.Point(-t,-t),left:new Ee.Point(e,0),right:new Ee.Point(-e,0)}}if(e instanceof Ee.Point||Array.isArray(e)){var n=Ee.Point.convert(e);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:Ee.Point.convert(e.center||[0,0]),top:Ee.Point.convert(e.top||[0,0]),"top-left":Ee.Point.convert(e["top-left"]||[0,0]),"top-right":Ee.Point.convert(e["top-right"]||[0,0]),bottom:Ee.Point.convert(e.bottom||[0,0]),"bottom-left":Ee.Point.convert(e["bottom-left"]||[0,0]),"bottom-right":Ee.Point.convert(e["bottom-right"]||[0,0]),left:Ee.Point.convert(e.left||[0,0]),right:Ee.Point.convert(e.right||[0,0])}}return Xe(new Ee.Point(0,0))}var Ke,$e=Ee.createCommonjsModule(function(e){function r(e){return!!(t()&&n()&&i()&&o()&&a()&&s()&&u()&&l()&&c(e&&e.failIfMajorPerformanceCaveat))}function t(){return"undefined"!=typeof window&&"undefined"!=typeof document}function n(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function i(){return Function.prototype&&Function.prototype.bind}function o(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function a(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function s(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{t=new Worker(r),e=!0}catch(i){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}function u(){return"Uint8ClampedArray"in window}function l(){return ArrayBuffer.isView}function c(e){return p[e]===undefined&&(p[e]=f(e)),p[e]}function f(e){var t=document.createElement("canvas"),n=Object.create(r.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=e,t.probablySupportsContext?t.probablySupportsContext("webgl",n)||t.probablySupportsContext("experimental-webgl",n):t.supportsContext?t.supportsContext("webgl",n)||t.supportsContext("experimental-webgl",n):t.getContext("webgl",n)||t.getContext("experimental-webgl",n)}e.exports?e.exports=r:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=r);var p={};r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),Ye={create:function(e,t,n){var r=Ee.window.document.createElement(e);return t&&(r.className=t),n&&n.appendChild(r),r},createNS:function(e,t){return Ee.window.document.createElementNS(e,t)}},Je=Ee.window.document?Ee.window.document.documentElement.style:null,Qe=e(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);Ye.disableDrag=function(){Je&&Qe&&(Ke=Je[Qe],Je[Qe]="none")},Ye.enableDrag=function(){Je&&Qe&&(Je[Qe]=Ke)};var et=e(["transform","WebkitTransform"]),tt=!(Ye.setTransform=function(e,t){e.style[et]=t});try{var nt=Object.defineProperty({},"passive",{get:function ha(){tt=!0}});Ee.window.addEventListener("test",nt,nt),Ee.window.removeEventListener("test",nt,nt)}catch(ma){tt=!1}Ye.addEventListener=function(e,t,n,r){void 0===r&&(r={}),"passive"in r&&tt?e.addEventListener(t,n,r):e.addEventListener(t,n,r.capture)},Ye.removeEventListener=function(e,t,n,r){void 0===r&&(r={}),"passive"in r&&tt?e.removeEventListener(t,n,r):e.removeEventListener(t,n,r.capture)};var rt=function(e){e.preventDefault(),e.stopPropagation(),Ee.window.removeEventListener("click",rt,!0)};Ye.suppressClick=function(){Ee.window.addEventListener("click",rt,!0),Ee.window.setTimeout(function(){Ee.window.removeEventListener("click",rt,!0)},0)},Ye.mousePos=function(e,t){var n=e.getBoundingClientRect();return t=t.touches?t.touches[0]:t,new Ee.Point(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},Ye.touchPos=function(e,t){for(var n=e.getBoundingClientRect(),r=[],i="touchend"===t.type?t.changedTouches:t.touches,o=0;o<i.length;o++)r.push(new Ee.Point(i[o].clientX-n.left-e.clientLeft,i[o].clientY-n.top-e.clientTop));return r},Ye.mouseButton=function(e){return Ee.assert("mousedown"===e.type||"mouseup"===e.type),"undefined"!=typeof Ee.window.InstallTrigger&&2===e.button&&e.ctrlKey&&0<=Ee.window.navigator.platform.toUpperCase().indexOf("MAC")?0:e.button},Ye.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};var it=1,ot=function ot(){this.images={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new Ee.RGBAImage({width:1,height:1}),this.dirty=!0};ot.prototype.isLoaded=function ga(){return this.loaded},ot.prototype.setLoaded=function ya(e){if(this.loaded!==e&&(this.loaded=e)){for(var t=0,n=this.requestors;t<n.length;t+=1){var r=n[t],i=r.ids,o=r.callback;this._notify(i,o)}this.requestors=[]}},ot.prototype.getImage=function va(e){return this.images[e]},ot.prototype.addImage=function _a(e,t){Ee.assert(!this.images[e]),this.images[e]=t},ot.prototype.removeImage=function ba(e){Ee.assert(this.images[e]),delete this.images[e],delete this.patterns[e]},ot.prototype.listImages=function xa(){return Object.keys(this.images)},ot.prototype.getImages=function wa(e,t){var n=!0;if(!this.isLoaded())for(var r=0,i=e;r<i.length;r+=1){var o=i[r];this.images[o]||(n=!1)}this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})},ot.prototype._notify=function Ea(e,t){for(var n={},r=0,i=e;r<i.length;r+=1){var o=i[r],a=this.images[o];a&&(n[o]={data:a.data.clone(),pixelRatio:a.pixelRatio,sdf:a.sdf})}t(null,n)},ot.prototype.getPixelSize=function Ca(){var e=this.atlasImage;return{width:e.width,height:e.height}},ot.prototype.getPattern=function Sa(e){var t=this.patterns[e];if(t)return t.position;var n=this.getImage(e);if(!n)return null;var r={w:n.data.width+2*it,h:n.data.height+2*it,x:0,y:0},i=new Ee.ImagePosition(r,n);return this.patterns[e]={bin:r,position:i},this._updatePatternAtlas(),i},ot.prototype.bind=function Ta(e){var t=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ee.Texture(e,this.atlasImage,t.RGBA),this.atlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE)},ot.prototype._updatePatternAtlas=function Aa(){var e=[];for(var t in this.patterns)e.push(this.patterns[t].bin);var n=Ee.potpack(e),r=n.w,i=n.h,o=this.atlasImage;for(var a in o.resize({width:r||1,height:i||1}),this.patterns){var s=this.patterns[a].bin,u=s.x+it,l=s.y+it,c=this.images[a].data,f=c.width,p=c.height;Ee.RGBAImage.copy(c,o,{x:0,y:0},{x:u,y:l},{width:f,height:p}),Ee.RGBAImage.copy(c,o,{x:0,y:p-1},{x:u,y:l-1},{width:f,height:1}),Ee.RGBAImage.copy(c,o,{x:0,y:0},{x:u,y:l+p},{width:f,height:1}),Ee.RGBAImage.copy(c,o,{x:f-1,y:0},{x:u-1,y:l},{width:1,height:p}),Ee.RGBAImage.copy(c,o,{x:0,y:0},{x:u+f,y:l},{width:1,height:p})}this.dirty=!0};var at=n,st=1e20;n.prototype.draw=function(e){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(e,this.buffer,this.middle);for(var t=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var i=t.data[4*r+3]/255;this.gridOuter[r]=1===i?0:0===i?st:Math.pow(Math.max(0,.5-i),2),this.gridInner[r]=1===i?st:0===i?0:Math.pow(Math.max(0,i-.5),2)}for(a(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),a(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++){var o=this.gridOuter[r]-this.gridInner[r];n[r]=Math.max(0,Math.min(255,Math.round(255-255*(o/this.radius+this.cutoff))))}return n};var ut=function ut(e,t){this.requestTransform=e,this.localIdeographFontFamily=t,this.entries={}};ut.prototype.setURL=function ka(e){this.url=e},ut.prototype.getGlyphs=function Ia(e,l){var u=this,t=[];for(var n in e)for(var r=0,i=e[n];r<i.length;r+=1){var o=i[r];t.push({stack:n,id:o})}Ee.asyncAll(t,function(e,n){var r=e.stack,i=e.id,o=u.entries[r];o||(o=u.entries[r]={glyphs:{},requests:{}});var t=o.glyphs[i];if(t===undefined)if(t=u._tinySDF(o,r,i))n(null,{stack:r,id:i,glyph:t});else{var a=Math.floor(i/256);if(65535<256*a)n(new Error("glyphs > 65535 not supported"));else{var s=o.requests[a];s||(s=o.requests[a]=[],ut.loadGlyphRange(r,a,u.url,u.requestTransform,function(e,t){if(t)for(var n in t)o.glyphs[+n]=t[+n];for(var r=0,i=s;r<i.length;r+=1){(0,i[r])(e,t)}delete o.requests[a]})),s.push(function(e,t){e?n(e):t&&n(null,{stack:r,id:i,glyph:t[i]||null})})}}else n(null,{stack:r,id:i,glyph:t})},function(e,t){if(e)l(e);else if(t){for(var n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.stack,s=o.id,u=o.glyph;(n[a]||(n[a]={}))[s]=u&&{id:u.id,bitmap:u.bitmap.clone(),metrics:u.metrics}}l(null,n)}})},ut.prototype._tinySDF=function Da(e,t,n){var r=this.localIdeographFontFamily;if(r&&(Ee.isChar["CJK Unified Ideographs"](n)||Ee.isChar["Hangul Syllables"](n))){var i=e.tinySDF;if(!i){var o="400";/bold/i.test(t)?o="900":/medium/i.test(t)?o="500":/light/i.test(t)&&(o="200"),i=e.tinySDF=new ut.TinySDF(24,3,8,.25,r,o)}return{id:n,bitmap:new Ee.AlphaImage({width:30,height:30},i.draw(String.fromCharCode(n))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},ut.loadGlyphRange=t,ut.TinySDF=at;var lt=function lt(){this.specification=Ee.styleSpec.light.position};lt.prototype.possiblyEvaluate=function Pa(e,t){return Ee.sphericalToCartesian(e.expression.evaluate(t))},lt.prototype.interpolate=function Oa(e,t,n){return{x:Ee.number(e.x,t.x,n),y:Ee.number(e.y,t.y,n),z:Ee.number(e.z,t.z,n)}};var ct=new Ee.Properties({anchor:new Ee.DataConstantProperty(Ee.styleSpec.light.anchor),position:new lt,color:new Ee.DataConstantProperty(Ee.styleSpec.light.color),intensity:new Ee.DataConstantProperty(Ee.styleSpec.light.intensity)}),ft="-transition",pt=function(t){function e(e){t.call(this),this._transitionable=new Ee.Transitionable(ct),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype.getLight=function n(){return this._transitionable.serialize()},e.prototype.setLight=function i(e,t){if(void 0===t&&(t={}),!this._validate(Ee.validateLight,e,t))for(var n in e){var r=e[n];Ee.endsWith(n,ft)?this._transitionable.setTransition(n.slice(0,-ft.length),r):this._transitionable.setValue(n,r)}},e.prototype.updateTransitions=function r(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)},e.prototype.hasTransition=function o(){return this._transitioning.hasTransition()},e.prototype.recalculate=function a(e){this.properties=this._transitioning.possiblyEvaluate(e)},e.prototype._validate=function s(e,t,n){return(!n||!1!==n.validate)&&Ee.emitValidationErrors(this,e.call(Ee.validateStyle,Ee.extend({value:t,style:{glyphs:!0,sprite:!0},styleSpec:Ee.styleSpec})))},e}(Ee.Evented),dt=function dt(e,t){this.width=e,this.height=t,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};dt.prototype.getDash=function Ra(e,t){var n=e.join(",")+String(t);return this.positions[n]||(this.positions[n]=this.addDash(e,t)),this.positions[n]},dt.prototype.addDash=function Na(e,t){var n=t?7:0,r=2*n+1,i=128;if(this.nextRow+r>this.height)return Ee.warnOnce("LineAtlas out of space"),null;for(var o=0,a=0;a<e.length;a++)o+=e[a];for(var s=this.width/o,u=s/2,l=e.length%2==1,c=-n;c<=n;c++)for(var f=this.nextRow+n+c,p=this.width*f,d=l?-e[e.length-1]:0,h=e[0],m=1,g=0;g<this.width;g++){for(;h<g/s;)d=h,h+=e[m],l&&m===e.length-1&&(h+=e[0]),m++;var y=Math.abs(g-d*s),v=Math.abs(g-h*s),_=Math.min(y,v),b=m%2==1,x=void 0;if(t){var w=n?c/n*(u+1):0;if(b){var E=u-Math.abs(w);x=Math.sqrt(_*_+E*E)}else x=u-Math.sqrt(_*_+w*w)}else x=(b?1:-1)*_;this.data[3+4*(p+g)]=Math.max(0,Math.min(255,x+i))}var C={y:(this.nextRow+n+.5)/this.height,height:2*n/this.height,width:o};return this.nextRow+=r,this.dirty=!0,C},dt.prototype.bind=function Ta(e){var t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.RGBA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,this.data))};var ht=function ht(e,t){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=Ee.uniqueId();for(var n=this.workerPool.acquire(this.id),r=0;r<n.length;r++){var i=n[r],o=new ht.Actor(i,t,this.id);o.name="Worker "+r,this.actors.push(o)}};ht.prototype.broadcast=function La(n,r,e){e=e||function(){},Ee.asyncAll(this.actors,function(e,t){e.send(n,r,t)},e)},ht.prototype.send=function Ma(e,t,n,r){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(e,t,n),r},ht.prototype.remove=function Ba(){this.actors.forEach(function(e){e.remove()}),this.actors=[],this.workerPool.release(this.id)},ht.Actor=Ee.Actor;var mt=function mt(e,t,n){this.bounds=Ee.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=t||0,this.maxzoom=n||24};mt.prototype.validateBounds=function za(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]},mt.prototype.contains=function Fa(e){var t=Math.pow(2,e.z),n={minX:Math.floor(Ee.mercatorXfromLng(this.bounds.getWest())*t),minY:Math.floor(Ee.mercatorYfromLat(this.bounds.getNorth())*t),maxX:Math.ceil(Ee.mercatorXfromLng(this.bounds.getEast())*t),maxY:Math.ceil(Ee.mercatorYfromLat(this.bounds.getSouth())*t)};return e.x>=n.minX&&e.x<n.maxX&&e.y>=n.minY&&e.y<n.maxY};var gt=function(i){function e(e,t,n,r){if(i.call(this),this.id=e,this.dispatcher=n,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,Ee.extend(this,Ee.pick(t,["url","scheme","tileSize"])),this._options=Ee.extend({type:"vector"},t),this._collectResourceTiming=t.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(r)}return i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),(e.prototype.constructor=e).prototype.load=function t(){var n=this;this.fire(new Ee.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=f(this._options,this.map._transformRequest,function(e,t){n._tileJSONRequest=null,e?n.fire(new Ee.ErrorEvent(e)):t&&(Ee.extend(n,t),t.bounds&&(n.tileBounds=new mt(t.bounds,n.minzoom,n.maxzoom)),Ee.postTurnstileEvent(t.tiles),Ee.postMapLoadEvent(t.tiles,n.map._getMapId()),n.fire(new Ee.Event("data",{dataType:"source",sourceDataType:"metadata"})),n.fire(new Ee.Event("data",{dataType:"source",sourceDataType:"content"})))})},e.prototype.hasTile=function n(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},e.prototype.onAdd=function r(e){this.map=e,this.load()},e.prototype.onRemove=function o(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},e.prototype.serialize=function a(){return Ee.extend({},this._options)},e.prototype.loadTile=function s(n,r){function e(e,t){return n.aborted?r(null):e&&404!==e.status?r(e):(t&&t.resourceTiming&&(n.resourceTiming=t.resourceTiming),this.map._refreshExpiredTiles&&t&&n.setExpiryData(t),n.loadVectorData(t,this.map.painter),r(null),void(n.reloadCallback&&(this.loadTile(n,n.reloadCallback),n.reloadCallback=null)))}var t=Ee.normalizeTileURL(n.tileID.canonical.url(this.tiles,this.scheme),this.url),i={request:this.map._transformRequest(t,Ee.ResourceType.Tile),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:Ee.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};i.request.collectResourceTiming=this._collectResourceTiming,n.workerID===undefined||"expired"===n.state?n.workerID=this.dispatcher.send("loadTile",i,e.bind(this)):"loading"===n.state?n.reloadCallback=r:this.dispatcher.send("reloadTile",i,e.bind(this),n.workerID)},e.prototype.abortTile=function u(e){this.dispatcher.send("abortTile",{uid:e.uid,type:this.type,source:this.id},undefined,e.workerID)},e.prototype.unloadTile=function l(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},undefined,e.workerID)},e.prototype.hasTransition=function c(){return!1},e}(Ee.Evented),yt=function(i){function e(e,t,n,r){i.call(this),this.id=e,this.dispatcher=n,this.setEventedParent(r),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=Ee.extend({},t),Ee.extend(this,Ee.pick(t,["url","scheme","tileSize"]))}return i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),(e.prototype.constructor=e).prototype.load=function t(){var n=this;this.fire(new Ee.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=f(this._options,this.map._transformRequest,function(e,t){n._tileJSONRequest=null,e?n.fire(new Ee.ErrorEvent(e)):t&&(Ee.extend(n,t),t.bounds&&(n.tileBounds=new mt(t.bounds,n.minzoom,n.maxzoom)),Ee.postTurnstileEvent(t.tiles),Ee.postMapLoadEvent(t.tiles,n.map._getMapId()),n.fire(new Ee.Event("data",{dataType:"source",sourceDataType:"metadata"})),n.fire(new Ee.Event("data",{dataType:"source",sourceDataType:"content"})))})},e.prototype.onAdd=function n(e){this.map=e,this.load()},e.prototype.onRemove=function r(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},e.prototype.serialize=function o(){return Ee.extend({},this._options)},e.prototype.hasTile=function a(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},e.prototype.loadTile=function s(i,o){var a=this,e=Ee.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);i.request=Ee.getImage(this.map._transformRequest(e,Ee.ResourceType.Tile),function(e,t){if(delete i.request,i.aborted)i.state="unloaded",o(null);else if(e)i.state="errored",o(e);else if(t){a.map._refreshExpiredTiles&&i.setExpiryData(t),delete t.cacheControl,delete t.expires;var n=a.map.painter.context,r=n.gl;i.texture=a.map.painter.getTileTexture(t.width),i.texture?i.texture.update(t,{useMipmap:!0}):(i.texture=new Ee.Texture(n,t,r.RGBA,{useMipmap:!0}),i.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE,r.LINEAR_MIPMAP_NEAREST),n.extTextureFilterAnisotropic&&r.texParameterf(r.TEXTURE_2D,n.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.extTextureFilterAnisotropicMax)),i.state="loaded",o(null)}})},e.prototype.abortTile=function u(e,t){e.request&&(e.request.cancel(),delete e.request),t()},e.prototype.unloadTile=function l(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()},e.prototype.hasTransition=function c(){return!1},e}(Ee.Evented),vt=function(i){function e(e,t,n,r){i.call(this,e,t,n,r),this.type="raster-dem",this.maxzoom=22,this._options=Ee.extend({},t),this.encoding=t.encoding||"mapbox"}return i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),(e.prototype.constructor=e).prototype.serialize=function t(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},e.prototype.loadTile=function n(i,o){function e(e,t){if(delete i.request,i.aborted)i.state="unloaded",o(null);else if(e)i.state="errored",o(e);else if(t){this.map._refreshExpiredTiles&&i.setExpiryData(t),delete t.cacheControl,delete t.expires;var n=Ee.browser.getImageData(t),r={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:n,encoding:this.encoding};i.workerID&&"expired"!==i.state||(i.workerID=this.dispatcher.send("loadDEMTile",r,a.bind(this)))}}function a(e,t){e&&(i.state="errored",o(e)),t&&(i.dem=t,i.needsHillshadePrepare=!0,i.state="loaded",o(null))}var t=Ee.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);i.request=Ee.getImage(this.map._transformRequest(t,Ee.ResourceType.Tile),e.bind(this)),i.neighboringTiles=this._getNeighboringTiles(i.tileID)},e.prototype._getNeighboringTiles=function u(e){var t=e.canonical,n=Math.pow(2,t.z),r=(t.x-1+n)%n,i=0===t.x?e.wrap-1:e.wrap,o=(t.x+1+n)%n,a=t.x+1===n?e.wrap+1:e.wrap,s={};return s[new Ee.OverscaledTileID(e.overscaledZ,i,t.z,r,t.y).key]={backfilled:!1},s[new Ee.OverscaledTileID(e.overscaledZ,a,t.z,o,t.y).key]={backfilled:!1},0<t.y&&(s[new Ee.OverscaledTileID(e.overscaledZ,i,t.z,r,t.y-1).key]={backfilled:!1},s[new Ee.OverscaledTileID(e.overscaledZ,e.wrap,t.z,t.x,t.y-1).key]={backfilled:!1},s[new Ee.OverscaledTileID(e.overscaledZ,a,t.z,o,t.y-1).key]={backfilled:!1}),t.y+1<n&&(s[new Ee.OverscaledTileID(e.overscaledZ,i,t.z,r,t.y+1).key]={backfilled:!1},s[new Ee.OverscaledTileID(e.overscaledZ,e.wrap,t.z,t.x,t.y+1).key]={backfilled:!1},s[new Ee.OverscaledTileID(e.overscaledZ,a,t.z,o,t.y+1).key]={backfilled:!1}),s},e.prototype.unloadTile=function r(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:e.uid,source:this.id},undefined,e.workerID)},e}(yt),_t=function(o){function e(e,t,n,r){o.call(this),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this.dispatcher=n,this.setEventedParent(r),this._data=t.data,this._options=Ee.extend({},t),this._collectResourceTiming=t.collectResourceTiming,this._resourceTiming=[],t.maxzoom!==undefined&&(this.maxzoom=t.maxzoom),t.type&&(this.type=t.type),t.attribution&&(this.attribution=t.attribution);var i=Ee.EXTENT/this.tileSize;this.workerOptions=Ee.extend({source:this.id,cluster:t.cluster||!1,geojsonVtOptions:{buffer:(t.buffer!==undefined?t.buffer:128)*i,tolerance:(t.tolerance!==undefined?t.tolerance:.375)*i,extent:Ee.EXTENT,maxZoom:this.maxzoom,lineMetrics:t.lineMetrics||!1,generateId:t.generateId||!1},superclusterOptions:{maxZoom:t.clusterMaxZoom!==undefined?Math.min(t.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:Ee.EXTENT,radius:(t.clusterRadius||50)*i,log:!1},clusterProperties:t.clusterProperties},t.workerOptions)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),(e.prototype.constructor=e).prototype.load=function t(){var n=this;this.fire(new Ee.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(e){if(e)n.fire(new Ee.ErrorEvent(e));else{var t={dataType:"source",sourceDataType:"metadata"};n._collectResourceTiming&&n._resourceTiming&&0<n._resourceTiming.length&&(t.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new Ee.Event("data",t))}})},e.prototype.onAdd=function n(e){this.map=e,this.load()},e.prototype.setData=function r(e){var n=this;return this._data=e,this.fire(new Ee.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(e){if(e)n.fire(new Ee.ErrorEvent(e));else{var t={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&0<n._resourceTiming.length&&(t.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new Ee.Event("data",t))}}),this},e.prototype.getClusterExpansionZoom=function i(e,t){return this.dispatcher.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t,this.workerID),this},e.prototype.getClusterChildren=function a(e,t){return this.dispatcher.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t,this.workerID),this},e.prototype.getClusterLeaves=function s(e,t,n,r){return this.dispatcher.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},r,this.workerID),this},e.prototype._updateWorkerData=function u(n){var r=this,i=Ee.extend({},this.workerOptions),e=this._data;"string"==typeof e?(i.request=this.map._transformRequest(Ee.browser.resolveURL(e),Ee.ResourceType.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(e),this.workerID=this.dispatcher.send(this.type+".loadData",i,function(e,t){r._removed||t&&t.abandoned||(r._loaded=!0,t&&t.resourceTiming&&t.resourceTiming[r.id]&&(r._resourceTiming=t.resourceTiming[r.id].slice(0)),r.dispatcher.send(r.type+".coalesce",{source:i.source},null,r.workerID),n(e))},this.workerID)},e.prototype.loadTile=function l(n,r){var i=this,o=n.workerID===undefined?"loadTile":"reloadTile",e={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:Ee.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};n.workerID=this.dispatcher.send(o,e,function(e,t){return n.unloadVectorData(),n.aborted?r(null):e?r(e):(n.loadVectorData(t,i.map.painter,"reloadTile"===o),r(null))},this.workerID)},e.prototype.abortTile=function c(e){e.aborted=!0},e.prototype.unloadTile=function f(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},null,e.workerID)},e.prototype.onRemove=function p(){this._removed=!0,this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},e.prototype.serialize=function d(){return Ee.extend({},this._options,{type:this.type,data:this._data})},e.prototype.hasTransition=function h(){return!1},e}(Ee.Evented),bt=function(i){function e(e,t,n,r){i.call(this),this.id=e,this.dispatcher=n,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(r),this.options=t}return i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),(e.prototype.constructor=e).prototype.load=function t(n,r){var i=this;this.fire(new Ee.Event("dataloading",{dataType:"source"})),this.url=this.options.url,Ee.getImage(this.map._transformRequest(this.url,Ee.ResourceType.Image),function(e,t){e?i.fire(new Ee.ErrorEvent(e)):t&&(i.image=t,n&&(i.coordinates=n),r&&r(),i._finishLoading())})},e.prototype.updateImage=function n(e){var t=this;return this.image&&e.url&&(this.options.url=e.url,this.load(e.coordinates,function(){t.texture=null})),this},e.prototype._finishLoading=function r(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new Ee.Event("data",{dataType:"source",sourceDataType:"metadata"})))},e.prototype.onAdd=function o(e){this.map=e,this.load()},e.prototype.setCoordinates=function a(e){var t=this,n=(this.coordinates=e).map(Ee.MercatorCoordinate.fromLngLat);this.tileID=p(n),
this.minzoom=this.maxzoom=this.tileID.z;var r=n.map(function(e){return t.tileID.getTilePoint(e)._round()});return this._boundsArray=new Ee.StructArrayLayout4i8,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,Ee.EXTENT,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,Ee.EXTENT),this._boundsArray.emplaceBack(r[2].x,r[2].y,Ee.EXTENT,Ee.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new Ee.Event("data",{dataType:"source",sourceDataType:"content"})),this},e.prototype.prepare=function s(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,t=e.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,Ee.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=Ee.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Ee.Texture(e,this.image,t.RGBA),this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[n];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},e.prototype.loadTile=function u(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e).buckets={}:e.state="errored",t(null)},e.prototype.serialize=function l(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},e.prototype.hasTransition=function c(){return!1},e}(Ee.Evented),xt={vector:gt,raster:yt,"raster-dem":vt,geojson:_t,video:function(i){function e(e,t,n,r){i.call(this,e,t,n,r),this.roundZoom=!0,this.type="video",this.options=t}return i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),(e.prototype.constructor=e).prototype.load=function o(){var n=this,e=this.options;this.urls=[];for(var t=0,r=e.urls;t<r.length;t+=1){var i=r[t];this.urls.push(this.map._transformRequest(i,Ee.ResourceType.Source).url)}Ee.getVideo(this.urls,function(e,t){e?n.fire(new Ee.ErrorEvent(e)):t&&(n.video=t,n.video.loop=!0,n.video.addEventListener("playing",function(){n.map.triggerRepaint()}),n.map&&n.video.play(),n._finishLoading())})},e.prototype.getVideo=function t(){return this.video},e.prototype.onAdd=function n(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},e.prototype.prepare=function a(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,t=e.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,Ee.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=Ee.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE),t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,this.video)):(this.texture=new Ee.Texture(e,this.video,t.RGBA),this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[n];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},e.prototype.serialize=function r(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},e.prototype.hasTransition=function s(){return this.video&&!this.video.paused},e}(bt),image:bt,canvas:function(i){function e(e,t,n,r){i.call(this,e,t,n,r),t.coordinates?Array.isArray(t.coordinates)&&4===t.coordinates.length&&!t.coordinates.some(function(e){return!Array.isArray(e)||2!==e.length||e.some(function(e){return"number"!=typeof e})})||this.fire(new Ee.ErrorEvent(new Ee.ValidationError("sources."+e,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new Ee.ErrorEvent(new Ee.ValidationError("sources."+e,null,'missing required property "coordinates"'))),t.animate&&"boolean"!=typeof t.animate&&this.fire(new Ee.ErrorEvent(new Ee.ValidationError("sources."+e,null,'optional "animate" property must be a boolean value'))),t.canvas?"string"==typeof t.canvas||t.canvas instanceof Ee.window.HTMLCanvasElement||this.fire(new Ee.ErrorEvent(new Ee.ValidationError("sources."+e,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new Ee.ErrorEvent(new Ee.ValidationError("sources."+e,null,'missing required property "canvas"'))),this.options=t,this.animate=t.animate===undefined||t.animate}return i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),(e.prototype.constructor=e).prototype.load=function t(){this.canvas||(this.canvas=this.options.canvas instanceof Ee.window.HTMLCanvasElement?this.options.canvas:Ee.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new Ee.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing=!1},this._finishLoading())},e.prototype.getCanvas=function n(){return this.canvas},e.prototype.onAdd=function r(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()},e.prototype.onRemove=function o(){this.pause()},e.prototype.prepare=function a(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var t=this.map.painter.context,n=t.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,Ee.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=Ee.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ee.Texture(t,this.canvas,n.RGBA,{premultiply:!0}),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},e.prototype.serialize=function s(){return{type:"canvas",coordinates:this.coordinates}},e.prototype.hasTransition=function u(){return this._playing},e.prototype._hasInvalidDimensions=function l(){for(var e=0,t=[this.canvas.width,this.canvas.height];e<t.length;e+=1){var n=t[e];if(isNaN(n)||n<=0)return!0}return!1},e}(bt)},wt=function(e,t,n,r){var i=new xt[t.type](e,t,n,r);if(i.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+i.id);return Ee.bindAll(["load","abort","unload","serialize","prepare"],i),i},Et=function(e){return xt[e]},Ct=function(e,t){xt[e]=t},St=function St(e,t){this.max=e,this.onRemove=t,this.reset()};St.prototype.reset=function ja(){for(var e in this.data)for(var t=0,n=this.data[e];t<n.length;t+=1){var r=n[t];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},St.prototype.add=function Ua(e,t,n){var r=this,i=e.wrapped().key;this.data[i]===undefined&&(this.data[i]=[]);var o={value:t,timeout:undefined};if(n!==undefined&&(o.timeout=setTimeout(function(){r.remove(e,o)},n)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},St.prototype.has=function Va(e){return e.wrapped().key in this.data},St.prototype.getAndRemove=function qa(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null},St.prototype._getAndRemoveByKey=function Ha(e){var t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value},St.prototype.get=function ha(e){return this.has(e)?this.data[e.wrapped().key][0].value:null},St.prototype.remove=function Ba(e,t){if(!this.has(e))return this;var n=e.wrapped().key,r=t===undefined?0:this.data[n].indexOf(t),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this},St.prototype.setMaxSize=function Wa(e){for(this.max=e;this.order.length>this.max;){var t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this};var Tt=function Tt(e,t,n){var r=(this.context=e).gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};Tt.prototype.bind=function Ta(){this.context.bindElementBuffer.set(this.buffer)},Tt.prototype.updateData=function Ga(e){var t=this.context.gl;Ee.assert(this.dynamicDraw),this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)},Tt.prototype.destroy=function Za(){var e=this.context.gl;this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer)};var At={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},kt=function kt(e,t,n,r){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=r;var i=(this.context=e).gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};kt.prototype.bind=function Ta(){this.context.bindVertexBuffer.set(this.buffer)},kt.prototype.updateData=function Ga(e){Ee.assert(e.length===this.length);var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)},kt.prototype.enableAttributes=function Xa(e,t){for(var n=0;n<this.attributes.length;n++){var r=this.attributes[n],i=t.attributes[r.name];i!==undefined&&e.enableVertexAttribArray(i)}},kt.prototype.setVertexAttribPointers=function Ka(e,t,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],o=t.attributes[i.name];o!==undefined&&e.vertexAttribPointer(o,i.components,e[At[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}},kt.prototype.destroy=function Za(){var e=this.context.gl;this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer)};var It=function It(e){this.gl=e.gl,this["default"]=this.getDefault(),this.current=this["default"],this.dirty=!1};It.prototype.get=function ha(){return this.current},It.prototype.set=function $a(){},It.prototype.getDefault=function Ya(){return this["default"]},It.prototype.setDefault=function Ja(){this.set(this["default"])};var Dt=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return Ee.Color.transparent},t.prototype.set=function r(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)},t}(It),Pt=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return 1},t.prototype.set=function r(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)},t}(It),Ot=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return 0},t.prototype.set=function r(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)},t}(It),Rt=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return[!0,!0,!0,!0]},t.prototype.set=function r(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)},t}(It),Nt=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return!0},t.prototype.set=function r(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)},t}(It),Lt=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return 255},t.prototype.set=function r(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)},t}(It),Mt=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return{func:this.gl.ALWAYS,ref:0,mask:255}},t.prototype.set=function r(e){var t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)},t}(It),Bt=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]},t.prototype.set=function r(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)},t}(It),zt=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return!1},t.prototype.set=function r(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}},t}(It),Ft=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return[0,1]},t.prototype.set=function r(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)},t}(It),jt=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return!1},t.prototype.set=function r(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}},t}(It),Ut=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return this.gl.LESS},t.prototype.set=function r(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)},t}(It),Vt=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return!1},t.prototype.set=function r(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}},t}(It),qt=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){var e=this.gl;return[e.ONE,e.ZERO]},t.prototype.set=function r(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)},t}(It),Ht=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return Ee.Color.transparent},t.prototype.set=function r(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)},t}(It),Wt=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return this.gl.FUNC_ADD},t.prototype.set=function r(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)},t}(It),Gt=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return!1},t.prototype.set=function r(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}},t}(It),Zt=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return this.gl.BACK},t.prototype.set=function r(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)},t}(It),Xt=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return this.gl.CCW},t.prototype.set=function r(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)},t}(It),Kt=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return null},t.prototype.set=function r(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)},t}(It),$t=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return this.gl.TEXTURE0},t.prototype.set=function r(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)},t}(It),Yt=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]},t.prototype.set=function r(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)},t}(It),Jt=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return null},t.prototype.set=function r(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}},t}(It),Qt=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return null},t.prototype.set=function r(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}},t}(It),en=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return null},t.prototype.set=function r(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}},t}(It),tn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return null},t.prototype.set=function r(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}},t}(It),nn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return null},t.prototype.set=function r(e){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1},t}(It),rn=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype.getDefault=function n(){return null},e.prototype.set=function r(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)},e}(It),on=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return 4},t.prototype.set=function r(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}},t}(It),an=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return!1},t.prototype.set=function r(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}},t}(It),sn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getDefault=function n(){return!1},t.prototype.set=function r(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}},t}(It),un=function(n){function e(e,t){n.call(this,e),this.context=e,this.parent=t}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),(e.prototype.constructor=e).prototype.getDefault=function t(){return null},e}(It),ln=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.setDirty=function n(){this.dirty=!0},t.prototype.set=function r(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}},t}(un),cn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.set=function n(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}},t}(un),fn=function fn(e,t,n){this.context=e,this.width=t,this.height=n;var r=e.gl,i=this.framebuffer=r.createFramebuffer();this.colorAttachment=new ln(e,i),this.depthAttachment=new cn(e,i)};fn.prototype.destroy=function Za(){var e=this.context.gl,t=this.colorAttachment.get();t&&e.deleteTexture(t);var n=this.depthAttachment.get();n&&e.deleteRenderbuffer(n),e.deleteFramebuffer(this.framebuffer)};var pn=519,dn=function dn(e,t,n){this.func=e,this.mask=t,this.range=n};dn.ReadOnly=!1,dn.ReadWrite=!0,dn.disabled=new dn(pn,dn.ReadOnly,[0,1]);var hn=519,mn=7680,gn=function gn(e,t,n,r,i,o){this.test=e,this.ref=t,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o};gn.disabled=new gn({func:hn,mask:0},0,0,mn,mn,mn);var yn=0,vn=1,_n=771,bn=function bn(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n};bn.Replace=[vn,yn],bn.disabled=new bn(bn.Replace,Ee.Color.transparent,[!1,!1,!1,!1]),bn.unblended=new bn(bn.Replace,Ee.Color.transparent,[!0,!0,!0,!0]),bn.alphaBlended=new bn([vn,_n],Ee.Color.transparent,[!0,!0,!0,!0]);var xn=1029,wn=2305,En=function En(e,t,n){this.enable=e,this.mode=t,this.frontFace=n};En.disabled=new En(!1,xn,wn),En.backCCW=new En(!0,xn,wn);var Cn=function Cn(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Dt(this),this.clearDepth=new Pt(this),this.clearStencil=new Ot(this),this.colorMask=new Rt(this),this.depthMask=new Nt(this),this.stencilMask=new Lt(this),this.stencilFunc=new Mt(this),this.stencilOp=new Bt(this),this.stencilTest=new zt(this),this.depthRange=new Ft(this),this.depthTest=new jt(this),this.depthFunc=new Ut(this),this.blend=new Vt(this),this.blendFunc=new qt(this),this.blendColor=new Ht(this),this.blendEquation=new Wt(this),this.cullFace=new Gt(this),this.cullFaceSide=new Zt(this),this.frontFace=new Xt(this),this.program=new Kt(this),this.activeTexture=new $t(this),this.viewport=new Yt(this),this.bindFramebuffer=new Jt(this),this.bindRenderbuffer=new Qt(this),this.bindTexture=new en(this),this.bindVertexBuffer=new tn(this),this.bindElementBuffer=new nn(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new rn(this),this.pixelStoreUnpack=new on(this),this.pixelStoreUnpackPremultiplyAlpha=new an(this),this.pixelStoreUnpackFlipY=new sn(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear")};Cn.prototype.setDirty=function Qa(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Cn.prototype.createIndexBuffer=function es(e,t){return new Tt(this,e,t)},Cn.prototype.createVertexBuffer=function ts(e,t,n){return new kt(this,e,t,n)},Cn.prototype.createRenderbuffer=function ns(e,t,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),i},Cn.prototype.createFramebuffer=function rs(e,t){return new fn(this,e,t)},Cn.prototype.clear=function is(e){var t=e.color,n=e.depth,r=this.gl,i=0;t&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(i|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(i)},Cn.prototype.setCullFace=function os(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))},Cn.prototype.setDepthMode=function as(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)},Cn.prototype.setStencilMode=function ss(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)},Cn.prototype.setColorMode=function us(e){Ee.isEqual(e.blendFunction,bn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},Cn.prototype.unbindVAO=function ls(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Sn=function(i){function x(e,t,n){var r=this;i.call(this),this.id=e,this.dispatcher=n,this.on("data",function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(r._sourceLoaded=!0),r._sourceLoaded&&!r._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(r.reload(),r.transform&&r.update(r.transform))}),this.on("error",function(){r._sourceErrored=!0}),this._source=wt(e,t,n,this),this._tiles={},this._cache=new St(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._coveredTiles={},this._state=new Ee.SourceFeatureState}return i&&(x.__proto__=i),x.prototype=Object.create(i&&i.prototype),(x.prototype.constructor=x).prototype.onAdd=function t(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(e)},x.prototype.onRemove=function n(e){this._source&&this._source.onRemove&&this._source.onRemove(e)},x.prototype.loaded=function r(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var e in this._tiles){var t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0},x.prototype.getSource=function e(){return this._source},x.prototype.pause=function o(){this._paused=!0},x.prototype.resume=function a(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}},x.prototype._loadTile=function s(e,t){return this._source.loadTile(e,t)},x.prototype._unloadTile=function u(e){if(this._source.unloadTile)return this._source.unloadTile(e,function(){})},x.prototype._abortTile=function l(e){if(this._source.abortTile)return this._source.abortTile(e,function(){})},x.prototype.serialize=function c(){return this._source.serialize()},x.prototype.prepare=function f(e){for(var t in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles)this._tiles[t].upload(e)},x.prototype.getIds=function p(){return Object.keys(this._tiles).map(Number).sort(U)},x.prototype.getRenderableIds=function d(e){var a=this,t=[];for(var n in this._tiles)this._isIdRenderable(+n,e)&&t.push(+n);return e?t.sort(function(e,t){var n=a._tiles[e].tileID,r=a._tiles[t].tileID,i=new Ee.Point(n.canonical.x,n.canonical.y)._rotate(a.transform.angle),o=new Ee.Point(r.canonical.x,r.canonical.y)._rotate(a.transform.angle);return n.overscaledZ-r.overscaledZ||o.y-i.y||o.x-i.x}):t.sort(U)},x.prototype.hasRenderableParent=function h(e){var t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)},x.prototype._isIdRenderable=function m(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())},x.prototype.reload=function g(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(e,"reloading")},x.prototype._reloadTile=function y(e,t){var n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))},x.prototype._tileLoaded=function v(e,t,n,r){if(r)return e.state="errored",void(404!==r.status?this._source.fire(new Ee.ErrorEvent(r,{tile:e})):this.update(this.transform));e.timeAdded=Ee.browser.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new Ee.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},x.prototype._backfillDEM=function _(e){function t(e,t){e.needsHillshadePrepare=!0;var n=t.tileID.canonical.x-e.tileID.canonical.x,r=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===n&&0===r||1<Math.abs(r)||(1<Math.abs(n)&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}for(var n=this.getRenderableIds(),r=0;r<n.length;r++){var i=n[r];if(e.neighboringTiles&&e.neighboringTiles[i]){var o=this.getTileByID(i);t(e,o),t(o,e)}}},x.prototype.getTile=function b(e){return this.getTileByID(e.key)},x.prototype.getTileByID=function w(e){return this._tiles[e]},x.prototype.getZoom=function E(e){return e.zoom+e.scaleZoom(e.tileSize/this._source.tileSize)},x.prototype._retainLoadedChildren=function C(e,t,n,r){for(var i in this._tiles){var o=this._tiles[i];if(!(r[i]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>n)){for(var a=o.tileID;o&&o.tileID.overscaledZ>t+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var u=a;u.overscaledZ>t;)if(e[(u=u.scaledTo(u.overscaledZ-1)).key]){r[a.key]=a;break}}}},x.prototype.findLoadedParent=function S(e,t){for(var n=e.overscaledZ-1;t<=n;n--){var r=e.scaledTo(n);if(!r)return;var i=String(r.key),o=this._tiles[i];if(o&&o.hasData())return o;if(this._cache.has(r))return this._cache.get(r)}},x.prototype.updateCacheSize=function T(e){var t=(Math.ceil(e.width/this._source.tileSize)+1)*(Math.ceil(
e.height/this._source.tileSize)+1),n=5,r=Math.floor(t*n),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(i)},x.prototype.handleWrapJump=function A(e){var t=(e-(this._prevLng===undefined?e:this._prevLng))/360,n=Math.round(t);if(this._prevLng=e,n){var r={};for(var i in this._tiles){var o=this._tiles[i];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+n),r[o.tileID.key]=o}for(var a in this._tiles=r,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var s in this._tiles){var u=this._tiles[s];this._setTileReloadTimer(s,u)}}},x.prototype.update=function k(e){var t=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var n;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?n=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e){return new Ee.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)}):(n=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(n=n.filter(function(e){return t._source.hasTile(e)}))):n=[];var r=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),i=Math.max(r-x.maxOverzooming,this._source.minzoom),o=Math.max(r+x.maxUnderzooming,this._source.minzoom),a=this._updateRetainedTiles(n,r);if(V(this._source.type)){for(var s={},u={},l=0,c=Object.keys(a);l<c.length;l+=1){var f=c[l],p=a[f];Ee.assert(p.key===+f);var d=this._tiles[f];if(d&&!(d.fadeEndTime&&d.fadeEndTime<=Ee.browser.now())){var h=this.findLoadedParent(p,i);h&&(this._addTile(h.tileID),s[h.tileID.key]=h.tileID),u[f]=p}}for(var m in this._retainLoadedChildren(u,r,o,a),s)a[m]||(this._coveredTiles[m]=!0,a[m]=s[m])}for(var g in a)this._tiles[g].clearFadeHold();for(var y=0,v=Ee.keysDifference(this._tiles,a);y<v.length;y+=1){var _=v[y],b=this._tiles[_];b.hasSymbolBuckets&&!b.holdingForFade()?b.setHoldDuration(this.map._fadeDuration):b.hasSymbolBuckets&&!b.symbolFadeFinished()||this._removeTile(_)}}},x.prototype.releaseSymbolFadeTiles=function I(){for(var e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)},x.prototype._updateRetainedTiles=function D(e,t){for(var n={},r={},i=Math.max(t-x.maxOverzooming,this._source.minzoom),o=Math.max(t+x.maxUnderzooming,this._source.minzoom),a={},s=0,u=e;s<u.length;s+=1){var l=u[s],c=this._addTile(l);n[l.key]=l,c.hasData()||t<this._source.maxzoom&&(a[l.key]=l)}this._retainLoadedChildren(a,t,o,n);for(var f=0,p=e;f<p.length;f+=1){var d=p[f],h=this._tiles[d.key];if(!h.hasData()){if(t+1>this._source.maxzoom){var m=d.children(this._source.maxzoom)[0],g=this.getTile(m);if(g&&g.hasData()){n[m.key]=m;continue}}else{var y=d.children(this._source.maxzoom);if(n[y[0].key]&&n[y[1].key]&&n[y[2].key]&&n[y[3].key])continue}for(var v=h.wasRequested(),_=d.overscaledZ-1;i<=_;--_){var b=d.scaledTo(_);if(r[b.key])break;if(r[b.key]=!0,!(h=this.getTile(b))&&v&&(h=this._addTile(b)),h&&(n[b.key]=b,v=h.wasRequested(),h.hasData()))break}}}return n},x.prototype._addTile=function P(e){var t=this._tiles[e.key];if(t)return t;(t=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));var n=Boolean(t);return n||(t=new Ee.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))),t?(t.uses++,this._tiles[e.key]=t,n||this._source.fire(new Ee.Event("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null},x.prototype._setTileReloadTimer=function O(e,t){var n=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);var r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout(function(){n._reloadTile(e,"expired"),delete n._timers[e]},r))},x.prototype._removeTile=function R(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),0<t.uses||(t.hasData()?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))},x.prototype.clearTiles=function N(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(e);this._cache.reset()},x.prototype.tilesIn=function L(e,u,t){var l=this,c=[],f=this.transform;if(!f)return c;for(var n=t?f.getCameraQueryGeometry(e):e,p=e.map(function(e){return f.pointCoordinate(e)}),d=n.map(function(e){return f.pointCoordinate(e)}),h=this.getIds(),m=Infinity,g=Infinity,y=-Infinity,v=-Infinity,r=0,i=d;r<i.length;r+=1){var o=i[r];m=Math.min(m,o.x),g=Math.min(g,o.y),y=Math.max(y,o.x),v=Math.max(v,o.y)}for(var a=function(e){var t=l._tiles[h[e]];if(!t.holdingForFade()){var n=t.tileID,r=Math.pow(2,f.zoom-t.tileID.overscaledZ),i=u*t.queryPadding*Ee.EXTENT/t.tileSize/r,o=[n.getTilePoint(new Ee.MercatorCoordinate(m,g)),n.getTilePoint(new Ee.MercatorCoordinate(y,v))];if(o[0].x-i<Ee.EXTENT&&o[0].y-i<Ee.EXTENT&&0<=o[1].x+i&&0<=o[1].y+i){var a=p.map(function(e){return n.getTilePoint(e)}),s=d.map(function(e){return n.getTilePoint(e)});c.push({tile:t,tileID:n,queryGeometry:a,cameraQueryGeometry:s,scale:r})}}},s=0;s<h.length;s++)a(s);return c},x.prototype.getVisibleCoordinates=function M(e){for(var t=this,n=this.getRenderableIds(e).map(function(e){return t._tiles[e].tileID}),r=0,i=n;r<i.length;r+=1){var o=i[r];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return n},x.prototype.hasTransition=function B(){if(this._source.hasTransition())return!0;if(V(this._source.type))for(var e in this._tiles){var t=this._tiles[e];if(t.fadeEndTime!==undefined&&t.fadeEndTime>=Ee.browser.now())return!0}return!1},x.prototype.setFeatureState=function z(e,t,n){e=e||"_geojsonTileLayer",this._state.updateState(e,t,n)},x.prototype.removeFeatureState=function F(e,t,n){e=e||"_geojsonTileLayer",this._state.removeFeatureState(e,t,n)},x.prototype.getFeatureState=function j(e,t){return e=e||"_geojsonTileLayer",this._state.getState(e,t)},x}(Ee.Evented);Sn.maxOverzooming=10,Sn.maxUnderzooming=3;var Tn=function Tn(){this.active={}};Tn.prototype.acquire=function cs(e){if(!this.workers)for(this.workers=[];this.workers.length<Tn.workerCount;)this.workers.push(new r);return this.active[e]=!0,this.workers.slice()},Tn.prototype.release=function fs(e){delete this.active[e],0===Object.keys(this.active).length&&(this.workers.forEach(function(e){e.terminate()}),this.workers=null)};var An,kn=Math.floor(Ee.browser.hardwareConcurrency/2);Tn.workerCount=Math.max(Math.min(kn,6),1);var In={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"},Dn=function Dn(e,t,n){var r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0};Dn.prototype.keysLength=function ps(){return this.boxKeys.length+this.circleKeys.length},Dn.prototype.insert=function ds(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Dn.prototype.insertCircle=function hs(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)},Dn.prototype._insertBoxCell=function ms(e,t,n,r,i,o){this.boxCells[i].push(o)},Dn.prototype._insertCircleCell=function gs(e,t,n,r,i,o){this.circleCells[i].push(o)},Dn.prototype._query=function ys(e,t,n,r,i,o){if(n<0||e>this.width||r<0||t>this.height)return!i&&[];var a=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var l=this.circles[3*u],c=this.circles[3*u+1],f=this.circles[3*u+2];a.push({key:this.circleKeys[u],x1:l-f,y1:c-f,x2:l+f,y2:c+f})}return o?a.filter(o):a}var p={hitTest:i,seenUids:{box:{},circle:{}}};return this._forEachCell(e,t,n,r,this._queryCell,a,p,o),i?0<a.length:a},Dn.prototype._queryCircle=function vs(e,t,n,r,i){var o=e-n,a=e+n,s=t-n,u=t+n;if(a<0||o>this.width||u<0||s>this.height)return!r&&[];var l=[],c={hitTest:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}};return this._forEachCell(o,s,a,u,this._queryCellCircle,l,c,i),r?0<l.length:l},Dn.prototype.query=function _s(e,t,n,r,i){return this._query(e,t,n,r,!1,i)},Dn.prototype.hitTest=function bs(e,t,n,r,i){return this._query(e,t,n,r,!0,i)},Dn.prototype.hitTestCircle=function xs(e,t,n,r){return this._queryCircle(e,t,n,!0,r)},Dn.prototype._queryCell=function ws(e,t,n,r,i,o,a,s){var u=a.seenUids,l=this.boxCells[i];if(null!==l)for(var c=this.bboxes,f=0,p=l;f<p.length;f+=1){var d=p[f];if(!u.box[d]){u.box[d]=!0;var h=4*d;if(e<=c[h+2]&&t<=c[h+3]&&n>=c[h+0]&&r>=c[h+1]&&(!s||s(this.boxKeys[d]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[d],x1:c[h],y1:c[h+1],x2:c[h+2],y2:c[h+3]})}}}var m=this.circleCells[i];if(null!==m)for(var g=this.circles,y=0,v=m;y<v.length;y+=1){var _=v[y];if(!u.circle[_]){u.circle[_]=!0;var b=3*_;if(this._circleAndRectCollide(g[b],g[b+1],g[b+2],e,t,n,r)&&(!s||s(this.circleKeys[_]))){if(a.hitTest)return o.push(!0),!0;var x=g[b],w=g[b+1],E=g[b+2];o.push({key:this.circleKeys[_],x1:x-E,y1:w-E,x2:x+E,y2:w+E})}}}},Dn.prototype._queryCellCircle=function Es(e,t,n,r,i,o,a,s){var u=a.circle,l=a.seenUids,c=this.boxCells[i];if(null!==c)for(var f=this.bboxes,p=0,d=c;p<d.length;p+=1){var h=d[p];if(!l.box[h]){l.box[h]=!0;var m=4*h;if(this._circleAndRectCollide(u.x,u.y,u.radius,f[m+0],f[m+1],f[m+2],f[m+3])&&(!s||s(this.boxKeys[h])))return o.push(!0),!0}}var g=this.circleCells[i];if(null!==g)for(var y=this.circles,v=0,_=g;v<_.length;v+=1){var b=_[v];if(!l.circle[b]){l.circle[b]=!0;var x=3*b;if(this._circlesCollide(y[x],y[x+1],y[x+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[b])))return o.push(!0),!0}}},Dn.prototype._forEachCell=function Cs(e,t,n,r,i,o,a,s){for(var u=this._convertToXCellCoord(e),l=this._convertToYCellCoord(t),c=this._convertToXCellCoord(n),f=this._convertToYCellCoord(r),p=u;p<=c;p++)for(var d=l;d<=f;d++){var h=this.xCellCount*d+p;if(i.call(this,e,t,n,r,h,o,a,s))return}},Dn.prototype._convertToXCellCoord=function Ss(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))},Dn.prototype._convertToYCellCoord=function Ts(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))},Dn.prototype._circlesCollide=function As(e,t,n,r,i,o){var a=r-e,s=i-t,u=n+o;return a*a+s*s<u*u},Dn.prototype._circleAndRectCollide=function ks(e,t,n,r,i,o,a){var s=(o-r)/2,u=Math.abs(e-(r+s));if(s+n<u)return!1;var l=(a-i)/2,c=Math.abs(t-(i+l));if(l+n<c)return!1;if(u<=s||c<=l)return!0;var f=u-s,p=c-l;return f*f+p*p<=n*n};var Pn=Ee.properties.layout,On=new Float32Array([-Infinity,-Infinity,0,-Infinity,-Infinity,0,-Infinity,-Infinity,0,-Infinity,-Infinity,0]),Rn=100,Nn=function Nn(e,t,n){void 0===t&&(t=new Dn(e.width+2*Rn,e.height+2*Rn,25)),void 0===n&&(n=new Dn(e.width+2*Rn,e.height+2*Rn,25)),this.transform=e,this.grid=t,this.ignoredGrid=n,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+Rn,this.screenBottomBoundary=e.height+Rn,this.gridRightBoundary=e.width+2*Rn,this.gridBottomBoundary=e.height+2*Rn};Nn.prototype.placeCollisionBox=function Is(e,t,n,r,i){var o=this.projectAndGetPerspectiveRatio(r,e.anchorPointX,e.anchorPointY),a=n*o.perspectiveRatio,s=e.x1*a+o.point.x,u=e.y1*a+o.point.y,l=e.x2*a+o.point.x,c=e.y2*a+o.point.y;return!this.isInsideGrid(s,u,l,c)||!t&&this.grid.hitTest(s,u,l,c,i)?{box:[],offscreen:!1}:{box:[s,u,l,c],offscreen:this.isOffscreen(s,u,l,c)}},Nn.prototype.approximateTileDistance=function Ds(e,t,n,r,i){var o=i?1:r/this.pitchfactor,a=e.lastSegmentViewportDistance*n;return e.prevTileDistance+a+(o-1)*a*Math.abs(Math.sin(t))},Nn.prototype.placeCollisionCircles=function Ps(e,t,n,r,i,o,a,s,u,l,c,f,p){var d=[],h=this.projectAnchor(u,i.anchorX,i.anchorY),m={},g=s/24,y=i.lineOffsetX*s,v=i.lineOffsetY*s,_=new Ee.Point(i.anchorX,i.anchorY),b=H(g,a,y,v,!1,q(_,l).point,_,i,o,l,m,!0),x=!1,w=!1,E=!0,C=h.perspectiveRatio*r,S=1/(r*n),T=0,A=0;b&&(T=this.approximateTileDistance(b.first.tileDistance,b.first.angle,S,h.cameraDistance,f),A=this.approximateTileDistance(b.last.tileDistance,b.last.angle,S,h.cameraDistance,f));for(var k=0;k<e.length;k+=5){var I=e[k],D=e[k+1],P=e[k+2],O=e[k+3];if(!b||O<-T||A<O)W(e,k,!1);else{var R=this.projectPoint(u,I,D),N=P*C;if(0<d.length){var L=R.x-d[d.length-4],M=R.y-d[d.length-3];if(L*L+M*M<N*N*2)if(k+8<e.length){var B=e[k+8];if(-T<B&&B<A){W(e,k,!1);continue}}}var z=k/5;d.push(R.x,R.y,N,z),W(e,k,!0);var F=R.x-N,j=R.y-N,U=R.x+N,V=R.y+N;if(E=E&&this.isOffscreen(F,j,U,V),w=w||this.isInsideGrid(F,j,U,V),!t&&this.grid.hitTestCircle(R.x,R.y,N,p)){if(!c)return{circles:[],offscreen:!1};x=!0}}}return{circles:x||!w?[]:d,offscreen:E}},Nn.prototype.queryRenderedSymbols=function ie(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var t=[],n=Infinity,r=Infinity,i=-Infinity,o=-Infinity,a=0,s=e;a<s.length;a+=1){var u=s[a],l=new Ee.Point(u.x+Rn,u.y+Rn);n=Math.min(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.x),o=Math.max(o,l.y),t.push(l)}for(var c={},f={},p=0,d=this.grid.query(n,r,i,o).concat(this.ignoredGrid.query(n,r,i,o));p<d.length;p+=1){var h=d[p],m=h.key;if(c[m.bucketInstanceId]===undefined&&(c[m.bucketInstanceId]={}),!c[m.bucketInstanceId][m.featureIndex]){var g=[new Ee.Point(h.x1,h.y1),new Ee.Point(h.x2,h.y1),new Ee.Point(h.x2,h.y2),new Ee.Point(h.x1,h.y2)];Ee.polygonIntersectsPolygon(t,g)&&(c[m.bucketInstanceId][m.featureIndex]=!0,f[m.bucketInstanceId]===undefined&&(f[m.bucketInstanceId]=[]),f[m.bucketInstanceId].push(m.featureIndex))}}return f},Nn.prototype.insertCollisionBox=function Os(e,t,n,r,i){var o={bucketInstanceId:n,featureIndex:r,collisionGroupID:i};(t?this.ignoredGrid:this.grid).insert(o,e[0],e[1],e[2],e[3])},Nn.prototype.insertCollisionCircles=function Rs(e,t,n,r,i){for(var o=t?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},s=0;s<e.length;s+=4)o.insertCircle(a,e[s],e[s+1],e[s+2])},Nn.prototype.projectAnchor=function Ns(e,t,n){var r=[t,n,0,1];return w(r,r,e),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5,cameraDistance:r[3]}},Nn.prototype.projectPoint=function Ls(e,t,n){var r=[t,n,0,1];return w(r,r,e),new Ee.Point((r[0]/r[3]+1)/2*this.transform.width+Rn,(-r[1]/r[3]+1)/2*this.transform.height+Rn)},Nn.prototype.projectAndGetPerspectiveRatio=function Ms(e,t,n){var r=[t,n,0,1];return w(r,r,e),{point:new Ee.Point((r[0]/r[3]+1)/2*this.transform.width+Rn,(-r[1]/r[3]+1)/2*this.transform.height+Rn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5}},Nn.prototype.isOffscreen=function Bs(e,t,n,r){return n<Rn||e>=this.screenRightBoundary||r<Rn||t>this.screenBottomBoundary},Nn.prototype.isInsideGrid=function zs(e,t,n,r){return 0<=n&&e<this.gridRightBoundary&&0<=r&&t<this.gridBottomBoundary};var Ln=function Ln(e,t,n,r){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):r&&n?1:0,this.placed=n};Ln.prototype.isHidden=function Fs(){return 0===this.opacity&&!this.placed};var Mn=function Mn(e,t,n,r,i){this.text=new Ln(e?e.text:null,t,n,i),this.icon=new Ln(e?e.icon:null,t,r,i)};Mn.prototype.isHidden=function Fs(){return this.text.isHidden()&&this.icon.isHidden()};var Bn=function Bn(e,t,n){this.text=e,this.icon=t,this.skipFade=n},zn=function zn(e,t,n,r,i){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i},Fn=function Fn(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}};Fn.prototype.get=function ha(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){var t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:function(e){return e.collisionGroupID===t}}}return this.collisionGroups[e]};var jn=function jn(e,t,n){this.transform=e.clone(),this.collisionIndex=new Nn(this.transform),this.placements={},this.opacities={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new Fn(n)};jn.prototype.placeLayerTile=function js(e,t,n,r){var i=t.getBucket(e),o=t.latestFeatureIndex;if(i&&o&&e.id===i.layerIds[0]){var a=t.collisionBoxArray,s=i.layers[0].layout,u=Math.pow(2,this.transform.zoom-t.tileID.overscaledZ),l=t.tileSize/Ee.EXTENT,c=this.transform.calculatePosMatrix(t.tileID.toUnwrapped()),f=ee(c,"map"===s.get("text-pitch-alignment"),"map"===s.get("text-rotation-alignment"),this.transform,ce(t,1,this.transform.zoom)),p=ee(c,"map"===s.get("icon-pitch-alignment"),"map"===s.get("icon-rotation-alignment"),this.transform,ce(t,1,this.transform.zoom));this.retainedQueryData[i.bucketInstanceId]=new zn(i.bucketInstanceId,o,i.sourceLayerIndex,i.index,t.tileID),this.placeLayerBucket(i,c,f,p,u,l,n,t.holdingForFade(),r,a)}},jn.prototype.placeLayerBucket=function Us(e,t,n,r,i,o,a,s,u,l){var c=e.layers[0].layout,f=Ee.evaluateSizeForZoom(e.textSizeData,this.transform.zoom,Ee.properties.layout.properties["text-size"]),p=c.get("text-optional"),d=c.get("icon-optional"),h=c.get("text-allow-overlap"),m=c.get("icon-allow-overlap"),g=h&&(m||!e.hasIconData()||d),y=m&&(h||!e.hasTextData()||p),v=this.collisionGroups.get(e.sourceID);!e.collisionArrays&&l&&e.deserializeCollisionBoxes(l);for(var _=0;_<e.symbolInstances.length;_++){var b=e.symbolInstances.get(_);if(!u[b.crossTileID]){if(s){this.placements[b.crossTileID]=new Bn(!1,!1,!1);continue}var x=!1,w=!1,E=!0,C=null,S=null,T=null,A=0,k=0,I=e.collisionArrays[_];I.textFeatureIndex&&(A=I.textFeatureIndex),I.textBox&&(x=0<(C=this.collisionIndex.placeCollisionBox(I.textBox,c.get("text-allow-overlap"),o,t,v.predicate)).box.length,E=E&&C.offscreen);var D=I.textCircles;if(D){var P=e.text.placedSymbolArray.get(b.horizontalPlacedTextSymbolIndex),O=Ee.evaluateSizeForFeature(e.textSizeData,f,P);S=this.collisionIndex.placeCollisionCircles(D,c.get("text-allow-overlap"),i,o,P,e.lineVertexArray,e.glyphOffsetArray,O,t,n,a,"map"===c.get("text-pitch-alignment"),v.predicate),x=c.get("text-allow-overlap")||0<S.circles.length,E=E&&S.offscreen}I.iconFeatureIndex&&(k=I.iconFeatureIndex),I.iconBox&&(w=0<(T=this.collisionIndex.placeCollisionBox(I.iconBox,c.get("icon-allow-overlap"),o,t,v.predicate)).box.length,E=E&&T.offscreen);var R=p||0===b.numGlyphVertices&&0===b.numVerticalGlyphVertices,N=d||0===b.numIconVertices;R||N?N?R||(w=w&&x):x=w&&x:w=x=w&&x,x&&C&&this.collisionIndex.insertCollisionBox(C.box,c.get("text-ignore-placement"),e.bucketInstanceId,A,v.ID),w&&T&&this.collisionIndex.insertCollisionBox(T.box,c.get("icon-ignore-placement"),e.bucketInstanceId,k,v.ID),x&&S&&this.collisionIndex.insertCollisionCircles(S.circles,c.get("text-ignore-placement"),e.bucketInstanceId,A,v.ID),Ee.assert(0!==b.crossTileID),Ee.assert(0!==e.bucketInstanceId),this.placements[b.crossTileID]=new Bn(x||g,w||y,E||e.justReloaded),u[b.crossTileID]=!0}}e.justReloaded=!1},jn.prototype.commit=function Vs(e,t){this.commitTime=t;var n=!1,r=e&&0!==this.fadeDuration?(this.commitTime-e.commitTime)/this.fadeDuration:1,i=e?e.opacities:{};for(var o in this.placements){var a=this.placements[o],s=i[o];s?(this.opacities[o]=new Mn(s,r,a.text,a.icon),n=n||a.text!==s.text.placed||a.icon!==s.icon.placed):(this.opacities[o]=new Mn(null,r,a.text,a.icon,a.skipFade),n=n||a.text||a.icon)}for(var u in i){var l=i[u];if(!this.opacities[u]){var c=new Mn(l,r,!1,!1);c.isHidden()||(this.opacities[u]=c,n=n||l.text.placed||l.icon.placed)}}Ee.assert(!e||e.lastPlacementChangeTime!==undefined),n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},jn.prototype.updateLayerOpacities=function qs(e,t){for(var n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.getBucket(e);a&&o.latestFeatureIndex&&e.id===a.layerIds[0]&&this.updateBucketOpacities(a,n,o.collisionBoxArray)}},jn.prototype.updateBucketOpacities=function Hs(e,t,n){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasCollisionBoxData()&&e.collisionBox.collisionVertexArray.clear(),e.hasCollisionCircleData()&&e.collisionCircle.collisionVertexArray.clear();var r=e.layers[0].layout,i=new Mn(null,0,!1,!1,!0),o=r.get("text-allow-overlap"),a=r.get("icon-allow-overlap"),s=new Mn(null,0,o&&(a||!e.hasIconData()||r.get("icon-optional")),a&&(o||!e.hasTextData()||r.get("text-optional")),!0);!e.collisionArrays&&n&&(e.hasCollisionBoxData()||e.hasCollisionCircleData())&&e.deserializeCollisionBoxes(n);for(var u=0;u<e.symbolInstances.length;u++){var l=e.symbolInstances.get(u),c=t[l.crossTileID],f=this.opacities[l.crossTileID];c?f=i:f||(f=s,this.opacities[l.crossTileID]=f),t[l.crossTileID]=!0;var p=0<l.numGlyphVertices||0<l.numVerticalGlyphVertices,d=0<l.numIconVertices;if(p){for(var h=C(f.text),m=(l.numGlyphVertices+l.numVerticalGlyphVertices)/4,g=0;g<m;g++)e.text.opacityVertexArray.emplaceBack(h);e.text.placedSymbolArray.get(l.horizontalPlacedTextSymbolIndex).hidden=f.text.isHidden(),0<=l.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(l.verticalPlacedTextSymbolIndex).hidden=f.text.isHidden())}if(d){for(var y=C(f.icon),v=0;v<l.numIconVertices/4;v++)e.icon.opacityVertexArray.emplaceBack(y);e.icon.placedSymbolArray.get(u).hidden=f.icon.isHidden()}if(e.hasCollisionBoxData()||e.hasCollisionCircleData()){var _=e.collisionArrays[u];if(_){_.textBox&&E(e.collisionBox.collisionVertexArray,f.text.placed,!1),_.iconBox&&E(e.collisionBox.collisionVertexArray,f.icon.placed,!1);var b=_.textCircles;if(b&&e.hasCollisionCircleData())for(var x=0;x<b.length;x+=5){var w=c||0===b[x+4];E(e.collisionCircle.collisionVertexArray,f.text.placed,w)}}}}e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasCollisionBoxData()&&e.collisionBox.collisionVertexBuffer&&e.collisionBox.collisionVertexBuffer.updateData(e.collisionBox.collisionVertexArray),e.hasCollisionCircleData()&&e.collisionCircle.collisionVertexBuffer&&e.collisionCircle.collisionVertexBuffer.updateData(e.collisionCircle.collisionVertexArray),Ee.assert(e.text.opacityVertexArray.length===e.text.layoutVertexArray.length/4),Ee.assert(e.icon.opacityVertexArray.length===e.icon.layoutVertexArray.length/4)},jn.prototype.symbolFadeChange=function Ws(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration},jn.prototype.hasTransitions=function Gs(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration},jn.prototype.stillRecent=function Zs(e){return this.commitTime+this.fadeDuration>e},jn.prototype.setStale=function Xs(){this.stale=!0};var Un=Math.pow(2,25),Vn=Math.pow(2,24),qn=Math.pow(2,17),Hn=Math.pow(2,16),Wn=Math.pow(2,9),Gn=Math.pow(2,8),Zn=Math.pow(2,1),Xn=function Xn(){this._currentTileIndex=0,this._seenCrossTileIDs={}};Xn.prototype.continuePlacement=function Ks(e,t,n,r,i){for(;this._currentTileIndex<e.length;){var o=e[this._currentTileIndex];if(t.placeLayerTile(r,o,n,this._seenCrossTileIDs),this._currentTileIndex++,i())return!0}};var Kn=function Kn(e,t,n,r,i,o){this.placement=new jn(e,i,o),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1};Kn.prototype.isDone=function $s(){return this._done},Kn.prototype.continuePlacement=function Ks(e,t,n){for(var r=this,i=Ee.browser.now(),o=function(){var e=Ee.browser.now()-i;return!r._forceFullPlacement&&2<e};0<=this._currentPlacementIndex;){var a=t[e[this._currentPlacementIndex]],s=this.placement.collisionIndex.transform.zoom;if("symbol"===a.type&&(!a.minzoom||a.minzoom<=s)&&(!a.maxzoom||a.maxzoom>s)){if(this._inProgressLayer||(this._inProgressLayer=new Xn),this._inProgressLayer.continuePlacement(n[a.source],this.placement,this._showCollisionBoxes,a,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Kn.prototype.commit=function Vs(e,t){return this.placement.commit(e,t),this.placement};var $n=512/Ee.EXTENT/2,Yn=function Yn(e,t,n){this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var r=0;r<t.length;r++){var i=t.get(r),o=i.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,e)})}};Yn.prototype.getScaledCoordinates=function Ys(e,t){var n=t.canonical.z-this.tileID.canonical.z,r=$n/Math.pow(2,n);return{x:Math.floor((t.canonical.x*Ee.EXTENT+e.anchorX)*r),y:Math.floor((t.canonical.y*Ee.EXTENT+e.anchorY)*r)}},Yn.prototype.findMatches=function Js(e,t,n){for(var r=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),i=0;i<e.length;i++){var o=e.get(i);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,t),u=0,l=a;u<l.length;u+=1){var c=l[u];if(Math.abs(c.coord.x-s.x)<=r&&Math.abs(c.coord.y-s.y)<=r&&!n[c.crossTileID]){n[c.crossTileID]=!0,o.crossTileID=c.crossTileID;break}}}}};var Jn=function Jn(){this.maxCrossTileID=0};Jn.prototype.generate=function Qs(){return++this.maxCrossTileID};var Qn=function Qn(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Qn.prototype.handleWrapJump=function eu(e){var t=Math.round((e-this.lng)/360);if(0!==t)for(var n in this.indexes){var r=this.indexes[n],i={};for(var o in r){var a=r[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+t),i[a.tileID.key]=a}this.indexes[n]=i}this.lng=e},Qn.prototype.addBucket=function tu(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var r=0;r<t.symbolInstances.length;r++){t.symbolInstances.get(r).crossTileID=0}this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});var i=this.usedCrossTileIDs[e.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>e.overscaledZ)for(var s in a){var u=a[s];u.tileID.isChildOf(e)&&u.findMatches(t.symbolInstances,e,i)}else{var l=a[e.scaledTo(Number(o)).key];l&&l.findMatches(t.symbolInstances,e,i)}}for(var c=0;c<t.symbolInstances.length;c++){var f=t.symbolInstances.get(c);f.crossTileID||(f.crossTileID=n.generate(),i[f.crossTileID]=!0)}return this.indexes[e.overscaledZ]===undefined&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Yn(e,t.symbolInstances,t.bucketInstanceId),!0},Qn.prototype.removeBucketCrossTileIDs=function nu(e,t){for(var n in t.indexedSymbolInstances)for(var r=0,i=t.indexedSymbolInstances[n];r<i.length;r+=1){var o=i[r];delete this.usedCrossTileIDs[e][o.crossTileID]}},Qn.prototype.removeStaleBuckets=function ru(e){var t=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)e[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],t=!0)}return t};var er=function er(){this.layerIndexes={},this.crossTileIDs=new Jn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};er.prototype.addLayer=function iu(e,t,n){var r=this.layerIndexes[e.id];r===undefined&&(r=this.layerIndexes[e.id]=new Qn);var i=!1,o={};r.handleWrapJump(n);for(var a=0,s=t;a<s.length;a+=1){var u=s[a],l=u.getBucket(e);l&&e.id===l.layerIds[0]&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(u.tileID,l,this.crossTileIDs)&&(i=!0),o[l.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(i=!0),i},er.prototype.pruneUnusedLayers=function ou(e){var t={};for(var n in e.forEach(function(e){t[e]=!0}),this.layerIndexes)t[n]||delete this.layerIndexes[n]};var tr=function(e,t){return Ee.emitValidationErrors(e,t&&t.filter(function(e){return"source.canvas"!==e.identifier}))},nr=Ee.pick(In,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),rr=Ee.pick(In,["setCenter","setZoom","setBearing","setPitch"]),ir=function(r){function i(e,t){var o=this;void 0===t&&(t={}),r.call(this),this.map=e,this.dispatcher=new ht(ae(),this),this.imageManager=new ot,this.glyphManager=new ut(e._transformRequest,t.localIdeographFontFamily),this.lineAtlas=new dt(256,512),this.crossTileSymbolIndex=new er,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new Ee.ZoomHistory,this._loaded=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",Ee.getReferrer());var n=this;this._rtlTextPluginCallback=i.registerForPluginAvailability(function(e){for(var t in n.dispatcher.broadcast("loadRTLTextPlugin",e.pluginURL,e.completionCallback),n.sourceCaches)n.sourceCaches[t].reload()}),this.on("data",function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=o.sourceCaches[e.sourceId];if(t){var n=t.getSource();if(n&&n.vectorLayerIds)for(var r in o._layers){var i=o._layers[r];i.source===n.id&&o._validateLayer(i)}}}})}return r&&(i.__proto__=r),i.prototype=Object.create(r&&r.prototype),(i.prototype.constructor=i).prototype.loadURL=function o(e,t){var n=this;void 0===t&&(t={}),this.fire(new Ee.Event("dataloading",{dataType:"style"}));var r="boolean"==typeof t.validate?t.validate:!Ee.isMapboxURL(e);e=Ee.normalizeStyleURL(e,t.accessToken);var i=this.map._transformRequest(e,Ee.ResourceType.Style);this._request=Ee.getJSON(i,function(e,t){n._request=null,e?n.fire(new Ee.ErrorEvent(e)):t&&n._load(t,r)})},i.prototype.loadJSON=function a(e,t){var n=this;void 0===t&&(t={}),this.fire(new Ee.Event("dataloading",{dataType:"style"})),this._request=Ee.browser.frame(function(){n._request=null,n._load(e,!1!==t.validate)})},i.prototype._load=function u(e,t){var r=this;if(!t||!tr(this,Ee.validateStyle(e))){for(var n in this._loaded=!0,(this.stylesheet=e).sources)this.addSource(n,e.sources[n],{validate:!1});e.sprite?this._spriteRequest=ne(e.sprite,this.map._transformRequest,function(e,t){if(r._spriteRequest=null,e)r.fire(new Ee.ErrorEvent(e));else if(t)for(var n in t)r.imageManager.addImage(n,t[n]);r.imageManager.setLoaded(!0),r.fire(new Ee.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var i=se(this.stylesheet.layers);this._order=i.map(function(e){return e.id}),this._layers={};for(var o=0,a=i;o<a.length;o+=1){var s=a[o];(s=Ee.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new pt(this.stylesheet.light),this.fire(new Ee.Event("data",{dataType:"style"})),this.fire(new Ee.Event("style.load"))}},i.prototype._validateLayer=function s(e){var t=this.sourceCaches[e.source];if(t){var n=e.sourceLayer;if(n){var r=t.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(n))&&this.fire(new Ee.ErrorEvent(new Error('Source layer "'+n+'" does not exist on source "'+r.id+'" as specified by style layer "'+e.id+'"')))}}},i.prototype.loaded=function t(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()},i.prototype._serializeLayers=function l(e){for(var t=[],n=0,r=e;n<r.length;n+=1){var i=r[n],o=this._layers[i];"custom"!==o.type&&t.push(o.serialize())}return t},i.prototype.hasTransitions=function n(){if(this.light&&this.light.hasTransition())return!0;for(var e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1},i.prototype._checkLoaded=function e(){if(
!this._loaded)throw new Error("Style is not done loading")},i.prototype.update=function p(e){if(this._loaded){var t=this._changed;if(this._changed){var n=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(var i in(n.length||r.length)&&this._updateWorkerLayers(n,r),this._updatedSources){var o=this._updatedSources[i];Ee.assert("reload"===o||"clear"===o),"reload"===o?this._reloadSource(i):"clear"===o&&this._clearSource(i)}for(var a in this._updatedPaintProps)this._layers[a].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}for(var s in this.sourceCaches)this.sourceCaches[s].used=!1;for(var u=0,l=this._order;u<l.length;u+=1){var c=l[u],f=this._layers[c];f.recalculate(e),!f.isHidden(e.zoom)&&f.source&&(this.sourceCaches[f.source].used=!0)}this.light.recalculate(e),this.z=e.zoom,t&&this.fire(new Ee.Event("data",{dataType:"style"}))}},i.prototype._updateWorkerLayers=function c(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})},i.prototype._resetUpdates=function f(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},i.prototype.setState=function d(e){var t=this;if(this._checkLoaded(),tr(this,Ee.validateStyle(e)))return!1;(e=Ee.clone(e)).layers=se(e.layers);var n=ue(this.serialize(),e).filter(function(e){return!(e.command in rr)});if(0===n.length)return!1;var r=n.filter(function(e){return!(e.command in nr)});if(0<r.length)throw new Error("Unimplemented: "+r.map(function(e){return e.command}).join(", ")+".");return n.forEach(function(e){"setTransition"!==e.command&&t[e.command].apply(t,e.args)}),this.stylesheet=e,!0},i.prototype.addImage=function h(e,t){if(this.getImage(e))return this.fire(new Ee.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,t),this.fire(new Ee.Event("data",{dataType:"style"}))},i.prototype.getImage=function m(e){return this.imageManager.getImage(e)},i.prototype.removeImage=function g(e){if(!this.getImage(e))return this.fire(new Ee.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this.fire(new Ee.Event("data",{dataType:"style"}))},i.prototype.listImages=function y(){return this._checkLoaded(),this.imageManager.listImages()},i.prototype.addSource=function v(e,t,n){var r=this;if(void 0===n&&(n={}),this._checkLoaded(),this.sourceCaches[e]!==undefined)throw new Error("There is already a source with this ID");if(!t.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(t).join(", ")+".");if(!(0<=["vector","raster","geojson","video","image"].indexOf(t.type))||!this._validate(Ee.validateStyle.source,"sources."+e,t,null,n)){this.map&&this.map._collectResourceTiming&&(t.collectResourceTiming=!0);var i=this.sourceCaches[e]=new Sn(e,t,this.dispatcher);i.style=this,i.setEventedParent(this,function(){return{isSourceLoaded:r.loaded(),source:i.serialize(),sourceId:e}}),i.onAdd(this.map),this._changed=!0}},i.prototype.removeSource=function _(e){if(this._checkLoaded(),this.sourceCaches[e]===undefined)throw new Error("There is no source with this ID");for(var t in this._layers)if(this._layers[t].source===e)return this.fire(new Ee.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+t+'" is using it.')));var n=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],n.fire(new Ee.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),n.setEventedParent(null),n.clearTiles(),n.onRemove&&n.onRemove(this.map),this._changed=!0},i.prototype.setGeoJSONSourceData=function b(e,t){this._checkLoaded(),Ee.assert(this.sourceCaches[e]!==undefined,"There is no source with this ID");var n=this.sourceCaches[e].getSource();Ee.assert("geojson"===n.type),n.setData(t),this._changed=!0},i.prototype.getSource=function x(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()},i.prototype.addLayer=function w(e,t,n){void 0===n&&(n={}),this._checkLoaded();var r=e.id;if(this.getLayer(r))this.fire(new Ee.ErrorEvent(new Error('Layer with id "'+r+'" already exists on this map')));else{var i;if("custom"===e.type){if(tr(this,Ee.validateCustomStyleLayer(e)))return;i=Ee.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(r,e.source),e=Ee.clone(e),e=Ee.extend(e,{source:r})),this._validate(Ee.validateStyle.layer,"layers."+r,e,{arrayIndex:-1},n))return;i=Ee.createStyleLayer(e),this._validateLayer(i),i.setEventedParent(this,{layer:{id:r}})}var o=t?this._order.indexOf(t):this._order.length;if(t&&-1===o)this.fire(new Ee.ErrorEvent(new Error('Layer with id "'+t+'" does not exist on this map.')));else{if(this._order.splice(o,0,r),this._layerOrderChanged=!0,this._layers[r]=i,this._removedLayers[r]&&i.source&&"custom"!==i.type){var a=this._removedLayers[r];delete this._removedLayers[r],a.type!==i.type?this._updatedSources[i.source]="clear":(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause())}this._updateLayer(i),i.onAdd&&i.onAdd(this.map)}}},i.prototype.moveLayer=function E(e,t){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==t){var n=this._order.indexOf(e);this._order.splice(n,1);var r=t?this._order.indexOf(t):this._order.length;t&&-1===r?this.fire(new Ee.ErrorEvent(new Error('Layer with id "'+t+'" does not exist on this map.'))):(this._order.splice(r,0,e),this._layerOrderChanged=!0)}}else this.fire(new Ee.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},i.prototype.removeLayer=function C(e){this._checkLoaded();var t=this._layers[e];if(t){t.setEventedParent(null);var n=this._order.indexOf(e);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=t,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],t.onRemove&&t.onRemove(this.map)}else this.fire(new Ee.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},i.prototype.getLayer=function S(e){return this._layers[e]},i.prototype.setLayerZoomRange=function T(e,t,n){this._checkLoaded();var r=this.getLayer(e);r?r.minzoom===t&&r.maxzoom===n||(null!=t&&(r.minzoom=t),null!=n&&(r.maxzoom=n),this._updateLayer(r)):this.fire(new Ee.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},i.prototype.setFilter=function A(e,t,n){void 0===n&&(n={}),this._checkLoaded();var r=this.getLayer(e);if(r){if(!Ee.isEqual(r.filter,t))return null===t||t===undefined?(r.filter=undefined,void this._updateLayer(r)):void(this._validate(Ee.validateStyle.filter,"layers."+r.id+".filter",t,null,n)||(r.filter=Ee.clone(t),this._updateLayer(r)))}else this.fire(new Ee.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},i.prototype.getFilter=function k(e){return Ee.clone(this.getLayer(e).filter)},i.prototype.setLayoutProperty=function I(e,t,n,r){void 0===r&&(r={}),this._checkLoaded();var i=this.getLayer(e);i?Ee.isEqual(i.getLayoutProperty(t),n)||(i.setLayoutProperty(t,n,r),this._updateLayer(i)):this.fire(new Ee.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getLayoutProperty=function D(e,t){var n=this.getLayer(e);if(n)return n.getLayoutProperty(t);this.fire(new Ee.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},i.prototype.setPaintProperty=function P(e,t,n,r){void 0===r&&(r={}),this._checkLoaded();var i=this.getLayer(e);i?Ee.isEqual(i.getPaintProperty(t),n)||(i.setPaintProperty(t,n,r)&&this._updateLayer(i),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new Ee.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getPaintProperty=function O(e,t){return this.getLayer(e).getPaintProperty(t)},i.prototype.setFeatureState=function R(e,t){this._checkLoaded();var n=e.source,r=e.sourceLayer,i=this.sourceCaches[n],o=parseInt(e.id,10);if(i!==undefined){var a=i.getSource().type;"geojson"===a&&r?this.fire(new Ee.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||r?isNaN(o)||o<0?this.fire(new Ee.ErrorEvent(new Error("The feature id parameter must be provided and non-negative."))):i.setFeatureState(r,o,t):this.fire(new Ee.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new Ee.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},i.prototype.removeFeatureState=function N(e,t){this._checkLoaded();var n=e.source,r=this.sourceCaches[n];if(r!==undefined){var i=r.getSource().type,o="vector"===i?e.sourceLayer:undefined,a=parseInt(e.id,10);"vector"!==i||o?e.id&&isNaN(a)||a<0?this.fire(new Ee.ErrorEvent(new Error("The feature id parameter must be non-negative."))):!t||e.id?r.removeFeatureState(o,a,t):this.fire(new Ee.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):this.fire(new Ee.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new Ee.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},i.prototype.getFeatureState=function L(e){this._checkLoaded();var t=e.source,n=e.sourceLayer,r=this.sourceCaches[t],i=parseInt(e.id,10);if(r!==undefined)if("vector"!==r.getSource().type||n){if(!(isNaN(i)||i<0))return r.getFeatureState(n,i);this.fire(new Ee.ErrorEvent(new Error("The feature id parameter must be provided and non-negative.")))}else this.fire(new Ee.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));else this.fire(new Ee.ErrorEvent(new Error("The source '"+t+"' does not exist in the map's style.")))},i.prototype.getTransition=function M(){return Ee.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},i.prototype.serialize=function B(){return Ee.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:Ee.mapObject(this.sourceCaches,function(e){return e.serialize()}),layers:this._serializeLayers(this._order)},function(e){return e!==undefined})},i.prototype._updateLayer=function z(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._changed=!0},i.prototype._flattenAndSortRenderedFeatures=function F(e){for(var t=this,n=function(e){return"fill-extrusion"===t._layers[e].type},r={},i=[],o=this._order.length-1;0<=o;o--){var a=this._order[o];if(n(a)){r[a]=o;for(var s=0,u=e;s<u.length;s+=1){var l=u[s][a];if(l)for(var c=0,f=l;c<f.length;c+=1){var p=f[c];i.push(p)}}}}i.sort(function(e,t){return t.intersectionZ-e.intersectionZ});for(var d=[],h=this._order.length-1;0<=h;h--){var m=this._order[h];if(n(m))for(var g=i.length-1;0<=g;g--){var y=i[g].feature;if(r[y.layer.id]<h)break;d.push(y),i.pop()}else for(var v=0,_=e;v<_.length;v+=1){var b=_[v][m];if(b)for(var x=0,w=b;x<w.length;x+=1){var E=w[x];d.push(E.feature)}}}return d},i.prototype.queryRenderedFeatures=function j(e,t,n){t&&t.filter&&this._validate(Ee.validateStyle.filter,"queryRenderedFeatures.filter",t.filter);var r={};if(t&&t.layers){if(!Array.isArray(t.layers))return this.fire(new Ee.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var i=0,o=t.layers;i<o.length;i+=1){var a=o[i],s=this._layers[a];if(!s)return this.fire(new Ee.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be queried for features."))),[];r[s.source]=!0}}var u=[];for(var l in this.sourceCaches)t.layers&&!r[l]||u.push(re(this.sourceCaches[l],this._layers,e,t,n));return this.placement&&u.push(ie(this._layers,this.sourceCaches,e,t,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(u)},i.prototype.querySourceFeatures=function U(e,t){t&&t.filter&&this._validate(Ee.validateStyle.filter,"querySourceFeatures.filter",t.filter);var n=this.sourceCaches[e];return n?oe(n,t):[]},i.prototype.addSourceType=function V(e,t,n){return i.getSourceType(e)?n(new Error('A source type called "'+e+'" already exists.')):(i.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},n):n(null,null))},i.prototype.getLight=function q(){return this.light.getLight()},i.prototype.setLight=function H(e,t){void 0===t&&(t={}),this._checkLoaded();var n=this.light.getLight(),r=!1;for(var i in e)if(!Ee.isEqual(e[i],n[i])){r=!0;break}if(r){var o={now:Ee.browser.now(),transition:Ee.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,t),this.light.updateTransitions(o)}},i.prototype._validate=function W(e,t,n,r,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&tr(this,e.call(Ee.validateStyle,Ee.extend({key:t,style:this.serialize(),value:n,styleSpec:Ee.styleSpec},r)))},i.prototype._remove=function G(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),Ee.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[e].clearTiles();this.dispatcher.remove()},i.prototype._clearSource=function Z(e){this.sourceCaches[e].clearTiles()},i.prototype._reloadSource=function X(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()},i.prototype._updateSources=function K(e){for(var t in this.sourceCaches)this.sourceCaches[t].update(e)},i.prototype._generateCollisionBoxes=function $(){for(var e in this.sourceCaches)this._reloadSource(e)},i.prototype._updatePlacement=function Y(e,t,n,r){for(var i=!1,o=!1,a={},s=0,u=this._order;s<u.length;s+=1){var l=u[s],c=this._layers[l];if("symbol"===c.type){if(!a[c.source]){var f=this.sourceCaches[c.source];a[c.source]=f.getRenderableIds(!0).map(function(e){return f.getTileByID(e)}).sort(function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)})}var p=this.crossTileSymbolIndex.addLayer(c,a[c.source],e.center.lng);i=i||p}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var d=this._layerOrderChanged||0===n;if((d||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(Ee.browser.now()))&&(this.pauseablePlacement=new Kn(e,this._order,d,t,n,r),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,a),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,Ee.browser.now()),o=!0),i&&this.pauseablePlacement.placement.setStale()),o||i)for(var h=0,m=this._order;h<m.length;h+=1){var g=m[h],y=this._layers[g];"symbol"===y.type&&this.placement.updateLayerOpacities(y,a[y.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(Ee.browser.now())},i.prototype._releaseSymbolFadeTiles=function J(){for(var e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()},i.prototype.getImages=function Q(e,t,n){this.imageManager.getImages(t.icons,n)},i.prototype.getGlyphs=function ee(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)},i.prototype.getResource=function te(e,t,n){return Ee.makeRequest(t,n)},i}(Ee.Evented);ir.getSourceType=Et,ir.setSourceType=Ct,ir.registerForPluginAvailability=Ee.registerForPluginAvailability;var or=Ee.createLayout([{name:"a_pos",type:"Int16",components:2}]),ar="uniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main() {\n    gl_FragColor = u_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",sr="attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n",ur="uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",lr="uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n",cr="#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",fr="uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position = circle_center;\n        if (u_scale_with_map) {\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n}\n",pr="void main() {\n    gl_FragColor = vec4(1.0);\n}\n",dr="attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n",hr="#pragma mapbox: define highp float weight\n\nuniform highp float u_intensity;\nvarying vec2 v_extrude;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",mr="#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\n\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n    #pragma mapbox: initialize mediump float radius\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos = vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position = u_matrix * pos;\n}\n",gr="uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",yr="uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n",vr="\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        gl_FragColor *= .1;\n    }\n}",_r="attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field boxes in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n    gl_Position.xy += a_extrude * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n}\n",br="uniform float u_overscale_factor;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    vec4 color = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        color = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        color *= .2;\n    }\n\n    float extrude_scale_length = length(v_extrude_scale);\n    float extrude_length = length(v_extrude) * extrude_scale_length;\n    float stroke_width = 15.0 * extrude_scale_length / u_overscale_factor;\n    float radius = v_radius * extrude_scale_length;\n\n    float distance_to_edge = abs(extrude_length - radius);\n    float opacity_t = smoothstep(-stroke_width, 0.0, -distance_to_edge);\n\n    gl_FragColor = opacity_t * color;\n}\n",xr="attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\n\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field circles in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n\n    highp float padding_factor = 1.2; // Pad the vertices slightly to make room for anti-alias blur\n    gl_Position.xy += a_extrude * u_extrude_scale * padding_factor * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n    v_radius = abs(a_extrude.y); // We don't pitch the circles, so both units of the extrusion vector are equal in magnitude to the radius\n\n    v_extrude = a_extrude * padding_factor;\n    v_extrude_scale = u_extrude_scale * u_camera_to_center_distance * collision_perspective_ratio;\n}\n",wr="uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",Er="attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n",Cr="#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",Sr="attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n",Tr="#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",Ar="attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n",kr="\nuniform vec2 u_texsize;\nuniform sampler2D u_image;\nuniform float u_fade;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_fade) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",
Ir="uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform vec4 u_scale;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float pixelRatio = u_scale.x;\n    float tileRatio = u_scale.y;\n    float fromScale = u_scale.z;\n    float toScale = u_scale.w;\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    vec2 display_size_a = vec2((pattern_br_a.x - pattern_tl_a.x) / pixelRatio, (pattern_br_a.y - pattern_tl_a.y) / pixelRatio);\n    vec2 display_size_b = vec2((pattern_br_b.x - pattern_tl_b.x) / pixelRatio, (pattern_br_b.y - pattern_tl_b.y) / pixelRatio);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, fromScale * display_size_a, tileRatio, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, toScale * display_size_b, tileRatio, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n",Dr="uniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_fade) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",Pr="uniform mat4 u_matrix;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform vec4 u_scale;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float pixelRatio = u_scale.x;\n    float tileZoomRatio = u_scale.y;\n    float fromScale = u_scale.z;\n    float toScale = u_scale.w;\n\n    vec2 display_size_a = vec2((pattern_br_a.x - pattern_tl_a.x) / pixelRatio, (pattern_br_a.y - pattern_tl_a.y) / pixelRatio);\n    vec2 display_size_b = vec2((pattern_br_b.x - pattern_tl_b.x) / pixelRatio, (pattern_br_b.y - pattern_tl_b.y) / pixelRatio);\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, fromScale * display_size_a, tileZoomRatio, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, toScale * display_size_b, tileZoomRatio, a_pos);\n}\n",Or="varying vec4 v_color;\n\nvoid main() {\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",Rr="uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\nuniform float u_vertical_gradient;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize highp float base\n    #pragma mapbox: initialize highp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    vec3 normal = a_normal_ed.xyz;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (normal.y != 0.0) {\n        // This avoids another branching statement, but multiplies by a constant of 0.84 if no vertical gradient,\n        // and otherwise calculates the gradient based on base + height\n        directional *= (\n            (1.0 - u_vertical_gradient) +\n            (u_vertical_gradient * clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0)));\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n",Nr="uniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_fade);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",Lr="uniform mat4 u_matrix;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_height_factor;\nuniform vec4 u_scale;\nuniform float u_vertical_gradient;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float pixelRatio = u_scale.x;\n    float tileRatio = u_scale.y;\n    float fromScale = u_scale.z;\n    float toScale = u_scale.w;\n\n    vec3 normal = a_normal_ed.xyz;\n    float edgedistance = a_normal_ed.w;\n\n    vec2 display_size_a = vec2((pattern_br_a.x - pattern_tl_a.x) / pixelRatio, (pattern_br_a.y - pattern_tl_a.y) / pixelRatio);\n    vec2 display_size_b = vec2((pattern_br_b.x - pattern_tl_b.x) / pixelRatio, (pattern_br_b.y - pattern_tl_b.y) / pixelRatio);\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = normal.x == 1.0 && normal.y == 0.0 && normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, fromScale * display_size_a, tileRatio, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, toScale * display_size_b, tileRatio, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (normal.y != 0.0) {\n        // This avoids another branching statement, but multiplies by a constant of 0.84 if no vertical gradient,\n        // and otherwise calculates the gradient based on base + height\n        directional *= (\n            (1.0 - u_vertical_gradient) +\n            (u_vertical_gradient * clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0)));\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n",Mr="uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",Br="uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n",zr="#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D u_image;\nvarying vec2 v_pos;\nuniform vec2 u_dimension;\nuniform float u_zoom;\nuniform float u_maxzoom;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data = texture2D(u_image, coord) * 255.0;\n    return (data.r + data.g * 256.0 + data.b * 256.0 * 256.0) / 4.0;\n}\n\nvoid main() {\n    vec2 epsilon = 1.0 / u_dimension;\n\n    // queried pixels:\n    // +-----------+\n    // |   |   |   |\n    // | a | b | c |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | d | e | f |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | g | h | i |\n    // |   |   |   |\n    // +-----------+\n\n    float a = getElevation(v_pos + vec2(-epsilon.x, -epsilon.y), 0.0);\n    float b = getElevation(v_pos + vec2(0, -epsilon.y), 0.0);\n    float c = getElevation(v_pos + vec2(epsilon.x, -epsilon.y), 0.0);\n    float d = getElevation(v_pos + vec2(-epsilon.x, 0), 0.0);\n    float e = getElevation(v_pos, 0.0);\n    float f = getElevation(v_pos + vec2(epsilon.x, 0), 0.0);\n    float g = getElevation(v_pos + vec2(-epsilon.x, epsilon.y), 0.0);\n    float h = getElevation(v_pos + vec2(0, epsilon.y), 0.0);\n    float i = getElevation(v_pos + vec2(epsilon.x, epsilon.y), 0.0);\n\n    // here we divide the x and y slopes by 8 * pixel size\n    // where pixel size (aka meters/pixel) is:\n    // circumference of the world / (pixels per tile * number of tiles)\n    // which is equivalent to: 8 * 40075016.6855785 / (512 * pow(2, u_zoom))\n    // which can be reduced to: pow(2, 19.25619978527 - u_zoom)\n    // we want to vertically exaggerate the hillshading though, because otherwise\n    // it is barely noticeable at low zooms. to do this, we multiply this by some\n    // scale factor pow(2, (u_zoom - u_maxzoom) * a) where a is an arbitrary value\n    // Here we use a=0.3 which works out to the expression below. see \n    // nickidlugash's awesome breakdown for more info\n    // https://github.com/mapbox/mapbox-gl-js/pull/5286#discussion_r148419556\n    float exaggeration = u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;\n\n    vec2 deriv = vec2(\n        (c + f + f + i) - (a + d + d + g),\n        (g + h + h + i) - (a + b + b + c)\n    ) /  pow(2.0, (u_zoom - u_maxzoom) * exaggeration + 19.2562 - u_zoom);\n\n    gl_FragColor = clamp(vec4(\n        deriv.x / 2.0 + 0.5,\n        deriv.y / 2.0 + 0.5,\n        1.0,\n        1.0), 0.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",Fr="uniform mat4 u_matrix;\nuniform vec2 u_dimension;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    highp vec2 epsilon = 1.0 / u_dimension;\n    float scale = (u_dimension.x - 2.0) / u_dimension.x;\n    v_pos = (a_texture_pos / 8192.0) * scale + epsilon;\n}\n",jr="uniform sampler2D u_image;\nvarying vec2 v_pos;\n\nuniform vec2 u_latrange;\nuniform vec2 u_light;\nuniform vec4 u_shadow;\nuniform vec4 u_highlight;\nuniform vec4 u_accent;\n\n#define PI 3.141592653589793\n\nvoid main() {\n    vec4 pixel = texture2D(u_image, v_pos);\n\n    vec2 deriv = ((pixel.rg * 2.0) - 1.0);\n\n    // We divide the slope by a scale factor based on the cosin of the pixel's approximate latitude\n    // to account for mercator projection distortion. see #4807 for details\n    float scaleFactor = cos(radians((u_latrange[0] - u_latrange[1]) * (1.0 - v_pos.y) + u_latrange[1]));\n    // We also multiply the slope by an arbitrary z-factor of 1.25\n    float slope = atan(1.25 * length(deriv) / scaleFactor);\n    float aspect = deriv.x != 0.0 ? atan(deriv.y, -deriv.x) : PI / 2.0 * (deriv.y > 0.0 ? 1.0 : -1.0);\n\n    float intensity = u_light.x;\n    // We add PI to make this property match the global light object, which adds PI/2 to the light's azimuthal\n    // position property to account for 0deg corresponding to north/the top of the viewport in the style spec\n    // and the original shader was written to accept (-illuminationDirection - 90) as the azimuthal.\n    float azimuth = u_light.y + PI;\n\n    // We scale the slope exponentially based on intensity, using a calculation similar to\n    // the exponential interpolation function in the style spec:\n    // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/expression/definitions/interpolate.js#L217-L228\n    // so that higher intensity values create more opaque hillshading.\n    float base = 1.875 - intensity * 1.75;\n    float maxValue = 0.5 * PI;\n    float scaledSlope = intensity != 0.5 ? ((pow(base, slope) - 1.0) / (pow(base, maxValue) - 1.0)) * maxValue : slope;\n\n    // The accent color is calculated with the cosine of the slope while the shade color is calculated with the sine\n    // so that the accent color's rate of change eases in while the shade color's eases out.\n    float accent = cos(scaledSlope);\n    // We multiply both the accent and shade color by a clamped intensity value\n    // so that intensities >= 0.5 do not additionally affect the color values\n    // while intensity values < 0.5 make the overall color more transparent.\n    vec4 accent_color = (1.0 - accent) * u_accent * clamp(intensity * 2.0, 0.0, 1.0);\n    float shade = abs(mod((aspect + azimuth) / PI + 0.5, 2.0) - 1.0);\n    vec4 shade_color = mix(u_shadow, u_highlight, shade) * sin(scaledSlope) * clamp(intensity * 2.0, 0.0, 1.0);\n    gl_FragColor = accent_color * (1.0 - shade_color.a) + shade_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",Ur="uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = a_texture_pos / 8192.0;\n}\n",Vr="#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",qr="\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_linesofar;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n",Hr="\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nuniform sampler2D u_image;\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    // For gradient lines, v_lineprogress is the ratio along the entire line,\n    // scaled to [0, 2^15), and the gradient ramp is stored in a texture.\n    vec4 color = texture2D(u_image, vec2(v_lineprogress, 0.5));\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",Wr="\n// the attribute conveying progress along a line is scaled to [0, 2^15)\n#define MAX_LINE_DISTANCE 32767.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_lineprogress = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0 / MAX_LINE_DISTANCE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n",Gr="uniform vec2 u_texsize;\nuniform float u_fade;\nuniform mediump vec4 u_scale;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float pixelRatio = u_scale.x;\n    float tileZoomRatio = u_scale.y;\n    float fromScale = u_scale.z;\n    float toScale = u_scale.w;\n\n    vec2 display_size_a = vec2((pattern_br_a.x - pattern_tl_a.x) / pixelRatio, (pattern_br_a.y - pattern_tl_a.y) / pixelRatio);\n    vec2 display_size_b = vec2((pattern_br_b.x - pattern_tl_b.x) / pixelRatio, (pattern_br_b.y - pattern_tl_b.y) / pixelRatio);\n\n    vec2 pattern_size_a = vec2(display_size_a.x * fromScale / tileZoomRatio, display_size_a.y);\n    vec2 pattern_size_b = vec2(display_size_b.x * toScale / tileZoomRatio, display_size_b.y);\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / pattern_size_b.x, 1.0);\n\n    // v_normal.y is 0 at the midpoint of the line, -1 at the lower edge, 1 at the upper edge\n    // we clamp the line width outset to be between 0 and half the pattern height plus padding (2.0)\n    // to ensure we don't sample outside the designated symbol on the sprite sheet.\n    // 0.5 is added to shift the component to be bounded between 0 and 1 for interpolation of\n    // the texture coordinate\n    float y_a = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (pattern_size_a.y + 2.0) / 2.0) / pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (pattern_size_b.y + 2.0) / 2.0) / pattern_size_b.y);\n    vec2 pos_a = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",
Zr="// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform vec2 u_gl_units_to_pixels;\nuniform mediump float u_ratio;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n    // float tileRatio = u_scale.y;\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n",Xr="\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",Kr="// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n",$r="uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",Yr="uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n",Jr="uniform sampler2D u_texture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = opacity * v_fade_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",Qr="const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n\n    float size;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 256.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 256.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n            0.5 + 0.5 * distance_ratio,\n            0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n            4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n\n    v_tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n}\n",ei="#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex = v_data0.xy;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n    float fade_opacity = v_data1[2];\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",ti="const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 256.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 256.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n        0.5 + 0.5 * distance_ratio,\n        0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n        4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0 = vec2(tex.x, tex.y);\n    v_data1 = vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n",ni=S("#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n","#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity = int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_color(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"),ri=S(ar,sr),ii=S(ur,lr),oi=S(cr,fr),ai=S(pr,dr),si=S(hr,mr),ui=S(gr,yr),li=S(vr,_r),ci=S(br,xr),fi=S(wr,Er),pi=S(Cr,Sr),di=S(Tr,Ar),hi=S(kr,Ir),mi=S(Dr,Pr),gi=S(Or,Rr),yi=S(Nr,Lr),vi=S(Mr,Br),_i=S(zr,Fr),bi=S(jr,Ur),xi=S(Vr,qr),wi=S(Hr,Wr),Ei=S(Gr,Zr),Ci=S(Xr,Kr),Si=S($r,Yr),Ti=S(Jr,Qr),Ai=S(ei,ti),ki=Object.freeze({prelude:ni,background:ri,backgroundPattern:ii,circle:oi,clippingMask:ai,heatmap:si,heatmapTexture:ui,collisionBox:li,collisionCircle:ci,debug:fi,fill:pi,fillOutline:di,fillOutlinePattern:hi,fillPattern:mi,fillExtrusion:gi,fillExtrusionPattern:yi,extrusionTexture:vi,hillshadePrepare:_i,hillshade:bi,line:xi,lineGradient:wi,linePattern:Ei,lineSDF:Ci,raster:Si,symbolIcon:Ti,symbolSDF:Ai}),Ii=function Ii(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Ii.prototype.bind=function Ta(e,t,n,r,i,o,a,s){this.context=e;for(var u=this.boundPaintVertexBuffers.length!==r.length,l=0;!u&&l<r.length;l++)this.boundPaintVertexBuffers[l]!==r[l]&&(u=!0);var c=!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==n||u||this.boundIndexBuffer!==i||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s;!e.extVertexArrayObject||c?this.freshBind(t,n,r,i,o,a,s):(e.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind())},Ii.prototype.freshBind=function au(e,t,n,r,i,o,a){var s,u=e.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=l.currentNumAttributes||0;for(var f=u;f<s;f++)Ee.assert(0!==f),c.disableVertexAttribArray(f)}t.enableAttributes(c,e);for(var p=0,d=n;p<d.length;p+=1){d[p].enableAttributes(c,e)}o&&o.enableAttributes(c,e),a&&a.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,i);for(var h=0,m=n;h<m.length;h+=1){var g=m[h];g.bind(),g.setVertexAttribPointers(c,e,i)}o&&(o.bind(),o.setVertexAttribPointers(c,e,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,e,i)),l.currentNumAttributes=u},Ii.prototype.destroy=function Za(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Di=function Kt(e,t,n,r,i){var o=e.gl;this.program=o.createProgram();var a=n.defines().concat("#define DEVICE_PIXEL_RATIO "+Ee.browser.devicePixelRatio.toFixed(1));i&&a.push("#define OVERDRAW_INSPECTOR;");var s=a.concat(ni.fragmentSource,t.fragmentSource).join("\n"),u=a.concat(ni.vertexSource,t.vertexSource).join("\n"),l=o.createShader(o.FRAGMENT_SHADER);o.shaderSource(l,s),o.compileShader(l),Ee.assert(o.getShaderParameter(l,o.COMPILE_STATUS),o.getShaderInfoLog(l)),o.attachShader(this.program,l);var c=o.createShader(o.VERTEX_SHADER);o.shaderSource(c,u),o.compileShader(c),Ee.assert(o.getShaderParameter(c,o.COMPILE_STATUS),o.getShaderInfoLog(c)),o.attachShader(this.program,c);for(var f=n.layoutAttributes||[],p=0;p<f.length;p++)o.bindAttribLocation(this.program,p,f[p].name);o.linkProgram(this.program),Ee.assert(o.getProgramParameter(this.program,o.LINK_STATUS),o.getProgramInfoLog(this.program)),this.numAttributes=o.getProgramParameter(this.program,o.ACTIVE_ATTRIBUTES),this.attributes={};for(var d={},h=0;h<this.numAttributes;h++){var m=o.getActiveAttrib(this.program,h);m&&(this.attributes[m.name]=o.getAttribLocation(this.program,m.name))}for(var g=o.getProgramParameter(this.program,o.ACTIVE_UNIFORMS),y=0;y<g;y++){var v=o.getActiveUniform(this.program,y);v&&(d[v.name]=o.getUniformLocation(this.program,v.name))}this.fixedUniforms=r(e,d),this.binderUniforms=n.getUniforms(e,d)};Di.prototype.draw=function _e(e,t,n,r,i,o,a,s,u,l,c,f,p,d,h,m){var g,y=e.gl;for(var v in e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(r),e.setColorMode(i),e.setCullFace(o),this.fixedUniforms)this.fixedUniforms[v].set(a[v]);d&&d.setUniforms(e,this.binderUniforms,f,{zoom:p});for(var _=(g={},g[y.LINES]=2,g[y.TRIANGLES]=3,g[y.LINE_STRIP]=1,g)[t],b=0,x=c.get();b<x.length;b+=1){var w=x[b],E=w.vaos||(w.vaos={});(E[s]||(E[s]=new Ii)).bind(e,this,u,d?d.getPaintVertexBuffers():[],l,w.vertexOffset,h,m),y.drawElements(t,w.primitiveLength*_,y.UNSIGNED_SHORT,w.primitiveOffset*_*2)}};var Pi=function(e,t,n){var r=t.style.light,i=r.properties.get("position"),o=[i.x,i.y,i.z],a=Ee.create();"viewport"===r.properties.get("anchor")&&Ee.fromRotation(a,-t.transform.angle),Ee.transformMat3(o,o,a);var s=r.properties.get("color");return{u_matrix:e,u_lightpos:o,u_lightintensity:r.properties.get("intensity"),u_lightcolor:[s.r,s.g,s.b],u_vertical_gradient:+n}},Oi=function(e,t,n,r,i,o){return Ee.extend(Pi(e,t,n),I(i,t,o),{u_height_factor:-Math.pow(2,r.overscaledZ)/o.tileSize/8})},Ri=function(e,t,n){var r=Ee.create$1();Ee.ortho(r,0,e.width,e.height,0,0,1);var i=e.context.gl;return{u_matrix:r,u_world:[i.drawingBufferWidth,i.drawingBufferHeight],u_image:n,u_opacity:t}},Ni=function(e){return{u_matrix:e}},Li=function(e,t,n,r){return Ee.extend(Ni(e),I(n,t,r))},Mi=function(e,t){return{u_matrix:e,u_world:t}},Bi=function(e,t,n,r,i){return Ee.extend(Li(e,t,n,r),{u_world:i})},zi=function(e,t,n,r){var i,o,a=e.transform;if("map"===r.paint.get("circle-pitch-alignment")){var s=ce(n,1,a.zoom);i=!0,o=[s,s]}else i=!1,o=a.pixelsToGLUnits;return{u_camera_to_center_distance:a.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(t.posMatrix,n,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+i,u_extrude_scale:o}},Fi=function(e,t){return{u_matrix:new Ee.UniformMatrix4f(e,t.u_matrix),u_camera_to_center_distance:new Ee.Uniform1f(e,t.u_camera_to_center_distance),u_pixels_to_tile_units:new Ee.Uniform1f(e,t.u_pixels_to_tile_units),u_extrude_scale:new Ee.Uniform2f(e,t.u_extrude_scale),u_overscale_factor:new Ee.Uniform1f(e,t.u_overscale_factor)}},ji=function(e,t,n){var r=ce(n,1,t.zoom),i=Math.pow(2,t.zoom-n.tileID.overscaledZ),o=n.tileID.overscaleFactor();return{u_matrix:e,u_camera_to_center_distance:t.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[t.pixelsToGLUnits[0]/(r*i),t.pixelsToGLUnits[1]/(r*i)],u_overscale_factor:o}},Ui=function(e,t){return{u_matrix:e,u_color:t}},Vi=function(e){return{u_matrix:e}},qi=function(e,t,n,r){return{u_matrix:e,u_extrude_scale:ce(t,1,n),u_intensity:r}},Hi=function(e,t,n,r){var i=Ee.create$1();Ee.ortho(i,0,e.width,e.height,0,0,1);var o=e.context.gl;return{u_matrix:i,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:n,u_color_ramp:r,u_opacity:t.paint.get("heatmap-opacity")}},Wi=function(e,t,n){var r=n.paint.get("hillshade-shadow-color"),i=n.paint.get("hillshade-highlight-color"),o=n.paint.get("hillshade-accent-color"),a=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(a-=e.transform.angle);var s=!e.options.moving;return{u_matrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped(),s),u_image:0,u_latrange:P(e,t.tileID),u_light:[n.paint.get("hillshade-exaggeration"),a],u_shadow:r,u_highlight:i,u_accent:o}},Gi=function(e,t){Ee.assert(e.dem);var n=e.dem.stride,r=Ee.create$1();return Ee.ortho(r,0,Ee.EXTENT,-Ee.EXTENT,0,0,1),Ee.translate(r,r,[0,-Ee.EXTENT,0]),{u_matrix:r,u_image:1,u_dimension:[n,n],u_zoom:e.tileID.overscaledZ,u_maxzoom:t}},Zi=function(e,t,n){var r=e.transform;return{u_matrix:R(e,t,n),u_ratio:1/ce(t,1,r.zoom),u_gl_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},Xi=function(e,t,n){return Ee.extend(Zi(e,t,n),{u_image:0})},Ki=function(e,t,n,r){var i=e.transform,o=O(t,i);return{u_matrix:R(e,t,n),u_texsize:t.imageAtlasTexture.size,u_ratio:1/ce(t,1,i.zoom),u_image:0,u_scale:[Ee.browser.devicePixelRatio,o,r.fromScale,r.toScale],u_fade:r.t,u_gl_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}},$i=function(e,t,n,r,i){
var o=e.transform,a=e.lineAtlas,s=O(t,o),u="round"===n.layout.get("line-cap"),l=a.getDash(r.from,u),c=a.getDash(r.to,u),f=l.width*i.fromScale,p=c.width*i.toScale;return Ee.extend(Zi(e,t,n),{u_patternscale_a:[s/f,-l.height/2],u_patternscale_b:[s/p,-c.height/2],u_sdfgamma:a.width/(256*Math.min(f,p)*Ee.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:l.y,u_tex_y_b:c.y,u_mix:i.t})},Yi=function(e,t,n,r,i){return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:F(i.paint.get("raster-saturation")),u_contrast_factor:L(i.paint.get("raster-contrast")),u_spin_weights:N(i.paint.get("raster-hue-rotate"))}},Ji=function(e,t,n,r,i,o,a,s,u,l){var c=i.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:c.width/c.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_gl_coord_matrix:s,u_is_text:+u,u_pitch_with_map:+r,u_texsize:l,u_texture:0}},Qi=function(e,t,n,r,i,o,a,s,u,l,c){var f=i.transform;return Ee.extend(Ji(e,t,n,r,i,o,a,s,u,l),{u_gamma_scale:r?Math.cos(f._pitch)*f.cameraToCenterDistance:1,u_is_halo:+c})},eo=function(e,t,n){return{u_matrix:e,u_opacity:t,u_color:n}},to=function(e,t,n,r,i,o){return Ee.extend(D(r,o,n,i),{u_matrix:e,u_opacity:t})},no={fillExtrusion:function(e,t){return{u_matrix:new Ee.UniformMatrix4f(e,t.u_matrix),u_lightpos:new Ee.Uniform3f(e,t.u_lightpos),u_lightintensity:new Ee.Uniform1f(e,t.u_lightintensity),u_lightcolor:new Ee.Uniform3f(e,t.u_lightcolor),u_vertical_gradient:new Ee.Uniform1f(e,t.u_vertical_gradient)}},fillExtrusionPattern:function(e,t){return{u_matrix:new Ee.UniformMatrix4f(e,t.u_matrix),u_lightpos:new Ee.Uniform3f(e,t.u_lightpos),u_lightintensity:new Ee.Uniform1f(e,t.u_lightintensity),u_lightcolor:new Ee.Uniform3f(e,t.u_lightcolor),u_vertical_gradient:new Ee.Uniform1f(e,t.u_vertical_gradient),u_height_factor:new Ee.Uniform1f(e,t.u_height_factor),u_image:new Ee.Uniform1i(e,t.u_image),u_texsize:new Ee.Uniform2f(e,t.u_texsize),u_pixel_coord_upper:new Ee.Uniform2f(e,t.u_pixel_coord_upper),u_pixel_coord_lower:new Ee.Uniform2f(e,t.u_pixel_coord_lower),u_scale:new Ee.Uniform4f(e,t.u_scale),u_fade:new Ee.Uniform1f(e,t.u_fade)}},extrusionTexture:function(e,t){return{u_matrix:new Ee.UniformMatrix4f(e,t.u_matrix),u_world:new Ee.Uniform2f(e,t.u_world),u_image:new Ee.Uniform1i(e,t.u_image),u_opacity:new Ee.Uniform1f(e,t.u_opacity)}},fill:function(e,t){return{u_matrix:new Ee.UniformMatrix4f(e,t.u_matrix)}},fillPattern:function(e,t){return{u_matrix:new Ee.UniformMatrix4f(e,t.u_matrix),u_image:new Ee.Uniform1i(e,t.u_image),u_texsize:new Ee.Uniform2f(e,t.u_texsize),u_pixel_coord_upper:new Ee.Uniform2f(e,t.u_pixel_coord_upper),u_pixel_coord_lower:new Ee.Uniform2f(e,t.u_pixel_coord_lower),u_scale:new Ee.Uniform4f(e,t.u_scale),u_fade:new Ee.Uniform1f(e,t.u_fade)}},fillOutline:function(e,t){return{u_matrix:new Ee.UniformMatrix4f(e,t.u_matrix),u_world:new Ee.Uniform2f(e,t.u_world)}},fillOutlinePattern:function(e,t){return{u_matrix:new Ee.UniformMatrix4f(e,t.u_matrix),u_world:new Ee.Uniform2f(e,t.u_world),u_image:new Ee.Uniform1i(e,t.u_image),u_texsize:new Ee.Uniform2f(e,t.u_texsize),u_pixel_coord_upper:new Ee.Uniform2f(e,t.u_pixel_coord_upper),u_pixel_coord_lower:new Ee.Uniform2f(e,t.u_pixel_coord_lower),u_scale:new Ee.Uniform4f(e,t.u_scale),u_fade:new Ee.Uniform1f(e,t.u_fade)}},circle:function(e,t){return{u_camera_to_center_distance:new Ee.Uniform1f(e,t.u_camera_to_center_distance),u_scale_with_map:new Ee.Uniform1i(e,t.u_scale_with_map),u_pitch_with_map:new Ee.Uniform1i(e,t.u_pitch_with_map),u_extrude_scale:new Ee.Uniform2f(e,t.u_extrude_scale),u_matrix:new Ee.UniformMatrix4f(e,t.u_matrix)}},collisionBox:Fi,collisionCircle:Fi,debug:function(e,t){return{u_color:new Ee.UniformColor(e,t.u_color),u_matrix:new Ee.UniformMatrix4f(e,t.u_matrix)}},clippingMask:function(e,t){return{u_matrix:new Ee.UniformMatrix4f(e,t.u_matrix)}},heatmap:function(e,t){return{u_extrude_scale:new Ee.Uniform1f(e,t.u_extrude_scale),u_intensity:new Ee.Uniform1f(e,t.u_intensity),u_matrix:new Ee.UniformMatrix4f(e,t.u_matrix)}},heatmapTexture:function(e,t){return{u_matrix:new Ee.UniformMatrix4f(e,t.u_matrix),u_world:new Ee.Uniform2f(e,t.u_world),u_image:new Ee.Uniform1i(e,t.u_image),u_color_ramp:new Ee.Uniform1i(e,t.u_color_ramp),u_opacity:new Ee.Uniform1f(e,t.u_opacity)}},hillshade:function(e,t){return{u_matrix:new Ee.UniformMatrix4f(e,t.u_matrix),u_image:new Ee.Uniform1i(e,t.u_image),u_latrange:new Ee.Uniform2f(e,t.u_latrange),u_light:new Ee.Uniform2f(e,t.u_light),u_shadow:new Ee.UniformColor(e,t.u_shadow),u_highlight:new Ee.UniformColor(e,t.u_highlight),u_accent:new Ee.UniformColor(e,t.u_accent)}},hillshadePrepare:function(e,t){return{u_matrix:new Ee.UniformMatrix4f(e,t.u_matrix),u_image:new Ee.Uniform1i(e,t.u_image),u_dimension:new Ee.Uniform2f(e,t.u_dimension),u_zoom:new Ee.Uniform1f(e,t.u_zoom),u_maxzoom:new Ee.Uniform1f(e,t.u_maxzoom)}},line:function(e,t){return{u_matrix:new Ee.UniformMatrix4f(e,t.u_matrix),u_ratio:new Ee.Uniform1f(e,t.u_ratio),u_gl_units_to_pixels:new Ee.Uniform2f(e,t.u_gl_units_to_pixels)}},lineGradient:function(e,t){return{u_matrix:new Ee.UniformMatrix4f(e,t.u_matrix),u_ratio:new Ee.Uniform1f(e,t.u_ratio),u_gl_units_to_pixels:new Ee.Uniform2f(e,t.u_gl_units_to_pixels),u_image:new Ee.Uniform1i(e,t.u_image)}},linePattern:function(e,t){return{u_matrix:new Ee.UniformMatrix4f(e,t.u_matrix),u_texsize:new Ee.Uniform2f(e,t.u_texsize),u_ratio:new Ee.Uniform1f(e,t.u_ratio),u_image:new Ee.Uniform1i(e,t.u_image),u_gl_units_to_pixels:new Ee.Uniform2f(e,t.u_gl_units_to_pixels),u_scale:new Ee.Uniform4f(e,t.u_scale),u_fade:new Ee.Uniform1f(e,t.u_fade)}},lineSDF:function(e,t){return{u_matrix:new Ee.UniformMatrix4f(e,t.u_matrix),u_ratio:new Ee.Uniform1f(e,t.u_ratio),u_gl_units_to_pixels:new Ee.Uniform2f(e,t.u_gl_units_to_pixels),u_patternscale_a:new Ee.Uniform2f(e,t.u_patternscale_a),u_patternscale_b:new Ee.Uniform2f(e,t.u_patternscale_b),u_sdfgamma:new Ee.Uniform1f(e,t.u_sdfgamma),u_image:new Ee.Uniform1i(e,t.u_image),u_tex_y_a:new Ee.Uniform1f(e,t.u_tex_y_a),u_tex_y_b:new Ee.Uniform1f(e,t.u_tex_y_b),u_mix:new Ee.Uniform1f(e,t.u_mix)}},raster:function(e,t){return{u_matrix:new Ee.UniformMatrix4f(e,t.u_matrix),u_tl_parent:new Ee.Uniform2f(e,t.u_tl_parent),u_scale_parent:new Ee.Uniform1f(e,t.u_scale_parent),u_buffer_scale:new Ee.Uniform1f(e,t.u_buffer_scale),u_fade_t:new Ee.Uniform1f(e,t.u_fade_t),u_opacity:new Ee.Uniform1f(e,t.u_opacity),u_image0:new Ee.Uniform1i(e,t.u_image0),u_image1:new Ee.Uniform1i(e,t.u_image1),u_brightness_low:new Ee.Uniform1f(e,t.u_brightness_low),u_brightness_high:new Ee.Uniform1f(e,t.u_brightness_high),u_saturation_factor:new Ee.Uniform1f(e,t.u_saturation_factor),u_contrast_factor:new Ee.Uniform1f(e,t.u_contrast_factor),u_spin_weights:new Ee.Uniform3f(e,t.u_spin_weights)}},symbolIcon:function(e,t){return{u_is_size_zoom_constant:new Ee.Uniform1i(e,t.u_is_size_zoom_constant),u_is_size_feature_constant:new Ee.Uniform1i(e,t.u_is_size_feature_constant),u_size_t:new Ee.Uniform1f(e,t.u_size_t),u_size:new Ee.Uniform1f(e,t.u_size),u_camera_to_center_distance:new Ee.Uniform1f(e,t.u_camera_to_center_distance),u_pitch:new Ee.Uniform1f(e,t.u_pitch),u_rotate_symbol:new Ee.Uniform1i(e,t.u_rotate_symbol),u_aspect_ratio:new Ee.Uniform1f(e,t.u_aspect_ratio),u_fade_change:new Ee.Uniform1f(e,t.u_fade_change),u_matrix:new Ee.UniformMatrix4f(e,t.u_matrix),u_label_plane_matrix:new Ee.UniformMatrix4f(e,t.u_label_plane_matrix),u_gl_coord_matrix:new Ee.UniformMatrix4f(e,t.u_gl_coord_matrix),u_is_text:new Ee.Uniform1f(e,t.u_is_text),u_pitch_with_map:new Ee.Uniform1i(e,t.u_pitch_with_map),u_texsize:new Ee.Uniform2f(e,t.u_texsize),u_texture:new Ee.Uniform1i(e,t.u_texture)}},symbolSDF:function(e,t){return{u_is_size_zoom_constant:new Ee.Uniform1i(e,t.u_is_size_zoom_constant),u_is_size_feature_constant:new Ee.Uniform1i(e,t.u_is_size_feature_constant),u_size_t:new Ee.Uniform1f(e,t.u_size_t),u_size:new Ee.Uniform1f(e,t.u_size),u_camera_to_center_distance:new Ee.Uniform1f(e,t.u_camera_to_center_distance),u_pitch:new Ee.Uniform1f(e,t.u_pitch),u_rotate_symbol:new Ee.Uniform1i(e,t.u_rotate_symbol),u_aspect_ratio:new Ee.Uniform1f(e,t.u_aspect_ratio),u_fade_change:new Ee.Uniform1f(e,t.u_fade_change),u_matrix:new Ee.UniformMatrix4f(e,t.u_matrix),u_label_plane_matrix:new Ee.UniformMatrix4f(e,t.u_label_plane_matrix),u_gl_coord_matrix:new Ee.UniformMatrix4f(e,t.u_gl_coord_matrix),u_is_text:new Ee.Uniform1f(e,t.u_is_text),u_pitch_with_map:new Ee.Uniform1i(e,t.u_pitch_with_map),u_texsize:new Ee.Uniform2f(e,t.u_texsize),u_texture:new Ee.Uniform1i(e,t.u_texture),u_gamma_scale:new Ee.Uniform1f(e,t.u_gamma_scale),u_is_halo:new Ee.Uniform1f(e,t.u_is_halo)}},background:function(e,t){return{u_matrix:new Ee.UniformMatrix4f(e,t.u_matrix),u_opacity:new Ee.Uniform1f(e,t.u_opacity),u_color:new Ee.UniformColor(e,t.u_color)}},backgroundPattern:function(e,t){return{u_matrix:new Ee.UniformMatrix4f(e,t.u_matrix),u_opacity:new Ee.Uniform1f(e,t.u_opacity),u_image:new Ee.Uniform1i(e,t.u_image),u_pattern_tl_a:new Ee.Uniform2f(e,t.u_pattern_tl_a),u_pattern_br_a:new Ee.Uniform2f(e,t.u_pattern_br_a),u_pattern_tl_b:new Ee.Uniform2f(e,t.u_pattern_tl_b),u_pattern_br_b:new Ee.Uniform2f(e,t.u_pattern_br_b),u_texsize:new Ee.Uniform2f(e,t.u_texsize),u_mix:new Ee.Uniform1f(e,t.u_mix),u_pattern_size_a:new Ee.Uniform2f(e,t.u_pattern_size_a),u_pattern_size_b:new Ee.Uniform2f(e,t.u_pattern_size_b),u_scale_a:new Ee.Uniform1f(e,t.u_scale_a),u_scale_b:new Ee.Uniform1f(e,t.u_scale_b),u_pixel_coord_upper:new Ee.Uniform2f(e,t.u_pixel_coord_upper),u_pixel_coord_lower:new Ee.Uniform2f(e,t.u_pixel_coord_lower),u_tile_units_to_pixels:new Ee.Uniform1f(e,t.u_tile_units_to_pixels)}}},ro=Ee.identity(new Float32Array(16)),io=Ee.properties.layout,oo={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},ao={symbol:K,circle:Y,heatmap:J,line:he,fill:me,"fill-extrusion":_e,hillshade:xe,raster:Se,background:Ae,debug:ke,custom:Pe},so=function so(e,t){this.context=new Cn(e),this.transform=t,this._tileTextures={},this.setup(),this.numSublayers=Sn.maxUnderzooming+Sn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new Ee.ProgramConfiguration,this.crossTileSymbolIndex=new er};so.prototype.resize=function su(e,t){var n=this.context.gl;if(this.width=e*Ee.browser.devicePixelRatio,this.height=t*Ee.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,i=this.style._order;r<i.length;r+=1){var o=i[r];this.style._layers[o].resize()}this.depthRbo&&(n.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},so.prototype.setup=function uu(){var e=this.context,t=new Ee.StructArrayLayout2i4;t.emplaceBack(0,0),t.emplaceBack(Ee.EXTENT,0),t.emplaceBack(0,Ee.EXTENT),t.emplaceBack(Ee.EXTENT,Ee.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(t,or.members),this.tileExtentSegments=Ee.SegmentVector.simpleSegment(0,0,4,2);var n=new Ee.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(Ee.EXTENT,0),n.emplaceBack(0,Ee.EXTENT),n.emplaceBack(Ee.EXTENT,Ee.EXTENT),this.debugBuffer=e.createVertexBuffer(n,or.members),this.debugSegments=Ee.SegmentVector.simpleSegment(0,0,4,5);var r=new Ee.StructArrayLayout4i8;r.emplaceBack(0,0,0,0),r.emplaceBack(Ee.EXTENT,0,Ee.EXTENT,0),r.emplaceBack(0,Ee.EXTENT,0,Ee.EXTENT),r.emplaceBack(Ee.EXTENT,Ee.EXTENT,Ee.EXTENT,Ee.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(r,Ee.rasterBoundsAttributes.members),this.rasterBoundsSegments=Ee.SegmentVector.simpleSegment(0,0,4,2);var i=new Ee.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(1,0),i.emplaceBack(0,1),i.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(i,or.members),this.viewportSegments=Ee.SegmentVector.simpleSegment(0,0,4,2);var o=new Ee.StructArrayLayout1ui2;o.emplaceBack(0),o.emplaceBack(1),o.emplaceBack(3),o.emplaceBack(2),o.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(o);var a=new Ee.StructArrayLayout3ui6;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(a);var s=this.context.gl;this.stencilClearMode=new gn({func:s.ALWAYS,mask:0},0,255,s.ZERO,s.ZERO,s.ZERO)},so.prototype.clearStencil=function lu(){var e=this.context,t=e.gl,n=Ee.create$1();Ee.ortho(n,0,this.width,this.height,0,0,1),Ee.scale(n,n,[t.drawingBufferWidth,t.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,t.TRIANGLES,dn.disabled,this.stencilClearMode,bn.disabled,En.disabled,Vi(n),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},so.prototype._renderTileClippingMasks=function cu(e){var t=this.context,n=t.gl;t.setColorMode(bn.disabled),t.setDepthMode(dn.disabled);var r=this.useProgram("clippingMask"),i=1;this._tileClippingMaskIDs={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o],u=this._tileClippingMaskIDs[s.key]=i++;r.draw(t,n.TRIANGLES,dn.disabled,new gn({func:n.ALWAYS,mask:0},u,255,n.KEEP,n.KEEP,n.REPLACE),bn.disabled,En.disabled,Vi(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}},so.prototype.stencilModeForClipping=function fu(e){var t=this.context.gl;return new gn({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)},so.prototype.colorModeForRenderPass=function pu(){var e=this.context.gl;if(this._showOverdrawInspector){var t=1/8;return new bn([e.CONSTANT_COLOR,e.ONE],new Ee.Color(t,t,t,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?bn.unblended:bn.alphaBlended},so.prototype.depthModeForSublayer=function du(e,t,n){var r=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new dn(n||this.context.gl.LEQUAL,t,[r,r])},so.prototype.render=function hu(e,t){this.style=e,this.options=t,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(Ee.browser.now());var n=this.style._order,r=this.style.sourceCaches;for(var i in r){var o=r[i];o.used&&o.prepare(this.context)}var a,s={},u={},l={};for(var c in r){var f=r[c];s[c]=f.getVisibleCoordinates(),u[c]=s[c].slice().reverse(),l[c]=f.getVisibleCoordinates(!0).reverse()}for(var p in r){var d=r[p],h=d.getSource();if("raster"===h.type||"raster-dem"===h.type){for(var m=[],g=0,y=s[p];g<y.length;g+=1){var v=y[g];m.push(d.getTile(v))}j(m,this.context)}}this.renderPass="offscreen",this.depthRboNeedsClear=!0;for(var _=0,b=n;_<b.length;_+=1){var x=b[_],w=this.style._layers[x];if(w.hasOffscreenPass()&&!w.isHidden(this.transform.zoom)){var E=u[w.source];("custom"===w.type||E.length)&&this.renderLayer(this,r[w.source],w,E)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:t.showOverdrawInspector?Ee.Color.black:Ee.Color.transparent,depth:1}),this._showOverdrawInspector=t.showOverdrawInspector,this.depthRange=(e._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque",this.currentLayer=n.length-1;0<=this.currentLayer;this.currentLayer--){var C=this.style._layers[n[this.currentLayer]],S=r[C.source],T=s[C.source];C.source!==a&&S&&(this.clearStencil(),S.getSource().isTileClipped&&this._renderTileClippingMasks(T)),this.renderLayer(this,S,C,T),a=C.source}for(this.renderPass="translucent",this.currentLayer=0,a=null;this.currentLayer<n.length;this.currentLayer++){var A=this.style._layers[n[this.currentLayer]],k=r[A.source],I=("symbol"===A.type?l:u)[A.source];A.source!==a&&k&&(this.clearStencil(),k.getSource().isTileClipped&&this._renderTileClippingMasks(s[A.source])),this.renderLayer(this,k,A,I),a=A.source}if(this.options.showTileBoundaries)for(var D in r){ao.debug(this,r[D],s[D]);break}this.setCustomLayerDefaults()},so.prototype.setupOffscreenDepthRenderbuffer=function mu(){var e=this.context;this.depthRbo||(this.depthRbo=e.createRenderbuffer(e.gl.DEPTH_COMPONENT16,this.width,this.height))},so.prototype.renderLayer=function gu(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||r.length)&&(this.id=n.id,ao[n.type](e,t,n,r))},so.prototype.translatePosMatrix=function yu(e,t,n,r,i){if(!n[0]&&!n[1])return e;var o=i?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(o){var a=Math.sin(o),s=Math.cos(o);n=[n[0]*s-n[1]*a,n[0]*a+n[1]*s]}var u=[i?n[0]:ce(t,n[0],this.transform.zoom),i?n[1]:ce(t,n[1],this.transform.zoom),0],l=new Float32Array(16);return Ee.translate(l,e,u),l},so.prototype.saveTileTexture=function vu(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]},so.prototype.getTileTexture=function _u(e){var t=this._tileTextures[e];return t&&0<t.length?t.pop():null},so.prototype.isPatternMissing=function bu(e){if(!e)return!1;var t=this.imageManager.getPattern(e.from),n=this.imageManager.getPattern(e.to);return!t||!n},so.prototype.useProgram=function xu(e,t){void 0===t&&(t=this.emptyProgramConfiguration),this.cache=this.cache||{};var n=""+e+(t.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new Di(this.context,ki[e],t,no[e],this._showOverdrawInspector)),this.cache[n]},so.prototype.setCustomLayerDefaults=function wu(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},so.prototype.setBaseState=function Eu(){var e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)};var uo=function uo(e,t,n){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=n===undefined||n,this._minZoom=e||0,this._maxZoom=t||22,this.setMaxBounds(),this.width=0,this.height=0,this._center=new Ee.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},lo={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};uo.prototype.clone=function e(){var e=new uo(this._minZoom,this._maxZoom,this._renderWorldCopies);return e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e._center=this._center,e.zoom=this.zoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._calcMatrices(),e},lo.minZoom.get=function(){return this._minZoom},lo.minZoom.set=function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))},lo.maxZoom.get=function(){return this._maxZoom},lo.maxZoom.set=function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))},lo.renderWorldCopies.get=function(){return this._renderWorldCopies},lo.renderWorldCopies.set=function(e){e===undefined?e=!0:null===e&&(e=!1),this._renderWorldCopies=e},lo.worldSize.get=function(){return this.tileSize*this.scale},lo.centerPoint.get=function(){return this.size._div(2)},lo.size.get=function(){return new Ee.Point(this.width,this.height)},lo.bearing.get=function(){return-this.angle/Math.PI*180},lo.bearing.set=function(e){var t=-Ee.wrap(e,-180,180)*Math.PI/180;this.angle!==t&&(this._unmodified=!1,this.angle=t,this._calcMatrices(),this.rotationMatrix=Ee.create$2(),Ee.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},lo.pitch.get=function(){return this._pitch/Math.PI*180},lo.pitch.set=function(e){var t=Ee.clamp(e,0,60)/180*Math.PI;this._pitch!==t&&(this._unmodified=!1,this._pitch=t,this._calcMatrices())},lo.fov.get=function(){return this._fov/Math.PI*180},lo.fov.set=function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())},lo.zoom.get=function(){return this._zoom},lo.zoom.set=function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())},lo.center.get=function(){return this._center},lo.center.set=function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())},uo.prototype.coveringZoomLevel=function Cu(e){return(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize))},uo.prototype.getVisibleUnwrappedCoordinates=function Su(e){var t=[new Ee.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var n=this.pointCoordinate(new Ee.Point(0,0)),r=this.pointCoordinate(new Ee.Point(this.width,0)),i=this.pointCoordinate(new Ee.Point(this.width,this.height)),o=this.pointCoordinate(new Ee.Point(0,this.height)),a=Math.floor(Math.min(n.x,r.x,i.x,o.x)),s=Math.floor(Math.max(n.x,r.x,i.x,o.x)),u=1,l=a-u;l<=s+u;l++)0!==l&&t.push(new Ee.UnwrappedTileID(l,e));return t},uo.prototype.coveringTiles=function Tu(e){var t=this.coveringZoomLevel(e),n=t;if(e.minzoom!==undefined&&t<e.minzoom)return[];e.maxzoom!==undefined&&t>e.maxzoom&&(t=e.maxzoom);var r=Ee.MercatorCoordinate.fromLngLat(this.center),i=Math.pow(2,t),o=new Ee.Point(i*r.x-.5,i*r.y-.5);return Oe(t,[this.pointCoordinate(new Ee.Point(0,0)),this.pointCoordinate(new Ee.Point(this.width,0)),this.pointCoordinate(new Ee.Point(this.width,this.height)),this.pointCoordinate(new Ee.Point(0,this.height))],e.reparseOverscaled?n:t,this._renderWorldCopies).sort(function(e,t){return o.dist(e.canonical)-o.dist(t.canonical)})},uo.prototype.resize=function su(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()},lo.unmodified.get=function(){return this._unmodified},uo.prototype.zoomScale=function Au(e){return Math.pow(2,e)},uo.prototype.scaleZoom=function ku(e){return Math.log(e)/Math.LN2},uo.prototype.project=function q(e){var t=Ee.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new Ee.Point(Ee.mercatorXfromLng(e.lng)*this.worldSize,Ee.mercatorYfromLat(t)*this.worldSize)},uo.prototype.unproject=function Iu(e){return new Ee.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},lo.point.get=function(){return this.project(this.center)},uo.prototype.setLocationAtPoint=function Du(e,t){var n=this.pointCoordinate(t),r=this.pointCoordinate(this.centerPoint),i=this.locationCoordinate(e),o=new Ee.MercatorCoordinate(i.x-(n.x-r.x),i.y-(n.y-r.y));this.center=this.coordinateLocation(o),this._renderWorldCopies&&(this.center=this.center.wrap())},uo.prototype.locationPoint=function Pu(e){return this.coordinatePoint(this.locationCoordinate(e))},uo.prototype.pointLocation=function Ou(e){return this.coordinateLocation(this.pointCoordinate(e))},uo.prototype.locationCoordinate=function Ru(e){return Ee.MercatorCoordinate.fromLngLat(e)},uo.prototype.coordinateLocation=function Nu(e){return e.toLngLat()},uo.prototype.pointCoordinate=function Lu(e){var t=0,n=[e.x,e.y,0,1],r=[e.x,e.y,1,1];Ee.transformMat4(n,n,this.pixelMatrixInverse),Ee.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],o=r[3],a=n[0]/i,s=r[0]/o,u=n[1]/i,l=r[1]/o,c=n[2]/i,f=r[2]/o,p=c===f?0:(t-c)/(f-c);return new Ee.MercatorCoordinate(Ee.number(a,s,p)/this.worldSize,Ee.number(u,l,p)/this.worldSize)},uo.prototype.coordinatePoint=function Mu(e){var t=[e.x*this.worldSize,e.y*this.worldSize,0,1];return Ee.transformMat4(t,t,this.pixelMatrix),new Ee.Point(t[0]/t[3],t[1]/t[3])},uo.prototype.getBounds=function Bu(){return(new Ee.LngLatBounds).extend(this.pointLocation(new Ee.Point(0,0))).extend(this.pointLocation(new Ee.Point(this.width,0))).extend(this.pointLocation(new Ee.Point(this.width,this.height))).extend(this.pointLocation(new Ee.Point(0,this.height)))},uo.prototype.getMaxBounds=function zu(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new Ee.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},uo.prototype.setMaxBounds=function Fu(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},uo.prototype.calculatePosMatrix=function ju(e,t){void 0===t&&(t=!1);var n=e.key,r=t?this._alignedPosMatrixCache:this._posMatrixCache;if(r[n])return r[n];var i=e.canonical,o=this.worldSize/this.zoomScale(i.z),a=i.x+Math.pow(2,i.z)*e.wrap,s=Ee.identity(new Float64Array(16));return Ee.translate(s,s,[a*o,i.y*o,0]),Ee.scale(s,s,[o/Ee.EXTENT,o/Ee.EXTENT,1]),Ee.multiply(s,t?this.alignedProjMatrix:this.projMatrix,s),r[n]=new Float32Array(s),r[n]},uo.prototype.customLayerMatrix=function Uu(){return this.mercatorMatrix.slice()},uo.prototype._constrain=function Vu(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,t,n,r,i=-90,o=90,a=-180,s=180,u=this.size,l=this._unmodified;if(this.latRange){var c=this.latRange;i=Ee.mercatorYfromLat(c[1])*this.worldSize,e=(o=Ee.mercatorYfromLat(c[0])*this.worldSize)-i<u.y?u.y/(o-i):0}if(this.lngRange){var f=this.lngRange;a=Ee.mercatorXfromLng(f[0])*this.worldSize,t=(s=Ee.mercatorXfromLng(f[1])*this.worldSize)-a<u.x?u.x/(s-a):0}var p=this.point,d=Math.max(t||0,e||0);if(d)return this.center=this.unproject(new Ee.Point(t?(s+a)/2:p.x,e?(o+i)/2:p.y)),
this.zoom+=this.scaleZoom(d),this._unmodified=l,void(this._constraining=!1);if(this.latRange){var h=p.y,m=u.y/2;h-m<i&&(r=i+m),o<h+m&&(r=o-m)}if(this.lngRange){var g=p.x,y=u.x/2;g-y<a&&(n=a+y),s<g+y&&(n=s-y)}n===undefined&&r===undefined||(this.center=this.unproject(new Ee.Point(n!==undefined?n:p.x,r!==undefined?r:p.y))),this._unmodified=l,this._constraining=!1}},uo.prototype._calcMatrices=function qu(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,t=Math.PI/2+this._pitch,n=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-t-e),r=this.point,i=r.x,o=r.y,a=1.01*(Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance),s=new Float64Array(16);Ee.perspective(s,this._fov,this.width/this.height,1,a),Ee.scale(s,s,[1,-1,1]),Ee.translate(s,s,[0,0,-this.cameraToCenterDistance]),Ee.rotateX(s,s,this._pitch),Ee.rotateZ(s,s,this.angle),Ee.translate(s,s,[-i,-o,0]),this.mercatorMatrix=Ee.scale([],s,[this.worldSize,this.worldSize,this.worldSize]),Ee.scale(s,s,[1,1,Ee.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=s;var u=this.width%2/2,l=this.height%2/2,c=Math.cos(this.angle),f=Math.sin(this.angle),p=i-Math.round(i)+c*u+f*l,d=o-Math.round(o)+c*l+f*u,h=new Float64Array(s);if(Ee.translate(h,h,[.5<p?p-1:p,.5<d?d-1:d,0]),this.alignedProjMatrix=h,s=Ee.create$1(),Ee.scale(s,s,[this.width/2,-this.height/2,1]),Ee.translate(s,s,[1,-1,0]),this.pixelMatrix=Ee.multiply(new Float64Array(16),s,this.projMatrix),!(s=Ee.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=s,this._posMatrixCache={},this._alignedPosMatrixCache={}}},uo.prototype.maxPitchScaleFactor=function Hu(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new Ee.Point(0,0)),t=[e.x*this.worldSize,e.y*this.worldSize,0,1];return Ee.transformMat4(t,t,this.pixelMatrix)[3]/this.cameraToCenterDistance},uo.prototype.getCameraPoint=function Wu(){var e=this._pitch,t=Math.tan(e)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new Ee.Point(0,t))},uo.prototype.getCameraQueryGeometry=function Gu(e){var t=this.getCameraPoint();if(1===e.length)return[e[0],t];for(var n=t.x,r=t.y,i=t.x,o=t.y,a=0,s=e;a<s.length;a+=1){var u=s[a];n=Math.min(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.x),o=Math.max(o,u.y)}return[new Ee.Point(n,r),new Ee.Point(i,r),new Ee.Point(i,o),new Ee.Point(n,o),new Ee.Point(n,r)]},Object.defineProperties(uo.prototype,lo);var co=function co(){Ee.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=Me(this._updateHashUnthrottled.bind(this),300)};co.prototype.addTo=function Zu(e){return this._map=e,Ee.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},co.prototype.remove=function Ba(){return Ee.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},co.prototype.getHashString=function Xu(e){var t=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),o=Math.round(t.lng*i)/i,a=Math.round(t.lat*i)/i,s=this._map.getBearing(),u=this._map.getPitch(),l="";return l+=e?"#/"+o+"/"+a+"/"+n:"#"+n+"/"+a+"/"+o,(s||u)&&(l+="/"+Math.round(10*s)/10),u&&(l+="/"+Math.round(u)),l},co.prototype._onHashChange=function Ku(){var e=Ee.window.location.hash.replace("#","").split("/");return 3<=e.length&&(this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:+(e[3]||0),pitch:+(e[4]||0)}),!0)},co.prototype._updateHashUnthrottled=function $u(){var e=this.getHashString();try{Ee.window.history.replaceState(Ee.window.history.state,"",e)}catch(t){}};var fo=function(a){function e(e,t,n,r){void 0===r&&(r={});var i=Ye.mousePos(t.getCanvasContainer(),n),o=t.unproject(i);a.call(this,e,Ee.extend({point:i,lngLat:o,originalEvent:n},r)),this._defaultPrevented=!1,this.target=t}a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype);var t={defaultPrevented:{configurable:!0}};return(e.prototype.constructor=e).prototype.preventDefault=function n(){this._defaultPrevented=!0},t.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,t),e}(Ee.Event),po=function(s){function e(e,t,n){var r=Ye.touchPos(t.getCanvasContainer(),n),i=r.map(function(e){return t.unproject(e)}),o=r.reduce(function(e,t,n,r){return e.add(t.div(r.length))},new Ee.Point(0,0)),a=t.unproject(o);s.call(this,e,{points:r,point:o,lngLats:i,lngLat:a,originalEvent:n}),this._defaultPrevented=!1}s&&(e.__proto__=s),e.prototype=Object.create(s&&s.prototype);var t={defaultPrevented:{configurable:!0}};return(e.prototype.constructor=e).prototype.preventDefault=function n(){this._defaultPrevented=!0},t.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,t),e}(Ee.Event),ho=function(r){function e(e,t,n){r.call(this,e,{originalEvent:n}),this._defaultPrevented=!1}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype);var t={defaultPrevented:{configurable:!0}};return(e.prototype.constructor=e).prototype.preventDefault=function n(){this._defaultPrevented=!0},t.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,t),e}(Ee.Event),mo=4.000244140625,go=.01,yo=1/450,vo=2,_o=function _o(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,Ee.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};_o.prototype.isEnabled=function Yu(){return!!this._enabled},_o.prototype.isActive=function Ju(){return!!this._active},_o.prototype.isZooming=function Qu(){return!!this._zooming},_o.prototype.enable=function el(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},_o.prototype.disable=function tl(){this.isEnabled()&&(this._enabled=!1)},_o.prototype.onWheel=function nl(e){if(this.isEnabled()){var t=e.deltaMode===Ee.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,n=Ee.browser.now(),r=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==t&&t%mo==0?this._type="wheel":0!==t&&Math.abs(t)<4?this._type="trackpad":400<r?(this._type=null,this._lastValue=t,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*t)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,t+=this._lastValue)),e.shiftKey&&t&&(t/=4),this._type&&(this._lastWheelEvent=e,this._delta-=t,this.isActive()||this._start(e)),e.preventDefault()}},_o.prototype._onTimeout=function rl(e){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(e)},_o.prototype._start=function il(e){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this._zooming=!0,this._map.fire(new Ee.Event("movestart",{originalEvent:e})),this._map.fire(new Ee.Event("zoomstart",{originalEvent:e})),this._finishTimeout&&clearTimeout(this._finishTimeout);var t=Ye.mousePos(this._el,e);this._around=Ee.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(t)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},_o.prototype._onScrollFrame=function ol(){var e=this;if(this._frameId=null,this.isActive()){var t=this._map.transform;if(0!==this._delta){var n="wheel"===this._type&&Math.abs(this._delta)>mo?yo:go,r=vo/(1+Math.exp(-Math.abs(this._delta*n)));this._delta<0&&0!==r&&(r=1/r);var i="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):t.scale;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(i*r))),"wheel"===this._type&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var o="number"==typeof this._targetZoom?this._targetZoom:t.zoom,a=this._startZoom,s=this._easing,u=!1;if("wheel"===this._type&&a&&s){Ee.assert(s&&"number"==typeof a);var l=Math.min((Ee.browser.now()-this._lastWheelEventTime)/200,1),c=s(l);t.zoom=Ee.number(a,o,c),l<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):u=!0}else t.zoom=o,u=!0;t.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new Ee.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new Ee.Event("zoom",{originalEvent:this._lastWheelEvent})),u&&(this._active=!1,this._finishTimeout=setTimeout(function(){e._zooming=!1,e._map.fire(new Ee.Event("zoomend",{originalEvent:e._lastWheelEvent})),e._map.fire(new Ee.Event("moveend",{originalEvent:e._lastWheelEvent})),delete e._targetZoom},200))}},_o.prototype._smoothOutEasing=function al(e){var t=Ee.ease;if(this._prevEase){var n=this._prevEase,r=(Ee.browser.now()-n.start)/n.duration,i=n.easing(r+.01)-n.easing(r),o=.27/Math.sqrt(i*i+1e-4)*.01,a=Math.sqrt(.0729-o*o);t=Ee.bezier(o,a,.25,1)}return this._prevEase={start:Ee.browser.now(),duration:e,easing:t},t};var bo=function bo(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1,Ee.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};bo.prototype.isEnabled=function Yu(){return!!this._enabled},bo.prototype.isActive=function Ju(){return!!this._active},bo.prototype.enable=function el(){this.isEnabled()||(this._enabled=!0)},bo.prototype.disable=function tl(){this.isEnabled()&&(this._enabled=!1)},bo.prototype.onMouseDown=function sl(e){this.isEnabled()&&e.shiftKey&&0===e.button&&(Ee.window.document.addEventListener("mousemove",this._onMouseMove,!1),Ee.window.document.addEventListener("keydown",this._onKeyDown,!1),Ee.window.document.addEventListener("mouseup",this._onMouseUp,!1),Ye.disableDrag(),this._startPos=this._lastPos=Ye.mousePos(this._el,e),this._active=!0)},bo.prototype._onMouseMove=function ul(e){var t=Ye.mousePos(this._el,e);if(!(this._lastPos.equals(t)||!this._box&&t.dist(this._startPos)<this._clickTolerance)){var n=this._startPos;this._lastPos=t,this._box||(this._box=Ye.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var r=Math.min(n.x,t.x),i=Math.max(n.x,t.x),o=Math.min(n.y,t.y),a=Math.max(n.y,t.y);Ye.setTransform(this._box,"translate("+r+"px,"+o+"px)"),this._box.style.width=i-r+"px",this._box.style.height=a-o+"px"}},bo.prototype._onMouseUp=function ll(e){if(0===e.button){var t=this._startPos,n=Ye.mousePos(this._el,e);this._finish(),Ye.suppressClick(),t.x===n.x&&t.y===n.y?this._fireEvent("boxzoomcancel",e):this._map.fitScreenCoordinates(t,n,this._map.getBearing(),{linear:!0}).fire(new Ee.Event("boxzoomend",{originalEvent:e}))}},bo.prototype._onKeyDown=function cl(e){27===e.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",e))},bo.prototype._finish=function fl(){this._active=!1,Ee.window.document.removeEventListener("mousemove",this._onMouseMove,!1),Ee.window.document.removeEventListener("keydown",this._onKeyDown,!1),Ee.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(Ye.remove(this._box),this._box=null),Ye.enableDrag(),delete this._startPos,delete this._lastPos},bo.prototype._fireEvent=function pl(e,t){return this._map.fire(new Ee.Event(e,{originalEvent:t}))};var xo=.25,wo=Ee.bezier(0,0,xo,1),Eo=180,Co=720,So=function So(e,t){this._map=e,this._el=t.element||e.getCanvasContainer(),this._state="disabled",this._button=t.button||"right",this._bearingSnap=t.bearingSnap||0,this._pitchWithRotate=!1!==t.pitchWithRotate,Ee.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};So.prototype.isEnabled=function Yu(){return"disabled"!==this._state},So.prototype.isActive=function Ju(){return"active"===this._state},So.prototype.enable=function el(){this.isEnabled()||(this._state="enabled")},So.prototype.disable=function tl(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},So.prototype.onMouseDown=function sl(e){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=Ye.mouseButton(e),this._eventButton!==(e.ctrlKey?0:2))return}else{if(e.ctrlKey||0!==Ye.mouseButton(e))return;this._eventButton=0}Ye.disableDrag(),Ee.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),Ee.window.document.addEventListener("mouseup",this._onMouseUp),Ee.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[Ee.browser.now(),this._map.getBearing()]],this._startPos=this._lastPos=Ye.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},So.prototype._onMouseMove=function ul(e){var t=Ye.mousePos(this._el,e);this._lastPos.equals(t)||(this._lastMoveEvent=e,this._lastPos=t,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",e),this._fireEvent("movestart",e),this._pitchWithRotate&&this._fireEvent("pitchstart",e)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},So.prototype._onDragFrame=function dl(){this._frameId=null;var e=this._lastMoveEvent;if(e){var t=this._map.transform,n=this._startPos,r=this._lastPos,i=.8*(n.x-r.x),o=-.5*(n.y-r.y),a=t.bearing-i,s=t.pitch-o,u=this._inertia,l=u[u.length-1];this._drainInertiaBuffer(),u.push([Ee.browser.now(),this._map._normalizeBearing(a,l[1])]),t.bearing=a,this._pitchWithRotate&&(this._fireEvent("pitch",e),t.pitch=s),this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._startPos=this._lastPos}},So.prototype._onMouseUp=function ll(e){if(Ye.mouseButton(e)===this._eventButton)switch(this._state){case"active":this._state="enabled",Ye.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(e);break;case"pending":this._state="enabled",this._unbind();break;default:Ee.assert(!1)}},So.prototype._onBlur=function hl(e){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",e),this._pitchWithRotate&&this._fireEvent("pitchend",e),this._fireEvent("moveend",e);break;case"pending":this._state="enabled",this._unbind();break;default:Ee.assert(!1)}},So.prototype._unbind=function ml(){Ee.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),Ee.window.document.removeEventListener("mouseup",this._onMouseUp),Ee.window.removeEventListener("blur",this._onBlur),Ye.enableDrag()},So.prototype._deactivate=function gl(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._lastPos},So.prototype._inertialRotate=function yl(e){var t=this;this._fireEvent("rotateend",e),this._drainInertiaBuffer();var n=this._map,r=n.getBearing(),i=this._inertia,o=function(){Math.abs(r)<t._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:e}):t._fireEvent("moveend",e),t._pitchWithRotate&&t._fireEvent("pitchend",e)};if(i.length<2)o();else{var a=i[0],s=i[i.length-1],u=i[i.length-2],l=n._normalizeBearing(r,u[1]),c=s[1]-a[1],f=c<0?-1:1,p=(s[0]-a[0])/1e3;if(0!==c&&0!==p){var d=Math.abs(c*(xo/p));Eo<d&&(d=Eo);var h=d/(Co*xo);l+=f*d*(h/2),Math.abs(n._normalizeBearing(l,0))<this._bearingSnap&&(l=n._normalizeBearing(0,l)),n.rotateTo(l,{duration:1e3*h,easing:wo,noMoveStart:!0},{originalEvent:e})}else o()}},So.prototype._fireEvent=function pl(e,t){return this._map.fire(new Ee.Event(e,t?{originalEvent:t}:{}))},So.prototype._drainInertiaBuffer=function vl(){for(var e=this._inertia,t=Ee.browser.now(),n=160;0<e.length&&t-e[0][0]>n;)e.shift()};var To=.3,Ao=Ee.bezier(0,0,To,1),ko=1400,Io=2500,Do=function Do(e,t){this._map=e,this._el=e.getCanvasContainer(),this._state="disabled",this._clickTolerance=t.clickTolerance||1,Ee.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};Do.prototype.isEnabled=function Yu(){return"disabled"!==this._state},Do.prototype.isActive=function Ju(){return"active"===this._state},Do.prototype.enable=function el(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")},Do.prototype.disable=function tl(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},Do.prototype.onMouseDown=function sl(e){"enabled"===this._state&&(e.ctrlKey||0!==Ye.mouseButton(e)||(Ye.addEventListener(Ee.window.document,"mousemove",this._onMove,{capture:!0}),Ye.addEventListener(Ee.window.document,"mouseup",this._onMouseUp),this._start(e)))},Do.prototype.onTouchStart=function _l(e){"enabled"===this._state&&(1<e.touches.length||(Ye.addEventListener(Ee.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),Ye.addEventListener(Ee.window.document,"touchend",this._onTouchEnd),this._start(e)))},Do.prototype._start=function il(e){Ee.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._lastPos=Ye.mousePos(this._el,e),this._inertia=[[Ee.browser.now(),this._startPos]]},Do.prototype._onMove=function bl(e){e.preventDefault();var t=Ye.mousePos(this._el,e);this._lastPos.equals(t)||"pending"===this._state&&t.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=e,this._lastPos=t,this._drainInertiaBuffer(),this._inertia.push([Ee.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._fireEvent("dragstart",e),this._fireEvent("movestart",e)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},Do.prototype._onDragFrame=function dl(){this._frameId=null;var e=this._lastMoveEvent;if(e){var t=this._map.transform;t.setLocationAtPoint(t.pointLocation(this._startPos),this._lastPos),this._fireEvent("drag",e),this._fireEvent("move",e),this._startPos=this._lastPos,delete this._lastMoveEvent}},Do.prototype._onMouseUp=function ll(e){if(0===Ye.mouseButton(e))switch(this._state){case"active":this._state="enabled",Ye.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(e);break;case"pending":this._state="enabled",this._unbind();break;default:Ee.assert(!1)}},Do.prototype._onTouchEnd=function xl(e){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(e);break;case"pending":this._state="enabled",this._unbind();break;default:Ee.assert(!1)}},Do.prototype._onBlur=function hl(e){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("dragend",e),this._fireEvent("moveend",e);break;case"pending":this._state="enabled",this._unbind();break;default:Ee.assert(!1)}},Do.prototype._unbind=function ml(){Ye.removeEventListener(Ee.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),Ye.removeEventListener(Ee.window.document,"touchend",this._onTouchEnd),Ye.removeEventListener(Ee.window.document,"mousemove",this._onMove,{capture:!0}),Ye.removeEventListener(Ee.window.document,"mouseup",this._onMouseUp),Ye.removeEventListener(Ee.window,"blur",this._onBlur)},Do.prototype._deactivate=function gl(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._mouseDownPos,delete this._lastPos},Do.prototype._inertialPan=function wl(e){this._fireEvent("dragend",e),this._drainInertiaBuffer();var t=this._inertia;if(t.length<2)this._fireEvent("moveend",e);else{var n=t[t.length-1],r=t[0],i=n[1].sub(r[1]),o=(n[0]-r[0])/1e3;if(0===o||n[1].equals(r[1]))this._fireEvent("moveend",e);else{var a=i.mult(To/o),s=a.mag();ko<s&&(s=ko,a._unit()._mult(s));var u=s/(Io*To),l=a.mult(-u/2);this._map.panBy(l,{duration:1e3*u,easing:Ao,noMoveStart:!0},{originalEvent:e})}}},Do.prototype._fireEvent=function pl(e,t){return this._map.fire(new Ee.Event(e,t?{originalEvent:t}:{}))},Do.prototype._drainInertiaBuffer=function vl(){for(var e=this._inertia,t=Ee.browser.now(),n=160;0<e.length&&t-e[0][0]>n;)e.shift()};var Po=100,Oo=15,Ro=10,No=function No(e){this._map=e,this._el=e.getCanvasContainer(),Ee.bindAll(["_onKeyDown"],this)};No.prototype.isEnabled=function Yu(){return!!this._enabled},No.prototype.enable=function el(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},No.prototype.disable=function tl(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},No.prototype._onKeyDown=function cl(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=0,n=0,r=0,i=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),i=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),i=1);break;case 38:e.shiftKey?r=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?r=-1:(o=1,e.preventDefault());break;default:return}var a=this._map,s=a.getZoom(),u={duration:300,delayEndEvents:500,easing:Be,zoom:t?Math.round(s)+t*(e.shiftKey?2:1):s,bearing:a.getBearing()+n*Oo,pitch:a.getPitch()+r*Ro,offset:[-i*Po,-o*Po],center:a.getCenter()};a.easeTo(u,{originalEvent:e})}};var Lo=function Lo(e){this._map=e,Ee.bindAll(["_onDblClick","_onZoomEnd"],this)};Lo.prototype.isEnabled=function Yu(){return!!this._enabled},Lo.prototype.isActive=function Ju(){return!!this._active},Lo.prototype.enable=function el(){this.isEnabled()||(this._enabled=!0)},Lo.prototype.disable=function tl(){this.isEnabled()&&(this._enabled=!1)},Lo.prototype.onTouchStart=function _l(e){var t=this;this.isEnabled()&&(1<e.points.length||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(e)):this._tapped=setTimeout(function(){t._tapped=null},300)))},Lo.prototype.onDblClick=function El(e){this.isEnabled()&&(e.originalEvent.preventDefault(),this._zoom(e))},Lo.prototype._zoom=function Cl(e){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(e.originalEvent.shiftKey?-1:1),{around:e.lngLat},e)},Lo.prototype._onZoomEnd=function Sl(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var Mo=.15,Bo=Ee.bezier(0,0,Mo,1),zo=12,Fo=2.5,jo=.15,Uo=10,Vo=function Vo(e){this._map=e,this._el=e.getCanvasContainer(),Ee.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};Vo.prototype.isEnabled=function Yu(){return!!this._enabled},Vo.prototype.enable=function el(e){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around)},Vo.prototype.disable=function tl(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},Vo.prototype.disableRotation=function Tl(){this._rotationDisabled=!0},Vo.prototype.enableRotation=function Al(){this._rotationDisabled=!1},Vo.prototype.onStart=function kl(e){if(this.isEnabled()&&2===e.touches.length){var t=Ye.mousePos(this._el,e.touches[0]),n=Ye.mousePos(this._el,e.touches[1]),r=t.add(n).div(2);this._startVec=t.sub(n),this._startAround=this._map.transform.pointLocation(r),this._gestureIntent=undefined,this._inertia=[],Ye.addEventListener(Ee.window.document,"touchmove",this._onMove,{passive:!1}),Ye.addEventListener(Ee.window.document,"touchend",this._onEnd)}},Vo.prototype._getTouchEventData=function Il(e){var t=Ye.mousePos(this._el,e.touches[0]),n=Ye.mousePos(this._el,e.touches[1]),r=t.sub(n);return{vec:r,center:t.add(n).div(2),scale:r.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*r.angleWith(this._startVec)/Math.PI}},Vo.prototype._onMove=function bl(e){if(2===e.touches.length){var t=this._getTouchEventData(e),n=t.vec,r=t.scale,i=t.bearing;if(!this._gestureIntent){var o=this._rotationDisabled&&1!==r||Math.abs(1-r)>jo;Math.abs(i)>Uo?this._gestureIntent="rotate":o&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new Ee.Event(this._gestureIntent+"start",{originalEvent:e})),this._map.fire(new Ee.Event("movestart",{originalEvent:e})),this._startVec=n)}this._lastTouchEvent=e,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),e.preventDefault()}},Vo.prototype._onTouchFrame=function Dl(){this._frameId=null;var e=this._gestureIntent;if(e){var t=this._map.transform;this._startScale||(this._startScale=t.scale,this._startBearing=t.bearing);var n=this._getTouchEventData(this._lastTouchEvent),r=n.center,i=n.bearing,o=n.scale,a=t.pointLocation(r),s=t.locationPoint(a);"rotate"===e&&(t.bearing=this._startBearing+i),t.zoom=t.scaleZoom(this._startScale*o),t.setLocationAtPoint(this._startAround,s),this._map.fire(new Ee.Event(e,{originalEvent:this._lastTouchEvent})),this._map.fire(new Ee.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([Ee.browser.now(),o,r])}},Vo.prototype._onEnd=function Pl(e){Ye.removeEventListener(Ee.window.document,"touchmove",this._onMove,{passive:!1}),Ye.removeEventListener(Ee.window.document,"touchend",this._onEnd);var t=this._gestureIntent,n=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,t){this._map.fire(new Ee.Event(t+"end",{originalEvent:e})),this._drainInertiaBuffer();var r=this._inertia,i=this._map;if(r.length<2)i.snapToNorth({},{originalEvent:e});else{var o=r[r.length-1],a=r[0],s=i.transform.scaleZoom(n*o[1]),u=i.transform.scaleZoom(n*a[1]),l=s-u,c=(o[0]-a[0])/1e3,f=o[2];if(0!==c&&s!==u){var p=l*Mo/c;Math.abs(p)>Fo&&(p=0<p?Fo:-Fo);var d=1e3*Math.abs(p/(zo*Mo)),h=s+p*d/2e3;h<0&&(h=0),i.easeTo({zoom:h,duration:d,easing:Bo,around:this._aroundCenter?i.getCenter():i.unproject(f),noMoveStart:!0},{originalEvent:e})}else i.snapToNorth({},{originalEvent:e})}}},Vo.prototype._drainInertiaBuffer=function vl(){for(var e=this._inertia,t=Ee.browser.now(),n=160;2<e.length&&t-e[0][0]>n;)e.shift()};var qo={scrollZoom:_o,boxZoom:bo,dragRotate:So,dragPan:Do,keyboard:No,doubleClickZoom:Lo,touchZoomRotate:Vo},Ho=function(n){function e(e,t){n.call(this),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=t.bearingSnap,Ee.bindAll(["_renderFrameCallback"],this)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),(e.prototype.constructor=e).prototype.getCenter=function t(){return this.transform.center},e.prototype.setCenter=function r(e,t){return this.jumpTo({center:e},t)},e.prototype.panBy=function i(e,t,n){return e=Ee.Point.convert(e).mult(-1),this.panTo(this.transform.center,Ee.extend({offset:e},t),n)},e.prototype.panTo=function o(e,t,n){return this.easeTo(Ee.extend({center:e},t),n)},e.prototype.getZoom=function a(){return this.transform.zoom},e.prototype.setZoom=function s(e,t){return this.jumpTo({zoom:e},t),this},e.prototype.zoomTo=function u(e,t,n){return this.easeTo(Ee.extend({zoom:e},t),n)},e.prototype.zoomIn=function l(e,t){return this.zoomTo(this.getZoom()+1,e,t),this},e.prototype.zoomOut=function c(e,t){return this.zoomTo(this.getZoom()-1,e,t),this},e.prototype.getBearing=function f(){return this.transform.bearing},e.prototype.setBearing=function p(e,t){return this.jumpTo({bearing:e},t),this},e.prototype.rotateTo=function d(e,t,n){return this.easeTo(Ee.extend({bearing:e},t),n)},e.prototype.resetNorth=function h(e,t){return this.rotateTo(0,Ee.extend({duration:1e3},e),t),this},e.prototype.snapToNorth=function m(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this},e.prototype.getPitch=function g(){return this.transform.pitch},e.prototype.setPitch=function y(e,t){return this.jumpTo({pitch:e},t),this},e.prototype.cameraForBounds=function v(e,t){return e=Ee.LngLatBounds.convert(e),this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,t)},e.prototype._cameraForBoxAndBearing=function b(e,t,n,r){if("number"==typeof(r=Ee.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},r)).padding){var i=r.padding;r.padding={top:i,bottom:i,right:i,left:i}}if(Ee.isEqual(Object.keys(r.padding).sort(function(e,t){return e<t?-1:t<e?1:0}),["bottom","left","right","top"])){var o=this.transform,a=o.project(Ee.LngLat.convert(e)),s=o.project(Ee.LngLat.convert(t)),u=a.rotate(-n*Math.PI/180),l=s.rotate(-n*Math.PI/180),c=new Ee.Point(Math.max(u.x,l.x),Math.max(u.y,l.y)),f=new Ee.Point(Math.min(u.x,l.x),Math.min(u.y,l.y)),p=c.sub(f),d=(o.width-r.padding.left-r.padding.right)/p.x,h=(o.height-r.padding.top-r.padding.bottom)/p.y;if(!(h<0||d<0)){var m=Math.min(o.scaleZoom(o.scale*Math.min(d,h)),r.maxZoom),g=Ee.Point.convert(r.offset),y=(r.padding.left-r.padding.right)/2,v=(r.padding.top-r.padding.bottom)/2,_=new Ee.Point(g.x+y,g.y+v).mult(o.scale/o.zoomScale(m));return{center:o.unproject(a.add(s).div(2).sub(_)),zoom:m,bearing:n}}Ee.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else Ee.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},e.prototype.fitBounds=function _(e,t,n){return this._fitInternal(this.cameraForBounds(e,t),t,n)},e.prototype.fitScreenCoordinates=function x(e,t,n,r,i){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(Ee.Point.convert(e)),this.transform.pointLocation(Ee.Point.convert(t)),n,r),r,i)},e.prototype._fitInternal=function w(e,t,n){return e?(t=Ee.extend(e,t)).linear?this.easeTo(t,n):this.flyTo(t,n):this},e.prototype.jumpTo=function E(e,t){this.stop();var n=this.transform,r=!1,i=!1,o=!1;return"zoom"in e&&n.zoom!==+e.zoom&&(r=!0,n.zoom=+e.zoom),e.center!==undefined&&(n.center=Ee.LngLat.convert(e.center)),"bearing"in e&&n.bearing!==+e.bearing&&(i=!0,n.bearing=+e.bearing),"pitch"in e&&n.pitch!==+e.pitch&&(o=!0,n.pitch=+e.pitch),this.fire(new Ee.Event("movestart",t)).fire(new Ee.Event("move",t)),r&&this.fire(new Ee.Event("zoomstart",t)).fire(new Ee.Event("zoom",t)).fire(new Ee.Event("zoomend",t)),i&&this.fire(new Ee.Event("rotatestart",t)).fire(new Ee.Event("rotate",t)).fire(new Ee.Event("rotateend",t)),o&&this.fire(new Ee.Event("pitchstart",t)).fire(new Ee.Event("pitch",t)).fire(new Ee.Event("pitchend",t)),this.fire(new Ee.Event("moveend",t))},e.prototype.easeTo=function C(e,o){var a=this;this.stop(),!1===(e=Ee.extend({offset:[0,0],duration:500,easing:Ee.ease},e)).animate&&(e.duration=0);var s=this.transform,u=this.getZoom(),l=this.getBearing(),c=this.getPitch(),f="zoom"in e?+e.zoom:u,p="bearing"in e?this._normalizeBearing(e.bearing,l):l,d="pitch"in e?+e.pitch:c,h=s.centerPoint.add(Ee.Point.convert(e.offset)),t=s.pointLocation(h),n=Ee.LngLat.convert(e.center||t);this._normalizeCenter(n);var m,g,y=s.project(t),v=s.project(n).sub(y),_=s.zoomScale(f-u);return e.around&&(m=Ee.LngLat.convert(e.around),g=s.locationPoint(m)),this._zooming=f!==u,this._rotating=l!==p,this._pitching=d!==c,this._prepareEase(o,e.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(e){if(a._zooming&&(s.zoom=Ee.number(u,f,e)),a._rotating&&(s.bearing=Ee.number(l,p,e)),a._pitching&&(s.pitch=Ee.number(c,d,e)),m)s.setLocationAtPoint(m,g);else{var t=s.zoomScale(s.zoom-u),n=u<f?Math.min(2,_):Math.max(.5,_),r=Math.pow(n,1-e),i=s.unproject(y.add(v.mult(e*r)).mult(t));s.setLocationAtPoint(s.renderWorldCopies?i.wrap():i,h)}a._fireMoveEvents(o)},function(){e.delayEndEvents?a._easeEndTimeoutID=setTimeout(function(){return a._afterEase(o)},e.delayEndEvents):a._afterEase(o)},e),this},e.prototype._prepareEase=function S(e,t){this._moving=!0,t||this.fire(new Ee.Event("movestart",e)),this._zooming&&this.fire(new Ee.Event("zoomstart",e)),this._rotating&&this.fire(new Ee.Event("rotatestart",e)),this._pitching&&this.fire(new Ee.Event("pitchstart",e))},e.prototype._fireMoveEvents=function T(e){this.fire(new Ee.Event("move",e)),this._zooming&&this.fire(new Ee.Event("zoom",e)),this._rotating&&this.fire(new Ee.Event("rotate",e)),this._pitching&&this.fire(new Ee.Event("pitch",e))},e.prototype._afterEase=function A(e){var t=this._zooming,n=this._rotating,r=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,t&&this.fire(new Ee.Event("zoomend",e)),n&&this.fire(new Ee.Event("rotateend",e)),r&&this.fire(new Ee.Event("pitchend",e)),this.fire(new Ee.Event("moveend",e))},e.prototype.flyTo=function R(e,i){function t(e){var t=(w*w-x*x+(e?-1:1)*T*T*E*E)/(2*(e?w:x)*T*E);return Math.log(Math.sqrt(t*t+1)-t)}function n(e){return(Math.exp(e)-Math.exp(-e))/2}function r(e){return(Math.exp(e)+Math.exp(-e))/2}function o(e){return n(e)/r(e)}var a=this;this.stop(),e=Ee.extend({offset:[0,0],speed:1.2,
curve:1.42,easing:Ee.ease},e);var s=this.transform,u=this.getZoom(),l=this.getBearing(),c=this.getPitch(),f="zoom"in e?Ee.clamp(+e.zoom,s.minZoom,s.maxZoom):u,p="bearing"in e?this._normalizeBearing(e.bearing,l):l,d="pitch"in e?+e.pitch:c,h=s.zoomScale(f-u),m=s.centerPoint.add(Ee.Point.convert(e.offset)),g=s.pointLocation(m),y=Ee.LngLat.convert(e.center||g);this._normalizeCenter(y);var v=s.project(g),_=s.project(y).sub(v),b=e.curve,x=Math.max(s.width,s.height),w=x/h,E=_.mag();if("minZoom"in e){var C=Ee.clamp(Math.min(e.minZoom,u,f),s.minZoom,s.maxZoom),S=x/s.zoomScale(C-u);b=Math.sqrt(S/E*2)}var T=b*b,A=t(0),k=function(e){return r(A)/r(A+b*e)},I=function(e){return x*((r(A)*o(A+b*e)-n(A))/T)/E},D=(t(1)-A)/b;if(Math.abs(E)<1e-6||!isFinite(D)){if(Math.abs(x-w)<1e-6)return this.easeTo(e,i);var P=w<x?-1:1;D=Math.abs(Math.log(w/x))/b,I=function(){return 0},k=function(e){return Math.exp(P*b*e)}}if("duration"in e)e.duration=+e.duration;else{var O="screenSpeed"in e?+e.screenSpeed/b:+e.speed;e.duration=1e3*D/O}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=l!==p,this._pitching=d!==c,this._prepareEase(i,!1),this._ease(function(e){var t=e*D,n=1/k(t);s.zoom=1===e?f:u+s.scaleZoom(n),a._rotating&&(s.bearing=Ee.number(l,p,e)),a._pitching&&(s.pitch=Ee.number(c,d,e));var r=1===e?y:s.unproject(v.add(_.mult(I(t))).mult(n));s.setLocationAtPoint(s.renderWorldCopies?r.wrap():r,m),a._fireMoveEvents(i)},function(){return a._afterEase(i)},e),this},e.prototype.isEasing=function k(){return!!this._easeFrameId},e.prototype.stop=function I(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var e=this._onEaseEnd;delete this._onEaseEnd,e.call(this)}return this},e.prototype._ease=function D(e,t,n){!1===n.animate||0===n.duration?(e(1),t()):(this._easeStart=Ee.browser.now(),this._easeOptions=n,this._onEaseFrame=e,this._onEaseEnd=t,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},e.prototype._renderFrameCallback=function P(){var e=Math.min((Ee.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},e.prototype._normalizeBearing=function O(e,t){e=Ee.wrap(e,-180,180);var n=Math.abs(e-t);return Math.abs(e-360-t)<n&&(e-=360),Math.abs(e+360-t)<n&&(e+=360),e},e.prototype._normalizeCenter=function N(e){var t=this.transform;if(t.renderWorldCopies&&!t.lngRange){var n=e.lng-t.center.lng;e.lng+=180<n?-360:n<-180?360:0}},e}(Ee.Evented),Wo=function Wo(e){void 0===e&&(e={}),this.options=e,Ee.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Wo.prototype.getDefaultPosition=function Ol(){return"bottom-right"},Wo.prototype.onAdd=function Rl(e){var t=this.options&&this.options.compact;return this._map=e,this._container=Ye.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=Ye.create("div","mapboxgl-ctrl-attrib-inner",this._container),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),t===undefined&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Wo.prototype.onRemove=function Nl(){Ye.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=undefined},Wo.prototype._updateEditLink=function Ll(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var r=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:Ee.config.ACCESS_TOKEN}];if(e){var t=r.reduce(function(e,t,n){return t.value&&(e+=t.key+"="+t.value+(n<r.length-1?"&":"")),e},"?");e.href=Ee.config.FEEDBACK_URL+"/"+t+(this._map._hash?this._map._hash.getHashString(!0):"")}},Wo.prototype._updateData=function Ml(e){!e||"metadata"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())},Wo.prototype._updateAttributions=function Bl(){if(this._map.style){var r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(function(e){return"string"!=typeof e?"":e})):"string"==typeof this.options.customAttribution&&r.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var t=this._map.style.sourceCaches;for(var n in t){var i=t[n];if(i.used){var o=i.getSource();o.attribution&&r.indexOf(o.attribution)<0&&r.push(o.attribution)}}r.sort(function(e,t){return e.length-t.length}),(r=r.filter(function(e,t){for(var n=t+1;n<r.length;n++)if(0<=r[n].indexOf(e))return!1;return!0})).length?(this._innerContainer.innerHTML=r.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},Wo.prototype._updateCompact=function zl(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Go=function Go(){Ee.bindAll(["_updateLogo"],this),Ee.bindAll(["_updateCompact"],this)};Go.prototype.onAdd=function Rl(e){this._map=e,this._container=Ye.create("div","mapboxgl-ctrl");var t=Ye.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.href="https://www.mapbox.com/",t.setAttribute("aria-label","Mapbox logo"),t.setAttribute("rel","noopener"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Go.prototype.onRemove=function Nl(){Ye.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Go.prototype.getDefaultPosition=function Ol(){return"bottom-left"},Go.prototype._updateLogo=function Fl(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Go.prototype._logoRequired=function jl(){if(this._map.style){var e=this._map.style.sourceCaches;for(var t in e){if(e[t].getSource().mapbox_logo)return!0}return!1}},Go.prototype._updateCompact=function zl(){var e=this._container.children;if(e.length){var t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}};var Zo=function Zo(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Zo.prototype.add=function Ua(e){var t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t},Zo.prototype.remove=function Ba(e){for(var t=this._currentlyRunning,n=0,r=t?this._queue.concat(t):this._queue;n<r.length;n+=1){var i=r[n];if(i.id===e)return void(i.cancelled=!0)}},Zo.prototype.run=function Ul(){Ee.assert(!this._currentlyRunning);var e=this._currentlyRunning=this._queue;this._queue=[];for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(!r.cancelled&&(r.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Zo.prototype.clear=function is(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Xo=Ee.window.HTMLImageElement,Ko=Ee.window.HTMLElement,$o=0,Yo=22,Jo={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:$o,maxZoom:Yo,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Qo=function(f){function e(e){var t=this;if(null!=(e=Ee.extend({},Jo,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than minZoom");var n=new uo(e.minZoom,e.maxZoom,e.renderWorldCopies);f.call(this,n,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new Zo,this._controls=[],this._mapId=Ee.uniqueId();var r=e.transformRequest;if(this._transformRequest=r?function(e,t){return r(e,t)||{url:e}}:function(e){return{url:e}},"string"==typeof e.container){if(this._container=Ee.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof Ko))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),Ee.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===undefined)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return t._update(!1)}),this.on("moveend",function(){return t._update(!1)}),this.on("zoom",function(){return t._update(!0)}),"undefined"!=typeof Ee.window&&(Ee.window.addEventListener("online",this._onWindowOnline,!1),Ee.window.addEventListener("resize",this._onWindowResize,!1)),ze(this,e),this._hash=e.hash&&(new co).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,Ee.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new Wo({customAttribution:e.customAttribution})),this.addControl(new Go,e.logoPosition),this.on("style.load",function(){t.transform.unmodified&&t.jumpTo(t.style.stylesheet)}),this.on("data",function(e){t._update("style"===e.dataType),t.fire(new Ee.Event(e.dataType+"data",e))}),this.on("dataloading",function(e){t.fire(new Ee.Event(e.dataType+"dataloading",e))})}f&&(e.__proto__=f),e.prototype=Object.create(f&&f.prototype);var t={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return(e.prototype.constructor=e).prototype._getMapId=function n(){return this._mapId},e.prototype.addControl=function i(e,t){if(t===undefined&&e.getDefaultPosition&&(t=e.getDefaultPosition()),t===undefined&&(t="top-right"),!e||!e.onAdd)return this.fire(new Ee.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var n=e.onAdd(this);this._controls.push(e);var r=this._controlPositions[t];return-1!==t.indexOf("bottom")?r.insertBefore(n,r.firstChild):r.appendChild(n),this},e.prototype.removeControl=function r(e){if(!e||!e.onRemove)return this.fire(new Ee.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var t=this._controls.indexOf(e);return-1<t&&this._controls.splice(t,1),e.onRemove(this),this},e.prototype.resize=function o(e){var t=this._containerDimensions(),n=t[0],r=t[1];return this._resizeCanvas(n,r),this.transform.resize(n,r),this.painter.resize(n,r),this.fire(new Ee.Event("movestart",e)).fire(new Ee.Event("move",e)).fire(new Ee.Event("resize",e)).fire(new Ee.Event("moveend",e)),this},e.prototype.getBounds=function a(){return this.transform.getBounds()},e.prototype.getMaxBounds=function s(){return this.transform.getMaxBounds()},e.prototype.setMaxBounds=function u(e){return this.transform.setMaxBounds(Ee.LngLatBounds.convert(e)),this._update()},e.prototype.setMinZoom=function l(e){if(e=null===e||e===undefined?$o:e,$o<=e&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between "+$o+" and the current maxZoom, inclusive")},e.prototype.getMinZoom=function c(){return this.transform.minZoom},e.prototype.setMaxZoom=function p(e){if((e=null===e||e===undefined?Yo:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")},e.prototype.getRenderWorldCopies=function d(){return this.transform.renderWorldCopies},e.prototype.setRenderWorldCopies=function h(e){return this.transform.renderWorldCopies=e,this._update()},e.prototype.getMaxZoom=function m(){return this.transform.maxZoom},e.prototype.project=function g(e){return this.transform.locationPoint(Ee.LngLat.convert(e))},e.prototype.unproject=function y(e){return this.transform.pointLocation(Ee.Point.convert(e))},e.prototype.isMoving=function v(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},e.prototype.isZooming=function _(){return this._zooming||this.scrollZoom.isZooming()},e.prototype.isRotating=function b(){return this._rotating||this.dragRotate.isActive()},e.prototype.on=function x(s,u,l){var c=this;if(l===undefined)return f.prototype.on.call(this,s,u);var e=function(){var e;if("mouseenter"===s||"mouseover"===s){var n=!1,t=function(e){var t=c.getLayer(u)?c.queryRenderedFeatures(e.point,{layers:[u]}):[];t.length?n||(n=!0,l.call(c,new fo(s,c,e.originalEvent,{features:t}))):n=!1};return{layer:u,listener:l,delegates:{mousemove:t,mouseout:function(){n=!1}}}}if("mouseleave"===s||"mouseout"===s){var r=!1,i=function(e){(c.getLayer(u)?c.queryRenderedFeatures(e.point,{layers:[u]}):[]).length?r=!0:r&&(r=!1,l.call(c,new fo(s,c,e.originalEvent)))},o=function(e){r&&(r=!1,l.call(c,new fo(s,c,e.originalEvent)))};return{layer:u,listener:l,delegates:{mousemove:i,mouseout:o}}}var a=function(e){var t=c.getLayer(u)?c.queryRenderedFeatures(e.point,{layers:[u]}):[];t.length&&(e.features=t,l.call(c,e),delete e.features)};return{layer:u,listener:l,delegates:(e={},e[s]=a,e)}}();for(var t in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[s]=this._delegatedListeners[s]||[],this._delegatedListeners[s].push(e),e.delegates)this.on(t,e.delegates[t]);return this},e.prototype.off=function w(e,t,n){if(n===undefined)return f.prototype.off.call(this,e,t);if(this._delegatedListeners&&this._delegatedListeners[e])for(var r=this._delegatedListeners[e],i=0;i<r.length;i++){var o=r[i];if(o.layer===t&&o.listener===n){for(var a in o.delegates)this.off(a,o.delegates[a]);return r.splice(i,1),this}}return this},e.prototype.queryRenderedFeatures=function E(e,t){if(!this.style)return[];var n;if(t!==undefined||e===undefined||e instanceof Ee.Point||Array.isArray(e)||(t=e,e=undefined),t=t||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof Ee.Point||"number"==typeof e[0])n=[Ee.Point.convert(e)];else{var r=Ee.Point.convert(e[0]),i=Ee.Point.convert(e[1]);n=[r,new Ee.Point(i.x,r.y),i,new Ee.Point(r.x,i.y),r]}return this.style.queryRenderedFeatures(n,t,this.transform)},e.prototype.querySourceFeatures=function C(e,t){return this.style.querySourceFeatures(e,t)},e.prototype.setStyle=function S(e,t){return(!t||!1!==t.diff&&!t.localIdeographFontFamily)&&this.style&&e?(this._diffStyle(e,t),this):this._updateStyle(e,t)},e.prototype._updateStyle=function T(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new ir(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)):delete this.style,this},e.prototype._diffStyle=function A(e,n){var r=this;if("string"==typeof e){var t=Ee.normalizeStyleURL(e),i=this._transformRequest(t,Ee.ResourceType.Style);Ee.getJSON(i,function(e,t){e?r.fire(new Ee.ErrorEvent(e)):t&&r._updateDiff(t,n)})}else"object"==typeof e&&this._updateDiff(e,n)},e.prototype._updateDiff=function k(e,t){try{this.style.setState(e)&&this._update(!0)}catch(n){Ee.warnOnce("Unable to perform style diff: "+(n.message||n.error||n)+".  Rebuilding the style from scratch."),this._updateStyle(e,t)}},e.prototype.getStyle=function I(){if(this.style)return this.style.serialize()},e.prototype.isStyleLoaded=function D(){return this.style?this.style.loaded():Ee.warnOnce("There is no style added to the map.")},e.prototype.addSource=function P(e,t){return this.style.addSource(e,t),this._update(!0)},e.prototype.isSourceLoaded=function O(e){var t=this.style&&this.style.sourceCaches[e];if(t!==undefined)return t.loaded();this.fire(new Ee.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},e.prototype.areTilesLoaded=function R(){var e=this.style&&this.style.sourceCaches;for(var t in e){var n=e[t]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},e.prototype.addSourceType=function N(e,t,n){return this.style.addSourceType(e,t,n)},e.prototype.removeSource=function L(e){return this.style.removeSource(e),this._update(!0)},e.prototype.getSource=function M(e){return this.style.getSource(e)},e.prototype.addImage=function B(e,t,n){void 0===n&&(n={});var r=n.pixelRatio;void 0===r&&(r=1);var i=n.sdf;if(void 0===i&&(i=!1),t instanceof Xo){var o=Ee.browser.getImageData(t),a=o.width,s=o.height,u=o.data;this.style.addImage(e,{data:new Ee.RGBAImage({width:a,height:s},u),pixelRatio:r,sdf:i})}else{if(t.width===undefined||t.height===undefined)return this.fire(new Ee.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var l=t.width,c=t.height,f=t.data;this.style.addImage(e,{data:new Ee.RGBAImage({width:l,height:c},new Uint8Array(f)),pixelRatio:r,sdf:i})}},e.prototype.hasImage=function z(e){return e?!!this.style.getImage(e):(this.fire(new Ee.ErrorEvent(new Error("Missing required image id"))),!1)},e.prototype.removeImage=function F(e){this.style.removeImage(e)},e.prototype.loadImage=function j(e,t){Ee.getImage(this._transformRequest(e,Ee.ResourceType.Image),t)},e.prototype.listImages=function U(){return this.style.listImages()},e.prototype.addLayer=function V(e,t){return this.style.addLayer(e,t),this._update(!0)},e.prototype.moveLayer=function q(e,t){return this.style.moveLayer(e,t),this._update(!0)},e.prototype.removeLayer=function H(e){return this.style.removeLayer(e),this._update(!0)},e.prototype.getLayer=function W(e){return this.style.getLayer(e)},e.prototype.setFilter=function G(e,t,n){return void 0===n&&(n={}),this.style.setFilter(e,t,n),this._update(!0)},e.prototype.setLayerZoomRange=function Z(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)},e.prototype.getFilter=function X(e){return this.style.getFilter(e)},e.prototype.setPaintProperty=function K(e,t,n,r){return void 0===r&&(r={}),this.style.setPaintProperty(e,t,n,r),this._update(!0)},e.prototype.getPaintProperty=function $(e,t){return this.style.getPaintProperty(e,t)},e.prototype.setLayoutProperty=function Y(e,t,n,r){return void 0===r&&(r={}),this.style.setLayoutProperty(e,t,n,r),this._update(!0)},e.prototype.getLayoutProperty=function J(e,t){return this.style.getLayoutProperty(e,t)},e.prototype.setLight=function Q(e,t){return void 0===t&&(t={}),this.style.setLight(e,t),this._update(!0)},e.prototype.getLight=function ee(){return this.style.getLight()},e.prototype.setFeatureState=function te(e,t){return this.style.setFeatureState(e,t),this._update()},e.prototype.removeFeatureState=function ne(e,t){return this.style.removeFeatureState(e,t),this._update()},e.prototype.getFeatureState=function re(e){return this.style.getFeatureState(e)},e.prototype.getContainer=function ie(){return this._container},e.prototype.getCanvasContainer=function oe(){return this._canvasContainer},e.prototype.getCanvas=function ae(){return this._canvas},e.prototype._containerDimensions=function se(){var e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]},e.prototype._detectMissingCSS=function ue(){"rgb(250, 128, 114)"!==Ee.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&Ee.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},e.prototype._setupContainer=function le(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=Ye.create("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();var t=this._canvasContainer=Ye.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=Ye.create("canvas","mapboxgl-canvas",t),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var r=this._controlContainer=Ye.create("div","mapboxgl-control-container",e),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(e){i[e]=Ye.create("div","mapboxgl-ctrl-"+e,r)})},e.prototype._resizeCanvas=function ce(e,t){var n=Ee.window.devicePixelRatio||1;this._canvas.width=n*e,this._canvas.height=n*t,this._canvas.style.width=e+"px",this._canvas.style.height=t+"px"},e.prototype._setupPainter=function fe(){var e=Ee.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},$e.webGLContextAttributes),t=this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);t?(this.painter=new so(t,this.transform),Ee.webpSupported.testSupport(t)):this.fire(new Ee.ErrorEvent(new Error("Failed to initialize WebGL")))},e.prototype._contextLost=function pe(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new Ee.Event("webglcontextlost",{originalEvent:e}))},e.prototype._contextRestored=function de(e){this._setupPainter(),this.resize(),this._update(),this.fire(new Ee.Event("webglcontextrestored",{originalEvent:e}))},e.prototype.loaded=function he(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},e.prototype._update=function me(e){return this.style&&(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint()),this},e.prototype._requestRenderFrame=function ge(e){return this._update(),this._renderTaskQueue.add(e)},e.prototype._cancelRenderFrame=function ye(e){this._renderTaskQueue.remove(e)},e.prototype._render=function ve(){this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var e=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var t=this.transform.zoom,n=Ee.browser.now();this.style.zoomHistory.update(t,n);var r=new Ee.EvaluationParameters(t,{now:n,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),i=r.crossFadingFactor();1===i&&i===this._crossFadingFactor||(e=!0,this._crossFadingFactor=i),this.style.update(r)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration}),this.fire(new Ee.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new Ee.Event("load"))),this.style&&(this.style.hasTransitions()||e)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new Ee.Event("idle")),this},e.prototype.remove=function _e(){this._hash&&this._hash.remove();for(var e=0,t=this._controls;e<t.length;e+=1){t[e].onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),"undefined"!=typeof Ee.window&&(Ee.window.removeEventListener("resize",this._onWindowResize,!1),Ee.window.removeEventListener("online",this._onWindowOnline,!1));var n=this.painter.context.gl.getExtension("WEBGL_lose_context");n&&n.loseContext(),Fe(this._canvasContainer),Fe(this._controlContainer),Fe(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new Ee.Event("remove"))},e.prototype.triggerRepaint=function be(){var e=this;this.style&&!this._frame&&(this._frame=Ee.browser.frame(function(){e._frame=null,e._render()}))},e.prototype._onWindowOnline=function xe(){this._update()},e.prototype._onWindowResize=function we(){this._trackResize&&this.resize()._update()},t.showTileBoundaries.get=function(){return!!this._showTileBoundaries},t.showTileBoundaries.set=function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())},t.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},t.showCollisionBoxes.set=function(e){this._showCollisionBoxes!==e&&((this._showCollisionBoxes=e)?this.style._generateCollisionBoxes():this._update())},t.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},t.showOverdrawInspector.set=function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())},t.repaint.get=function(){return!!this._repaint},t.repaint.set=function(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())},t.vertices.get=function(){return!!this._vertices},t.vertices.set=function(e){this._vertices=e,this._update()},Object.defineProperties(e.prototype,t),e}(Ho),ea={showCompass:!0,showZoom:!0},ta=function ta(e){var t=this;this.options=Ee.extend({},ea,e),this._container=Ye.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom in",function(){return t._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom out",function(){return t._map.zoomOut()})),this.options.showCompass&&(Ee.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset bearing to north",function(){return t._map.resetNorth()}),this._compassArrow=Ye.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};ta.prototype._rotateCompassArrow=function Vl(){var e="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=e},ta.prototype.onAdd=function Rl(e){return this._map=e,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new So(e,{button:"left",element:this._compass}),Ye.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.enable()),this._container},ta.prototype.onRemove=function Nl(){Ye.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),Ye.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.disable(),delete this._handler),delete this._map},ta.prototype._createButton=function ql(e,t,n){var r=Ye.create("button",e,this._container);return r.type="button",r.title=t,r.setAttribute("aria-label",t),r.addEventListener("click",n),r};var na,ra={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},ia=function(v){function e(e,t){if(v.call(this),(e instanceof Ee.window.HTMLElement||t)&&(e=Ee.extend({element:e},t)),Ee.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._draggable=e&&e.draggable||!1,this._state="inactive",e&&e.element)this._element=e.element,this._offset=Ee.Point.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=Ye.create("div");var n=Ye.createNS("http://www.w3.org/2000/svg","svg");n.setAttributeNS(null,"height","41px"),n.setAttributeNS(null,"width","27px"),n.setAttributeNS(null,"viewBox","0 0 27 41");var r=Ye.createNS("http://www.w3.org/2000/svg","g");r.setAttributeNS(null,"stroke","none"),r.setAttributeNS(null,"stroke-width","1"),r.setAttributeNS(null,"fill","none"),r.setAttributeNS(null,"fill-rule","evenodd");var i=Ye.createNS("http://www.w3.org/2000/svg","g");i.setAttributeNS(null,"fill-rule","nonzero");var o=Ye.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"transform","translate(3.0, 29.0)"),o.setAttributeNS(null,"fill","#000000");for(var a=0,s=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];a<s.length;a+=1){var u=s[a],l=Ye.createNS("http://www.w3.org/2000/svg","ellipse");l.setAttributeNS(null,"opacity","0.04"),l.setAttributeNS(null,"cx","10.5"),l.setAttributeNS(null,"cy","5.80029008"),l.setAttributeNS(null,"rx",u.rx),l.setAttributeNS(null,"ry",u.ry),o.appendChild(l)}var c=Ye.createNS("http://www.w3.org/2000/svg","g");c.setAttributeNS(null,"fill",this._color);var f=Ye.createNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),c.appendChild(f);var p=Ye.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"opacity","0.25"),p.setAttributeNS(null,"fill","#000000");var d=Ye.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),p.appendChild(d);var h=Ye.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"transform","translate(6.0, 7.0)"),h.setAttributeNS(null,"fill","#FFFFFF");var m=Ye.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");var g=Ye.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");var y=Ye.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#FFFFFF"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962"),m.appendChild(g),m.appendChild(y),i.appendChild(o),i.appendChild(c),i.appendChild(p),i.appendChild(h),i.appendChild(m),n.appendChild(i),this._element.appendChild(n),this._offset=Ee.Point.convert(e&&e.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._popup=null}return v&&(e.__proto__=v),e.prototype=Object.create(v&&v.prototype),(e.prototype.constructor=e).prototype.addTo=function t(e){return this.remove(),(this._map=e).getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},
e.prototype.remove=function n(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),delete this._map),Ye.remove(this._element),this._popup&&this._popup.remove(),this},e.prototype.getLngLat=function r(){return this._lngLat},e.prototype.setLngLat=function i(e){return this._lngLat=Ee.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},e.prototype.getElement=function o(){return this._element},e.prototype.setPopup=function a(e){if(this._popup&&(this._popup.remove(),this._popup=null),e){if(!("offset"in e.options)){var t=38.1,n=13.5,r=Math.sqrt(Math.pow(n,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[r,-1*(t-n+r)],"bottom-right":[-r,-1*(t-n+r)],left:[n,-1*(t-n)],right:[-n,-1*(t-n)]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},e.prototype._onMapClick=function s(e){var t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()},e.prototype.getPopup=function u(){return this._popup},e.prototype.togglePopup=function l(){var e=this._popup;return e&&(e.isOpen()?e.remove():e.addTo(this._map)),this},e.prototype._update=function c(e){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=je(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),e&&"moveend"!==e.type||(this._pos=this._pos.round()),Ye.setTransform(this._element,ra[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"),Ue(this._element,this._anchor,"marker"))},e.prototype.getOffset=function f(){return this._offset},e.prototype.setOffset=function p(e){return this._offset=Ee.Point.convert(e),this._update(),this},e.prototype._onMove=function d(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new Ee.Event("dragstart"))),this.fire(new Ee.Event("drag"))},e.prototype._onUp=function h(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new Ee.Event("dragend")),this._state="inactive"},e.prototype._addDragHandler=function m(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},e.prototype.setDraggable=function g(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},e.prototype.isDraggable=function y(){return this._draggable},e}(Ee.Evented),oa={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},aa="mapboxgl-ctrl",sa=function(t){function e(e){t.call(this),this.options=Ee.extend({},oa,e),Ee.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype.onAdd=function n(e){return this._map=e,this._container=Ye.create("div",aa+" "+aa+"-group"),Ve(this._setupUI),this._container},e.prototype.onRemove=function r(){this._geolocationWatchID!==undefined&&(Ee.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=undefined),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),Ye.remove(this._container),this._map=undefined},e.prototype._onSuccess=function i(e){if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;default:Ee.assert(!1,"Unexpected watchState "+this._watchState)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new Ee.Event("geolocate",e)),this._finish()},e.prototype._updateCamera=function o(e){var t=new Ee.LngLat(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy;this._map.fitBounds(t.toBounds(n),this.options.fitBoundsOptions,{geolocateSource:!0})},e.prototype._updateMarker=function a(e){e?this._userLocationDotMarker.setLngLat([e.coords.longitude,e.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},e.prototype._onError=function s(e){if(this.options.trackUserLocation)if(1===e.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocationWatchID!==undefined&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:Ee.assert(!1,"Unexpected watchState "+this._watchState)}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new Ee.Event("error",e)),this._finish()},e.prototype._finish=function u(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=undefined},e.prototype._setupUI=function l(e){var t=this;!1!==e?(this._container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this._geolocateButton=Ye.create("button",aa+"-icon "+aa+"-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Ye.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new ia(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==t._watchState||(t._watchState="BACKGROUND",t._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),t._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),t.fire(new Ee.Event("trackuserlocationend")))})):Ee.warnOnce("Geolocation support is not available, the GeolocateControl will not be visible.")},e.prototype.trigger=function c(){if(!this._setup)return Ee.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new Ee.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new Ee.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new Ee.Event("trackuserlocationstart"));break;default:Ee.assert(!1,"Unexpected watchState "+this._watchState)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break;case"OFF":break;default:Ee.assert(!1,"Unexpected watchState "+this._watchState)}"OFF"===this._watchState&&this._geolocationWatchID!==undefined?this._clearWatch():this._geolocationWatchID===undefined&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=Ee.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else Ee.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},e.prototype._clearWatch=function f(){Ee.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=undefined,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},e}(Ee.Evented),ua={maxWidth:100,unit:"metric"},la=function la(e){this.options=Ee.extend({},ua,e),Ee.bindAll(["_onMove","setUnit"],this)};la.prototype.getDefaultPosition=function Ol(){return"bottom-left"},la.prototype._onMove=function bl(){qe(this._map,this._container,this.options)},la.prototype.onAdd=function Rl(e){return this._map=e,this._container=Ye.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},la.prototype.onRemove=function Nl(){Ye.remove(this._container),this._map.off("move",this._onMove),this._map=undefined},la.prototype.setUnit=function Hl(e){this.options.unit=e,qe(this._map,this._container,this.options)};var ca=function ca(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof Ee.window.HTMLElement?this._container=e.container:Ee.warnOnce("Full screen control 'container' must be a DOM element.")),Ee.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in Ee.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in Ee.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in Ee.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in Ee.window.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};ca.prototype.onAdd=function Rl(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=Ye.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",Ee.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},ca.prototype.onRemove=function Nl(){Ye.remove(this._controlContainer),this._map=null,Ee.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},ca.prototype._checkFullscreenSupport=function Wl(){return!!(Ee.window.document.fullscreenEnabled||Ee.window.document.mozFullScreenEnabled||Ee.window.document.msFullscreenEnabled||Ee.window.document.webkitFullscreenEnabled)},ca.prototype._setupUI=function Gl(){var e=this._fullscreenButton=Ye.create("button",this._className+"-icon "+this._className+"-fullscreen",this._controlContainer);e.setAttribute("aria-label","Toggle fullscreen"),e.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),Ee.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},ca.prototype._isFullscreen=function Zl(){return this._fullscreen},ca.prototype._changeIcon=function Xl(){(Ee.window.document.fullscreenElement||Ee.window.document.mozFullScreenElement||Ee.window.document.webkitFullscreenElement||Ee.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},ca.prototype._onClickFullscreen=function Kl(){this._isFullscreen()?Ee.window.document.exitFullscreen?Ee.window.document.exitFullscreen():Ee.window.document.mozCancelFullScreen?Ee.window.document.mozCancelFullScreen():Ee.window.document.msExitFullscreen?Ee.window.document.msExitFullscreen():Ee.window.document.webkitCancelFullScreen&&Ee.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var fa={closeButton:!0,closeOnClick:!0,className:""},pa=function(t){function e(e){t.call(this),this.options=Ee.extend(Object.create(fa),e),Ee.bindAll(["_update","_onClickClose","remove"],this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype.addTo=function n(e){return this._map=e,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._map.on("remove",this.remove),this._update(),this.fire(new Ee.Event("open")),this},e.prototype.isOpen=function r(){return!!this._map},e.prototype.remove=function i(){return this._content&&Ye.remove(this._content),this._container&&(Ye.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),this._map.off("remove",this.remove),delete this._map),this.fire(new Ee.Event("close")),this},e.prototype.getLngLat=function o(){return this._lngLat},e.prototype.setLngLat=function a(e){return this._lngLat=Ee.LngLat.convert(e),this._pos=null,this._update(),this},e.prototype.setText=function s(e){return this.setDOMContent(Ee.window.document.createTextNode(e))},e.prototype.setHTML=function u(e){var t,n=Ee.window.document.createDocumentFragment(),r=Ee.window.document.createElement("body");for(r.innerHTML=e;t=r.firstChild;)n.appendChild(t);return this.setDOMContent(n)},e.prototype.setDOMContent=function l(e){return this._createContent(),this._content.appendChild(e),this._update(),this},e.prototype._createContent=function c(){this._content&&Ye.remove(this._content),this._content=Ye.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=Ye.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},e.prototype._update=function f(){var t=this;if(this._map&&this._lngLat&&this._content){this._container||(this._container=Ye.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=Ye.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(e){return t._container.classList.add(e)})),this._map.transform.renderWorldCopies&&(this._lngLat=je(this._lngLat,this._pos,this._map.transform));var e=this._pos=this._map.project(this._lngLat),n=this.options.anchor,r=Xe(this.options.offset);if(!n){var i,o=this._container.offsetWidth,a=this._container.offsetHeight;i=e.y+r.bottom.y<a?["top"]:e.y>this._map.transform.height-a?["bottom"]:[],e.x<o/2?i.push("left"):e.x>this._map.transform.width-o/2&&i.push("right"),n=0===i.length?"bottom":i.join("-")}var s=e.add(r[n]).round();Ye.setTransform(this._container,ra[n]+" translate("+s.x+"px,"+s.y+"px)"),Ue(this._container,n,"popup")}},e.prototype._onClickClose=function p(){this.remove()},e}(Ee.Evented),da={version:Ee.version,supported:$e,setRTLTextPlugin:Ee.setRTLTextPlugin,Map:Qo,NavigationControl:ta,GeolocateControl:sa,AttributionControl:Wo,ScaleControl:la,FullscreenControl:ca,Popup:pa,Marker:ia,Style:ir,LngLat:Ee.LngLat,LngLatBounds:Ee.LngLatBounds,Point:Ee.Point,MercatorCoordinate:Ee.MercatorCoordinate,Evented:Ee.Evented,config:Ee.config,get accessToken(){return Ee.config.ACCESS_TOKEN},set accessToken(e){Ee.config.ACCESS_TOKEN=e},get baseApiUrl(){return Ee.config.API_URL},set baseApiUrl(e){Ee.config.API_URL=e},get workerCount(){return Tn.workerCount},set workerCount(e){Tn.workerCount=e},get maxParallelImageRequests(){return Ee.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){Ee.config.MAX_PARALLEL_IMAGE_REQUESTS=e},workerUrl:""};return Ee.assert(!0,"canary assert"),da}),a}),function(){}.call(this),function(){}.call(this),function(){$(function(){return $(".set_video_url").click(function(){var e,t,n;return e="#"+this.id,n=document.getElementById(this.id).value,t=e.split("_")[2],$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/set_video_url/"+t+"?url="+encodeURIComponent(n),dataType:"json",success:function(){return alert("Video Update Successful"),location.reload()},error:function(){return alert("Error")}})})})}.call(this),function(){var e=this;(function(){(function(){var n=[].slice;this.ActionCable={INTERNAL:{message_types:{welcome:"welcome",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]},WebSocket:window.WebSocket,logger:window.console,createConsumer:function(e){var t;return null==e&&(e=null!=(t=this.getConfig("url"))?t:this.INTERNAL.default_mount_path),new u.Consumer(this.createWebSocketURL(e))},getConfig:function(e){var t;return null!=(t=document.head.querySelector("meta[name='action-cable-"+e+"']"))?t.getAttribute("content"):void 0},createWebSocketURL:function(e){var t;return e&&!/^wss?:/i.test(e)?((t=document.createElement("a")).href=e,t.href=t.href,t.protocol=t.protocol.replace("http","ws"),t.href):e},startDebugging:function(){return this.debugging=!0},stopDebugging:function(){return this.debugging=null},log:function(){var e,t;if(e=1<=arguments.length?n.call(arguments,0):[],this.debugging)return e.push(Date.now()),(t=this.logger).log.apply(t,["[ActionCable]"].concat(n.call(e)))}}}).call(this)}).call(e);var u=e.ActionCable;(function(){(function(){var r=function(e,t){return function(){return e.apply(t,arguments)}};u.ConnectionMonitor=function(){function e(e){this.connection=e,this.visibilityDidChange=r(this.visibilityDidChange,this),this.reconnectAttempts=0}var i,t,n;return e.pollInterval={min:3,max:30},e.staleThreshold=6,e.prototype.start=function(){if(!this.isRunning())return this.startedAt=t(),delete this.stoppedAt,this.startPolling(),document.addEventListener("visibilitychange",this.visibilityDidChange),u.log("ConnectionMonitor started. pollInterval = "+this.getPollInterval()+" ms")},e.prototype.stop=function(){if(this.isRunning())return this.stoppedAt=t(),this.stopPolling(),document.removeEventListener("visibilitychange",this.visibilityDidChange),u.log("ConnectionMonitor stopped")},e.prototype.isRunning=function(){return null!=this.startedAt&&null==this.stoppedAt},e.prototype.recordPing=function(){return this.pingedAt=t()},e.prototype.recordConnect=function(){return this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,u.log("ConnectionMonitor recorded connect")},e.prototype.recordDisconnect=function(){return this.disconnectedAt=t(),u.log("ConnectionMonitor recorded disconnect")},e.prototype.startPolling=function(){return this.stopPolling(),this.poll()},e.prototype.stopPolling=function(){return clearTimeout(this.pollTimeout)},e.prototype.poll=function(){return this.pollTimeout=setTimeout((e=this,function(){return e.reconnectIfStale(),e.poll()}),this.getPollInterval());var e},e.prototype.getPollInterval=function(){var e,t,n,r;return n=(r=this.constructor.pollInterval).min,t=r.max,e=5*Math.log(this.reconnectAttempts+1),Math.round(1e3*i(e,n,t))},e.prototype.reconnectIfStale=function(){if(this.connectionIsStale())return u.log("ConnectionMonitor detected stale connection. reconnectAttempts = "+this.reconnectAttempts+", pollInterval = "+this.getPollInterval()+" ms, time disconnected = "+n(this.disconnectedAt)+" s, stale threshold = "+this.constructor.staleThreshold+" s"),this.reconnectAttempts++,this.disconnectedRecently()?u.log("ConnectionMonitor skipping reopening recent disconnect"):(u.log("ConnectionMonitor reopening"),this.connection.reopen())},e.prototype.connectionIsStale=function(){var e;return n(null!=(e=this.pingedAt)?e:this.startedAt)>this.constructor.staleThreshold},e.prototype.disconnectedRecently=function(){return this.disconnectedAt&&n(this.disconnectedAt)<this.constructor.staleThreshold},e.prototype.visibilityDidChange=function(){if("visible"===document.visibilityState)return setTimeout((e=this,function(){if(e.connectionIsStale()||!e.connection.isOpen())return u.log("ConnectionMonitor reopening stale connection on visibilitychange. visbilityState = "+document.visibilityState),e.connection.reopen()}),200);var e},t=function(){return(new Date).getTime()},n=function(e){return(t()-e)/1e3},i=function(e,t,n){return Math.max(t,Math.min(n,e))},e}()}).call(this),function(){var e,i,t,n,r,o=[].slice,a=function(e,t){return function(){return e.apply(t,arguments)}},s=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};n=u.INTERNAL,i=n.message_types,t=n.protocols,r=2<=t.length?o.call(t,0,e=t.length-1):(e=0,[]),t[e++],u.Connection=function(){function e(e){this.consumer=e,this.open=a(this.open,this),this.subscriptions=this.consumer.subscriptions,this.monitor=new u.ConnectionMonitor(this),this.disconnected=!0}return e.reopenDelay=500,e.prototype.send=function(e){return!!this.isOpen()&&(this.webSocket.send(JSON.stringify(e)),!0)},e.prototype.open=function(){return this.isActive()?(u.log("Attempted to open WebSocket, but existing socket is "+this.getState()),!1):(u.log("Opening WebSocket, current state is "+this.getState()+", subprotocols: "+t),null!=this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new u.WebSocket(this.consumer.url,t),this.installEventHandlers(),this.monitor.start(),!0)},e.prototype.close=function(e){var t;if((null!=e?e:{allowReconnect:!0}).allowReconnect||this.monitor.stop(),this.isActive())return null!=(t=this.webSocket)?t.close():void 0},e.prototype.reopen=function(){var e;if(u.log("Reopening WebSocket, current state is "+this.getState()),!this.isActive())return this.open();try{return this.close()}catch(t){return e=t,u.log("Failed to reopen WebSocket",e)}finally{u.log("Reopening WebSocket in "+this.constructor.reopenDelay+"ms"),setTimeout(this.open,this.constructor.reopenDelay)}},e.prototype.getProtocol=function(){var e;return null!=(e=this.webSocket)?e.protocol:void 0},e.prototype.isOpen=function(){return this.isState("open")},e.prototype.isActive=function(){return this.isState("open","connecting")},e.prototype.isProtocolSupported=function(){var e;return e=this.getProtocol(),0<=s.call(r,e)},e.prototype.isState=function(){var e,t;return t=1<=arguments.length?o.call(arguments,0):[],e=this.getState(),0<=s.call(t,e)},e.prototype.getState=function(){var e,t;for(t in WebSocket)if(WebSocket[t]===(null!=(e=this.webSocket)?e.readyState:void 0))return t.toLowerCase();return null},e.prototype.installEventHandlers=function(){var e,t;for(e in this.events)t=this.events[e].bind(this),this.webSocket["on"+e]=t},e.prototype.uninstallEventHandlers=function(){var e;for(e in this.events)this.webSocket["on"+e]=function(){}},e.prototype.events={message:function(e){var t,n,r;if(this.isProtocolSupported())switch(t=(r=JSON.parse(e.data)).identifier,n=r.message,r.type){case i.welcome:return this.monitor.recordConnect(),this.subscriptions.reload();case i.ping:return this.monitor.recordPing();case i.confirmation:return this.subscriptions.notify(t,"connected");case i.rejection:return this.subscriptions.reject(t);default:return this.subscriptions.notify(t,"received",n)}},open:function(){if(u.log("WebSocket onopen event, using '"+this.getProtocol()+"' subprotocol"),this.disconnected=!1,!this.isProtocolSupported())return u.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close:function(){if(u.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error:function(){return u.log("WebSocket onerror event")}},e}()}.call(this),function(){var l=[].slice;u.Subscriptions=function(){function e(e){this.consumer=e,this.subscriptions=[]}return e.prototype.create=function(e,t){var n,r,i;return r="object"==typeof(n=e)?n:{channel:n},i=new u.Subscription(this.consumer,r,t),this.add(i)},e.prototype.add=function(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.sendCommand(e,"subscribe"),e},e.prototype.remove=function(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e},e.prototype.reject=function(e){var t,n,r,i,o;for(i=[],t=0,n=(r=this.findAll(e)).length;t<n;t++)o=r[t],this.forget(o),this.notify(o,"rejected"),i.push(o);return i},e.prototype.forget=function(i){var o;return this.subscriptions=function(){var e,t,n,r;for(r=[],e=0,t=(n=this.subscriptions).length;e<t;e++)(o=n[e])!==i&&r.push(o);return r}.call(this),i},e.prototype.findAll=function(e){var t,n,r,i,o;for(i=[],t=0,n=(r=this.subscriptions).length;t<n;t++)(o=r[t]).identifier===e&&i.push(o);return i},e.prototype.reload=function(){var e,t,n,r,i;for(r=[],e=0,t=(n=this.subscriptions).length;e<t;e++)i=n[e],r.push(this.sendCommand(i,"subscribe"));return r},e.prototype.notifyAll=function(e){var t,n,r,i,o,a,s;for(n=e,t=2<=arguments.length?l.call(arguments,1):[],a=[],r=0,i=(o=this.subscriptions).length;r<i;r++)s=o[r],a.push(this.notify.apply(this,[s,n].concat(l.call(t))));return a},e.prototype.notify=function(e,t){var n,r,i,o,a,s,u;for(s=e,r=t,n=3<=arguments.length?l.call(arguments,2):[],a=[],i=0,o=(u="string"==typeof s?this.findAll(s):[s]).length;i<o;i++)s=u[i],a.push("function"==typeof s[r]?s[r].apply(s,n):void 0);return a},e.prototype.sendCommand=function(e,t){var n;return n=e.identifier,this.consumer.send({command:t,identifier:n})},e}()}.call(this),function(){u.Subscription=function(){function e(e,t,n){this.consumer=e,null==t&&(t={}),this.identifier=JSON.stringify(t),r(this,n)}var r;return e.prototype.perform=function(e,t){return null==t&&(t={}),t.action=e,this.send(t)},e.prototype.send=function(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})},e.prototype.unsubscribe=function(){return this.consumer.subscriptions.remove(this)},r=function(e,t){var n,r;if(null!=t)for(n in t)r=t[n],e[n]=r;return e},e}()}.call(this),function(){u.Consumer=function(){function e(e){this.url=e,this.subscriptions=new u.Subscriptions(this),this.connection=new u.Connection(this)}return e.prototype.send=function(e){return this.connection.send(e)},e.prototype.connect=function(){return this.connection.open()},e.prototype.disconnect=function(){return this.connection.close({allowReconnect:!1})},e.prototype.ensureActiveConnection=function(){if(!this.connection.isActive())return this.connection.open()},e}()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=u:"function"==typeof define&&define.amd&&define(u)}.call(this),function(){this.App||(this.App={}),App.cable=ActionCable.createConsumer()}.call(this),function(){jQuery(function(){return $(document).ready(function(){var t,e;if($(document).on("click",".show-comments-btn",function(e){return e.preventDefault(),$(e.target).siblings("textarea").removeClass("d-none").focus(),$(e.target).hide()}),$(".cfpRank form").on("ajax:before",function(e){return $(e.target).parent().find(".message").hide()}).on("ajax:success",function(e){return $(e.target.form).removeClass("changed"),$(e.target).parent().find(".saved").show().fadeOut(1e3)}).on("ajax:error",function(e){var t,n;return(t=e.detail)[0],t[1],n=t[2],$(e.target).parent().find(".error").text(n.responseText),$(e.target).parent().find(".error").show()}),t=function(){return $(".cfpRank form.changed").each(function(e,t){return $(t).removeClass("changed"),Rails.fire(t,"submit")})},window.saveChangedFormsTimeout=void 0,e=function(e){return $(e.target.form).addClass("changed"),clearInterval(window.saveChangedFormsTimeout),window.saveChangedFormsTimeout=setTimeout(t,5e3)},$("tr.cfpRank input").on("input change",e),$("tr.cfpRank textarea").on("input change",e),$("tr.cfpRank select").on("input change",e),0<$("tr.cfpRank input").length)return $(window).on("beforeunload",function(){t()})})})}.call(this),function(){$(function(){return $(".set_cfp_select").change(function(){var e,t,n;return n=this.checked,e=this.name.split("_"),t=e[e.length-1],$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/set_cfp_select/"+t+","+n,dataType:"json",success:function(){if(!0===n)return document.getElementById("cfp_alternate_"+t).checked=!1},error:function(){return alert("Error Setting CFP Select Value.")}})}),$(".set_cfp_confirmed").change(function(){var e,t,n;return n=this.checked,t=(e=this.name.split("_"))[e.length-1],$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/set_cfp_confirmed/"+t+","+n,dataType:"json",success:function(){},error:function(){return alert("Error Setting CFP Confirmed Value.")}})}),$(".set_cfp_alternate").change(function(){var e,t,n;return n=this.checked,e=this.name.split("_"),t=e[e.length-1],$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/set_cfp_alternate/"+t+","+n,dataType:"json",success:function(){if(!0===n)return document.getElementById("cfp_selected_"+t).checked=!1},error:function(){return alert("Error Setting CFP Alternate Value.")}})})})}.call(this),function(){$(function(){return $(".add_role_btn").click(function(){var e,t;return t=$("#new_role")[0].value,e=this.id.split("_")[2],$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/create_new_role/"+e+"/"+t,dataType:"json",success:function(){return location.reload(!0)},error:function(){return alert("Error adding new Role to Contact.")}})}),$(".set_role").change(function(){var e,t,n,r;return t=this.checked,n=(e=this.name.split("_"))[e.length-1],r=e[0],$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/set_role/"+n+"/"+r+"/"+t,dataType:"json",
success:function(){return alert("contact role post done and succeeded")},error:function(){return alert("Error Setting Contact Role Value.")}})})})}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){$(function(){var e,t,n,r,i,o;return o=void 0,$("#clear_winner").click(function(){return e()}),$("#submit_winner").click(function(){var e;return t(),e=$("#prize_select_box").val(),$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"select_raffle_winner/"+o.id+"/"+e,dataType:"json",success:function(){return alert("Winner Selected!  Congratulations "+o.fname),location.reload()},error:function(){return alert("ERROR SETTING WINNER...")}})}),$("#spin_the_wheel").click(function(){var e;return t(),e=$("#chk_include_all")[0].checked,$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"spin_the_wheel/"+e,dataType:"json",success:function(e){return o=e.winner,i(o,function(){return $("#winner_box").val(e.winner.fname+" "+e.winner.lname),n()})},error:function(){return alert("ERROR SELECTING WINNER..."),n()}})}),i=function(r,i){var o,a,s;return window.scrollTo(0,0),$("audio")[0].play(),console.log(r),$("#spinnerContainer div").css("font-size","1em"),$("#spinner span").show(),$("#spinnerContainer").slideDown(),$("#spinnerContainer").focus(),o=$("#spinner span:visible").length,s=10*$("#spinner span:visible").length,(a=function(){var e,t,n;for(n=$("#spinner span:visible");$("#spinnerContainer").height()>$("#spinnerContainer div").height();)$("#spinnerContainer div").css("font-size",parseInt($("#spinnerContainer div").css("font-size"))+1+"px");if(1<n.length&&0<s)return s--,t=n[Math.floor(Math.random()*n.length)],e=(o-n.length)/4,$(t).data("id").toString()!==r.id.toString()&&$(t).fadeOut(e),setTimeout(a,e);for($("audio")[0].pause(),$("audio")[0].currentTime=0;$("#spinnerContainer div span:visible").width()>$("#spinnerContainer").width();)$("#spinnerContainer div").css("font-size",parseInt($("#spinnerContainer div").css("font-size"))-1+"px");return setTimeout(function(){return $("#spinnerContainer").slideUp()},2e3),i()})()},t=function(){return $("#spin_the_wheel").prop("disabled",!0),$("#winner_box").prop("disabled",!0),$("#clear_winner").prop("disabled",!0),$("#chk_include_all").prop("disabled",!0),$("#prize_select_box").prop("disabled",!0),$("#submit_winner").prop("disabled",!0)},n=function(){return $("#spin_the_wheel").prop("disabled",!1),$("#winner_box").prop("disabled",!1),$("#clear_winner").prop("disabled",!1),$("#chk_include_all").prop("disabled",!1),$("#prize_select_box").prop("disabled",!1),$("#submit_winner").prop("disabled",!1)},r=function(){return e(),n(),$("#winner_box").prop("disabled",!0),$("#clear_winner").prop("disabled",!0),$("#submit_winner").prop("disabled",!0)},e=function(){return o=void 0,$("#winner_box").val(""),r()}})}.call(this),function(){}.call(this),function(){$(function(){return $(".set_scholarship_award").change(function(){var e,t;return this.checked,t=(e=this.name.split("_"))[e.length-1],e[0],$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/toggle_scholarship_award/"+t,dataType:"json",success:function(){return alert("scholarship status toggled")},error:function(){return alert("Error Toggling scholarship status.")}})})})}.call(this),function(){}.call(this),$(document).ready(function(){if($("#map").length){mapboxgl.accessToken="pk.eyJ1IjoibWF0dGhld25pZWxzZW4iLCJhIjoiY2pzemZjaHlvMDBtMzN5cGRmNXEybnhxOCJ9.pY4Tl0deIZsPGRK0vaDOPw";var n=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/satellite-v9",zoom:16,center:[-111.9021,40.5753],interactive:window.location.href.match(/page\/venue/)});n.dragRotate.disable(),n.touchZoomRotate.disableRotation(),window.location.href.match(/page\/venue/)||n.on("click",function(){window.location="/page/venue"}),n.on("load",function(){n.loadImage("/assets/parking-da5f9c7b1fd8aa50e78b3af791dfb019a8ac8a3575ca90d88d899c362b4c1e06.png",function(e,t){if(e)throw e;n.addImage("parking-marker",t),idx=0,[[-111.9013,40.5749],[-111.9015,40.5756],[-111.9025,40.576]].forEach(function(e){n.addLayer({id:"Parking-"+idx,type:"symbol",source:{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[e[0],e[1]]}}]}},layout:{"icon-image":"parking-marker"}}),idx++})}),n.loadImage("/assets/marker-f4e6df02f2143f74249de457eedcd1a974d1ef4711b6ed26eb8903682d12e9d9.png",function(e,t){if(e)throw e;n.addImage("entrance-marker",t),n.addLayer({id:"Entrance",type:"symbol",source:{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[-111.9021,40.5751]}}]}},layout:{"icon-image":"entrance-marker"}})})})}}),setTimeout("$('.alert').fadeOut('slow')",3e3);